(self.webpackChunksqlG=self.webpackChunksqlG||[]).push([[626],{37626:function(e,c,t){"use strict";t.r(c),t.d(c,{default:function(){return ie}});var l=t(67294),h=t(27424),d=t.n(h),s=t(7064),v=function(){s.kJ.registerNode("activity",{inherit:"rect",markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"img"},{tagName:"text",selector:"label"}],attrs:{body:{rx:6,ry:6,stroke:"#5F95FF",fill:"#EFF4FF",strokeWidth:1},img:{x:6,y:6,width:16,height:16,"xlink:href":"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pwLpRr7QPGwAAAAAAAAAAAAAARQnAQ"},label:{fontSize:12,fill:"#262626"}}},!0),s.kJ.registerNode("gateway",{inherit:"polygon",attrs:{body:{refPoints:"0,10 10,0 20,10 10,20",strokeWidth:2,stroke:"#5F95FF",fill:"#EFF4FF"},label:{text:"+",fontSize:40,fill:"#5F95FF"}}},!0),s.kJ.registerEdge("bpmn-edge",{inherit:"edge",attrs:{line:{stroke:"#A2B1C3",strokeWidth:2}}},!0)},y=l.createContext({}),g="box-tool",j=function(i){var r=i.getNodes();r.forEach(function(a){a.removeTools()})},T=function(i,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.addTools({name:g,args:{graph:r}})},M=t(42122),w=t.n(M),k=t(56690),m=t.n(k),R=t(89728),B=t.n(R),G=t(66115),z=t.n(G),I=t(61655),J=t.n(I),D=t(26389),H=t.n(D),Q=t(38416),W=t.n(Q),$=t(73935),L=t(40818),u=t(85893);function V(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("svg",{t:"1683297815393",className:"icon",viewBox:"0 0 1026 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3382",width:"20",height:"20",children:(0,u.jsx)("path",{d:"M507.904 18.432c-180.224 0-353.28 115.712-421.888 282.624-71.68 164.864-34.816 370.688 91.136 498.688C299.008 930.816 498.688 978.944 665.6 917.504c173.056-59.392 301.056-229.376 308.224-412.672 12.288-180.224-94.208-359.424-256-438.272-63.488-31.744-135.168-48.128-205.824-48.128h-4.096z m12.288 50.176c177.152 1.024 343.04 129.024 389.12 300.032 48.128 162.816-17.408 352.256-158.72 449.536C604.16 925.696 388.096 917.504 249.856 799.744 110.592 688.128 60.416 483.328 132.096 320.512c61.44-150.528 217.088-253.952 379.904-251.904h8.192z",fill:"#000000","p-id":"3383"})})})}var K=V;function U(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("svg",{t:"1683297852370",className:"icon",viewBox:"0 0 1026 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3519",width:"20",height:"20",children:(0,u.jsx)("path",{d:"M220.16 106.496c-87.04 0-157.696 70.656-157.696 157.696v434.176c0 87.04 70.656 157.696 157.696 157.696h583.68c87.04 0 157.696-70.656 157.696-157.696v-434.176c0-87.04-70.656-157.696-157.696-157.696H220.16z m0 49.152h583.68c60.416 0 108.544 48.128 108.544 108.544v434.176c0 60.416-48.128 108.544-108.544 108.544H220.16c-60.416 0-107.52-48.128-107.52-108.544v-434.176c0-60.416 47.104-108.544 107.52-108.544z",fill:"#000000","p-id":"3520"})})})}var X=U,Y=(0,L.QM)({"tool-box":{width:function(i){return i.width+20+"px"},height:function(i){return i.height+20+"px"},border:"1px solid",borderRadius:"5px"},list:{},"tool-render":{display:"flex"}}),Z=function(i){var r=i.graph,a=Y(i.rectangle),o=function(f){console.log("type: ",f)};return(0,u.jsxs)("div",{className:a["tool-render"],children:[(0,u.jsx)("div",{className:a["tool-box"]}),(0,u.jsxs)("div",{className:a.list,onClick:function(){j(r)},children:[(0,u.jsx)("span",{onClick:function(){return o("event")},children:(0,u.jsx)(K,{})}),(0,u.jsx)("span",{onClick:function(){return o("event")},children:(0,u.jsx)(X,{})})]})]})},F=function(p){J()(r,p);var i=H()(r);function r(){var a;m()(this,r);for(var o=arguments.length,n=new Array(o),f=0;f<o;f++)n[f]=arguments[f];return a=i.call.apply(i,[this].concat(n)),W()(z()(a),"knob",void 0),a}return B()(r,[{key:"render",value:function(){var o;this.knob||(this.knob=s.BM.createElement("div",!1),this.knob.style.position="absolute",this.container.appendChild(this.knob));var n=this.cellView.getBBox();return n.x-=10,n.y-=10,$.render((0,u.jsx)("div",{children:(0,u.jsx)(Z,{rectangle:n,graph:(o=this.options)===null||o===void 0?void 0:o.graph})}),this.knob),this.updatePosition(w()({},n)),this}},{key:"updatePosition",value:function(o){var n=this.knob.style;n.left="".concat(o.x,"px"),n.top="".concat(o.y,"px")}}]),r}(s.BM.ToolItem);F.config({tagName:"div",isSVGElement:!1});var q=t(33230),_=function(){s.kJ.registerNode("event",{width:40,height:40,inherit:"circle",attrs:{body:{strokeWidth:2,stroke:"#000",fill:"#FFF"}}},!0)},ee=function(){_()},te=function(){var i=(0,l.useState)(),r=d()(i,2),a=r[0],o=r[1],n=(0,l.useRef)();return(0,l.useEffect)(function(){s.kJ.registerNodeTool(g,F,!0),ee(),v();var f=new s.kJ({container:n.current,width:800,height:400,connecting:{router:"orth"},interacting:{}});return f.use(new q.H({enabled:!0})),o(f),function(){f.dispose()}},[]),oe({graph:a}),se({graph:a}),{graph:a,container:n}},re=t(96486),ne=t.n(re),A=function(i,r){(0,l.useEffect)(function(){i&&(r==null||r())},[i])},oe=function(i){var r=i.graph;A(r,function(){var a=[],o=!1;r.on("node:move",function(n){var f=n.e,E=n.x,N=n.y,x=n.node,ce=n.view;o=x.hasTool(g),j(r);var S=r.getConnectedEdges(x);a=S,r.removeConnectedEdges(x);var C=x.clone();C.id="oldMoving",r.addNode(C);var le=S.map(function(ue){var b=ue.clone(),O=b.getSource(),P=b.getTarget();if((O==null?void 0:O.cell)===x.id)b.setSource(C);else if((P==null?void 0:P.cell)===x.id)b.setTarget(C);else return;return b});r.addEdges(ne().compact(le))}),r.on("node:moved",function(n){var f=n.e,E=n.x,N=n.y,x=n.node,ce=n.view;o&&(T(x,r),o=!1),r.addEdges(a),a=[],r.removeConnectedEdges("oldMoving"),r.removeNode("oldMoving")})})},se=function(i){var r=i.graph;A(r,function(){r.on("cell:click",function(a){var o=a.cell;j(r),o.isNode()&&T(o,r)}),r.on("blank:click",function(a){var o=a.e;j(r)})})},ae=function(i){var r=i.data;console.log("data: ",r);var a=te(),o=a.graph,n=a.container;return(0,l.useEffect)(function(){var f,E;if(o){var N=[];(f=r.edges)===null||f===void 0||f.forEach(function(x){N.push(o.createEdge(x))}),(E=r.nodes)===null||E===void 0||E.forEach(function(x){N.push(o.createNode(x))}),o.resetCells(N)}},[o,r]),(0,u.jsx)(y.Provider,{value:{graph:o},children:(0,u.jsx)("div",{ref:n})})},ie=ae},66115:function(e){function c(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},56690:function(e){function c(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},89728:function(e,c,t){var l=t(64062);function h(s,v){for(var y=0;y<v.length;y++){var g=v[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(s,l(g.key),g)}}function d(s,v,y){return v&&h(s.prototype,v),y&&h(s,y),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports},26389:function(e,c,t){var l=t(73808),h=t(69617),d=t(94993);function s(v){var y=h();return function(){var j=l(v),T;if(y){var M=l(this).constructor;T=Reflect.construct(j,arguments,M)}else T=j.apply(this,arguments);return d(this,T)}}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},73808:function(e){function c(t){return e.exports=c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},e.exports.__esModule=!0,e.exports.default=e.exports,c(t)}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},61655:function(e,c,t){var l=t(6015);function h(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(s&&s.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),s&&l(d,s)}e.exports=h,e.exports.__esModule=!0,e.exports.default=e.exports},69617:function(e){function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},94993:function(e,c,t){var l=t(18698).default,h=t(66115);function d(s,v){if(v&&(l(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(s)}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function c(t,l){return e.exports=c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,s){return d.__proto__=s,d},e.exports.__esModule=!0,e.exports.default=e.exports,c(t,l)}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
