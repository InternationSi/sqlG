(self.webpackChunksqlG=self.webpackChunksqlG||[]).push([[701],{62238:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var B=function(R,L){var k=R.nodes,N=R.edges,E=[],b={};if(!k)throw new Error("invalid nodes data!");return k&&k.forEach(function(p,m){b[p.id]=m;var g=[];E.push(g)}),N&&N.forEach(function(p){var m=p.source,g=p.target,M=b[m],_=b[g];!M&&M!==0||!_&&_!==0||(E[M][_]=1,L||(E[_][M]=1))}),E},P=B;F.default=P},10369:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"GADDIAsync",{enumerable:!0,get:function(){return P.GADDIAsync}}),Object.defineProperty(F,"connectedComponentAsync",{enumerable:!0,get:function(){return P.connectedComponentAsync}}),F.default=void 0,Object.defineProperty(F,"detectAllCyclesAsync",{enumerable:!0,get:function(){return P.detectAllCyclesAsync}}),Object.defineProperty(F,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return P.detectAllDirectedCycleAsync}}),Object.defineProperty(F,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return P.detectAllUndirectedCycleAsync}}),Object.defineProperty(F,"detectCycleAsync",{enumerable:!0,get:function(){return P.detectCycleAsync}}),F.detectDirectedCycleAsync=void 0,Object.defineProperty(F,"dijkstraAsync",{enumerable:!0,get:function(){return P.dijkstraAsync}}),Object.defineProperty(F,"findAllPathAsync",{enumerable:!0,get:function(){return P.findAllPathAsync}}),Object.defineProperty(F,"findShortestPathAsync",{enumerable:!0,get:function(){return P.findShortestPathAsync}}),Object.defineProperty(F,"floydWarshallAsync",{enumerable:!0,get:function(){return P.floydWarshallAsync}}),Object.defineProperty(F,"getAdjMatrixAsync",{enumerable:!0,get:function(){return P.getAdjMatrixAsync}}),Object.defineProperty(F,"getDegreeAsync",{enumerable:!0,get:function(){return P.getDegreeAsync}}),Object.defineProperty(F,"getInDegreeAsync",{enumerable:!0,get:function(){return P.getInDegreeAsync}}),Object.defineProperty(F,"getNeighborsAsync",{enumerable:!0,get:function(){return P.getNeighborsAsync}}),Object.defineProperty(F,"getOutDegreeAsync",{enumerable:!0,get:function(){return P.getOutDegreeAsync}}),Object.defineProperty(F,"labelPropagationAsync",{enumerable:!0,get:function(){return P.labelPropagationAsync}}),Object.defineProperty(F,"louvainAsync",{enumerable:!0,get:function(){return P.louvainAsync}}),Object.defineProperty(F,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return P.minimumSpanningTreeAsync}}),Object.defineProperty(F,"pageRankAsync",{enumerable:!0,get:function(){return P.pageRankAsync}});var P=B(30485),W=P.detectCycleAsync;F.detectDirectedCycleAsync=W;var R={getAdjMatrixAsync:P.getAdjMatrixAsync,connectedComponentAsync:P.connectedComponentAsync,getDegreeAsync:P.getDegreeAsync,getInDegreeAsync:P.getInDegreeAsync,getOutDegreeAsync:P.getOutDegreeAsync,detectCycleAsync:P.detectCycleAsync,detectDirectedCycleAsync:W,detectAllCyclesAsync:P.detectAllCyclesAsync,detectAllDirectedCycleAsync:P.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:P.detectAllUndirectedCycleAsync,dijkstraAsync:P.dijkstraAsync,findAllPathAsync:P.findAllPathAsync,findShortestPathAsync:P.findShortestPathAsync,floydWarshallAsync:P.floydWarshallAsync,labelPropagationAsync:P.labelPropagationAsync,louvainAsync:P.louvainAsync,minimumSpanningTreeAsync:P.minimumSpanningTreeAsync,pageRankAsync:P.pageRankAsync,getNeighborsAsync:P.getNeighborsAsync,GADDIAsync:P.GADDIAsync};F.default=R},83764:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=R(B(93026)),W=B(70643);function R(E){return E&&E.__esModule?E:{default:E}}function L(E){E===void 0&&(E={});var b=E,p=function(){},m=function(){var g={};return function(M){var _=M.next,S=_;return g[S]?!1:(g[S]=!0,!0)}}();return b.allowTraversal=E.allowTraversal||m,b.enter=E.enter||p,b.leave=E.leave||p,b}var k=function(b,p,m,g){g===void 0&&(g=!0);var M=L(m),_=new P.default,S=b.edges,O=S===void 0?[]:S;_.enqueue(p);for(var y="",d=function(){var q=_.dequeue();M.enter({current:q,previous:y}),(0,W.getNeighbors)(q,O,g?"target":void 0).forEach(function(Y){M.allowTraversal({previous:y,current:q,next:Y})&&_.enqueue(Y)}),M.leave({current:q,previous:y}),y=q};!_.isEmpty();)d()},N=k;F.default=N},59527:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=L,F.detectStrongConnectComponents=F.detectConnectedComponents=void 0;var P=B(70643),W=function(N){for(var E=N.nodes,b=E===void 0?[]:E,p=N.edges,m=p===void 0?[]:p,g=[],M={},_=[],S=function V(q){_.push(q),M[q.id]=!0;for(var Y=(0,P.getNeighbors)(q.id,m),X=function(nt){var tt=Y[nt];if(!M[tt]){var at=b.filter(function(ct){return ct.id===tt});at.length>0&&V(at[0])}},H=0;H<Y.length;++H)X(H)},O=0;O<b.length;O++){var y=b[O];if(!M[y.id]){S(y);for(var d=[];_.length>0;)d.push(_.pop());g.push(d)}}return g};F.detectConnectedComponents=W;var R=function(N){for(var E=N.nodes,b=E===void 0?[]:E,p=N.edges,m=p===void 0?[]:p,g=[],M={},_={},S={},O=[],y=0,d=function X(H){_[H.id]=y,S[H.id]=y,y+=1,g.push(H),M[H.id]=!0;for(var J=(0,P.getNeighbors)(H.id,m,"target").filter(function(ht){return b.map(function(Lt){return Lt.id}).indexOf(ht)>-1}),nt=function(Lt){var St=J[Lt];if(!_[St]&&_[St]!==0){var Zt=b.filter(function(Ut){return Ut.id===St});Zt.length>0&&X(Zt[0]),S[H.id]=Math.min(S[H.id],S[St])}else M[St]&&(S[H.id]=Math.min(S[H.id],_[St]))},tt=0;tt<J.length;tt++)nt(tt);if(S[H.id]===_[H.id]){for(var at=[];g.length>0;){var ct=g.pop();if(M[ct.id]=!1,at.push(ct),ct===H)break}at.length>0&&O.push(at)}},V=0,q=b;V<q.length;V++){var Y=q[V];!_[Y.id]&&_[Y.id]!==0&&d(Y)}return O};F.detectStrongConnectComponents=R;function L(k,N){return N?R(k):W(k)}},92935:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.secondReg=F.dateReg=void 0;var B=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;F.secondReg=B;var P=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;F.dateReg=P},82556:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getOutDegree=F.getInDegree=F.default=void 0;var B=function(k){var N={},E=k.nodes,b=E===void 0?[]:E,p=k.edges,m=p===void 0?[]:p;return b.forEach(function(g){N[g.id]={degree:0,inDegree:0,outDegree:0}}),m.forEach(function(g){N[g.source].degree++,N[g.source].outDegree++,N[g.target].degree++,N[g.target].inDegree++}),N},P=B;F.default=P;var W=function(k,N){var E=B(k);return E[N]?B(k)[N].inDegree:0};F.getInDegree=W;var R=function(k,N){var E=B(k);return E[N]?B(k)[N].outDegree:0};F.getOutDegree=R},94282:function(Le,F,B){"use strict";function P(_){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},P(_)}Object.defineProperty(F,"__esModule",{value:!0}),F.detectAllUndirectedCycle=F.detectAllDirectedCycle=F.detectAllCycles=F.default=void 0;var W=E(B(45891)),R=N(B(59527)),L=B(70643);function k(_){if(typeof WeakMap!="function")return null;var S=new WeakMap,O=new WeakMap;return(k=function(d){return d?O:S})(_)}function N(_,S){if(!S&&_&&_.__esModule)return _;if(_===null||P(_)!=="object"&&typeof _!="function")return{default:_};var O=k(S);if(O&&O.has(_))return O.get(_);var y={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in _)if(V!=="default"&&Object.prototype.hasOwnProperty.call(_,V)){var q=d?Object.getOwnPropertyDescriptor(_,V):null;q&&(q.get||q.set)?Object.defineProperty(y,V,q):y[V]=_[V]}return y.default=_,O&&O.set(_,y),y}function E(_){return _&&_.__esModule?_:{default:_}}var b=function(S){var O=null,y=S.nodes,d=y===void 0?[]:y,V={},q={},Y={},X={};d.forEach(function(nt){q[nt.id]=nt});for(var H={enter:function(tt){var at=tt.current,ct=tt.previous;if(Y[at]){O={};for(var ht=at,Lt=ct;Lt!==at;)O[ht]=Lt,ht=Lt,Lt=V[Lt];O[ht]=Lt}else Y[at]=at,delete q[at],V[at]=ct},leave:function(tt){var at=tt.current;X[at]=at,delete Y[at]},allowTraversal:function(tt){var at=tt.next;return O?!1:!X[at]}};Object.keys(q).length;){var J=Object.keys(q)[0];(0,W.default)(S,J,H)}return O},p=function(S,O,y){var d,V;y===void 0&&(y=!0);for(var q=[],Y=(0,R.default)(S,!1),X=0,H=Y;X<H.length;X++){var J=H[X];if(J.length)for(var nt=J[0],tt=nt.id,at=[nt],ct=(d={},d[tt]=nt,d),ht=(V={},V[tt]=new Set,V);at.length>0;)for(var Lt=at.pop(),St=Lt.id,Zt=(0,L.getNeighbors)(St,S.edges),Ut=function(st){var Et,Bt=Zt[st],Pt=S.nodes.find(function(ue){return ue.id===Bt});if(Bt===St)q.push((Et={},Et[Bt]=Lt,Et));else if(!(Bt in ht))ct[Bt]=Lt,at.push(Pt),ht[Bt]=new Set([Lt]);else if(!ht[St].has(Pt)){for(var Ht=!0,le=[Pt,Lt],ye=ct[St];ht[Bt].size&&!ht[Bt].has(ye)&&(le.push(ye),ye!==ct[ye.id]);)ye=ct[ye.id];if(le.push(ye),O&&y?(Ht=!1,le.findIndex(function(ue){return O.indexOf(ue.id)>-1})>-1&&(Ht=!0)):O&&!y&&le.findIndex(function(ue){return O.indexOf(ue.id)>-1})>-1&&(Ht=!1),Ht){for(var Gt={},zt=1;zt<le.length;zt+=1)Gt[le[zt-1].id]=le[zt];le.length&&(Gt[le[le.length-1].id]=le[0]),q.push(Gt)}ht[Bt].add(Lt)}},Ot=0;Ot<Zt.length;Ot+=1)Ut(Ot)}return q};F.detectAllUndirectedCycle=p;var m=function(S,O,y){y===void 0&&(y=!0);for(var d=[],V=new Set,q=[],Y=[],X={},H={},J=function(ye){for(var Gt=[ye];Gt.length>0;){var zt=Gt.pop();V.has(zt)&&(V.delete(zt),q[zt.id].forEach(function(ue){Gt.push(ue)}),q[zt.id].clear())}},nt=function le(ye,Gt,zt){var ue=!1;if(O&&y===!1&&O.indexOf(ye.id)>-1)return ue;d.push(ye),V.add(ye);for(var we=zt[ye.id],de=0;de<we.length;de+=1){var Mt=X[we[de]];if(Mt===Gt){for(var ee={},ce=1;ce<d.length;ce+=1)ee[d[ce-1].id]=d[ce];d.length&&(ee[d[d.length-1].id]=d[0]),Y.push(ee),ue=!0}else V.has(Mt)||le(Mt,Gt,zt)&&(ue=!0)}if(ue)J(ye);else for(var de=0;de<we.length;de+=1){var Mt=X[we[de]];q[Mt.id].has(ye)||q[Mt.id].add(ye)}return d.pop(),ue},tt=S.nodes,at=tt===void 0?[]:tt,ct=0;ct<at.length;ct+=1){var ht=at[ct],Lt=ht.id;H[Lt]=ct,X[ct]=ht}if(O&&y)for(var St=function(ye){var Gt=O[ye];H[at[ye].id]=H[Gt],H[Gt]=0,X[0]=at.find(function(zt){return zt.id===Gt}),X[H[at[ye].id]]=at[ye]},ct=0;ct<O.length;ct++)St(ct);for(var Zt=function(ye){for(var Gt,zt,ue=1/0,we=0;we<ye.length;we+=1)for(var de=ye[we],Mt=0;Mt<de.length;Mt++){var ee=H[de[Mt].id];ee<ue&&(ue=ee,zt=we)}for(var ce=ye[zt],At=[],we=0;we<ce.length;we+=1){var Wt=ce[we];At[Wt.id]=[];for(var fe=0,Ge=(0,L.getNeighbors)(Wt.id,S.edges,"target").filter(function(Ft){return ce.map(function(hr){return hr.id}).indexOf(Ft)>-1});fe<Ge.length;fe++){var Be=Ge[fe];Be===Wt.id&&!(y===!1&&O.indexOf(Wt.id)>-1)?Y.push((Gt={},Gt[Wt.id]=Wt,Gt)):At[Wt.id].push(H[Be])}}return{component:ce,adjList:At,minIdx:ue}},Ut=0;Ut<at.length;){var Ot=at.filter(function(le){return H[le.id]>=Ut}),Z=(0,R.detectStrongConnectComponents)({nodes:Ot,edges:S.edges}).filter(function(le){return le.length>1});if(Z.length===0)break;var st=Zt(Z),Et=st.minIdx,Bt=st.adjList,Pt=st.component;if(Pt.length>1){Pt.forEach(function(le){q[le.id]=new Set});var Ht=X[Et];if(O&&y&&O.indexOf(Ht.id)===-1)return Y;nt(Ht,Ht,Bt),Ut=Et+1}else break}return Y};F.detectAllDirectedCycle=m;var g=function(S,O,y,d){return d===void 0&&(d=!0),O?m(S,y,d):p(S,y,d)};F.detectAllCycles=g;var M=b;F.default=M},45891:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=L;var P=B(70643);function W(k){k===void 0&&(k={});var N=k,E=function(){},b=function(){var p={};return function(m){var g=m.next;return p[g]?!1:(p[g]=!0,!0)}}();return N.allowTraversal=k.allowTraversal||b,N.enter=k.enter||E,N.leave=k.leave||E,N}function R(k,N,E,b){b.enter({current:N,previous:E});var p=k.edges,m=p===void 0?[]:p;(0,P.getNeighbors)(N,m,"target").forEach(function(g){b.allowTraversal({previous:E,current:N,next:g})&&R(k,g,N,b)}),b.leave({current:N,previous:E})}function L(k,N,E){R(k,N,"",W(E))}},78089:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=B(70655),W=B(13810),R=B(70643),L=function(p,m,g){for(var M=1/0,_,S=0;S<m.length;S++){var O=m[S].id;!g[O]&&p[O]<=M&&(M=p[O],_=m[S])}return _},k=function(p,m,g,M){var _=p.nodes,S=_===void 0?[]:_,O=p.edges,y=O===void 0?[]:O,d=[],V={},q={},Y={};S.forEach(function(ct,ht){var Lt=ct.id;d.push(Lt),q[Lt]=1/0,Lt===m&&(q[Lt]=0)});for(var X=S.length,H=function(ht){var Lt=L(q,S,V),St=Lt.id;if(V[St]=!0,q[St]===1/0)return"continue";var Zt=[];g?Zt=(0,R.getOutEdgesNodeId)(St,y):Zt=(0,R.getEdgesByNodeId)(St,y),Zt.forEach(function(Ut){var Ot=Ut.target,Z=Ut.source,st=Ot===St?Z:Ot,Et=M&&Ut[M]?Ut[M]:1;q[st]>q[Lt.id]+Et?(q[st]=q[Lt.id]+Et,Y[st]=[Lt.id]):q[st]===q[Lt.id]+Et&&Y[st].push(Lt.id)})},J=0;J<X;J++)H(J);Y[m]=[m];var nt={};for(var tt in q)q[tt]!==1/0&&E(m,tt,Y,nt);var at={};for(var tt in nt)at[tt]=nt[tt][0];return{length:q,path:at,allPath:nt}},N=k;F.default=N;function E(b,p,m,g){if(b===p)return[b];if(g[p])return g[p];for(var M=[],_=0,S=m[p];_<S.length;_++){var O=S[_],y=E(b,O,m,g);if(!y)return;for(var d=0,V=y;d<V.length;d++){var q=V[d];(0,W.isArray)(q)?M.push((0,P.__spreadArray)((0,P.__spreadArray)([],q,!0),[p],!1)):M.push([q,p])}}return g[p]=M,g[p]}},41727:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.findShortestPath=F.findAllPath=void 0;var P=R(B(78089)),W=B(70643);function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E,b,p,m,g){var M=(0,P.default)(E,b,m,g),_=M.length,S=M.path,O=M.allPath;return{length:_[p],path:S[p],allPath:O[p]}};F.findShortestPath=L;var k=function(E,b,p,m){var g;if(b===p)return[[b]];var M=E.edges,_=M===void 0?[]:M,S=[b],O=(g={},g[b]=!0,g),y=[],d=[],V=m?(0,W.getNeighbors)(b,_,"target"):(0,W.getNeighbors)(b,_);for(y.push(V);S.length>0&&y.length>0;){var q=y[y.length-1];if(q.length){var Y=q.shift();Y&&(S.push(Y),O[Y]=!0,V=m?(0,W.getNeighbors)(Y,_,"target"):(0,W.getNeighbors)(Y,_),y.push(V.filter(function(J){return!O[J]})))}else{var X=S.pop();O[X]=!1,y.pop();continue}if(S[S.length-1]===p){var H=S.map(function(nt){return nt});d.push(H);var X=S.pop();O[X]=!1,y.pop()}}return d};F.findAllPath=k},75033:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=W(B(62238));function W(k){return k&&k.__esModule?k:{default:k}}var R=function(N,E){for(var b=(0,P.default)(N,E),p=[],m=b.length,g=0;g<m;g+=1){p[g]=[];for(var M=0;M<m;M+=1)g===M?p[g][M]=0:b[g][M]===0||!b[g][M]?p[g][M]=1/0:p[g][M]=b[g][M]}for(var _=0;_<m;_+=1)for(var g=0;g<m;g+=1)for(var M=0;M<m;M+=1)p[g][M]>p[g][_]+p[_][M]&&(p[g][M]=p[g][_]+p[_][M]);return p},L=R;F.default=L},21146:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=B(13810),W=B(68575),R=function(){function M(_,S,O,y,d){this.fromNode=_,this.toNode=S,this.nodeEdgeNodeLabel={nodeLabel1:O||W.VACANT_NODE_LABEL,edgeLabel:y||W.VACANT_EDGE_LABEL,nodeLabel2:d||W.VACANT_NODE_LABEL}}return M.prototype.equalTo=function(_){return this.fromNode===_.formNode&&this.toNode===_.toNode&&this.nodeEdgeNodeLabel===_.nodeEdgeNodeLabel},M.prototype.notEqualTo=function(_){return!this.equalTo(_)},M}(),L=function(){function M(){this.rmpath=[],this.dfsEdgeList=[]}return M.prototype.equalTo=function(_){var S=this.dfsEdgeList.length,O=_.length;if(S!==O)return!1;for(var y=0;y<S;y++)if(this.dfsEdgeList[y]!==_[y])return!1;return!0},M.prototype.notEqualTo=function(_){return!this.equalTo(_)},M.prototype.pushBack=function(_,S,O,y,d){return this.dfsEdgeList.push(new R(_,S,O,y,d)),this.dfsEdgeList},M.prototype.toGraph=function(_,S){_===void 0&&(_=W.VACANT_GRAPH_ID),S===void 0&&(S=!1);var O=new W.Graph(_,!0,S);return this.dfsEdgeList.forEach(function(y){var d=y.fromNode,V=y.toNode,q=y.nodeEdgeNodeLabel,Y=q.nodeLabel1,X=q.edgeLabel,H=q.nodeLabel2;Y!==W.VACANT_NODE_LABEL&&O.addNode(d,Y),H!==W.VACANT_NODE_LABEL&&O.addNode(V,H),Y!==W.VACANT_NODE_LABEL&&H!==Y&&O.addEdge(void 0,d,V,X)}),O},M.prototype.buildRmpath=function(){this.rmpath=[];for(var _=void 0,S=this.dfsEdgeList.length,O=S-1;O>=0;O--){var y=this.dfsEdgeList[O],d=y.fromNode,V=y.toNode;d<V&&(_===void 0||V===_)&&(this.rmpath.push(O),_=d)}return this.rmpath},M.prototype.getNodeNum=function(){var _={};return this.dfsEdgeList.forEach(function(S){_[S.fromNode]||(_[S.fromNode]=!0),_[S.toNode]||(_[S.toNode]=!0)}),Object.keys(_).length},M}(),k=function(){function M(_){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!_){for(;_;){var S=_.edge;this.edges.push(S),this.nodesUsed[S.from]=1,this.nodesUsed[S.to]=1,this.edgesUsed[S.id]=1,_=_.preNode}this.edges=this.edges.reverse()}}return M.prototype.hasNode=function(_){return this.nodesUsed[_.id]===1},M.prototype.hasEdge=function(_){return this.edgesUsed[_.id]===1},M}(),N=function(){function M(_){var S=_.graphs,O=_.minSupport,y=O===void 0?2:O,d=_.minNodeNum,V=d===void 0?1:d,q=_.maxNodeNum,Y=q===void 0?4:q,X=_.top,H=X===void 0?10:X,J=_.directed,nt=J===void 0?!1:J,tt=_.verbose,at=tt===void 0?!1:tt;this.graphs=S,this.dfsCode=new L,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=y,this.top=H,this.directed=nt,this.counter=0,this.maxNodeNum=Y,this.minNodeNum=V,this.verbose=at,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return M.prototype.findForwardRootEdges=function(_,S){var O=this,y=[],d=_.nodeMap;return S.edges.forEach(function(V){(O.directed||S.label<=d[V.to].label)&&y.push(V)}),y},M.prototype.findBackwardEdge=function(_,S,O,y){if(!this.directed&&S===O)return null;for(var d=_.nodeMap,V=d[O.to],q=V.edges,Y=q.length,X=0;X<Y;X++){var H=q[X];if(!(y.hasEdge(H)||H.to!==S.from)){if(this.directed){if(d[S.from].label<d[O.to].label||d[S.from].label===d[O.to].label&&S.label<=H.label)return H}else if(S.label<H.label||S.label===H.label&&d[S.to].label<=d[O.to].label)return H}}return null},M.prototype.findForwardPureEdges=function(_,S,O,y){for(var d=[],V=S.to,q=_.nodeMap[V].edges,Y=q.length,X=0;X<Y;X++){var H=q[X],J=_.nodeMap[H.to];O<=J.label&&!y.hasNode(J)&&d.push(H)}return d},M.prototype.findForwardRmpathEdges=function(_,S,O,y){for(var d=[],V=_.nodeMap,q=V[S.to].label,Y=V[S.from],X=Y.edges,H=X.length,J=0;J<H;J++){var nt=X[J],tt=V[nt.to].label;S.to===nt.to||O>tt||y.hasNode(V[nt.to])||(S.label<nt.label||S.label===nt.label&&q<=tt)&&d.push(nt)}return d},M.prototype.getSupport=function(_){var S={};return _.forEach(function(O){S[O.graphId]||(S[O.graphId]=!0)}),Object.keys(S).length},M.prototype.findMinLabel=function(_){var S=void 0;return Object.keys(_).forEach(function(O){var y=_[O],d=y.nodeLabel1,V=y.edgeLabel,q=y.nodeLabel2;if(!S){S={nodeLabel1:d,edgeLabel:V,nodeLabel2:q};return}(d<S.nodeLabel1||d===S.nodeLabel1&&V<S.edgeLabel||d===S.nodeLabel1&&V===S.edgeLabel&&q<S.nodeLabel2)&&(S={nodeLabel1:d,edgeLabel:V,nodeLabel2:q})}),S},M.prototype.isMin=function(){var _=this,S=this.dfsCode;if(this.verbose&&console.log("isMin checking",S),S.dfsEdgeList.length===1)return!0;var O=this.directed,y=S.toGraph(W.VACANT_GRAPH_ID,O),d=y.nodeMap,V=new L,q={};y.nodes.forEach(function(J){var nt=_.findForwardRootEdges(y,J);nt.forEach(function(tt){var at=d[tt.to],ct="".concat(J.label,"-").concat(tt.label,"-").concat(at.label);q[ct]||(q[ct]={projected:[],nodeLabel1:J.label,edgeLabel:tt.label,nodeLabel2:at.label});var ht={graphId:y.id,edge:tt,preNode:null};q[ct].projected.push(ht)})});var Y=this.findMinLabel(q);if(Y){V.dfsEdgeList.push(new R(0,1,Y.nodeLabel1,Y.edgeLabel,Y.nodeLabel2));var X=function J(nt){for(var tt=V.buildRmpath(),at=V.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ct=V.dfsEdgeList[tt[0]].toNode,ht={},Lt=!1,St=0,Zt=O?-1:0,Ut=function(we){if(Lt)return"break";nt.forEach(function(de){var Mt=new k(de),ee=_.findBackwardEdge(y,Mt.edges[tt[we]],Mt.edges[tt[0]],Mt);ee&&(ht[ee.label]||(ht[ee.label]={projected:[],edgeLabel:ee.label}),ht[ee.label].projected.push({graphId:y.id,edge:ht,preNode:de}),St=V.dfsEdgeList[tt[we]].fromNode,Lt=!0)})},Ot=tt.length-1;Ot>Zt;Ot--){var Z=Ut(Ot);if(Z==="break")break}if(Lt){var st=_.findMinLabel(ht);V.dfsEdgeList.push(new R(ct,St,W.VACANT_NODE_LABEL,st.edgeLabel,W.VACANT_NODE_LABEL));var Et=V.dfsEdgeList.length-1;return _.dfsCode.dfsEdgeList[Et]!==V.dfsEdgeList[Et]?!1:J(ht[st.edgeLabel].projected)}var Bt={};Lt=!1;var Pt=0;nt.forEach(function(ue){var we=new k(ue),de=_.findForwardPureEdges(y,we.edges[tt[0]],at,we);de.length>0&&(Lt=!0,Pt=ct,de.forEach(function(Mt){var ee="".concat(Mt.label,"-").concat(d[Mt.to].label);Bt[ee]||(Bt[ee]={projected:[],edgeLabel:Mt.label,nodeLabel2:d[Mt.to].label}),Bt[ee].projected.push({graphId:y.id,edge:Mt,preNode:ue})}))});for(var Ht=tt.length,le=function(we){if(Lt)return"break";var de=tt[we];nt.forEach(function(Mt){var ee=new k(Mt),ce=_.findForwardRmpathEdges(y,ee.edges[de],at,ee);ce.length>0&&(Lt=!0,Pt=V.dfsEdgeList[de].fromNode,ce.forEach(function(At){var Wt="".concat(At.label,"-").concat(d[At.to].label);Bt[Wt]||(Bt[Wt]={projected:[],edgeLabel:At.label,nodeLabel2:d[At.to].label}),Bt[Wt].projected.push({graphId:y.id,edge:At,preNode:Mt})}))})},Ot=0;Ot<Ht;Ot++){var ye=le(Ot);if(ye==="break")break}if(!Lt)return!0;var Gt=_.findMinLabel(Bt);V.dfsEdgeList.push(new R(Pt,ct+1,W.VACANT_NODE_LABEL,Gt.edgeLabel,Gt.nodeLabel2));var zt=V.dfsEdgeList.length-1;return S.dfsEdgeList[zt]!==V.dfsEdgeList[zt]?!1:J(Bt["".concat(Gt.edgeLabel,"-").concat(Gt.nodeLabel2)].projected)},H="".concat(Y.nodeLabel1,"-").concat(Y.edgeLabel,"-").concat(Y.nodeLabel2);return X(q[H].projected)}},M.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var _=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,P.clone)(_))}},M.prototype.subGraphMining=function(_){var S=this,O=this.getSupport(_);if(!(O<this.minSupport)&&this.isMin()){this.report();var y=this.dfsCode.getNodeNum(),d=this.dfsCode.buildRmpath(),V=this.dfsCode.dfsEdgeList[d[0]].toNode,q=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,Y={},X={};_.forEach(function(H){for(var J=S.graphs[H.graphId],nt=J.nodeMap,tt=new k(H),at=d.length-1;at>=0;at--){var ct=S.findBackwardEdge(J,tt.edges[d[at]],tt.edges[d[0]],tt);if(ct){var ht="".concat(S.dfsCode.dfsEdgeList[d[at]].fromNode,"-").concat(ct.label);X[ht]||(X[ht]={projected:[],toNodeId:S.dfsCode.dfsEdgeList[d[at]].fromNode,edgeLabel:ct.label}),X[ht].projected.push({graphId:H.graphId,edge:ct,preNode:H})}}if(!(y>=S.maxNodeNum)){var Lt=S.findForwardPureEdges(J,tt.edges[d[0]],q,tt);Lt.forEach(function(Zt){var Ut="".concat(V,"-").concat(Zt.label,"-").concat(nt[Zt.to].label);Y[Ut]||(Y[Ut]={projected:[],fromNodeId:V,edgeLabel:Zt.label,nodeLabel2:nt[Zt.to].label}),Y[Ut].projected.push({graphId:H.graphId,edge:Zt,preNode:H})});for(var St=function(Ut){var Ot=S.findForwardRmpathEdges(J,tt.edges[d[Ut]],q,tt);Ot.forEach(function(Z){var st="".concat(S.dfsCode.dfsEdgeList[d[Ut]].fromNode,"-").concat(Z.label,"-").concat(nt[Z.to].label);Y[st]||(Y[st]={projected:[],fromNodeId:S.dfsCode.dfsEdgeList[d[Ut]].fromNode,edgeLabel:Z.label,nodeLabel2:nt[Z.to].label}),Y[st].projected.push({graphId:H.graphId,edge:Z,preNode:H})})},at=0;at<d.length;at++)St(at)}}),Object.keys(X).forEach(function(H){var J=X[H],nt=J.toNodeId,tt=J.edgeLabel;S.dfsCode.dfsEdgeList.push(new R(V,nt,"-1",tt,"-1")),S.subGraphMining(X[H].projected),S.dfsCode.dfsEdgeList.pop()}),Object.keys(Y).forEach(function(H){var J=Y[H],nt=J.fromNodeId,tt=J.edgeLabel,at=J.nodeLabel2;S.dfsCode.dfsEdgeList.push(new R(nt,V+1,W.VACANT_NODE_LABEL,tt,at)),S.subGraphMining(Y[H].projected),S.dfsCode.dfsEdgeList.pop()})}},M.prototype.generate1EdgeFrequentSubGraphs=function(){var _=this.graphs,S=this.directed,O=this.minSupport,y=this.frequentSize1Subgraphs,d={},V={},q={},Y={};return Object.keys(_).forEach(function(X){var H=_[X],J=H.nodeMap;H.nodes.forEach(function(nt,tt){var at=nt.label,ct="".concat(X,"-").concat(at);if(!q[ct]){var ht=d[at]||0;ht++,d[at]=ht}q[ct]={graphKey:X,label:at},nt.edges.forEach(function(Lt){var St=at,Zt=J[Lt.to].label;if(!S&&St>Zt){var Ut=Zt;Zt=St,St=Ut}var Ot=Lt.label,Z="".concat(X,"-").concat(St,"-").concat(Ot,"-").concat(Zt),st="".concat(St,"-").concat(Ot,"-").concat(Zt);if(!V[st]){var Et=V[st]||0;Et++,V[st]=Et}Y[Z]={graphId:X,nodeLabel1:St,edgeLabel:Ot,nodeLabel2:Zt}})})}),Object.keys(d).forEach(function(X){var H=d[X];if(!(H<O)){var J={nodes:[],edges:[]};J.nodes.push({id:"0",label:X}),y.push(J)}}),y},M.prototype.run=function(){var _=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var S=this.graphs,O=this.directed,y={};Object.keys(S).forEach(function(d){var V=S[d],q=V.nodeMap;V.nodes.forEach(function(Y){var X=_.findForwardRootEdges(V,Y);X.forEach(function(H){var J=q[H.to],nt="".concat(Y.label,"-").concat(H.label,"-").concat(J.label);y[nt]||(y[nt]={projected:[],nodeLabel1:Y.label,edgeLabel:H.label,nodeLabel2:J.label});var tt={graphId:d,edge:H,preNode:null};y[nt].projected.push(tt)})})}),Object.keys(y).forEach(function(d){var V=y[d],q=V.projected,Y=V.nodeLabel1,X=V.edgeLabel,H=V.nodeLabel2;_.dfsCode.dfsEdgeList.push(new R(0,1,Y,X,H)),_.subGraphMining(q),_.dfsCode.dfsEdgeList.pop()})}},M}(),E=function(_,S,O,y){var d={};return Object.keys(_).forEach(function(V,q){var Y=_[V],X=new W.Graph(q,!0,S),H={};Y.nodes.forEach(function(J,nt){X.addNode(nt,J[O]),H[J.id]=nt}),Y.edges.forEach(function(J,nt){var tt=H[J.source],at=H[J.target];X.addEdge(-1,tt,at,J[y])}),X&&X.getNodeNum()&&(d[X.id]=X)}),d},b=function(_,S,O){var y=[];return _.forEach(function(d){var V={nodes:[],edges:[]};d.nodes.forEach(function(q){var Y;V.nodes.push((Y={id:"".concat(q.id)},Y[S]=q.label,Y))}),d.edges.forEach(function(q){var Y;V.edges.push((Y={source:"".concat(q.from),target:"".concat(q.to)},Y[O]=q.label,Y))}),y.push(V)}),y},p="cluster",m=function(_){var S=_.graphs,O=_.directed,y=O===void 0?!1:O,d=_.nodeLabelProp,V=d===void 0?p:d,q=_.edgeLabelProp,Y=q===void 0?p:q,X=E(S,y,V,Y),H=_.minSupport,J=_.maxNodeNum,nt=_.minNodeNum,tt=_.verbose,at=_.top,ct={graphs:X,minSupport:H,maxNodeNum:J,minNodeNum:nt,top:at,verbose:tt,directed:y},ht=new N(ct);ht.run();var Lt=b(ht.frequentSubgraphs,V,Y);return Lt},g=m;F.default=g},68575:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.VACANT_NODE_LABEL=F.VACANT_NODE_ID=F.VACANT_GRAPH_ID=F.VACANT_EDGE_LABEL=F.VACANT_EDGE_ID=F.Node=F.Graph=F.Edge=F.AUTO_EDGE_ID=void 0;var B=-1;F.VACANT_EDGE_ID=B;var P=-1;F.VACANT_NODE_ID=P;var W="-1";F.VACANT_EDGE_LABEL=W;var R="-1";F.VACANT_NODE_LABEL=R;var L=-1;F.VACANT_GRAPH_ID=L;var k="-1";F.AUTO_EDGE_ID=k;var N=function(){function p(m,g,M,_){m===void 0&&(m=B),g===void 0&&(g=P),M===void 0&&(M=P),_===void 0&&(_=W),this.id=m,this.from=g,this.to=M,this.label=_}return p}();F.Edge=N;var E=function(){function p(m,g){m===void 0&&(m=P),g===void 0&&(g=R),this.id=m,this.label=g,this.edges=[],this.edgeMap={}}return p.prototype.addEdge=function(m){this.edges.push(m),this.edgeMap[m.id]=m},p}();F.Node=E;var b=function(){function p(m,g,M){m===void 0&&(m=P),g===void 0&&(g=!0),M===void 0&&(M=!1),this.id=m,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=M}return p.prototype.getNodeNum=function(){return this.nodes.length},p.prototype.addNode=function(m,g){if(!this.nodeMap[m]){var M=new E(m,g);this.nodes.push(M),this.nodeMap[m]=M,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(m)}},p.prototype.addEdge=function(m,g,M,_){if((this.edgeIdAutoIncrease||m===void 0)&&(m=this.counter++),!(this.nodeMap[g]&&this.nodeMap[M]&&this.nodeMap[M].edgeMap[m])){var S=new N(m,g,M,_);if(this.edges.push(S),this.edgeMap[m]=S,this.nodeMap[g].addEdge(S),this.edgeLabelMap[_]||(this.edgeLabelMap[_]=[]),this.edgeLabelMap[_].push(S),!this.directed){var O=new N(m,M,g,_);this.nodeMap[M].addEdge(O),this.edgeLabelMap[_].push(O)}}},p}();F.Graph=b},82812:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=B(70655),W=N(B(75033)),R=N(B(21146)),L=N(B(78089)),k=B(70643);function N(Y){return Y&&Y.__esModule?Y:{default:Y}}var E=function(X,H,J,nt){J===void 0&&(J="cluster"),nt===void 0&&(nt=2);var tt=[],at=X.nodes;return H.forEach(function(ct,ht){tt.push(b(at,ct,ht,J,nt))}),tt},b=function(X,H,J,nt,tt){var at=[J],ct=[],ht={};return H.forEach(function(Lt,St){if(Lt<=tt&&J!==St){at.push(St),ct.push(X[St]);var Zt=X[St][nt];ht[Zt]?(ht[Zt].count++,ht[Zt].dists.push(Lt)):ht[Zt]={count:1,dists:[Lt]}}}),Object.keys(ht).forEach(function(Lt){ht[Lt].dists=ht[Lt].dists.sort(function(St,Zt){return St-Zt})}),{nodeIdx:J,nodeId:X[J].id,nodeIdxs:at,neighbors:ct,neighborNum:at.length-1,nodeLabelCountMap:ht}},p=function(X,H,J,nt,tt){var at=Math.ceil(J/H),ct={},ht=0;return nt.forEach(function(Lt,St){for(var Zt=0,Ut=0,Ot=Lt.nodeIdxs,Z=Lt.neighborNum-1;Zt<at;){for(var st=Ot[1+Math.floor(Math.random()*Z)],Et=0;(ct["".concat(St,"-").concat(st)]||ct["".concat(st,"-").concat(St)])&&(st=Math.floor(Math.random()*H),Et++,!(Et>2*H)););if(Et<2*H&&(ct["".concat(St,"-").concat(st)]={start:St,end:st,distance:tt[St][st]},Zt++,ht++,ht>=J))return ct;if(Ut++,Ut>2*H)break}if(Zt<at){var Bt=at-Zt;at=(at+Bt)/(H-St-1)}}),ct},m=function(X,H,J,nt){var tt=J.nodes;return nt||(nt={}),Object.keys(X).forEach(function(at){var ct,ht;if(!(nt&&nt[at])){nt[at]={nodes:[],edges:[]};var Lt=X[at],St=(ct=H[Lt.start])===null||ct===void 0?void 0:ct.nodeIdxs,Zt=(ht=H[Lt.end])===null||ht===void 0?void 0:ht.nodeIdxs;if(!(!St||!Zt)){var Ut=new Set(Zt),Ot=St.filter(function(Pt){return Ut.has(Pt)});if(!(!Ot||!Ot.length)){for(var Z={},st=Ot.length,Et=0;Et<st;Et++){var Bt=tt[Ot[Et]];nt[at].nodes.push(Bt),Z[Bt.id]=!0}J.edges.forEach(function(Pt){Z[Pt.source]&&Z[Pt.target]&&nt[at].edges.push(Pt)})}}}}),nt},g=function(X,H,J,nt){var tt,at,ct={};X.nodes.forEach(function(Lt){ct[Lt.id]=Lt});var ht=0;return!(!((tt=H==null?void 0:H.edges)===null||tt===void 0)&&tt.length)||((at=H==null?void 0:H.nodes)===null||at===void 0?void 0:at.length)<2?0:(X.edges.forEach(function(Lt){var St=ct[Lt.source][J],Zt=ct[Lt.target][J],Ut=H==null?void 0:H.nodes[0][J],Ot=H==null?void 0:H.nodes[1][J],Z=H==null?void 0:H.edges[0][nt];Lt[nt]===Z&&(St===Ut&&Zt===Ot||St===Ot&&Zt===Ut)&&ht++}),ht)},M=function(X,H,J){for(var nt=1/0,tt=0,at=function(Lt){var St=X[Lt],Zt=Object.keys(St).sort(function(Pt,Ht){return St[Pt]-St[Ht]}),Ut=10,Ot=[];Zt.forEach(function(Pt,Ht){Ot[Ht%Ut]||(Ot[Ht%Ut]={graphs:[],totalCount:0,aveCount:0}),Ot[Ht%Ut].graphs.push(Pt),Ot[Ht%Ut].totalCount+=St[Pt]});var Z=0,st=[];Ot.forEach(function(Pt){var Ht=Pt.totalCount/Pt.graphs.length;Pt.aveCount=Ht,st.push(Ht);var le=0,ye=Pt.length;Pt.graphs.forEach(function(Gt,zt){var ue=St[Gt];Pt.graphs.forEach(function(we,de){zt!==de&&(le+=Math.abs(ue-St[we]))})}),le/=ye*(ye-1)/2,Z+=le}),Z/=Ot.length;var Et=0;st.forEach(function(Pt,Ht){st.forEach(function(le,ye){Ht!==ye&&(Et+=Math.abs(Pt-le))}),Et/=st.length*(st.length-1)/2});var Bt=Et-Z;nt<Bt&&(nt=Bt,tt=Lt)},ct=0;ct<H;ct++)at(ct);return{structure:J[tt],structureCountMap:X[tt]}},_=function(X,H){var J={},nt={};return X.forEach(function(tt,at){J[tt.id]={idx:at,node:tt,degree:0,inDegree:0,outDegree:0};var ct=tt[H];nt[ct]||(nt[ct]=[]),nt[ct].push(tt)}),{nodeMap:J,nodeLabelMap:nt}},S=function(X,H,J){var nt={},tt={};return X.forEach(function(at,ct){nt["".concat(k.uniqueId)]={idx:ct,edge:at};var ht=at[H];tt[ht]||(tt[ht]=[]),tt[ht].push(at);var Lt=J[at.source];Lt&&(Lt.degree++,Lt.outDegree++);var St=J[at.target];St&&(St.degree++,St.inDegree++)}),{edgeMap:nt,edgeLabelMap:tt}},O=function(X,H,J){var nt=H.length,tt={};return H.forEach(function(at,ct){for(var ht=J?0:ct+1,Lt=X[ct].id,St=ht;St<nt;St++)if(ct!==St){var Zt=X[St].id,Ut=at[St];tt["".concat(Lt,"-").concat(Zt)]=Ut,J||(tt["".concat(Zt,"-").concat(Lt)]=Ut)}}),tt},y=function(X,H,J,nt,tt,at,ct,ht,Lt,St,Zt){var Ut,Ot="".concat(H.id,"-").concat(J.id);if(St&&St[Ot])return St[Ot];var Z=Zt?Zt[Ot]:void 0;if(!Z){var st=(Ut={},Ut[Ot]={start:nt[H.id].idx,end:nt[J.id].idx,distance:tt},Ut);Zt=m(st,at,X,Zt),Z=Zt[Ot]}return g(Z,ct,ht,Lt)},d=function(X,H,J,nt){var tt,at,ct,ht=(tt=X[H])===null||tt===void 0?void 0:tt.degree,Lt=(at=X[H])===null||at===void 0?void 0:at.inDegree,St=(ct=X[H])===null||ct===void 0?void 0:ct.outDegree;return X[H]===void 0&&(ht=1/0,Lt=1/0,St=1/0,nt[H].forEach(function(Zt){var Ut=J[Zt.id].degree;ht>Ut&&(ht=Ut);var Ot=J[Zt.id].inDegree;Lt>Ot&&(Lt=Ot);var Z=J[Zt.id].outDegree;St>Z&&(St=Z)}),X[H]={degree:ht,inDegree:Lt,outDegree:St}),{minPatternNodeLabelDegree:ht,minPatternNodeLabelInDegree:Lt,minPatternNodeLabelOutDegree:St}},V=function(X,H,J,nt,tt,at,ct){var ht;if(J===void 0&&(J=!1),at===void 0&&(at="cluster"),ct===void 0&&(ct="cluster"),!(!X||!X.nodes)){var Lt=X.nodes.length;if(Lt){var St=(0,W.default)(X,J),Zt=(0,W.default)(H,J),Ut=O(X.nodes,St,J),Ot=O(H.nodes,Zt,J),Z=_(X.nodes,at),st=Z.nodeMap,Et=Z.nodeLabelMap,Bt=_(H.nodes,at),Pt=Bt.nodeMap,Ht=Bt.nodeLabelMap;S(X.edges,ct,st);var le=S(H.edges,ct,Pt).edgeLabelMap,ye=[];Zt==null||Zt.forEach(function(gn){ye=ye.concat(gn)}),tt||(tt=Math.max.apply(Math,(0,P.__spreadArray)((0,P.__spreadArray)([],ye,!1),[2],!1))),nt||(nt=tt);var Gt=E(X,St,at,nt),zt=E(H,Zt,at,nt),ue=Math.min(100,Lt*(Lt-1)/2),we=p(nt,Lt,ue,Gt,St),de=m(we,Gt,X),Mt=10,ee=1,ce=1,At=4,Wt={graphs:de,nodeLabelProp:at,edgeLabelProp:ct,minSupport:ee,minNodeNum:ce,maxNodeNum:At,directed:J},fe=(0,R.default)(Wt).slice(0,Mt),Ge=fe.length,Be=[];fe.forEach(function(gn,zn){Be[zn]={},Object.keys(de).forEach(function(Un){var _n=de[Un],aa=g(_n,gn,at,ct);Be[zn][Un]=aa})});var _r=M(Be,Ge,fe),Ft=_r.structure,hr=_r.structureCountMap,rn=H.nodes[0],pn=[],Sn=(ht=H.nodes[0])===null||ht===void 0?void 0:ht[at],Bn=-1/0;H.nodes.forEach(function(gn){var zn=gn[at],Un=Et[zn];(Un==null?void 0:Un.length)>Bn&&(Bn=Un.length,pn=Un,Sn=zn,rn=gn)});var Kn={},Nn={},ra={},Ea={},na={},ir={};Object.keys(Ht).forEach(function(gn,zn){na[gn]=[],J&&(ir[gn]=[]);var Un=-1/0,_n=Ht[gn],aa={};_n.forEach(function(Ze){var Cr=Ot["".concat(rn.id,"-").concat(Ze.id)];if(Cr&&na[gn].push(Cr),Un<Cr&&(Un=Cr),aa["".concat(rn.id,"-").concat(Ze.id)]={start:0,end:Pt[Ze.id].idx,distance:Cr},J){var Mr=Ot["".concat(Ze.id,"-").concat(rn.id)];Mr&&ir[gn].push(Mr)}}),na[gn]=na[gn].sort(function(Ze,Cr){return Ze-Cr}),J&&(ir[gn]=ir[gn].sort(function(Ze,Cr){return Ze-Cr})),Nn=m(aa,zt,H,Nn);var $=[];if(Object.keys(aa).forEach(function(Ze){if(ra[Ze]){$.push(ra[Ze]);return}var Cr=Nn[Ze];ra[Ze]=g(Cr,Ft,at,ct),$.push(ra[Ze])}),$=$.sort(function(Ze,Cr){return Cr-Ze}),Ea["".concat(rn.id,"-").concat(gn)]=$,gn!==Sn)for(var Re=(pn==null?void 0:pn.length)||0,be=function(Cr){var Mr=pn[Cr],Vr=Gt[st[Mr.id].idx],tn=Vr.nodeLabelCountMap[gn],jr=Ht[gn].length;if(!tn||tn.count<jr)return pn.splice(Cr,1),"continue";for(var dt=!1,pt=0;pt<jr;pt++)if(tn.dists[pt]>na[gn][pt]){dt=!0;break}if(dt)return pn.splice(Cr,1),"continue";var U={};Vr.neighbors.forEach(function(Q){var bt=Ut["".concat(Mr.id,"-").concat(Q.id)];U["".concat(Mr.id,"-").concat(Q.id)]={start:st[Mr.id].idx,end:st[Q.id].idx,distance:bt}}),de=m(U,Gt,X,de);var I=[];Object.keys(U).forEach(function(Q){if(hr[Q]){I.push(hr[Q]);return}var bt=de[Q];hr[Q]=g(bt,Ft,at,ct),I.push(hr[Q])}),I=I.sort(function(Q,bt){return bt-Q});for(var T=!1,pt=0;pt<jr;pt++)if(I[pt]<$[pt]){T=!0;break}if(T)return pn.splice(Cr,1),"continue"},Ke=Re-1;Ke>=0;Ke--)be(Ke)});var Tr=[];pn==null||pn.forEach(function(gn){for(var zn=st[gn.id].idx,Un=b(X.nodes,St[zn],zn,at,tt),_n=Un.neighbors,aa=_n.length,$=!1,Re=aa-1;Re>=0;Re--){if(_n.length+1<H.nodes.length){$=!0;return}var be=_n[Re],Ke=be[at];if(!Ht[Ke]||!Ht[Ke].length){_n.splice(Re,1);continue}if(!na[Ke]||!na[Ke].length){_n.splice(Re,1);continue}var Ze="".concat(gn.id,"-").concat(be.id),Cr=Ut[Ze],Mr=na[Ke].length-1,Vr=na[Ke][Mr];if(Cr>Vr){_n.splice(Re,1);continue}if(J){var tn="".concat(be.id,"-").concat(gn.id),jr=Ut[tn];Mr=ir[Ke].length-1;var dt=ir[Ke][Mr];if(jr>dt){_n.splice(Re,1);continue}}var pt=hr[Ze]?hr[Ze]:y(X,gn,be,st,Cr,Gt,Ft,at,ct,hr,de),U="".concat(rn.id,"-").concat(Ke),I=Ea[U][Ea[U].length-1];if(pt<I){_n.splice(Re,1);continue}var T=d(Kn,Ke,Pt,Ht),Q=T.minPatternNodeLabelDegree,bt=T.minPatternNodeLabelInDegree,kt=T.minPatternNodeLabelOutDegree;if(st[be.id].degree<Q){_n.splice(Re,1);continue}}$||Tr.push({nodes:[gn].concat(_n)})});var Jr=(0,L.default)(H,rn.id,!1).length,vn={};J?(Object.keys(Jr).forEach(function(gn){var zn=Pt[gn].node[at];vn[zn]?vn[zn].push(Jr[gn]):vn[zn]=[Jr[gn]]}),Object.keys(vn).forEach(function(gn){vn[gn].sort(function(zn,Un){return zn-Un})})):vn=na;for(var Tn=Tr.length,In=function(zn){var Un=Tr[zn],_n=Un.nodes[0],aa={},$={};Un.nodes.forEach(function(Nr,$t){$[Nr.id]={idx:$t,node:Nr,degree:0,inDegree:0,outDegree:0};var Ct=Nr[at];aa[Ct]?aa[Ct]++:aa[Ct]=1});var Re=[],be={};X.edges.forEach(function(Nr){$[Nr.source]&&$[Nr.target]&&(Re.push(Nr),be[Nr[ct]]?be[Nr[ct]]++:be[Nr[ct]]=1,$[Nr.source].degree++,$[Nr.target].degree++,$[Nr.source].outDegree++,$[Nr.target].inDegree++)});for(var Ke=Object.keys(le).length,Ze=!1,Cr=0;Cr<Ke;Cr++){var Mr=Object.keys(le)[Cr];if(!be[Mr]||be[Mr]<le[Mr].length){Ze=!0;break}}if(Ze)return Tr.splice(zn,1),"continue";var Vr=Re.length;if(Vr<H.edges.length)return Tr.splice(zn,1),"break";for(var tn=!1,jr=function($t){var Ct=Re[$t],te=Ct[ct],ge=le[te];if(!ge||!ge.length)return be[te]--,ge&&be[te]<ge.length?(tn=!0,"break"):(Re.splice($t,1),$[Ct.source].degree--,$[Ct.target].degree--,$[Ct.source].outDegree--,$[Ct.target].inDegree--,"continue");var ie=$[Ct.source].node[at],Te=$[Ct.target].node[at],Je=!1;if(ge.forEach(function(tr){var Gr=Pt[tr.source].node,cn=Pt[tr.target].node;Gr[at]===ie&&cn[at]===Te&&(Je=!0),!J&&Gr[at]===Te&&cn[at]===ie&&(Je=!0)}),!Je)return be[te]--,ge&&be[te]<ge.length?(tn=!0,"break"):(Re.splice($t,1),$[Ct.source].degree--,$[Ct.target].degree--,$[Ct.source].outDegree--,$[Ct.target].inDegree--,"continue")},Cr=Vr-1;Cr>=0;Cr--){var dt=jr(Cr);if(dt==="break")break}if(tn)return Tr.splice(zn,1),"continue";Un.edges=Re;var pt=(0,L.default)(Un,Un.nodes[0].id,!1).length;if(Object.keys(pt).reverse().forEach(function(Nr){if(!(Nr===Un.nodes[0].id||tn)){if(pt[Nr]===1/0){var $t=$[Nr].node[at];if(aa[$t]--,aa[$t]<Ht[$t].length){tn=!0;return}var Ct=Un.nodes.indexOf($[Nr].node);Un.nodes.splice(Ct,1),$[Nr]=void 0;return}var te=st[Nr].node[at];if(!vn[te]||!vn[te].length||pt[Nr]>vn[te][vn[te].length-1]){var $t=$[Nr].node[at];if(aa[$t]--,aa[$t]<Ht[$t].length){tn=!0;return}var Ct=Un.nodes.indexOf($[Nr].node);Un.nodes.splice(Ct,1),$[Nr]=void 0}}}),tn)return Tr.splice(zn,1),"continue";for(var U=!0,I=0;U&&!tn;){U=!1;var T=J?$[_n.id].degree<Pt[rn.id].degree||$[_n.id].inDegree<Pt[rn.id].inDegree||$[_n.id].outDegree<Pt[rn.id].outDegree:$[_n.id].degree<Pt[rn.id].degree;if(T){tn=!0;break}if(aa[_n[at]]<Ht[_n[at]].length){tn=!0;break}for(var Q=Un.nodes.length,bt=Q-1;bt>=0;bt--){var kt=Un.nodes[bt],It=$[kt.id].degree,Kt=$[kt.id].inDegree,Pe=$[kt.id].outDegree,_e=kt[at],Qe=d(Kn,_e,Pt,Ht),Ir=Qe.minPatternNodeLabelDegree,sr=Qe.minPatternNodeLabelInDegree,Hr=Qe.minPatternNodeLabelOutDegree,xn=J?It<Ir||Kt<sr||Pe<Hr:It<Ir;if(xn){if(aa[kt[at]]--,aa[kt[at]]<Ht[kt[at]].length){tn=!0;break}Un.nodes.splice(bt,1),$[kt.id]=void 0,U=!0}}if(tn||!U&&I!==0)break;Vr=Re.length;for(var ze=Vr-1;ze>=0;ze--){var ur=Re[ze];if(!$[ur.source]||!$[ur.target]){Re.splice(ze,1);var Sr=ur[ct];if(be[Sr]--,$[ur.source]&&($[ur.source].degree--,$[ur.source].outDegree--),$[ur.target]&&($[ur.target].degree--,$[ur.target].inDegree--),le[Sr]&&be[Sr]<le[Sr].length){tn=!0;break}U=!0}}I++}if(tn||tn||Un.nodes.length<H.nodes.length||Re.length<H.edges.length)return Tr.splice(zn,1),"continue"},kn=Tn-1;kn>=0;kn--){var Zn=In(kn);if(Zn==="break")break}for(var Yn=Tr.length,Ra=function(zn){var Un=Tr[zn],_n={};Un.edges.forEach(function(Re){var be="".concat(Re.source,"-").concat(Re.target,"-").concat(Re.label);_n[be]?_n[be]++:_n[be]=1});for(var aa=function(be){var Ke=Tr[be],Ze={};Ke.edges.forEach(function(Mr){var Vr="".concat(Mr.source,"-").concat(Mr.target,"-").concat(Mr.label);Ze[Vr]?Ze[Vr]++:Ze[Vr]=1});var Cr=!0;Object.keys(Ze).length!==Object.keys(_n).length?Cr=!1:Object.keys(_n).forEach(function(Mr){Ze[Mr]!==_n[Mr]&&(Cr=!1)}),Cr&&Tr.splice(be,1)},$=Yn-1;$>zn;$--)aa($);Yn=Tr.length},kn=0;kn<=Yn-1;kn++)Ra(kn);return Tr}}},q=V;F.default=q},5170:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=R(B(62238)),W=B(70643);function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E,b,p,m){b===void 0&&(b=!1),p===void 0&&(p="weight"),m===void 0&&(m=1e3);var g=E.nodes,M=g===void 0?[]:g,_=E.edges,S=_===void 0?[]:_,O={},y={};M.forEach(function(at,ct){var ht=(0,W.uniqueId)();at.clusterId=ht,O[ht]={id:ht,nodes:[at]},y[at.id]={node:at,idx:ct}});var d=(0,P.default)(E,b),V=[],q={};d.forEach(function(at,ct){var ht=0,Lt=M[ct].id;q[Lt]={},at.forEach(function(St,Zt){if(St){ht+=St;var Ut=M[Zt].id;q[Lt][Ut]=St}}),V.push(ht)});for(var Y=0,X=function(){var ct=!1;if(M.forEach(function(ht){var Lt={};Object.keys(q[ht.id]).forEach(function(Bt){var Pt=q[ht.id][Bt],Ht=y[Bt].node,le=Ht.clusterId;Lt[le]||(Lt[le]=0),Lt[le]+=Pt});var St=-1/0,Zt=[];if(Object.keys(Lt).forEach(function(Bt){St<Lt[Bt]?(St=Lt[Bt],Zt=[Bt]):St===Lt[Bt]&&Zt.push(Bt)}),!(Zt.length===1&&Zt[0]===ht.clusterId)){var Ut=Zt.indexOf(ht.clusterId);if(Ut>=0&&Zt.splice(Ut,1),Zt&&Zt.length){ct=!0;var Ot=O[ht.clusterId],Z=Ot.nodes.indexOf(ht);Ot.nodes.splice(Z,1);var st=Math.floor(Math.random()*Zt.length),Et=O[Zt[st]];Et.nodes.push(ht),ht.clusterId=Et.id}}}),!ct)return"break";Y++};Y<m;){var H=X();if(H==="break")break}Object.keys(O).forEach(function(at){var ct=O[at];(!ct.nodes||!ct.nodes.length)&&delete O[at]});var J=[],nt={};S.forEach(function(at){var ct=at.source,ht=at.target,Lt=at[p]||1,St=y[ct].node.clusterId,Zt=y[ht].node.clusterId,Ut="".concat(St,"---").concat(Zt);if(nt[Ut])nt[Ut].weight+=Lt,nt[Ut].count++;else{var Ot={source:St,target:Zt,weight:Lt,count:1};nt[Ut]=Ot,J.push(Ot)}});var tt=[];return Object.keys(O).forEach(function(at){tt.push(O[at])}),{clusters:tt,clusterEdges:J}},k=L;F.default=k},35179:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=B(13810),W=N(B(62238)),R=N(B(29741)),L=B(3665),k=B(26838);function N(g){return g&&g.__esModule?g:{default:g}}var E=function(M,_,S,O){for(var y=_.length,d=2*O,V=0,q=0;q<y;q++)for(var Y=M[q].clusterId,X=0;X<y;X++){var H=M[X].clusterId;if(Y===H){var J=_[q][X]||0,nt=S[q]||0,tt=S[X]||0;V+=J-nt*tt/d}}return V*=1/d,V},b=function(M,_){M===void 0&&(M=[]);for(var S=M.length,O=new R.default([]),y=0;y<S;y++)O=O.add(new R.default(_[y]));var d=O.avg(S);d.normalize();for(var V=0,y=0;y<S;y++){var q=new R.default(_[y]),Y=q.squareEuclideanDistance(d);V+=Y}var X=[];M.forEach(function(){X.push([])});for(var y=0;y<S;y++){var q=new R.default(_[y]);M[y].clusterInertial=0;for(var H=0;H<S;H++){if(y===H){X[y][H]=0;continue}var J=new R.default(_[H]);X[y][H]=q.squareEuclideanDistance(J),M[y].clusterInertial+=X[y][H]}}for(var nt=0,tt=2*S*V,y=0;y<S;y++)for(var at=M[y].clusterId,H=0;H<S;H++){var ct=M[H].clusterId;if(!(y===H||at!==ct)){var ht=M[y].clusterInertial*M[H].clusterInertial/Math.pow(tt,2)-X[y][H]/tt;nt+=ht}}return Number(nt.toFixed(4))},p=function(M,_,S,O,y,d,V,q,Y){_===void 0&&(_=!1),S===void 0&&(S="weight"),O===void 0&&(O=1e-4),y===void 0&&(y=!1),d===void 0&&(d=void 0),V===void 0&&(V=[]),q===void 0&&(q=["id"]),Y===void 0&&(Y=1);var X=M.nodes,H=X===void 0?[]:X,J=M.edges,nt=J===void 0?[]:J,tt=[];if(y){H.forEach(function(de,Mt){de.properties=de.properties||{},de.originIndex=Mt});var at=[];H.every(function(de){return de.hasOwnProperty("nodeType")})&&(at=Array.from(new Set(H.map(function(de){return de.nodeType}))),H.forEach(function(de){de.properties.nodeType=at.findIndex(function(Mt){return Mt===de.nodeType})}));var ct=(0,L.getAllProperties)(H,d);tt=(0,k.oneHot)(ct,V,q)}var ht=1,Lt={},St={};H.forEach(function(de,Mt){var ee=String(ht++);de.clusterId=ee,Lt[ee]={id:ee,nodes:[de]},St[de.id]={node:de,idx:Mt}});var Zt=(0,W.default)(M,_),Ut=[],Ot={},Z=0;Zt.forEach(function(de,Mt){var ee=0,ce=H[Mt].id;Ot[ce]={},de.forEach(function(At,Wt){if(At){ee+=At;var fe=H[Wt].id;Ot[ce][fe]=At,Z+=At}}),Ut.push(ee)}),Z/=2;for(var st=1/0,Et=1/0,Bt=0,Pt=[],Ht={};;){y&&H.every(function(de){return de.hasOwnProperty("properties")})?st=E(H,Zt,Ut,Z)+b(H,tt)*Y:st=E(H,Zt,Ut,Z),Bt===0&&(Et=st,Pt=H,Ht=Lt);var le=st>0&&st>Et&&st-Et<O;if(st>Et&&(Pt=H.map(function(de){return{node:de,clusterId:de.clusterId}}),Ht=(0,P.clone)(Lt),Et=st),le||Bt>100)break;Bt++,Object.keys(Lt).forEach(function(de){var Mt=0;nt.forEach(function(ee){var ce=ee.source,At=ee.target,Wt=St[ce].node.clusterId,fe=St[At].node.clusterId;(Wt===de&&fe!==de||fe===de&&Wt!==de)&&(Mt=Mt+(ee[S]||1))}),Lt[de].sumTot=Mt}),H.forEach(function(de,Mt){var ee=Lt[de.clusterId],ce=0,At,Wt=Ut[Mt]/(2*Z),fe=0,Ge=ee.nodes;Ge.forEach(function(Nn){var ra=St[Nn.id].idx;fe+=Zt[Mt][ra]||0});var Be=fe-ee.sumTot*Wt,_r=Ge.filter(function(Nn){return Nn.id!==de.id}),Ft=[];_r.forEach(function(Nn,ra){Ft[ra]=tt[Nn.originIndex]});var hr=b(_r,tt)*Y,rn=Ot[de.id];if(Object.keys(rn).forEach(function(Nn){var ra=St[Nn].node,Ea=ra.clusterId;if(Ea!==de.clusterId){var na=Lt[Ea],ir=na.nodes;if(!(!ir||!ir.length)){var Tr=0;ir.forEach(function(Zn){var Yn=St[Zn.id].idx;Tr+=Zt[Mt][Yn]||0});var Jr=Tr-na.sumTot*Wt,vn=ir.concat([de]),Tn=[];vn.forEach(function(Zn,Yn){Tn[Yn]=tt[Zn.originIndex]});var In=b(vn,tt)*Y,kn=Jr-Be;y&&(kn=Jr+In-(Be+hr)),kn>ce&&(ce=kn,At=na)}}}),ce>0){At.nodes.push(de);var pn=de.clusterId;de.clusterId=At.id;var Sn=ee.nodes.indexOf(de);ee.nodes.splice(Sn,1);var Bn=0,Kn=0;nt.forEach(function(Nn){var ra=Nn.source,Ea=Nn.target,na=St[ra].node.clusterId,ir=St[Ea].node.clusterId;(na===At.id&&ir!==At.id||ir===At.id&&na!==At.id)&&(Bn=Bn+(Nn[S]||1)),(na===pn&&ir!==pn||ir===pn&&na!==pn)&&(Kn=Kn+(Nn[S]||1))}),At.sumTot=Bn,ee.sumTot=Kn}})}var ye={},Gt=0;Object.keys(Ht).forEach(function(de){var Mt=Ht[de];if(!Mt.nodes||!Mt.nodes.length){delete Ht[de];return}var ee=String(Gt+1);ee!==de&&(Mt.id=ee,Mt.nodes=Mt.nodes.map(function(ce){return{id:ce.id,clusterId:ee}}),Ht[ee]=Mt,ye[de]=ee,delete Ht[de],Gt++)}),Pt.forEach(function(de){var Mt=de.node,ee=de.clusterId;Mt&&(Mt.clusterId=ee,Mt.clusterId&&ye[Mt.clusterId]&&(Mt.clusterId=ye[Mt.clusterId]))});var zt=[],ue={};nt.forEach(function(de){var Mt=de.source,ee=de.target,ce=de[S]||1,At=St[Mt].node.clusterId,Wt=St[ee].node.clusterId;if(!(!At||!Wt)){var fe="".concat(At,"---").concat(Wt);if(ue[fe])ue[fe].weight+=ce,ue[fe].count++;else{var Ge={source:At,target:Wt,weight:ce,count:1};ue[fe]=Ge,zt.push(Ge)}}});var we=[];return Object.keys(Ht).forEach(function(de){we.push(Ht[de])}),{clusters:we,clusterEdges:zt}},m=p;F.default=m},89454:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=L(B(38823)),W=L(B(57085)),R=B(70643);function L(p){return p&&p.__esModule?p:{default:p}}var k=function(m,g){var M=[],_=m.nodes,S=_===void 0?[]:_,O=m.edges,y=O===void 0?[]:O;if(S.length===0)return M;var d=S[0],V=new Set;V.add(d);var q=function(tt,at){return g?tt.weight-at.weight:0},Y=new W.default(q);for((0,R.getEdgesByNodeId)(d.id,y).forEach(function(nt){Y.insert(nt)});!Y.isEmpty();){var X=Y.delMin(),H=X.source,J=X.target;V.has(H)&&V.has(J)||(M.push(X),V.has(H)||(V.add(H),(0,R.getEdgesByNodeId)(H,y).forEach(function(nt){Y.insert(nt)})),V.has(J)||(V.add(J),(0,R.getEdgesByNodeId)(J,y).forEach(function(nt){Y.insert(nt)})))}return M},N=function(m,g){var M=[],_=m.nodes,S=_===void 0?[]:_,O=m.edges,y=O===void 0?[]:O;if(S.length===0)return M;var d=y.map(function(H){return H});g&&d.sort(function(H,J){return H.weight-J.weight});for(var V=new P.default(S.map(function(H){return H.id}));d.length>0;){var q=d.shift(),Y=q.source,X=q.target;V.connected(Y,X)||(M.push(q),V.union(Y,X))}return M},E=function(m,g,M){var _={prim:k,kruskal:N};return M?_[M](m,g):N(m,g)},b=E;F.default=b},74926:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=R(B(82556)),W=B(70643);function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E,b,p){typeof b!="number"&&(b=1e-6),typeof p!="number"&&(p=.85);for(var m=1,g=0,M=1e3,_=E.nodes,S=_===void 0?[]:_,O=E.edges,y=O===void 0?[]:O,d=S.length,V,q={},Y={},X=0;X<d;++X){var H=S[X],J=H.id;q[J]=1/d,Y[J]=1/d}for(var nt=(0,P.default)(E);M>0&&m>b;){g=0;for(var X=0;X<d;++X){var H=S[X],J=H.id;if(V=0,nt[H.id].inDegree===0)q[J]=0;else{for(var tt=(0,W.getNeighbors)(J,y,"source"),at=0;at<tt.length;++at){var ct=tt[at],ht=nt[ct].outDegree;ht>0&&(V+=Y[ct]/ht)}q[J]=p*V,g+=q[J]}}g=(1-g)/d,m=0;for(var X=0;X<d;++X){var H=S[X],J=H.id;V=q[J]+g,m+=Math.abs(V-Y[J]),Y[J]=V}M-=1}return Y},k=L;F.default=k},57085:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var B=function(L,k){return L-k},P=function(){function R(L){L===void 0&&(L=B),this.compareFn=L,this.list=[]}return R.prototype.getLeft=function(L){return 2*L+1},R.prototype.getRight=function(L){return 2*L+2},R.prototype.getParent=function(L){return L===0?null:Math.floor((L-1)/2)},R.prototype.isEmpty=function(){return this.list.length<=0},R.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},R.prototype.delMin=function(){var L=this.top(),k=this.list.pop();return this.list.length>0&&(this.list[0]=k,this.moveDown(0)),L},R.prototype.insert=function(L){if(L!==null){this.list.push(L);var k=this.list.length-1;return this.moveUp(k),!0}return!1},R.prototype.moveUp=function(L){for(var k=this.getParent(L);L&&L>0&&this.compareFn(this.list[k],this.list[L])>0;){var N=this.list[k];this.list[k]=this.list[L],this.list[L]=N,L=k,k=this.getParent(L)}},R.prototype.moveDown=function(L){var k,N=L,E=this.getLeft(L),b=this.getRight(L),p=this.list.length;E!==null&&E<p&&this.compareFn(this.list[N],this.list[E])>0?N=E:b!==null&&b<p&&this.compareFn(this.list[N],this.list[b])>0&&(N=b),L!==N&&(k=[this.list[N],this.list[L]],this.list[L]=k[0],this.list[N]=k[1],this.moveDown(N))},R}(),W=P;F.default=W},88481:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=F.LinkedListNode=void 0;var B=function(k,N){return k===N},P=function(){function L(k,N){N===void 0&&(N=null),this.value=k,this.next=N}return L.prototype.toString=function(k){return k?k(this.value):"".concat(this.value)},L}();F.LinkedListNode=P;var W=function(){function L(k){k===void 0&&(k=B),this.head=null,this.tail=null,this.compare=k}return L.prototype.prepend=function(k){var N=new P(k,this.head);return this.head=N,this.tail||(this.tail=N),this},L.prototype.append=function(k){var N=new P(k);return this.head?(this.tail.next=N,this.tail=N,this):(this.head=N,this.tail=N,this)},L.prototype.delete=function(k){if(!this.head)return null;for(var N=null;this.head&&this.compare(this.head.value,k);)N=this.head,this.head=this.head.next;var E=this.head;if(E!==null)for(;E.next;)this.compare(E.next.value,k)?(N=E.next,E.next=E.next.next):E=E.next;return this.compare(this.tail.value,k)&&(this.tail=E),N},L.prototype.find=function(k){var N=k.value,E=N===void 0?void 0:N,b=k.callback,p=b===void 0?void 0:b;if(!this.head)return null;for(var m=this.head;m;){if(p&&p(m.value)||E!==void 0&&this.compare(m.value,E))return m;m=m.next}return null},L.prototype.deleteTail=function(){var k=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,k;for(var N=this.head;N.next;)N.next.next?N=N.next:N.next=null;return this.tail=N,k},L.prototype.deleteHead=function(){if(!this.head)return null;var k=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),k},L.prototype.fromArray=function(k){var N=this;return k.forEach(function(E){return N.append(E)}),this},L.prototype.toArray=function(){for(var k=[],N=this.head;N;)k.push(N),N=N.next;return k},L.prototype.reverse=function(){for(var k=this.head,N=null,E=null;k;)E=k.next,k.next=N,N=k,k=E;this.tail=this.head,this.head=N},L.prototype.toString=function(k){return k===void 0&&(k=void 0),this.toArray().map(function(N){return N.toString(k)}).toString()},L}(),R=W;F.default=R},93026:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=W(B(88481));function W(k){return k&&k.__esModule?k:{default:k}}var R=function(){function k(){this.linkedList=new P.default}return k.prototype.isEmpty=function(){return!this.linkedList.head},k.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},k.prototype.enqueue=function(N){this.linkedList.append(N)},k.prototype.dequeue=function(){var N=this.linkedList.deleteHead();return N?N.value:null},k.prototype.toString=function(N){return this.linkedList.toString(N)},k}(),L=R;F.default=L},38823:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var B=function(){function W(R){this.count=R.length,this.parent={};for(var L=0,k=R;L<k.length;L++){var N=k[L];this.parent[N]=N}}return W.prototype.find=function(R){for(;this.parent[R]!==R;)R=this.parent[R];return R},W.prototype.union=function(R,L){var k=this.find(R),N=this.find(L);k!==N&&(k<N?(this.parent[L]!==L&&this.union(this.parent[L],R),this.parent[L]=this.parent[R]):(this.parent[R]!==R&&this.union(this.parent[R],L),this.parent[R]=this.parent[L]))},W.prototype.connected=function(R,L){return this.find(R)===this.find(L)},W}(),P=B;F.default=P},17892:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.DistanceType=void 0;var B;F.DistanceType=B,function(P){P.EuclideanDistance="euclideanDistance"}(B||(F.DistanceType=B={}))},70643:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.uniqueId=F.getOutEdgesNodeId=F.getNeighbors=F.getEdgesByNodeId=void 0;var B=function(k,N,E){N===void 0&&(N=[]);var b=N.filter(function(M){return M.source===k||M.target===k});if(E==="target"){var p=function(_){return _.source===k};return b.filter(p).map(function(M){return M.target})}if(E==="source"){var m=function(_){return _.target===k};return b.filter(m).map(function(M){return M.source})}var g=function(_){return _.source===k?_.target:_.source};return b.map(g)};F.getNeighbors=B;var P=function(k,N){return N.filter(function(E){return E.source===k})};F.getOutEdgesNodeId=P;var W=function(k,N){return N.filter(function(E){return E.source===k||E.target===k})};F.getEdgesByNodeId=W;var R=function(k){k===void 0&&(k=0);var N="".concat(Math.random()).split(".")[1].substr(0,5),E="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(k,"-").concat(N).concat(E)};F.uniqueId=R},26838:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.oneHot=F.getDistance=F.getAllKeyValueMap=F.default=void 0;var P=B(13810),W=B(17892),R=L(B(29741));function L(p){return p&&p.__esModule?p:{default:p}}var k=function(m,g,M){var _=[];g!=null&&g.length?_=g:(m.forEach(function(O){_=_.concat(Object.keys(O))}),_=(0,P.uniq)(_));var S={};return _.forEach(function(O){var y=[];m.forEach(function(d){d[O]!==void 0&&d[O]!==""&&y.push(d[O])}),y.length&&!(M!=null&&M.includes(O))&&(S[O]=(0,P.uniq)(y))}),S};F.getAllKeyValueMap=k;var N=function(m,g,M){var _=k(m,g,M),S=[];if(!Object.keys(_).length)return S;var O=Object.values(_),y=O.every(function(d){return d.every(function(V){return typeof V=="number"})});return m.forEach(function(d,V){var q=[];Object.keys(_).forEach(function(Y){var X=d[Y],H=_[Y],J=H.findIndex(function(at){return X===at}),nt=[];if(y)nt.push(X);else for(var tt=0;tt<H.length;tt++)tt===J?nt.push(1):nt.push(0);q=q.concat(nt)}),S[V]=q}),S};F.oneHot=N;var E=function(m,g,M,_){M===void 0&&(M=W.DistanceType.EuclideanDistance);var S=0;switch(M){case W.DistanceType.EuclideanDistance:S=new R.default(m).euclideanDistance(new R.default(g));break;default:break}return S};F.getDistance=E;var b={getAllKeyValueMap:k,oneHot:N,getDistance:E};F.default=b},3665:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getPropertyWeight=F.getAllSortProperties=F.getAllProperties=F.default=void 0;var P=B(92935),W=function(b,p){b===void 0&&(b=[]),p===void 0&&(p=100);var m={};b.forEach(function(M){M.properties&&Object.keys(M.properties).forEach(function(_){if(_==="id"||!"".concat(M.properties[_]).match(P.secondReg)&&!"".concat(M.properties[_]).match(P.dateReg)&&isNaN(Number(M.properties[_]))){m.hasOwnProperty(_)&&delete m[_];return}m.hasOwnProperty(_)?m[_]+=1:m[_]=1})});var g=Object.keys(m).sort(function(M,_){return m[_]-m[M]});return g.length<p?g:g.slice(0,p)};F.getAllSortProperties=W;var R=function(b,p){return p.map(function(m){return b.hasOwnProperty(m)?b[m]:0})},L=function(b){for(var p=W(b),m=[],g=0;g<b.length;g++)m[g]=R(b[g].properties,p);return m};F.getPropertyWeight=L;var k=function(b,p){p===void 0&&(p=void 0);var m=[];return b.forEach(function(g){p===void 0&&m.push(g),g[p]!==void 0&&m.push(g[p])}),m};F.getAllProperties=k;var N={getAllSortProperties:W,getPropertyWeight:L,getAllProperties:k};F.default=N},29741:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=B(13810),W=function(){function L(k){this.arr=k}return L.prototype.getArr=function(){return this.arr||[]},L.prototype.add=function(k){var N,E=k.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return new L(E);if(!(E!=null&&E.length))return new L(this.arr);if(this.arr.length===E.length){var b=[];for(var p in this.arr)b[p]=this.arr[p]+E[p];return new L(b)}},L.prototype.subtract=function(k){var N,E=k.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return new L(E);if(!(E!=null&&E.length))return new L(this.arr);if(this.arr.length===E.length){var b=[];for(var p in this.arr)b[p]=this.arr[p]-E[p];return new L(b)}},L.prototype.avg=function(k){var N=[];if(k!==0)for(var E in this.arr)N[E]=this.arr[E]/k;return new L(N)},L.prototype.negate=function(){var k=[];for(var N in this.arr)k[N]=-this.arr[N];return new L(k)},L.prototype.squareEuclideanDistance=function(k){var N,E=k.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var b=0;for(var p in this.arr)b+=Math.pow(this.arr[p]-k.arr[p],2);return b}},L.prototype.euclideanDistance=function(k){var N,E=k.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var b=0;for(var p in this.arr)b+=Math.pow(this.arr[p]-k.arr[p],2);return Math.sqrt(b)}else console.error("The two vectors are unequal in length.")},L.prototype.normalize=function(){var k=[],N=(0,P.clone)(this.arr);N.sort(function(m,g){return m-g});var E=N[N.length-1],b=N[0];for(var p in this.arr)k[p]=(this.arr[p]-b)/(E-b);return new L(k)},L.prototype.norm2=function(){var k;if(!(!((k=this.arr)===null||k===void 0)&&k.length))return 0;var N=0;for(var E in this.arr)N+=Math.pow(this.arr[E],2);return Math.sqrt(N)},L.prototype.dot=function(k){var N,E=k.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var b=0;for(var p in this.arr)b+=this.arr[p]*k.arr[p];return b}else console.error("The two vectors are unequal in length.")},L.prototype.equal=function(k){var N,E=k.arr;if(((N=this.arr)===null||N===void 0?void 0:N.length)!==(E==null?void 0:E.length))return!1;for(var b in this.arr)if(this.arr[b]!==E[b])return!1;return!0},L}(),R=W;F.default=R},31656:function(Le,F,B){"use strict";function P(Y){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},P(Y)}Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"GADDI",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(F,"breadthFirstSearch",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(F,"connectedComponent",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(F,"depthFirstSearch",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(F,"detectCycle",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(F,"dijkstra",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(F,"findAllPath",{enumerable:!0,get:function(){return p.findAllPath}}),Object.defineProperty(F,"findShortestPath",{enumerable:!0,get:function(){return p.findShortestPath}}),Object.defineProperty(F,"floydWarshall",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(F,"getAdjMatrix",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(F,"getDegree",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(F,"getInDegree",{enumerable:!0,get:function(){return k.getInDegree}}),Object.defineProperty(F,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}}),Object.defineProperty(F,"getOutDegree",{enumerable:!0,get:function(){return k.getOutDegree}}),Object.defineProperty(F,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(F,"louvain",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(F,"minimumSpanningTree",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(F,"pageRank",{enumerable:!0,get:function(){return S.default}});var W=q(B(62238)),R=q(B(83764)),L=q(B(59527)),k=V(B(82556)),N=q(B(94282)),E=q(B(45891)),b=q(B(78089)),p=B(41727),m=q(B(75033)),g=q(B(5170)),M=q(B(35179)),_=q(B(89454)),S=q(B(74926)),O=q(B(82812)),y=B(70643);function d(Y){if(typeof WeakMap!="function")return null;var X=new WeakMap,H=new WeakMap;return(d=function(nt){return nt?H:X})(Y)}function V(Y,X){if(!X&&Y&&Y.__esModule)return Y;if(Y===null||P(Y)!=="object"&&typeof Y!="function")return{default:Y};var H=d(X);if(H&&H.has(Y))return H.get(Y);var J={},nt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Y)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Y,tt)){var at=nt?Object.getOwnPropertyDescriptor(Y,tt):null;at&&(at.get||at.set)?Object.defineProperty(J,tt,at):J[tt]=Y[tt]}return J.default=Y,H&&H.set(Y,J),J}function q(Y){return Y&&Y.__esModule?Y:{default:Y}}},66044:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.MESSAGE=F.ALGORITHM=void 0;var B={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};F.ALGORITHM=B;var P={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};F.MESSAGE=P},70585:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var P=B(66044),W=R(B(12067));function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E){return function(){for(var b=[],p=0;p<arguments.length;p++)b[p]=arguments[p];return new Promise(function(m,g){var M=new W.default;M.postMessage({_algorithmType:E,data:b}),M.onmessage=function(_){var S=_.data,O=S.data,y=S._algorithmType;P.MESSAGE.SUCCESS===y?m(O):g(),M.terminate()}})}},k=L;F.default=k},30485:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.pageRankAsync=F.minimumSpanningTreeAsync=F.louvainAsync=F.labelPropagationAsync=F.getOutDegreeAsync=F.getNeighborsAsync=F.getInDegreeAsync=F.getDegreeAsync=F.getAdjMatrixAsync=F.floydWarshallAsync=F.findShortestPathAsync=F.findAllPathAsync=F.dijkstraAsync=F.detectCycleAsync=F.detectAllUndirectedCycleAsync=F.detectAllDirectedCycleAsync=F.detectAllCyclesAsync=F.connectedComponentAsync=F.GADDIAsync=void 0;var P=R(B(70585)),W=B(66044);function R(J){return J&&J.__esModule?J:{default:J}}var L=function(nt,tt){return(0,P.default)(W.ALGORITHM.getAdjMatrix).apply(void 0,[nt,tt])};F.getAdjMatrixAsync=L;var k=function(nt,tt){return(0,P.default)(W.ALGORITHM.connectedComponent).apply(void 0,[nt,tt])};F.connectedComponentAsync=k;var N=function(nt){return(0,P.default)(W.ALGORITHM.getDegree)(nt)};F.getDegreeAsync=N;var E=function(nt,tt){return(0,P.default)(W.ALGORITHM.getInDegree)(nt,tt)};F.getInDegreeAsync=E;var b=function(nt,tt){return(0,P.default)(W.ALGORITHM.getOutDegree)(nt,tt)};F.getOutDegreeAsync=b;var p=function(nt){return(0,P.default)(W.ALGORITHM.detectCycle)(nt)};F.detectCycleAsync=p;var m=function(nt){return(0,P.default)(W.ALGORITHM.detectAllCycles)(nt)};F.detectAllCyclesAsync=m;var g=function(nt){return(0,P.default)(W.ALGORITHM.detectAllDirectedCycle)(nt)};F.detectAllDirectedCycleAsync=g;var M=function(nt){return(0,P.default)(W.ALGORITHM.detectAllUndirectedCycle)(nt)};F.detectAllUndirectedCycleAsync=M;var _=function(nt,tt,at,ct){return(0,P.default)(W.ALGORITHM.dijkstra).apply(void 0,[nt,tt,at,ct])};F.dijkstraAsync=_;var S=function(nt,tt,at,ct){return(0,P.default)(W.ALGORITHM.findAllPath).apply(void 0,[nt,tt,at,ct])};F.findAllPathAsync=S;var O=function(nt,tt,at,ct,ht){return(0,P.default)(W.ALGORITHM.findShortestPath).apply(void 0,[nt,tt,at,ct,ht])};F.findShortestPathAsync=O;var y=function(nt,tt){return(0,P.default)(W.ALGORITHM.floydWarshall).apply(void 0,[nt,tt])};F.floydWarshallAsync=y;var d=function(nt,tt,at,ct){return ct===void 0&&(ct=1e3),(0,P.default)(W.ALGORITHM.labelPropagation)(nt,tt,at,ct)};F.labelPropagationAsync=d;var V=function(nt,tt,at,ct){return(0,P.default)(W.ALGORITHM.louvain)(nt,tt,at,ct)};F.louvainAsync=V;var q=function(nt,tt,at){return(0,P.default)(W.ALGORITHM.minimumSpanningTree).apply(void 0,[nt,tt,at])};F.minimumSpanningTreeAsync=q;var Y=function(nt,tt,at){return(0,P.default)(W.ALGORITHM.pageRank).apply(void 0,[nt,tt,at])};F.pageRankAsync=Y;var X=function(nt,tt,at){return(0,P.default)(W.ALGORITHM.getNeighbors).apply(void 0,[nt,tt,at])};F.getNeighborsAsync=X;var H=function(nt,tt,at,ct,ht,Lt,St){return at===void 0&&(at=!1),Lt===void 0&&(Lt="cluster"),St===void 0&&(St="cluster"),(0,P.default)(W.ALGORITHM.GADDI).apply(void 0,[nt,tt,at,ct,ht,Lt,St])};F.GADDIAsync=H},12067:function(Le,F,B){"use strict";function P(b){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},P(b)}Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var W=k(B(31656)),R=B(66044);function L(b){if(typeof WeakMap!="function")return null;var p=new WeakMap,m=new WeakMap;return(L=function(M){return M?m:p})(b)}function k(b,p){if(!p&&b&&b.__esModule)return b;if(b===null||P(b)!=="object"&&typeof b!="function")return{default:b};var m=L(p);if(m&&m.has(b))return m.get(b);var g={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in b)if(_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)){var S=M?Object.getOwnPropertyDescriptor(b,_):null;S&&(S.get||S.set)?Object.defineProperty(g,_,S):g[_]=b[_]}return g.default=b,m&&m.set(b,g),g}var N=typeof self!="undefined"?self:{};N.onmessage=function(b){var p=b.data,m=p._algorithmType,g=p.data;if(m){if(typeof W[m]=="function"){var M=W[m].apply(W,g);N.postMessage({_algorithmType:R.MESSAGE.SUCCESS,data:M});return}N.postMessage({_algorithmType:R.MESSAGE.FAILURE})}};var E=null;F.default=E},1029:function(Le,F,B){"use strict";B.r(F),B.d(F,{Kernel:function(){return Lt},World:function(){return aa}});var P=B(15861),W=B(4942),R=B(15671),L=B(43144),k=B(36719),N=B.n(k),E=B(81763),b=B.n(E),p=B(1469),m=B.n(p),g=B(64687),M=B.n(g),_=null,S=1;function O(){return S++}var y=null,d=null,V;(function($){$[$.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",$[$.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",$[$.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",$[$.POINTS=0]="POINTS",$[$.LINES=1]="LINES",$[$.LINE_LOOP=2]="LINE_LOOP",$[$.LINE_STRIP=3]="LINE_STRIP",$[$.TRIANGLES=4]="TRIANGLES",$[$.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",$[$.TRIANGLE_FAN=6]="TRIANGLE_FAN",$[$.ZERO=0]="ZERO",$[$.ONE=1]="ONE",$[$.SRC_COLOR=768]="SRC_COLOR",$[$.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",$[$.SRC_ALPHA=770]="SRC_ALPHA",$[$.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",$[$.DST_ALPHA=772]="DST_ALPHA",$[$.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",$[$.DST_COLOR=774]="DST_COLOR",$[$.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",$[$.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",$[$.FUNC_ADD=32774]="FUNC_ADD",$[$.BLEND_EQUATION=32777]="BLEND_EQUATION",$[$.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",$[$.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",$[$.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",$[$.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",$[$.MAX_EXT=32776]="MAX_EXT",$[$.MIN_EXT=32775]="MIN_EXT",$[$.BLEND_DST_RGB=32968]="BLEND_DST_RGB",$[$.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",$[$.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",$[$.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",$[$.CONSTANT_COLOR=32769]="CONSTANT_COLOR",$[$.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",$[$.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",$[$.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",$[$.BLEND_COLOR=32773]="BLEND_COLOR",$[$.ARRAY_BUFFER=34962]="ARRAY_BUFFER",$[$.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",$[$.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",$[$.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",$[$.STREAM_DRAW=35040]="STREAM_DRAW",$[$.STATIC_DRAW=35044]="STATIC_DRAW",$[$.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",$[$.BUFFER_SIZE=34660]="BUFFER_SIZE",$[$.BUFFER_USAGE=34661]="BUFFER_USAGE",$[$.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",$[$.FRONT=1028]="FRONT",$[$.BACK=1029]="BACK",$[$.FRONT_AND_BACK=1032]="FRONT_AND_BACK",$[$.CULL_FACE=2884]="CULL_FACE",$[$.BLEND=3042]="BLEND",$[$.DITHER=3024]="DITHER",$[$.STENCIL_TEST=2960]="STENCIL_TEST",$[$.DEPTH_TEST=2929]="DEPTH_TEST",$[$.SCISSOR_TEST=3089]="SCISSOR_TEST",$[$.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",$[$.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",$[$.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",$[$.NO_ERROR=0]="NO_ERROR",$[$.INVALID_ENUM=1280]="INVALID_ENUM",$[$.INVALID_VALUE=1281]="INVALID_VALUE",$[$.INVALID_OPERATION=1282]="INVALID_OPERATION",$[$.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",$[$.CW=2304]="CW",$[$.CCW=2305]="CCW",$[$.LINE_WIDTH=2849]="LINE_WIDTH",$[$.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",$[$.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",$[$.CULL_FACE_MODE=2885]="CULL_FACE_MODE",$[$.FRONT_FACE=2886]="FRONT_FACE",$[$.DEPTH_RANGE=2928]="DEPTH_RANGE",$[$.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",$[$.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",$[$.DEPTH_FUNC=2932]="DEPTH_FUNC",$[$.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",$[$.STENCIL_FUNC=2962]="STENCIL_FUNC",$[$.STENCIL_FAIL=2964]="STENCIL_FAIL",$[$.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",$[$.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",$[$.STENCIL_REF=2967]="STENCIL_REF",$[$.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",$[$.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",$[$.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",$[$.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",$[$.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",$[$.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",$[$.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",$[$.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",$[$.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",$[$.VIEWPORT=2978]="VIEWPORT",$[$.SCISSOR_BOX=3088]="SCISSOR_BOX",$[$.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",$[$.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",$[$.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",$[$.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",$[$.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",$[$.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",$[$.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",$[$.RED_BITS=3410]="RED_BITS",$[$.GREEN_BITS=3411]="GREEN_BITS",$[$.BLUE_BITS=3412]="BLUE_BITS",$[$.ALPHA_BITS=3413]="ALPHA_BITS",$[$.DEPTH_BITS=3414]="DEPTH_BITS",$[$.STENCIL_BITS=3415]="STENCIL_BITS",$[$.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",$[$.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",$[$.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",$[$.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",$[$.SAMPLES=32937]="SAMPLES",$[$.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",$[$.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",$[$.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",$[$.DONT_CARE=4352]="DONT_CARE",$[$.FASTEST=4353]="FASTEST",$[$.NICEST=4354]="NICEST",$[$.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",$[$.BYTE=5120]="BYTE",$[$.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",$[$.SHORT=5122]="SHORT",$[$.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",$[$.INT=5124]="INT",$[$.UNSIGNED_INT=5125]="UNSIGNED_INT",$[$.FLOAT=5126]="FLOAT",$[$.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",$[$.ALPHA=6406]="ALPHA",$[$.RGB=6407]="RGB",$[$.RGBA=6408]="RGBA",$[$.LUMINANCE=6409]="LUMINANCE",$[$.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",$[$.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",$[$.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",$[$.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",$[$.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",$[$.VERTEX_SHADER=35633]="VERTEX_SHADER",$[$.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",$[$.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",$[$.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",$[$.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",$[$.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",$[$.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",$[$.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",$[$.SHADER_TYPE=35663]="SHADER_TYPE",$[$.DELETE_STATUS=35712]="DELETE_STATUS",$[$.LINK_STATUS=35714]="LINK_STATUS",$[$.VALIDATE_STATUS=35715]="VALIDATE_STATUS",$[$.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",$[$.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",$[$.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",$[$.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",$[$.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",$[$.NEVER=512]="NEVER",$[$.LESS=513]="LESS",$[$.EQUAL=514]="EQUAL",$[$.LEQUAL=515]="LEQUAL",$[$.GREATER=516]="GREATER",$[$.NOTEQUAL=517]="NOTEQUAL",$[$.GEQUAL=518]="GEQUAL",$[$.ALWAYS=519]="ALWAYS",$[$.KEEP=7680]="KEEP",$[$.REPLACE=7681]="REPLACE",$[$.INCR=7682]="INCR",$[$.DECR=7683]="DECR",$[$.INVERT=5386]="INVERT",$[$.INCR_WRAP=34055]="INCR_WRAP",$[$.DECR_WRAP=34056]="DECR_WRAP",$[$.VENDOR=7936]="VENDOR",$[$.RENDERER=7937]="RENDERER",$[$.VERSION=7938]="VERSION",$[$.NEAREST=9728]="NEAREST",$[$.LINEAR=9729]="LINEAR",$[$.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",$[$.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",$[$.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",$[$.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",$[$.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",$[$.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",$[$.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",$[$.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",$[$.TEXTURE_2D=3553]="TEXTURE_2D",$[$.TEXTURE=5890]="TEXTURE",$[$.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",$[$.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",$[$.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",$[$.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",$[$.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",$[$.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",$[$.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",$[$.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",$[$.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",$[$.TEXTURE0=33984]="TEXTURE0",$[$.TEXTURE1=33985]="TEXTURE1",$[$.TEXTURE2=33986]="TEXTURE2",$[$.TEXTURE3=33987]="TEXTURE3",$[$.TEXTURE4=33988]="TEXTURE4",$[$.TEXTURE5=33989]="TEXTURE5",$[$.TEXTURE6=33990]="TEXTURE6",$[$.TEXTURE7=33991]="TEXTURE7",$[$.TEXTURE8=33992]="TEXTURE8",$[$.TEXTURE9=33993]="TEXTURE9",$[$.TEXTURE10=33994]="TEXTURE10",$[$.TEXTURE11=33995]="TEXTURE11",$[$.TEXTURE12=33996]="TEXTURE12",$[$.TEXTURE13=33997]="TEXTURE13",$[$.TEXTURE14=33998]="TEXTURE14",$[$.TEXTURE15=33999]="TEXTURE15",$[$.TEXTURE16=34e3]="TEXTURE16",$[$.TEXTURE17=34001]="TEXTURE17",$[$.TEXTURE18=34002]="TEXTURE18",$[$.TEXTURE19=34003]="TEXTURE19",$[$.TEXTURE20=34004]="TEXTURE20",$[$.TEXTURE21=34005]="TEXTURE21",$[$.TEXTURE22=34006]="TEXTURE22",$[$.TEXTURE23=34007]="TEXTURE23",$[$.TEXTURE24=34008]="TEXTURE24",$[$.TEXTURE25=34009]="TEXTURE25",$[$.TEXTURE26=34010]="TEXTURE26",$[$.TEXTURE27=34011]="TEXTURE27",$[$.TEXTURE28=34012]="TEXTURE28",$[$.TEXTURE29=34013]="TEXTURE29",$[$.TEXTURE30=34014]="TEXTURE30",$[$.TEXTURE31=34015]="TEXTURE31",$[$.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",$[$.REPEAT=10497]="REPEAT",$[$.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",$[$.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",$[$.FLOAT_VEC2=35664]="FLOAT_VEC2",$[$.FLOAT_VEC3=35665]="FLOAT_VEC3",$[$.FLOAT_VEC4=35666]="FLOAT_VEC4",$[$.INT_VEC2=35667]="INT_VEC2",$[$.INT_VEC3=35668]="INT_VEC3",$[$.INT_VEC4=35669]="INT_VEC4",$[$.BOOL=35670]="BOOL",$[$.BOOL_VEC2=35671]="BOOL_VEC2",$[$.BOOL_VEC3=35672]="BOOL_VEC3",$[$.BOOL_VEC4=35673]="BOOL_VEC4",$[$.FLOAT_MAT2=35674]="FLOAT_MAT2",$[$.FLOAT_MAT3=35675]="FLOAT_MAT3",$[$.FLOAT_MAT4=35676]="FLOAT_MAT4",$[$.SAMPLER_2D=35678]="SAMPLER_2D",$[$.SAMPLER_CUBE=35680]="SAMPLER_CUBE",$[$.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",$[$.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",$[$.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",$[$.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",$[$.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",$[$.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",$[$.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",$[$.COMPILE_STATUS=35713]="COMPILE_STATUS",$[$.LOW_FLOAT=36336]="LOW_FLOAT",$[$.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",$[$.HIGH_FLOAT=36338]="HIGH_FLOAT",$[$.LOW_INT=36339]="LOW_INT",$[$.MEDIUM_INT=36340]="MEDIUM_INT",$[$.HIGH_INT=36341]="HIGH_INT",$[$.FRAMEBUFFER=36160]="FRAMEBUFFER",$[$.RENDERBUFFER=36161]="RENDERBUFFER",$[$.RGBA4=32854]="RGBA4",$[$.RGB5_A1=32855]="RGB5_A1",$[$.RGB565=36194]="RGB565",$[$.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",$[$.STENCIL_INDEX=6401]="STENCIL_INDEX",$[$.STENCIL_INDEX8=36168]="STENCIL_INDEX8",$[$.DEPTH_STENCIL=34041]="DEPTH_STENCIL",$[$.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",$[$.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",$[$.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",$[$.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",$[$.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",$[$.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",$[$.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",$[$.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",$[$.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",$[$.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",$[$.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",$[$.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",$[$.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",$[$.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",$[$.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",$[$.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",$[$.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",$[$.NONE=0]="NONE",$[$.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",$[$.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",$[$.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",$[$.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",$[$.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",$[$.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",$[$.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",$[$.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",$[$.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",$[$.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",$[$.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",$[$.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",$[$.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",$[$.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",$[$.COPY_SRC=1]="COPY_SRC",$[$.COPY_DST=2]="COPY_DST",$[$.SAMPLED=4]="SAMPLED",$[$.STORAGE=8]="STORAGE",$[$.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(V||(V={}));var q=function(){function $(){(0,R.Z)(this,$),this.config=void 0}return(0,L.Z)($,[{key:"get",value:function(){return this.config}},{key:"set",value:function(be){this.config=be}}]),$}(),Y=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),X;(function($){$.Void="Void",$.Boolean="Boolean",$.Float="Float",$.Uint32="Uint32",$.Int32="Int32",$.Vector="Vector",$.Vector2Float="vec2<f32>",$.Vector3Float="vec3<f32>",$.Vector4Float="vec4<f32>",$.Vector2Boolean="vec2<bool>",$.Vector3Boolean="vec3<bool>",$.Vector4Boolean="vec4<bool>",$.Vector2Uint="vec2<u32>",$.Vector3Uint="vec3<u32>",$.Vector4Uint="vec4<u32>",$.Vector2Int="vec2<i32>",$.Vector3Int="vec3<i32>",$.Vector4Int="vec4<i32>",$.Matrix="Matrix",$.Matrix3x3Float="mat3x3<f32>",$.Matrix4x4Float="mat4x4<i32>",$.Struct="Struct",$.FloatArray="Float[]",$.Vector4FloatArray="vec4<f32>[]"})(X||(X={}));var H;(function($){$.Program="Program",$.Identifier="Identifier",$.VariableDeclaration="VariableDeclaration",$.BlockStatement="BlockStatement",$.ReturnStatement="ReturnStatement",$.FunctionDeclaration="FunctionDeclaration",$.VariableDeclarator="VariableDeclarator",$.AssignmentExpression="AssignmentExpression",$.LogicalExpression="LogicalExpression",$.BinaryExpression="BinaryExpression",$.ArrayExpression="ArrayExpression",$.UnaryExpression="UnaryExpression",$.UpdateExpression="UpdateExpression",$.FunctionExpression="FunctionExpression",$.MemberExpression="MemberExpression",$.ConditionalExpression="ConditionalExpression",$.ExpressionStatement="ExpressionStatement",$.CallExpression="CallExpression",$.NumThreadStatement="NumThreadStatement",$.StorageStatement="StorageStatement",$.DoWhileStatement="DoWhileStatement",$.WhileStatement="WhileStatement",$.ForStatement="ForStatement",$.BreakStatement="BreakStatement",$.ContinueStatement="ContinueStatement",$.IfStatement="IfStatement",$.ImportedFunctionStatement="ImportedFunctionStatement"})(H||(H={}));var J;(function($){$.Input="Input",$.Output="Output",$.Uniform="Uniform",$.Workgroup="Workgroup",$.UniformConstant="UniformConstant",$.Image="Image",$.StorageBuffer="StorageBuffer",$.Private="Private",$.Function="Function"})(J||(J={}));var nt;(function($){$.GLSL100="GLSL100",$.GLSL450="GLSL450",$.WGSL="WGSL"})(nt||(nt={}));var tt="__DefineValuePlaceholder__";function at(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ct($,Re){var be=Object.keys($);if(Object.getOwnPropertySymbols){var Ke=Object.getOwnPropertySymbols($);Re&&(Ke=Ke.filter(function(Ze){return Object.getOwnPropertyDescriptor($,Ze).enumerable})),be.push.apply(be,Ke)}return be}function ht($){for(var Re=1;Re<arguments.length;Re++){var be=arguments[Re]!=null?arguments[Re]:{};Re%2?ct(Object(be),!0).forEach(function(Ke){(0,W.Z)($,Ke,be[Ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(be)):ct(Object(be)).forEach(function(Ke){Object.defineProperty($,Ke,Object.getOwnPropertyDescriptor(be,Ke))})}return $}var Lt=function(){function $(Re,be){(0,R.Z)(this,$),this.engine=Re,this.configService=be,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,L.Z)($,[{key:"init",value:function(){var be=this.configService.get(),Ke=be.canvas,Ze=be.engineOptions;this.initPromise=this.engine.init(ht({canvas:Ke||at(),antialiasing:!1},Ze))}},{key:"setBundle",value:function(be){this.compiledBundle=JSON.parse(JSON.stringify(be))}},{key:"setDispatch",value:function(be){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=be),this}},{key:"setMaxIteration",value:function(be){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=be),this}},{key:"setBinding",value:function(be,Ke){var Ze=this;if(typeof be=="string"){var Cr=b()(Ke)||N()(Ke)||m()(Ke);if(this.compiledBundle&&this.compiledBundle.context){var Mr=this.compiledBundle.context.defines.find(function(tn){return tn.name===be});if(Mr)return Mr.value=Ke,this;var Vr=this.compiledBundle.context.uniforms.find(function(tn){return tn.name===be});Vr&&(Cr?(Vr.data=Ke,Vr.isReferer=!1,Vr.storageClass===J.Uniform?this.model&&this.model.updateUniform(be,Ke):this.model&&this.model.updateBuffer(be,Ke)):(Vr.isReferer=!0,Vr.data=Ke))}}else Object.keys(be).forEach(function(tn){Ze.setBinding(tn,be[tn])});return this}},{key:"execute",value:function(){var Re=(0,P.Z)(M().mark(function Ke(){var Ze=this,Cr,Mr,Vr=arguments;return M().wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Cr=Vr.length>0&&Vr[0]!==void 0?Vr[0]:1,!this.dirty){jr.next=6;break}return this.compiledBundle.context&&(Cr>1?this.compiledBundle.context.maxIteration=Cr:this.compiledBundle.context.maxIteration++),jr.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(dt){var pt=dt.isReferer;return pt}).forEach(function(dt){var pt=dt.data,U=dt.name;Ze.model.confirmInput(pt.model,U)}),Mr=0;Mr<Cr;Mr++)this.model.run();return this.engine.endFrame(),jr.abrupt("return",this);case 12:case"end":return jr.stop()}},Ke,this)}));function be(){return Re.apply(this,arguments)}return be}()},{key:"getOutput",value:function(){var Re=(0,P.Z)(M().mark(function Ke(){return M().wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:return Cr.abrupt("return",this.model.readData());case 1:case"end":return Cr.stop()}},Ke,this)}));function be(){return Re.apply(this,arguments)}return be}()},{key:"compile",value:function(){var Re=(0,P.Z)(M().mark(function Ke(){var Ze,Cr,Mr;return M().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.next=2,this.initPromise;case 2:return Ze=ht({},this.compiledBundle.context),Cr=this.engine.supportWebGPU?this.engine.useWGSL?nt.WGSL:nt.GLSL450:nt.GLSL100,Mr=this.compiledBundle.shaders[Cr],Ze.defines.filter(function(jr){return jr.runtime}).forEach(function(jr){var dt="".concat(tt).concat(jr.name);Mr=Mr.replace(dt,"".concat(jr.value))}),Ze.shader=Mr,Ze.uniforms.forEach(function(jr){if(!jr.data&&jr.storageClass===J.StorageBuffer){var dt=1;jr.type===X.FloatArray?dt=1:jr.type===X.Vector4FloatArray&&(dt=4),jr.data=new Float32Array(Ze.output.length*dt).fill(0)}}),this.compiledBundle.context=Ze,tn.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=tn.sent;case 12:case"end":return tn.stop()}},Ke,this)}));function be(){return Re.apply(this,arguments)}return be}()}]),$}(),St=B(81550),Zt=B.n(St),Ut=function(){function $(Re,be){(0,R.Z)(this,$),this.attribute=void 0,this.buffer=void 0;var Ke=be.buffer,Ze=be.offset,Cr=be.stride,Mr=be.normalized,Vr=be.size,tn=be.divisor;this.buffer=Ke,this.attribute={buffer:Ke.get(),offset:Ze||0,stride:Cr||0,normalized:Mr||!1,divisor:tn||0},Vr&&(this.attribute.size=Vr)}return(0,L.Z)($,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(be){this.buffer.subData(be)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),$}(),Ot,Z,st,Et,Bt,Pt,Ht,le,ye,Gt,zt,ue,we,de,Mt=(Ot={},(0,W.Z)(Ot,V.POINTS,"points"),(0,W.Z)(Ot,V.LINES,"lines"),(0,W.Z)(Ot,V.LINE_LOOP,"line loop"),(0,W.Z)(Ot,V.LINE_STRIP,"line strip"),(0,W.Z)(Ot,V.TRIANGLES,"triangles"),(0,W.Z)(Ot,V.TRIANGLE_FAN,"triangle fan"),(0,W.Z)(Ot,V.TRIANGLE_STRIP,"triangle strip"),Ot),ee=(Z={},(0,W.Z)(Z,V.STATIC_DRAW,"static"),(0,W.Z)(Z,V.DYNAMIC_DRAW,"dynamic"),(0,W.Z)(Z,V.STREAM_DRAW,"stream"),Z),ce=(st={},(0,W.Z)(st,V.BYTE,"int8"),(0,W.Z)(st,V.UNSIGNED_INT,"int16"),(0,W.Z)(st,V.INT,"int32"),(0,W.Z)(st,V.UNSIGNED_BYTE,"uint8"),(0,W.Z)(st,V.UNSIGNED_SHORT,"uint16"),(0,W.Z)(st,V.UNSIGNED_INT,"uint32"),(0,W.Z)(st,V.FLOAT,"float"),st),At=(Et={},(0,W.Z)(Et,V.ALPHA,"alpha"),(0,W.Z)(Et,V.LUMINANCE,"luminance"),(0,W.Z)(Et,V.LUMINANCE_ALPHA,"luminance alpha"),(0,W.Z)(Et,V.RGB,"rgb"),(0,W.Z)(Et,V.RGBA,"rgba"),(0,W.Z)(Et,V.RGBA4,"rgba4"),(0,W.Z)(Et,V.RGB5_A1,"rgb5 a1"),(0,W.Z)(Et,V.RGB565,"rgb565"),(0,W.Z)(Et,V.DEPTH_COMPONENT,"depth"),(0,W.Z)(Et,V.DEPTH_STENCIL,"depth stencil"),Et),Wt=(Bt={},(0,W.Z)(Bt,V.DONT_CARE,"dont care"),(0,W.Z)(Bt,V.NICEST,"nice"),(0,W.Z)(Bt,V.FASTEST,"fast"),Bt),fe=(Pt={},(0,W.Z)(Pt,V.NEAREST,"nearest"),(0,W.Z)(Pt,V.LINEAR,"linear"),(0,W.Z)(Pt,V.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,W.Z)(Pt,V.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,W.Z)(Pt,V.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,W.Z)(Pt,V.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Pt),Ge=(Ht={},(0,W.Z)(Ht,V.REPEAT,"repeat"),(0,W.Z)(Ht,V.CLAMP_TO_EDGE,"clamp"),(0,W.Z)(Ht,V.MIRRORED_REPEAT,"mirror"),Ht),Be=(le={},(0,W.Z)(le,V.NONE,"none"),(0,W.Z)(le,V.BROWSER_DEFAULT_WEBGL,"browser"),le),_r=(ye={},(0,W.Z)(ye,V.NEVER,"never"),(0,W.Z)(ye,V.ALWAYS,"always"),(0,W.Z)(ye,V.LESS,"less"),(0,W.Z)(ye,V.LEQUAL,"lequal"),(0,W.Z)(ye,V.GREATER,"greater"),(0,W.Z)(ye,V.GEQUAL,"gequal"),(0,W.Z)(ye,V.EQUAL,"equal"),(0,W.Z)(ye,V.NOTEQUAL,"notequal"),ye),Ft=(Gt={},(0,W.Z)(Gt,V.FUNC_ADD,"add"),(0,W.Z)(Gt,V.MIN_EXT,"min"),(0,W.Z)(Gt,V.MAX_EXT,"max"),(0,W.Z)(Gt,V.FUNC_SUBTRACT,"subtract"),(0,W.Z)(Gt,V.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Gt),hr=(zt={},(0,W.Z)(zt,V.ZERO,"zero"),(0,W.Z)(zt,V.ONE,"one"),(0,W.Z)(zt,V.SRC_COLOR,"src color"),(0,W.Z)(zt,V.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,W.Z)(zt,V.SRC_ALPHA,"src alpha"),(0,W.Z)(zt,V.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,W.Z)(zt,V.DST_COLOR,"dst color"),(0,W.Z)(zt,V.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,W.Z)(zt,V.DST_ALPHA,"dst alpha"),(0,W.Z)(zt,V.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,W.Z)(zt,V.CONSTANT_COLOR,"constant color"),(0,W.Z)(zt,V.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,W.Z)(zt,V.CONSTANT_ALPHA,"constant alpha"),(0,W.Z)(zt,V.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,W.Z)(zt,V.SRC_ALPHA_SATURATE,"src alpha saturate"),zt),rn=(ue={},(0,W.Z)(ue,V.NEVER,"never"),(0,W.Z)(ue,V.ALWAYS,"always"),(0,W.Z)(ue,V.LESS,"less"),(0,W.Z)(ue,V.LEQUAL,"lequal"),(0,W.Z)(ue,V.GREATER,"greater"),(0,W.Z)(ue,V.GEQUAL,"gequal"),(0,W.Z)(ue,V.EQUAL,"equal"),(0,W.Z)(ue,V.NOTEQUAL,"notequal"),ue),pn=(we={},(0,W.Z)(we,V.ZERO,"zero"),(0,W.Z)(we,V.KEEP,"keep"),(0,W.Z)(we,V.REPLACE,"replace"),(0,W.Z)(we,V.INVERT,"invert"),(0,W.Z)(we,V.INCR,"increment"),(0,W.Z)(we,V.DECR,"decrement"),(0,W.Z)(we,V.INCR_WRAP,"increment wrap"),(0,W.Z)(we,V.DECR_WRAP,"decrement wrap"),we),Sn=(de={},(0,W.Z)(de,V.FRONT,"front"),(0,W.Z)(de,V.BACK,"back"),de),Bn=function(){function $(Re,be){(0,R.Z)(this,$),this.buffer=void 0;var Ke=be.data,Ze=be.usage,Cr=be.type;this.buffer=Re.buffer({data:Ke,usage:ee[Ze||V.STATIC_DRAW],type:ce[Cr||V.UNSIGNED_BYTE]})}return(0,L.Z)($,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(be){var Ke=be.data,Ze=be.offset;this.buffer.subdata(Ke,Ze)}}]),$}(),Kn=B(74902);function Nn($,Re){var be=Object.keys($);if(Object.getOwnPropertySymbols){var Ke=Object.getOwnPropertySymbols($);Re&&(Ke=Ke.filter(function(Ze){return Object.getOwnPropertyDescriptor($,Ze).enumerable})),be.push.apply(be,Ke)}return be}function ra($){for(var Re=1;Re<arguments.length;Re++){var be=arguments[Re]!=null?arguments[Re]:{};Re%2?Nn(Object(be),!0).forEach(function(Ke){(0,W.Z)($,Ke,be[Ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(be)):Nn(Object(be)).forEach(function(Ke){Object.defineProperty($,Ke,Object.getOwnPropertyDescriptor(be,Ke))})}return $}var Ea=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,na=0,ir=!1,Tr=function(){function $(Re,be){var Ke=this;(0,R.Z)(this,$),this.reGl=Re,this.context=be,this.entity=O(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Ze={};this.context.uniforms.forEach(function(jr){var dt=jr.name,pt=jr.type,U=jr.data,I=jr.isReferer,T=jr.storageClass;if(T===J.StorageBuffer){if(I)Ke.textureCache[dt]={data:void 0},Ze["".concat(dt,"Size")]=function(){return U.compiledBundle.context.output.textureSize};else{Ke.textureCache[dt]=Ke.calcDataTexture(dt,pt,U);var Q=Ke.textureCache[dt],bt=Q.textureWidth,kt=Q.isOutput;Ze["".concat(dt,"Size")]=[bt,bt],kt&&(Ke.outputTextureName=dt,Ke.context.needPingpong&&(Ke.outputTextureName="".concat(dt,"Output"),Ke.textureCache[Ke.outputTextureName]=Ke.calcDataTexture(dt,pt,U)))}Ze[dt]=function(){return ir&&console.log("[".concat(Ke.entity,"]: ").concat(dt," ").concat(Ke.textureCache[dt].id)),Ke.textureCache[dt].texture}}else if(T===J.Uniform){if(U&&(Array.isArray(U)||N()(U))&&U.length>16)throw new Error("invalid data type ".concat(pt));Ze[dt]=function(){return jr.data}}});var Cr=this.getOuputDataTexture(),Mr=Cr.textureWidth,Vr=Cr.texelCount;Ze.u_OutputTextureSize=[Mr,Mr],Ze.u_OutputTexelCount=Vr,this.context.output.textureSize=[Mr,Mr];var tn={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Ze,vert:Ea,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(tn)}return(0,L.Z)($,[{key:"run",value:function(){var be=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){be.computeCommand()}),ir&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Re=(0,P.Z)(M().mark(function Ke(){var Ze=this,Cr,Mr,Vr,tn,jr,dt,pt,U;return M().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Cr=Ze.reGl.read()}),!Cr){T.next=6;break}if(Mr=this.getOuputDataTexture(),Vr=Mr.originalDataLength,tn=Mr.elementsPerTexel,jr=Mr.typedArrayConstructor,dt=jr===void 0?Float32Array:jr,pt=[],tn!==4)for(U=0;U<Cr.length;U+=4)tn===1?pt.push(Cr[U]):tn===2?pt.push(Cr[U],Cr[U+1]):pt.push(Cr[U],Cr[U+1],Cr[U+2]);else pt=Cr;return T.abrupt("return",new dt(pt.slice(0,Vr)));case 6:return T.abrupt("return",new Float32Array);case 7:case"end":return T.stop()}},Ke,this)}));function be(){return Re.apply(this,arguments)}return be}()},{key:"confirmInput",value:function(be,Ke){var Ze;this.entity===be.entity?(this.dynamicPingpong=!0,Ze=this):Ze=be,this.textureCache[Ke].id=Ze.getOuputDataTexture().id,this.textureCache[Ke].texture=Ze.getOuputDataTexture().texture,ir&&console.log("[".concat(this.entity,"]: confirm input ").concat(Ke," from model ").concat(Ze.entity,", ").concat(Ze.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(be,Ke){var Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Cr=this.context.uniforms.find(function(jr){var dt=jr.name;return dt===be});if(Cr){var Mr=this.calcDataTexture(be,Cr.type,Ke),Vr=Mr.texture,tn=Mr.data;this.textureCache[be].data=tn,this.textureCache[be].texture=Vr}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var be=this.context.output.name;this.textureCache[be].id=this.getOuputDataTexture().id,this.textureCache[be].texture=this.getOuputDataTexture().texture}var Ke=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Ke,ir&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var be=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=be}},{key:"cloneDataTexture",value:function(be){var Ke=be.data,Ze=be.textureWidth;return ra(ra({},be),{},{id:na++,texture:this.reGl.texture({width:Ze,height:Ze,data:Ke,type:"float"})})}},{key:"calcDataTexture",value:function(be,Ke,Ze){var Cr=1;Ke===X.Vector4FloatArray&&(Cr=4);for(var Mr=[],Vr=0;Vr<Ze.length;Vr+=Cr)Cr===1?Mr.push(Ze[Vr],0,0,0):Cr===2?Mr.push(Ze[Vr],Ze[Vr+1],0,0):Cr===3?Mr.push(Ze[Vr],Ze[Vr+1],Ze[Vr+2],0):Cr===4&&Mr.push(Ze[Vr],Ze[Vr+1],Ze[Vr+2],Ze[Vr+3]);var tn=Ze.length,jr=Math.ceil(tn/Cr),dt=Math.ceil(Math.sqrt(jr)),pt=dt*dt;jr<pt&&Mr.push.apply(Mr,(0,Kn.Z)(new Array((pt-jr)*4).fill(0)));var U=this.reGl.texture({width:dt,height:dt,data:Mr,type:"float"});return{id:na++,data:Mr,originalDataLength:tn,typedArrayConstructor:N()(Ze)?Ze.constructor:void 0,textureWidth:dt,texture:U,texelCount:jr,elementsPerTexel:Cr,isOutput:be===this.context.output.name}}}]),$}(),Jr=function(){function $(Re,be){(0,R.Z)(this,$),this.elements=void 0;var Ke=be.data,Ze=be.usage,Cr=be.type,Mr=be.count;this.elements=Re.elements({data:Ke,usage:ee[Ze||V.STATIC_DRAW],type:ce[Cr||V.UNSIGNED_BYTE],count:Mr})}return(0,L.Z)($,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(be){var Ke=be.data;this.elements.subdata(Ke)}},{key:"destroy",value:function(){this.elements.destroy()}}]),$}(),vn=function(){function $(Re,be){(0,R.Z)(this,$),this.framebuffer=void 0;var Ke=be.width,Ze=be.height,Cr=be.color,Mr=be.colors,Vr=be.depth,tn=be.stencil,jr={width:Ke,height:Ze};Array.isArray(Mr)&&(jr.colors=Mr.map(function(dt){return dt.get()})),Cr&&typeof Cr!="boolean"&&(jr.color=Cr.get()),this.framebuffer=Re.framebuffer(jr)}return(0,L.Z)($,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(be){var Ke=be.width,Ze=be.height;this.framebuffer.resize(Ke,Ze)}}]),$}(),Tn=B(71002),In=B(68630),kn=B.n(In);function Zn($){var Re={};return Object.keys($).forEach(function(be){Yn(be,$[be],Re,"")}),Re}function Yn($,Re,be,Ke){if(Re===null||typeof Re=="number"||typeof Re=="boolean"||Array.isArray(Re)&&typeof Re[0]=="number"||N()(Re)||Re===""||Re.resize!==void 0){be["".concat(Ke&&Ke+".").concat($)]=Re;return}kn()(Re)&&Object.keys(Re).forEach(function(Ze){Yn(Ze,Re[Ze],be,"".concat(Ke&&Ke+".").concat($))}),Array.isArray(Re)&&Re.forEach(function(Ze,Cr){Object.keys(Ze).forEach(function(Mr){Yn(Mr,Ze[Mr],be,"".concat(Ke&&Ke+".").concat($,"[").concat(Cr,"]"))})})}function Ra($,Re){var be=Object.keys($);if(Object.getOwnPropertySymbols){var Ke=Object.getOwnPropertySymbols($);Re&&(Ke=Ke.filter(function(Ze){return Object.getOwnPropertyDescriptor($,Ze).enumerable})),be.push.apply(be,Ke)}return be}function gn($){for(var Re=1;Re<arguments.length;Re++){var be=arguments[Re]!=null?arguments[Re]:{};Re%2?Ra(Object(be),!0).forEach(function(Ke){(0,W.Z)($,Ke,be[Ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(be)):Ra(Object(be)).forEach(function(Ke){Object.defineProperty($,Ke,Object.getOwnPropertyDescriptor(be,Ke))})}return $}var zn=function(){function $(Re,be){(0,R.Z)(this,$),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Re;var Ke=be.vs,Ze=be.fs,Cr=be.defines,Mr=be.attributes,Vr=be.uniforms,tn=be.primitive,jr=be.count,dt=be.elements,pt=be.depth,U=be.blend,I=be.stencil,T=be.cull,Q=be.instances,bt=be.scissor,kt=be.viewport,It={};Vr&&(this.uniforms=Zn(Vr),Object.keys(Vr).forEach(function(Qe){It[Qe]=Re.prop(Qe)}));var Kt={};Object.keys(Mr).forEach(function(Qe){Kt[Qe]=Mr[Qe].get()});var Pe=Cr&&this.generateDefines(Cr)||"",_e={attributes:Kt,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Pe,`
`).concat(Ze),uniforms:It,vert:`
`.concat(Pe,`
`).concat(Ke),primitive:Mt[tn===void 0?V.TRIANGLES:tn]};Q&&(_e.instances=Q),jr&&(_e.count=jr),dt&&(_e.elements=dt.get()),bt&&(_e.scissor=bt),kt&&(_e.viewport=kt),this.initDepthDrawParams({depth:pt},_e),this.initBlendDrawParams({blend:U},_e),this.initStencilDrawParams({stencil:I},_e),this.initCullDrawParams({cull:T},_e),this.drawCommand=Re(_e)}return(0,L.Z)($,[{key:"addUniforms",value:function(be){this.uniforms=gn(gn({},this.uniforms),Zn(be))}},{key:"draw",value:function(be){var Ke=gn(gn({},this.uniforms),Zn(be.uniforms||{})),Ze={};Object.keys(Ke).forEach(function(Cr){var Mr=(0,Tn.Z)(Ke[Cr]);Mr==="boolean"||Mr==="number"||Array.isArray(Ke[Cr])||Ke[Cr].BYTES_PER_ELEMENT?Ze[Cr]=Ke[Cr]:Mr==="string"||(Ze[Cr]=Ke[Cr].get())}),this.drawCommand(Ze)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(be,Ke){var Ze=be.depth;Ze&&(Ke.depth={enable:Ze.enable===void 0?!0:!!Ze.enable,mask:Ze.mask===void 0?!0:!!Ze.mask,func:_r[Ze.func||V.LESS],range:Ze.range||[0,1]})}},{key:"initBlendDrawParams",value:function(be,Ke){var Ze=be.blend;if(Ze){var Cr=Ze.enable,Mr=Ze.func,Vr=Ze.equation,tn=Ze.color,jr=tn===void 0?[0,0,0,0]:tn;Ke.blend={enable:!!Cr,func:{srcRGB:hr[Mr&&Mr.srcRGB||V.SRC_ALPHA],srcAlpha:hr[Mr&&Mr.srcAlpha||V.SRC_ALPHA],dstRGB:hr[Mr&&Mr.dstRGB||V.ONE_MINUS_SRC_ALPHA],dstAlpha:hr[Mr&&Mr.dstAlpha||V.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ft[Vr&&Vr.rgb||V.FUNC_ADD],alpha:Ft[Vr&&Vr.alpha||V.FUNC_ADD]},color:jr}}}},{key:"initStencilDrawParams",value:function(be,Ke){var Ze=be.stencil;if(Ze){var Cr=Ze.enable,Mr=Ze.mask,Vr=Mr===void 0?-1:Mr,tn=Ze.func,jr=tn===void 0?{cmp:V.ALWAYS,ref:0,mask:-1}:tn,dt=Ze.opFront,pt=dt===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:dt,U=Ze.opBack,I=U===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:U;Ke.stencil={enable:!!Cr,mask:Vr,func:gn(gn({},jr),{},{cmp:rn[jr.cmp]}),opFront:{fail:pn[pt.fail],zfail:pn[pt.zfail],zpass:pn[pt.zpass]},opBack:{fail:pn[I.fail],zfail:pn[I.zfail],zpass:pn[I.zpass]}}}}},{key:"initCullDrawParams",value:function(be,Ke){var Ze=be.cull;if(Ze){var Cr=Ze.enable,Mr=Ze.face,Vr=Mr===void 0?V.BACK:Mr;Ke.cull={enable:!!Cr,face:Sn[Vr]}}}},{key:"generateDefines",value:function(be){return Object.keys(be).map(function(Ke){return"#define ".concat(Ke," ").concat(Number(be[Ke]))}).join(`
`)}}]),$}(),Un=function(){function $(Re,be){(0,R.Z)(this,$),this.texture=void 0,this.width=void 0,this.height=void 0;var Ke=be.data,Ze=be.type,Cr=Ze===void 0?V.UNSIGNED_BYTE:Ze,Mr=be.width,Vr=be.height,tn=be.flipY,jr=tn===void 0?!1:tn,dt=be.format,pt=dt===void 0?V.RGBA:dt,U=be.mipmap,I=U===void 0?!1:U,T=be.wrapS,Q=T===void 0?V.CLAMP_TO_EDGE:T,bt=be.wrapT,kt=bt===void 0?V.CLAMP_TO_EDGE:bt,It=be.aniso,Kt=It===void 0?0:It,Pe=be.alignment,_e=Pe===void 0?1:Pe,Qe=be.premultiplyAlpha,Ir=Qe===void 0?!1:Qe,sr=be.mag,Hr=sr===void 0?V.NEAREST:sr,xn=be.min,ze=xn===void 0?V.NEAREST:xn,ur=be.colorSpace,Sr=ur===void 0?V.BROWSER_DEFAULT_WEBGL:ur;this.width=Mr,this.height=Vr;var Nr={width:Mr,height:Vr,type:ce[Cr],format:At[pt],wrapS:Ge[Q],wrapT:Ge[kt],mag:fe[Hr],min:fe[ze],alignment:_e,flipY:jr,colorSpace:Be[Sr],premultiplyAlpha:Ir,aniso:Kt};Ke&&(Nr.data=Ke),typeof I=="number"?Nr.mipmap=Wt[I]:typeof I=="boolean"&&(Nr.mipmap=I),this.texture=Re.texture(Nr)}return(0,L.Z)($,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(be){var Ke=be.width,Ze=be.height;this.texture.resize(Ke,Ze),this.width=Ke,this.height=Ze}},{key:"destroy",value:function(){this.texture.destroy()}}]),$}(),_n=function(){function $(){var Re=this;(0,R.Z)(this,$),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var be=(0,P.Z)(M().mark(function Ke(Ze){return M().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:if(!Ze.uniforms){Mr.next=3;break}return Mr.next=3,Promise.all(Object.keys(Ze.uniforms).map(function(){var Vr=(0,P.Z)(M().mark(function tn(jr){var dt;return M().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(Ze.uniforms[jr]&&Ze.uniforms[jr].load!==void 0)){U.next=5;break}return U.next=3,Ze.uniforms[jr].load();case 3:dt=U.sent,Ze.uniforms[jr]=dt;case 5:case"end":return U.stop()}},tn)}));return function(tn){return Vr.apply(this,arguments)}}()));case 3:return Mr.abrupt("return",new zn(Re.gl,Ze));case 4:case"end":return Mr.stop()}},Ke)}));return function(Ke){return be.apply(this,arguments)}}(),this.createAttribute=function(be){return new Ut(Re.gl,be)},this.createBuffer=function(be){return new Bn(Re.gl,be)},this.createElements=function(be){return new Jr(Re.gl,be)},this.createTexture2D=function(be){return new Un(Re.gl,be)},this.createFramebuffer=function(be){return new vn(Re.gl,be)},this.useFramebuffer=function(be,Ke){Re.gl({framebuffer:be?be.get():null})(Ke)},this.createComputeModel=function(){var be=(0,P.Z)(M().mark(function Ke(Ze){return M().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return Mr.abrupt("return",new Tr(Re.gl,Ze));case 1:case"end":return Mr.stop()}},Ke)}));return function(Ke){return be.apply(this,arguments)}}(),this.clear=function(be){var Ke=be.color,Ze=be.depth,Cr=be.stencil,Mr=be.framebuffer,Vr=Mr===void 0?null:Mr,tn={color:Ke,depth:Ze,stencil:Cr};tn.framebuffer=Vr===null?Vr:Vr.get(),Re.gl.clear(tn)},this.setScissor=function(be){Re.gl&&Re.gl._gl&&(be.enable&&be.box?(Re.gl._gl.enable(V.SCISSOR_TEST),Re.gl._gl.scissor(be.box.x,be.box.y,be.box.width,be.box.height)):Re.gl._gl.disable(V.SCISSOR_TEST),Re.gl._refresh())},this.viewport=function(be){var Ke=be.x,Ze=be.y,Cr=be.width,Mr=be.height;Re.gl&&Re.gl._gl&&(Re.gl._gl.viewport(Ke,Ze,Cr,Mr),Re.gl._refresh())},this.readPixels=function(be){var Ke=be.framebuffer,Ze=be.x,Cr=be.y,Mr=be.width,Vr=be.height,tn={x:Ze,y:Cr,width:Mr,height:Vr};return Ke&&(tn.framebuffer=Ke.get()),Re.gl.read(tn)},this.getCanvas=function(){return Re.$canvas},this.getGLContext=function(){return Re.gl._gl},this.destroy=function(){Re.gl&&(Re.gl.destroy(),Re.inited=!1)}}return(0,L.Z)($,[{key:"init",value:function(){var Re=(0,P.Z)(M().mark(function Ke(Ze){return M().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:if(!this.inited){Mr.next=2;break}return Mr.abrupt("return");case 2:return this.$canvas=Ze.canvas,Mr.next=5,new Promise(function(Vr,tn){Zt()({canvas:Ze.canvas,attributes:{alpha:!0,antialias:Ze.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(dt,pt){(dt||!pt)&&tn(dt),Vr(pt)}})});case 5:this.gl=Mr.sent,this.inited=!0;case 7:case"end":return Mr.stop()}},Ke,this)}));function be(Ke){return Re.apply(this,arguments)}return be}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),$}(),aa=function(){function $(){(0,R.Z)(this,$),this.engine=void 0,this.configService=new q}return(0,L.Z)($,[{key:"setConfig",value:function(be){this.configService.set(be)}},{key:"setEngine",value:function(be){this.engine=be}},{key:"createEntity",value:function(){return O()}},{key:"createKernel",value:function(be){var Ke=new Lt(this.engine,this.configService);return typeof be=="string"?Ke.setBundle(JSON.parse(be)):Ke.setBundle(be),Ke.init(),Ke}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ke=new $;return Ke.setConfig(be),Ke.setEngine(new _n),Ke}}]),$}()},70701:function(Le,F,B){"use strict";B.d(F,{ZP:function(){return t_}});var P={};B.r(P),B.d(P,{GADDI:function(){return bi},Stack:function(){return Eo},breadthFirstSearch:function(){return ee},connectedComponent:function(){return Wt},cosineSimilarity:function(){return It},default:function(){return ai},depthFirstSearch:function(){return rn},detectAllCycles:function(){return Kn},detectAllDirectedCycle:function(){return Bn},detectAllUndirectedCycle:function(){return Sn},detectCycle:function(){return Nn},detectDirectedCycle:function(){return os},dijkstra:function(){return na},findAllPath:function(){return Jr},findShortestPath:function(){return Tr},floydWarshall:function(){return Tn},getAdjMatrix:function(){return st},getDegree:function(){return Ge},getInDegree:function(){return Be},getNeighbors:function(){return Gt},getOutDegree:function(){return _r},iLouvain:function(){return pt},kCore:function(){return I},kMeans:function(){return bt},labelPropagation:function(){return kn},louvain:function(){return jr},minimumSpanningTree:function(){return Sr},nodesCosineSimilarity:function(){return Pe},pageRank:function(){return $t}});var W={};B.r(W),B.d(W,{Line:function(){return Za},applyMatrix:function(){return Ja},compare:function(){return wo},distance:function(){return _o},floydWarshall:function(){return ki},fractionToLine:function(){return ao},getAdjMatrix:function(){return Wo},getBBoxBoundLine:function(){return Vo},getCircleCenterByPoints:function(){return Ka},getCircleIntersectByPoint:function(){return ss},getDegree:function(){return Zi},getEllipseIntersectByPoint:function(){return wn},getLineIntersect:function(){return Lo},getPointsCenter:function(){return Yi},getRectIntersectByPoint:function(){return Uo},intersectBBox:function(){return Yo},invertMatrix:function(){return Ki},isPointInPolygon:function(){return vo},isPointsOverlap:function(){return po},isPolygonsIntersect:function(){return Wi},itemIntersectByLine:function(){return jo},lerp:function(){return ti},lerpArray:function(){return gi},move:function(){return So},pointLineDistance:function(){return la},pointLineSquareDist:function(){return go},pointRectSquareDist:function(){return $i},rotate:function(){return us},scale:function(){return ga},scaleMatrix:function(){return Jo},squareDist:function(){return io},translate:function(){return Xo}});var R={};B.r(R),B.d(R,{cloneBesidesImg:function(){return Po},getAnimateCfgWithCallback:function(){return ys},getBBox:function(){return ha},getComboBBox:function(){return Rs},getLabelPosition:function(){return Ci},getLetterWidth:function(){return cs},getLoopCfgs:function(){return Xa},getTextSize:function(){return ks},plainCombosToTrees:function(){return qs},reconstructTree:function(){return Js},shouldRefreshEdge:function(){return Nf},traverseTree:function(){return wi},traverseTreeUp:function(){return oo},truncateLabelByLength:function(){return Qu}});var L={};B.r(L),B.d(L,{catmullRomToBezier:function(){return D},fillPath:function(){return si},fillPathByDiff:function(){return pa},formatPath:function(){return ts},intersection:function(){return Wn},parsePathArray:function(){return Se},parsePathString:function(){return h},pathToAbsolute:function(){return mt},pathToCurve:function(){return ne},rectPath:function(){return $r}});var k={};B.r(k),B.d(k,{easeBack:function(){return gf},easeBackIn:function(){return nc},easeBackInOut:function(){return gf},easeBackOut:function(){return ac},easeBounce:function(){return Nu},easeBounceIn:function(){return Ul},easeBounceInOut:function(){return Zc},easeBounceOut:function(){return Nu},easeCircle:function(){return Kc},easeCircleIn:function(){return kl},easeCircleInOut:function(){return Kc},easeCircleOut:function(){return cu},easeCubic:function(){return zs},easeCubicIn:function(){return Ou},easeCubicInOut:function(){return zs},easeCubicOut:function(){return fu},easeElastic:function(){return ic},easeElasticIn:function(){return pf},easeElasticInOut:function(){return oc},easeElasticOut:function(){return ic},easeExp:function(){return ec},easeExpIn:function(){return tc},easeExpInOut:function(){return ec},easeExpOut:function(){return Hc},easeLinear:function(){return hs},easePoly:function(){return Lu},easePolyIn:function(){return Zf},easePolyInOut:function(){return Lu},easePolyOut:function(){return $f},easeQuad:function(){return ws},easeQuadIn:function(){return Iu},easeQuadInOut:function(){return ws},easeQuadOut:function(){return uu},easeSin:function(){return Jf},easeSinIn:function(){return Du},easeSinInOut:function(){return Jf},easeSinOut:function(){return $o}});var N={};B.r(N),B.d(N,{calculationItemsBBox:function(){return Nv},cloneEvent:function(){return j0},formatPadding:function(){return Ld},isNaN:function(){return Wu},isViewportChanged:function(){return H0},processParallelEdges:function(){return K0},uniqueId:function(){return Jl}});var E={};B.r(E),B.d(E,{getClosedSpline:function(){return zd},getControlPoint:function(){return Qh},getSpline:function(){return $v},getStarPath:function(){return vy},paddedHull:function(){return tg},pathToPoints:function(){return Gd},pointsToPolygon:function(){return dy},roundedHull:function(){return Ud}});var b={};B.r(b),B.d(b,{defaultSubjectColors:function(){return ky}});var p={};B.r(p),B.d(p,{isForce:function(){return lg}});var m={};B.r(m),B.d(m,{Base:function(){return vu},Circle:function(){return om},Ellipse:function(){return um},Image:function(){return cm},Line:function(){return hm},Marker:function(){return gm},Path:function(){return tv},Polygon:function(){return Sm},Polyline:function(){return Am},Rect:function(){return Om},Text:function(){return Dm}});var g={};B.r(g),B.d(g,{Base:function(){return js},Circle:function(){return zm},Dom:function(){return Wm},Ellipse:function(){return Ym},Image:function(){return jm},Line:function(){return Km},Marker:function(){return $m},Path:function(){return qm},Polygon:function(){return t1},Polyline:function(){return r1},Rect:function(){return s1},Text:function(){return h1}});var M={};B.r(M),B.d(M,{getColorSetsBySubjectColors:function(){return cb},getColorsWithSubjectColor:function(){return iv},mixColor:function(){return bo}});var _={};B.r(_),B.d(_,{arrayToTextureData:function(){return _b},attributesToTextureData:function(){return wb},buildTextureData:function(){return bb},buildTextureDataWithOneEdgeAttr:function(){return xb},buildTextureDataWithTwoEdgeAttr:function(){return Eb},proccessToFunc:function(){return mb},radialLayout:function(){return Sb}});var S={};B.r(S),B.d(S,{gpuDetector:function(){return up}});var O={};B.r(O),B.d(O,{assign:function(){return xc},default:function(){return Yp},defaultI18n:function(){return pv},format:function(){return Wp},parse:function(){return Xp},setGlobalDateI18n:function(){return Pp},setGlobalDateMasks:function(){return Up}});var y=B(70655),d=B(13810),V={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,d.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,d.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},q=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,d.clone)(V);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,d.each)(u,function(c,l){f[l]=(0,d.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),Y=q,X=Y,H="*",J=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[H]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],x=l.callback,w=l.once;w&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),x.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),nt=J,tt=B(35600);function at(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromTranslation(r,t),tt.multiply(i,r,e)}function ct(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromRotation(r,t),tt.multiply(i,r,e)}function ht(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromScaling(r,t),tt.multiply(i,r,e)}function Lt(i,e,t){return tt.multiply(i,t,e)}function St(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":at(t,t,[a[1],a[2]]);break;case"s":ht(t,t,[a[1],a[2]]);break;case"r":ct(t,t,a[1]);break;case"m":Lt(t,t,a[1]);break;default:break}}return t}function Zt(i,e){return i[0]*e[1]-e[0]*i[1]}function Ut(i,e,t){var r=vec2.angle(i,e),n=Zt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function Ot(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var Z=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},st=Z,Et=function(e,t){return e===t},Bt=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),Pt=function(){function i(e){e===void 0&&(e=Et),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Bt(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Bt(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Ht=Pt,le=function(){function i(){this.linkedList=new Ht}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),ye=le,Gt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},zt=function(e,t){return t.filter(function(r){return r.source===e})},ue=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},we=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function de(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Mt=function(e,t,r,n){n===void 0&&(n=!0);var a=de(r),o=new ye,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var x=o.dequeue();a.enter({current:x,previous:f}),Gt(x,u,n?"target":void 0).forEach(function(w){a.allowTraversal({previous:f,current:x,next:w})&&o.enqueue(w)}),a.leave({current:x,previous:f}),f=x};!o.isEmpty();)c()},ee=Mt,ce=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function w(C){u.push(C),s[C.id]=!0;for(var G=Gt(C.id,a),j=function(ot){var lt=G[ot];if(!s[lt]){var wt=r.filter(function(Nt){return Nt.id===lt});wt.length>0&&w(wt[0])}},et=0;et<G.length;++et)j(et)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var x=[];u.length>0;)x.push(u.pop());o.push(x)}}return o},At=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,x=function j(et){u[et.id]=l,f[et.id]=l,l+=1,o.push(et),s[et.id]=!0;for(var rt=Gt(et.id,a,"target").filter(function(Dt){return r.map(function(qt){return qt.id}).indexOf(Dt)>-1}),ot=function(qt){var ve=rt[qt];if(!u[ve]&&u[ve]!==0){var ae=r.filter(function(Me){return Me.id===ve});ae.length>0&&j(ae[0]),f[et.id]=Math.min(f[et.id],f[ve])}else s[ve]&&(f[et.id]=Math.min(f[et.id],u[ve]))},lt=0;lt<rt.length;lt++)ot(lt);if(f[et.id]===u[et.id]){for(var wt=[];o.length>0;){var Nt=o.pop();if(s[Nt.id]=!1,wt.push(Nt),Nt===et)break}wt.length>0&&c.push(wt)}},w=0,C=r;w<C.length;w++){var G=C[w];!u[G.id]&&u[G.id]!==0&&x(G)}return c};function Wt(i,e){return e?At(i):ce(i)}var fe=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},Ge=fe,Be=function(e,t){var r=fe(e);return r[t]?fe(e)[t].inDegree:0},_r=function(e,t){var r=fe(e);return r[t]?fe(e)[t].outDegree:0};function Ft(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function hr(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;Gt(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&hr(i,o,e,r)}),r.leave({current:e,previous:t})}function rn(i,e,t){hr(i,e,"",Ft(t))}var pn=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(x){var w=x.current,C=x.previous;if(s[w]){t={};for(var G=w,j=C;j!==w;)t[G]=j,G=j,j=a[j];t[G]=j}else s[w]=w,delete o[w],a[w]=C},leave:function(x){var w=x.current;u[w]=w,delete s[w]},allowTraversal:function(x){var w=x.next;return t?!1:!u[w]}};Object.keys(o).length;){var c=Object.keys(o)[0];rn(e,c,f)}return t},Sn=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Wt(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],x=l.id,w=[l],C=(n={},n[x]=l,n),G=(a={},a[x]=new Set,a);w.length>0;)for(var j=w.pop(),et=j.id,rt=Gt(et,e.edges),ot=function(Nt){var Dt,qt=rt[Nt],ve=e.nodes.find(function(Dr){return Dr.id===qt});if(qt===et)o.push((Dt={},Dt[qt]=j,Dt));else if(!(qt in G))C[qt]=j,w.push(ve),G[qt]=new Set([j]);else if(!G[et].has(ve)){for(var ae=!0,Me=[ve,j],Fe=C[et];G[qt].size&&!G[qt].has(Fe)&&(Me.push(Fe),Fe!==C[Fe.id]);)Fe=C[Fe.id];if(Me.push(Fe),t&&r?(ae=!1,Me.findIndex(function(Dr){return t.indexOf(Dr.id)>-1})>-1&&(ae=!0)):t&&!r&&Me.findIndex(function(Dr){return t.indexOf(Dr.id)>-1})>-1&&(ae=!1),ae){for(var wr={},Yr=1;Yr<Me.length;Yr+=1)wr[Me[Yr-1].id]=Me[Yr];Me.length&&(wr[Me[Me.length-1].id]=Me[0]),o.push(wr)}G[qt].add(j)}},lt=0;lt<rt.length;lt+=1)ot(lt)}return o},Bn=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(Fe){for(var wr=[Fe];wr.length>0;){var Yr=wr.pop();a.has(Yr)&&(a.delete(Yr),o[Yr.id].forEach(function(Dr){wr.push(Dr)}),o[Yr.id].clear())}},l=function Me(Fe,wr,Yr){var Dr=!1;if(t&&r===!1&&t.indexOf(Fe.id)>-1)return Dr;n.push(Fe),a.add(Fe);for(var pr=Yr[Fe.id],an=0;an<pr.length;an+=1){var en=u[pr[an]];if(en===wr){for(var yr={},Or=1;Or<n.length;Or+=1)yr[n[Or-1].id]=n[Or];n.length&&(yr[n[n.length-1].id]=n[0]),s.push(yr),Dr=!0}else a.has(en)||Me(en,wr,Yr)&&(Dr=!0)}if(Dr)c(Fe);else for(var an=0;an<pr.length;an+=1){var en=u[pr[an]];o[en.id].has(Fe)||o[en.id].add(Fe)}return n.pop(),Dr},x=e.nodes,w=x===void 0?[]:x,C=0;C<w.length;C+=1){var G=w[C],j=G.id;f[j]=C,u[C]=G}if(t&&r)for(var et=function(Fe){var wr=t[Fe];f[w[Fe].id]=f[wr],f[wr]=0,u[0]=w.find(function(Yr){return Yr.id===wr}),u[f[w[Fe].id]]=w[Fe]},C=0;C<t.length;C++)et(C);for(var rt=function(Fe){for(var wr,Yr,Dr=1/0,pr=0;pr<Fe.length;pr+=1)for(var an=Fe[pr],en=0;en<an.length;en++){var yr=f[an[en].id];yr<Dr&&(Dr=yr,Yr=pr)}for(var Or=Fe[Yr],Kr=[],pr=0;pr<Or.length;pr+=1){var Zr=Or[pr];Kr[Zr.id]=[];for(var fn=0,bn=Gt(Zr.id,e.edges,"target").filter(function(Ua){return Or.map(function(La){return La.id}).indexOf(Ua)>-1});fn<bn.length;fn++){var Vn=bn[fn];Vn===Zr.id&&!(r===!1&&t.indexOf(Zr.id)>-1)?s.push((wr={},wr[Zr.id]=Zr,wr)):Kr[Zr.id].push(f[Vn])}}return{component:Or,adjList:Kr,minIdx:Dr}},ot=0;ot<w.length;){var lt=w.filter(function(Me){return f[Me.id]>=ot}),wt=At({nodes:lt,edges:e.edges}).filter(function(Me){return Me.length>1});if(wt.length===0)break;var Nt=rt(wt),Dt=Nt.minIdx,qt=Nt.adjList,ve=Nt.component;if(ve.length>1){ve.forEach(function(Me){o[Me.id]=new Set});var ae=u[Dt];if(t&&r&&t.indexOf(ae.id)===-1)return s;l(ae,ae,qt),ot=Dt+1}else break}return s},Kn=function(e,t,r,n){return n===void 0&&(n=!0),t?Bn(e,r,n):Sn(e,r,n)},Nn=pn,ra=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Ea=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},x={};o.forEach(function(ot,lt){var wt=ot.id;f.push(wt),l[wt]=1/0,wt===t&&(l[wt]=0)});for(var w=o.length,C=function(lt){var wt=ra(l,o,c),Nt=wt.id;if(c[Nt]=!0,l[Nt]===1/0)return"continue";var Dt=[];r?Dt=zt(Nt,u):Dt=ue(Nt,u),Dt.forEach(function(qt){var ve=qt.target,ae=qt.source,Me=ve===Nt?ae:ve,Fe=n&&qt[n]?qt[n]:1;l[Me]>l[wt.id]+Fe?(l[Me]=l[wt.id]+Fe,x[Me]=[wt.id]):l[Me]===l[wt.id]+Fe&&x[Me].push(wt.id)})},G=0;G<w;G++)C(G);x[t]=[t];var j={};for(var et in l)l[et]!==1/0&&ir(t,et,x,j);var rt={};for(var et in j)rt[et]=j[et][0];return{length:l,path:rt,allPath:j}},na=Ea;function ir(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=ir(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,d.isArray)(l)?n.push((0,y.__spreadArray)((0,y.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var Tr=function(e,t,r,n,a){var o=na(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},Jr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],x=n?Gt(t,s,"target"):Gt(t,s);for(c.push(x);u.length>0&&c.length>0;){var w=c[c.length-1];if(w.length){var C=w.shift();C&&(u.push(C),f[C]=!0,x=n?Gt(C,s,"target"):Gt(C,s),c.push(x.filter(function(et){return!f[et]})))}else{var G=u.pop();f[G]=!1,c.pop();continue}if(u[u.length-1]===r){var j=u.map(function(rt){return rt});l.push(j);var G=u.pop();f[G]=!1,c.pop()}}return l},vn=function(e,t){for(var r=st(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Tn=vn,In=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(lt,wt){var Nt=we();lt.clusterId=Nt,f[Nt]={id:Nt,nodes:[lt]},c[lt.id]={node:lt,idx:wt}});var l=st(e,t),x=[],w={};l.forEach(function(lt,wt){var Nt=0,Dt=o[wt].id;w[Dt]={},lt.forEach(function(qt,ve){if(qt){Nt+=qt;var ae=o[ve].id;w[Dt][ae]=qt}}),x.push(Nt)});for(var C=0,G=function(){var wt=!1;if(o.forEach(function(Nt){var Dt={};Object.keys(w[Nt.id]).forEach(function(Dr){var pr=w[Nt.id][Dr],an=c[Dr].node,en=an.clusterId;Dt[en]||(Dt[en]=0),Dt[en]+=pr});var qt=-1/0,ve=[];if(Object.keys(Dt).forEach(function(Dr){qt<Dt[Dr]?(qt=Dt[Dr],ve=[Dr]):qt===Dt[Dr]&&ve.push(Dr)}),!(ve.length===1&&ve[0]===Nt.clusterId)){var ae=ve.indexOf(Nt.clusterId);if(ae>=0&&ve.splice(ae,1),ve&&ve.length){wt=!0;var Me=f[Nt.clusterId],Fe=Me.nodes.indexOf(Nt);Me.nodes.splice(Fe,1);var wr=Math.floor(Math.random()*ve.length),Yr=f[ve[wr]];Yr.nodes.push(Nt),Nt.clusterId=Yr.id}}}),!wt)return"break";C++};C<n;){var j=G();if(j==="break")break}Object.keys(f).forEach(function(lt){var wt=f[lt];(!wt.nodes||!wt.nodes.length)&&delete f[lt]});var et=[],rt={};u.forEach(function(lt){var wt=lt.source,Nt=lt.target,Dt=lt[r]||1,qt=c[wt].node.clusterId,ve=c[Nt].node.clusterId,ae="".concat(qt,"---").concat(ve);if(rt[ae])rt[ae].weight+=Dt,rt[ae].count++;else{var Me={source:qt,target:ve,weight:Dt,count:1};rt[ae]=Me,et.push(Me)}});var ot=[];return Object.keys(f).forEach(function(lt){ot.push(f[lt])}),{clusters:ot,clusterEdges:et}},kn=In,Zn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,d.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),Yn=Zn,Ra=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,gn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,zn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(Ra)&&!"".concat(a.properties[o]).match(gn)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},Un=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},_n=function(e){for(var t=zn(e),r=[],n=0;n<e.length;n++)r[n]=Un(e[n].properties,t);return r},aa=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},$={getAllSortProperties:zn,getPropertyWeight:_n,getAllProperties:aa},Re;(function(i){i.EuclideanDistance="euclideanDistance"})(Re||(Re={}));var be=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,d.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,d.uniq)(s))}),a},Ke=function(e,t,r){var n=be(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var x=u[l],w=n[l],C=w.findIndex(function(et){return x===et}),G=[];if(s)G.push(x);else for(var j=0;j<w.length;j++)j===C?G.push(1):G.push(0);c=c.concat(G)}),a[f]=c}),a},Ze=function(e,t,r,n){r===void 0&&(r=Re.EuclideanDistance);var a=0;switch(r){case Re.EuclideanDistance:a=new Yn(e).euclideanDistance(new Yn(t));break;default:break}return a},Cr={getAllKeyValueMap:be,oneHot:Ke,getDistance:Ze},Mr=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var x=t[u][c]||0,w=r[u]||0,C=r[c]||0;s+=x-w*C/o}}return s*=1/o,s},Vr=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new Yn([]),a=0;a<r;a++)n=n.add(new Yn(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new Yn(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new Yn(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var x=new Yn(t[l]);c[a][l]=u.squareEuclideanDistance(x),e[a].clusterInertial+=c[a][l]}}for(var w=0,C=2*r*s,a=0;a<r;a++)for(var G=e[a].clusterId,l=0;l<r;l++){var j=e[l].clusterId;if(!(a===l||G!==j)){var et=e[a].clusterInertial*e[l].clusterInertial/Math.pow(C,2)-c[a][l]/C;w+=et}}return Number(w.toFixed(4))},tn=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,x=e.edges,w=x===void 0?[]:x,C=[];if(a){l.forEach(function(yr,Or){yr.properties=yr.properties||{},yr.originIndex=Or});var G=[];l.every(function(yr){return yr.hasOwnProperty("nodeType")})&&(G=Array.from(new Set(l.map(function(yr){return yr.nodeType}))),l.forEach(function(yr){yr.properties.nodeType=G.findIndex(function(Or){return Or===yr.nodeType})}));var j=aa(l,o);C=Ke(j,s,u)}var et=1,rt={},ot={};l.forEach(function(yr,Or){var Kr=String(et++);yr.clusterId=Kr,rt[Kr]={id:Kr,nodes:[yr]},ot[yr.id]={node:yr,idx:Or}});var lt=st(e,t),wt=[],Nt={},Dt=0;lt.forEach(function(yr,Or){var Kr=0,Zr=l[Or].id;Nt[Zr]={},yr.forEach(function(fn,bn){if(fn){Kr+=fn;var Vn=l[bn].id;Nt[Zr][Vn]=fn,Dt+=fn}}),wt.push(Kr)}),Dt/=2;for(var qt=1/0,ve=1/0,ae=0,Me=[],Fe={};;){a&&l.every(function(yr){return yr.hasOwnProperty("properties")})?qt=Mr(l,lt,wt,Dt)+Vr(l,C)*f:qt=Mr(l,lt,wt,Dt),ae===0&&(ve=qt,Me=l,Fe=rt);var wr=qt>0&&qt>ve&&qt-ve<n;if(qt>ve&&(Me=l.map(function(yr){return{node:yr,clusterId:yr.clusterId}}),Fe=(0,d.clone)(rt),ve=qt),wr||ae>100)break;ae++,Object.keys(rt).forEach(function(yr){var Or=0;w.forEach(function(Kr){var Zr=Kr.source,fn=Kr.target,bn=ot[Zr].node.clusterId,Vn=ot[fn].node.clusterId;(bn===yr&&Vn!==yr||Vn===yr&&bn!==yr)&&(Or=Or+(Kr[r]||1))}),rt[yr].sumTot=Or}),l.forEach(function(yr,Or){var Kr=rt[yr.clusterId],Zr=0,fn,bn=wt[Or]/(2*Dt),Vn=0,sa=Kr.nodes;sa.forEach(function(co){var lo=ot[co.id].idx;Vn+=lt[Or][lo]||0});var Ua=Vn-Kr.sumTot*bn,La=sa.filter(function(co){return co.id!==yr.id}),Wa=[];La.forEach(function(co,lo){Wa[lo]=C[co.originIndex]});var ja=Vr(La,C)*f,vi=Nt[yr.id];if(Object.keys(vi).forEach(function(co){var lo=ot[co].node,Os=lo.clusterId;if(Os!==yr.clusterId){var Go=rt[Os],ns=Go.nodes;if(!(!ns||!ns.length)){var ba=0;ns.forEach(function(_a){var Aa=ot[_a.id].idx;ba+=lt[Or][Aa]||0});var Ga=ba-Go.sumTot*bn,va=ns.concat([yr]),za=[];va.forEach(function(_a,Aa){za[Aa]=C[_a.originIndex]});var $a=Vr(va,C)*f,Dn=Ga-Ua;a&&(Dn=Ga+$a-(Ua+ja)),Dn>Zr&&(Zr=Dn,fn=Go)}}}),Zr>0){fn.nodes.push(yr);var ni=yr.clusterId;yr.clusterId=fn.id;var Zs=Kr.nodes.indexOf(yr);Kr.nodes.splice(Zs,1);var fo=0,$s=0;w.forEach(function(co){var lo=co.source,Os=co.target,Go=ot[lo].node.clusterId,ns=ot[Os].node.clusterId;(Go===fn.id&&ns!==fn.id||ns===fn.id&&Go!==fn.id)&&(fo=fo+(co[r]||1)),(Go===ni&&ns!==ni||ns===ni&&Go!==ni)&&($s=$s+(co[r]||1))}),fn.sumTot=fo,Kr.sumTot=$s}})}var Yr={},Dr=0;Object.keys(Fe).forEach(function(yr){var Or=Fe[yr];if(!Or.nodes||!Or.nodes.length){delete Fe[yr];return}var Kr=String(Dr+1);Kr!==yr&&(Or.id=Kr,Or.nodes=Or.nodes.map(function(Zr){return{id:Zr.id,clusterId:Kr}}),Fe[Kr]=Or,Yr[yr]=Kr,delete Fe[yr],Dr++)}),Me.forEach(function(yr){var Or=yr.node,Kr=yr.clusterId;Or&&(Or.clusterId=Kr,Or.clusterId&&Yr[Or.clusterId]&&(Or.clusterId=Yr[Or.clusterId]))});var pr=[],an={};w.forEach(function(yr){var Or=yr.source,Kr=yr.target,Zr=yr[r]||1,fn=ot[Or].node.clusterId,bn=ot[Kr].node.clusterId;if(!(!fn||!bn)){var Vn="".concat(fn,"---").concat(bn);if(an[Vn])an[Vn].weight+=Zr,an[Vn].count++;else{var sa={source:fn,target:bn,weight:Zr,count:1};an[Vn]=sa,pr.push(sa)}}});var en=[];return Object.keys(Fe).forEach(function(yr){en.push(Fe[yr])}),{clusters:en,clusterEdges:pr}},jr=tn,dt=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),jr(e,t,r,n,!0,a,o,s,u)},pt=dt,U=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,d.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var x=Ge({nodes:o,edges:u}),w=Object.keys(x);w.sort(function(j,et){var rt,ot;return((rt=x[j])===null||rt===void 0?void 0:rt.degree)-((ot=x[et])===null||ot===void 0?void 0:ot.degree)});var C=w[0];if(!o.length||((r=x[C])===null||r===void 0?void 0:r.degree)>=t)return"break";var G=o.findIndex(function(j){return j.id===C});o.splice(G,1),u=u.filter(function(j){return!(j.source===C||j.target===C)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},I=U,T=function(e,t,r){var n=[];switch(e){case Re.EuclideanDistance:n=t[r];break;default:n=[];break}return n},Q=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Re.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Re.EuclideanDistance&&!u.every(function(Kr){return Kr.hasOwnProperty(r)}))return l;var x=[],w=[];if(o===Re.EuclideanDistance&&(x=aa(u,r),w=Ke(x,n,a)),!w.length)return l;for(var C=(0,d.uniq)(w.map(function(Kr){return Kr.join("")})),G=Math.min(t,u.length,C.length),j=0;j<u.length;j++)u[j].originIndex=j;for(var et=[],rt=[],ot=[],j=0;j<G;j++)if(j===0){var lt=Math.floor(Math.random()*u.length);switch(o){case Re.EuclideanDistance:et[j]=w[lt];break;default:et[j]=[];break}rt.push(lt),ot[j]=[u[lt]],u[lt].clusterId=String(j)}else{for(var wt=-1/0,Nt=0,Dt=function(fn){if(!rt.includes(fn)){for(var bn=0,Vn=0;Vn<et.length;Vn++){var sa=0;switch(o){case Re.EuclideanDistance:sa=Ze(w[u[fn].originIndex],et[Vn],o);break;default:break}bn+=sa}var Ua=bn/et.length;Ua>wt&&!et.find(function(La){return(0,d.isEqual)(La,T(o,w,u[fn].originIndex))})&&(wt=Ua,Nt=fn)}},qt=0;qt<u.length;qt++)Dt(qt);et[j]=T(o,w,Nt),rt.push(Nt),ot[j]=[u[Nt]],u[Nt].clusterId=String(j)}for(var ve=0;;){for(var j=0;j<u.length;j++){var ae=0,Me=1/0;if(!(ve===0&&rt.includes(j))){for(var Fe=0;Fe<et.length;Fe++){var wr=0;switch(o){case Re.EuclideanDistance:wr=Ze(w[j],et[Fe],o);break;default:break}wr<Me&&(Me=wr,ae=Fe)}if(u[j].clusterId!==void 0)for(var Yr=ot[Number(u[j].clusterId)].length-1;Yr>=0;Yr--)ot[Number(u[j].clusterId)][Yr].id===u[j].id&&ot[Number(u[j].clusterId)].splice(Yr,1);u[j].clusterId=String(ae),ot[ae].push(u[j])}}for(var Dr=!1,j=0;j<ot.length;j++){for(var pr=ot[j],an=new Yn([]),Fe=0;Fe<pr.length;Fe++)an=an.add(new Yn(w[pr[Fe].originIndex]));var en=an.avg(pr.length);en.equal(new Yn(et[j]))||(Dr=!0,et[j]=en.getArr())}if(ve++,u.every(function(Kr){return Kr.clusterId!==void 0})&&Dr||ve>=1e3)break}var yr=[],Or={};return c.forEach(function(Kr){var Zr,fn,bn=Kr.source,Vn=Kr.target,sa=(Zr=u.find(function(ja){return ja.id===bn}))===null||Zr===void 0?void 0:Zr.clusterId,Ua=(fn=u.find(function(ja){return ja.id===Vn}))===null||fn===void 0?void 0:fn.clusterId,La="".concat(sa,"---").concat(Ua);if(Or[La])Or[La].count++;else{var Wa={source:sa,target:Ua,count:1};Or[La]=Wa,yr.push(Wa)}}),{clusters:ot,clusterEdges:yr}},bt=Q,kt=function(e,t){var r=new Yn(t),n=r.norm2(),a=new Yn(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},It=kt,Kt=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,d.clone)(e.filter(function(x){return x.id!==t.id})),s=e.findIndex(function(x){return x.id===t.id}),u=aa(e,r),f=Ke(u,n,a),c=f[s],l=[];return o.forEach(function(x,w){if(x.id!==t.id){var C=f[w],G=It(C,c);l.push(G),x.cosineSimilarity=G}}),o.sort(function(x,w){return w.cosineSimilarity-x.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},Pe=Kt,_e=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),Qe=_e,Ir=function(e,t){return e-t},sr=function(){function i(e){e===void 0&&(e=Ir),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Hr=sr,xn=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(j,et){return t?j.weight-et.weight:0},l=new Hr(c);for(ue(u.id,s).forEach(function(G){l.insert(G)});!l.isEmpty();){var x=l.delMin(),w=x.source,C=x.target;f.has(w)&&f.has(C)||(r.push(x),f.has(w)||(f.add(w),ue(w,s).forEach(function(G){l.insert(G)})),f.has(C)||(f.add(C),ue(C,s).forEach(function(G){l.insert(G)})))}return r},ze=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(w){return w});t&&u.sort(function(w,C){return w.weight-C.weight});for(var f=new Qe(a.map(function(w){return w.id}));u.length>0;){var c=u.shift(),l=c.source,x=c.target;f.connected(l,x)||(r.push(c),f.union(l,x))}return r},ur=function(e,t,r){var n={prim:xn,kruskal:ze};return r?n[r](e,t):ze(e,t)},Sr=ur,Nr=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,x,w={},C={},G=0;G<l;++G){var j=u[G],et=j.id;w[et]=1/l,C[et]=1/l}for(var rt=Ge(e);o>0&&n>t;){a=0;for(var G=0;G<l;++G){var j=u[G],et=j.id;if(x=0,rt[j.id].inDegree===0)w[et]=0;else{for(var ot=Gt(et,c,"source"),lt=0;lt<ot.length;++lt){var wt=ot[lt],Nt=rt[wt].outDegree;Nt>0&&(x+=C[wt]/Nt)}w[et]=r*x,a+=w[et]}}a=(1-a)/l,n=0;for(var G=0;G<l;++G){var j=u[G],et=j.id;x=w[et]+a,n+=Math.abs(x-C[et]),C[et]=x}o-=1}return C},$t=Nr,Ct=-1,te=-1,ge="-1",ie="-1",Te=-1,Je="-1",tr=function(){function i(e,t,r,n){e===void 0&&(e=Ct),t===void 0&&(t=te),r===void 0&&(r=te),n===void 0&&(n=ge),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Gr=function(){function i(e,t){e===void 0&&(e=te),t===void 0&&(t=ie),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),cn=function(){function i(e,t,r){e===void 0&&(e=te),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Gr(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new tr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new tr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),qr=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||ie,edgeLabel:n||ge,nodeLabel2:a||ie}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),Fn=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new qr(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=Te),t===void 0&&(t=!1);var r=new cn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==ie&&r.addNode(a,u),c!==ie&&r.addNode(o,c),u!==ie&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),Mn=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),ia=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,x=l===void 0?!1:l,w=e.verbose,C=w===void 0?!1:w;this.graphs=t,this.dfsCode=new Fn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=x,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=C,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var x=f[l],w=o[x.to].label;t.to===x.to||r>w||n.hasNode(o[x.to])||(t.label<x.label||t.label===x.label&&s<=w)&&a.push(x)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(Te,r),a=n.nodeMap,o=new Fn,s={};n.nodes.forEach(function(l){var x=e.findForwardRootEdges(n,l);x.forEach(function(w){var C=a[w.to],G="".concat(l.label,"-").concat(w.label,"-").concat(C.label);s[G]||(s[G]={projected:[],nodeLabel1:l.label,edgeLabel:w.label,nodeLabel2:C.label});var j={graphId:n.id,edge:w,preNode:null};s[G].projected.push(j)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new qr(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(x){for(var w=o.buildRmpath(),C=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,G=o.dfsEdgeList[w[0]].toNode,j={},et=!1,rt=0,ot=r?-1:0,lt=function(an){if(et)return"break";x.forEach(function(en){var yr=new Mn(en),Or=e.findBackwardEdge(n,yr.edges[w[an]],yr.edges[w[0]],yr);Or&&(j[Or.label]||(j[Or.label]={projected:[],edgeLabel:Or.label}),j[Or.label].projected.push({graphId:n.id,edge:j,preNode:en}),rt=o.dfsEdgeList[w[an]].fromNode,et=!0)})},wt=w.length-1;wt>ot;wt--){var Nt=lt(wt);if(Nt==="break")break}if(et){var Dt=e.findMinLabel(j);o.dfsEdgeList.push(new qr(G,rt,ie,Dt.edgeLabel,ie));var qt=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[qt]!==o.dfsEdgeList[qt]?!1:l(j[Dt.edgeLabel].projected)}var ve={};et=!1;var ae=0;x.forEach(function(pr){var an=new Mn(pr),en=e.findForwardPureEdges(n,an.edges[w[0]],C,an);en.length>0&&(et=!0,ae=G,en.forEach(function(yr){var Or="".concat(yr.label,"-").concat(a[yr.to].label);ve[Or]||(ve[Or]={projected:[],edgeLabel:yr.label,nodeLabel2:a[yr.to].label}),ve[Or].projected.push({graphId:n.id,edge:yr,preNode:pr})}))});for(var Me=w.length,Fe=function(an){if(et)return"break";var en=w[an];x.forEach(function(yr){var Or=new Mn(yr),Kr=e.findForwardRmpathEdges(n,Or.edges[en],C,Or);Kr.length>0&&(et=!0,ae=o.dfsEdgeList[en].fromNode,Kr.forEach(function(Zr){var fn="".concat(Zr.label,"-").concat(a[Zr.to].label);ve[fn]||(ve[fn]={projected:[],edgeLabel:Zr.label,nodeLabel2:a[Zr.to].label}),ve[fn].projected.push({graphId:n.id,edge:Zr,preNode:yr})}))})},wt=0;wt<Me;wt++){var wr=Fe(wt);if(wr==="break")break}if(!et)return!0;var Yr=e.findMinLabel(ve);o.dfsEdgeList.push(new qr(ae,G+1,ie,Yr.edgeLabel,Yr.nodeLabel2));var Dr=o.dfsEdgeList.length-1;return t.dfsEdgeList[Dr]!==o.dfsEdgeList[Dr]?!1:l(ve["".concat(Yr.edgeLabel,"-").concat(Yr.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,d.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],x=l.nodeMap,w=new Mn(c),C=a.length-1;C>=0;C--){var G=t.findBackwardEdge(l,w.edges[a[C]],w.edges[a[0]],w);if(G){var j="".concat(t.dfsCode.dfsEdgeList[a[C]].fromNode,"-").concat(G.label);f[j]||(f[j]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[C]].fromNode,edgeLabel:G.label}),f[j].projected.push({graphId:c.graphId,edge:G,preNode:c})}}if(!(n>=t.maxNodeNum)){var et=t.findForwardPureEdges(l,w.edges[a[0]],s,w);et.forEach(function(ot){var lt="".concat(o,"-").concat(ot.label,"-").concat(x[ot.to].label);u[lt]||(u[lt]={projected:[],fromNodeId:o,edgeLabel:ot.label,nodeLabel2:x[ot.to].label}),u[lt].projected.push({graphId:c.graphId,edge:ot,preNode:c})});for(var rt=function(lt){var wt=t.findForwardRmpathEdges(l,w.edges[a[lt]],s,w);wt.forEach(function(Nt){var Dt="".concat(t.dfsCode.dfsEdgeList[a[lt]].fromNode,"-").concat(Nt.label,"-").concat(x[Nt.to].label);u[Dt]||(u[Dt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[lt]].fromNode,edgeLabel:Nt.label,nodeLabel2:x[Nt.to].label}),u[Dt].projected.push({graphId:c.graphId,edge:Nt,preNode:c})})},C=0;C<a.length;C++)rt(C)}}),Object.keys(f).forEach(function(c){var l=f[c],x=l.toNodeId,w=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new qr(o,x,"-1",w,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],x=l.fromNodeId,w=l.edgeLabel,C=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new qr(x,o+1,ie,w,C)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(x,w){var C=x.label,G="".concat(f,"-").concat(C);if(!s[G]){var j=a[C]||0;j++,a[C]=j}s[G]={graphKey:f,label:C},x.edges.forEach(function(et){var rt=C,ot=l[et.to].label;if(!t&&rt>ot){var lt=ot;ot=rt,rt=lt}var wt=et.label,Nt="".concat(f,"-").concat(rt,"-").concat(wt,"-").concat(ot),Dt="".concat(rt,"-").concat(wt,"-").concat(ot);if(!o[Dt]){var qt=o[Dt]||0;qt++,o[Dt]=qt}u[Nt]={graphId:f,nodeLabel1:rt,edgeLabel:wt,nodeLabel2:ot}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],x="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[x]||(n[x]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var w={graphId:a,edge:c,preNode:null};n[x].projected.push(w)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new qr(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),Sa=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new cn(s,!0,t),c={};u.nodes.forEach(function(l,x){f.addNode(x,l[r]),c[l.id]=x}),u.edges.forEach(function(l,x){var w=c[l.source],C=c[l.target];f.addEdge(-1,w,C,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Ca=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},ca="cluster",ho=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?ca:a,s=e.edgeLabelProp,u=s===void 0?ca:s,f=Sa(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,x=e.minNodeNum,w=e.verbose,C=e.top,G={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:x,top:C,verbose:w,directed:n},j=new ia(G);j.run();var et=Ca(j.frequentSubgraphs,o,u);return et},qa=ho,Ha=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Ni(o,s,u,r,n))}),a},Ni=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},qo=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,x=0,w=f.nodeIdxs,C=f.neighborNum-1;l<o;){for(var G=w[1+Math.floor(Math.random()*C)],j=0;(s["".concat(c,"-").concat(G)]||s["".concat(G,"-").concat(c)])&&(G=Math.floor(Math.random()*t),j++,!(j>2*t)););if(j<2*t&&(s["".concat(c,"-").concat(G)]={start:c,end:G,distance:a[c][G]},l++,u++,u>=r))return s;if(x++,x>2*t)break}if(l<o){var et=o-l;o=(o+et)/(t-c-1)}}),s},Pi=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var x=new Set(l),w=c.filter(function(rt){return x.has(rt)});if(!(!w||!w.length)){for(var C={},G=w.length,j=0;j<G;j++){var et=a[w[j]];n[o].nodes.push(et),C[et.id]=!0}r.edges.forEach(function(rt){C[rt.source]&&C[rt.target]&&n[o].edges.push(rt)})}}}}),n},zi=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],x=t==null?void 0:t.nodes[0][r],w=t==null?void 0:t.nodes[1][r],C=t==null?void 0:t.edges[0][n];f[n]===C&&(c===x&&l===w||c===w&&l===x)&&u++}),u)},ua=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(rt,ot){return c[rt]-c[ot]}),x=10,w=[];l.forEach(function(rt,ot){w[ot%x]||(w[ot%x]={graphs:[],totalCount:0,aveCount:0}),w[ot%x].graphs.push(rt),w[ot%x].totalCount+=c[rt]});var C=0,G=[];w.forEach(function(rt){var ot=rt.totalCount/rt.graphs.length;rt.aveCount=ot,G.push(ot);var lt=0,wt=rt.length;rt.graphs.forEach(function(Nt,Dt){var qt=c[Nt];rt.graphs.forEach(function(ve,ae){Dt!==ae&&(lt+=Math.abs(qt-c[ve]))})}),lt/=wt*(wt-1)/2,C+=lt}),C/=w.length;var j=0;G.forEach(function(rt,ot){G.forEach(function(lt,wt){ot!==wt&&(j+=Math.abs(rt-lt))}),j/=G.length*(G.length-1)/2});var et=j-C;n<et&&(n=et,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},ro=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},zo=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(we)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},Da=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,x=o[c];a["".concat(f,"-").concat(l)]=x,r||(a["".concat(l,"-").concat(f)]=x)}}),a},Co=function(e,t,r,n,a,o,s,u,f,c,l){var x,w="".concat(t.id,"-").concat(r.id);if(c&&c[w])return c[w];var C=l?l[w]:void 0;if(!C){var G=(x={},x[w]={start:n[t.id].idx,end:n[r.id].idx,distance:a},x);l=Pi(G,o,e,l),C=l[w]}return zi(C,s,u,f)},To=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var x=r[l.id].degree;u>x&&(u=x);var w=r[l.id].inDegree;f>w&&(f=w);var C=r[l.id].outDegree;c>C&&(c=C)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Io=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=Tn(e,r),l=Tn(t,r),x=Da(e.nodes,c,r),w=Da(t.nodes,l,r),C=ro(e.nodes,o),G=C.nodeMap,j=C.nodeLabelMap,et=ro(t.nodes,o),rt=et.nodeMap,ot=et.nodeLabelMap;zo(e.edges,s,G);var lt=zo(t.edges,s,rt).edgeLabelMap,wt=[];l==null||l.forEach(function(ba){wt=wt.concat(ba)}),a||(a=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],wt,!1),[2],!1))),n||(n=a);var Nt=Ha(e,c,o,n),Dt=Ha(t,l,o,n),qt=Math.min(100,f*(f-1)/2),ve=qo(n,f,qt,Nt,c),ae=Pi(ve,Nt,e),Me=10,Fe=1,wr=1,Yr=4,Dr={graphs:ae,nodeLabelProp:o,edgeLabelProp:s,minSupport:Fe,minNodeNum:wr,maxNodeNum:Yr,directed:r},pr=qa(Dr).slice(0,Me),an=pr.length,en=[];pr.forEach(function(ba,Ga){en[Ga]={},Object.keys(ae).forEach(function(va){var za=ae[va],$a=zi(za,ba,o,s);en[Ga][va]=$a})});var yr=ua(en,an,pr),Or=yr.structure,Kr=yr.structureCountMap,Zr=t.nodes[0],fn=[],bn=(u=t.nodes[0])===null||u===void 0?void 0:u[o],Vn=-1/0;t.nodes.forEach(function(ba){var Ga=ba[o],va=j[Ga];(va==null?void 0:va.length)>Vn&&(Vn=va.length,fn=va,bn=Ga,Zr=ba)});var sa={},Ua={},La={},Wa={},ja={},vi={};Object.keys(ot).forEach(function(ba,Ga){ja[ba]=[],r&&(vi[ba]=[]);var va=-1/0,za=ot[ba],$a={};za.forEach(function(Ia){var Pa=w["".concat(Zr.id,"-").concat(Ia.id)];if(Pa&&ja[ba].push(Pa),va<Pa&&(va=Pa),$a["".concat(Zr.id,"-").concat(Ia.id)]={start:0,end:rt[Ia.id].idx,distance:Pa},r){var Ai=w["".concat(Ia.id,"-").concat(Zr.id)];Ai&&vi[ba].push(Ai)}}),ja[ba]=ja[ba].sort(function(Ia,Pa){return Ia-Pa}),r&&(vi[ba]=vi[ba].sort(function(Ia,Pa){return Ia-Pa})),Ua=Pi($a,Dt,t,Ua);var Dn=[];if(Object.keys($a).forEach(function(Ia){if(La[Ia]){Dn.push(La[Ia]);return}var Pa=Ua[Ia];La[Ia]=zi(Pa,Or,o,s),Dn.push(La[Ia])}),Dn=Dn.sort(function(Ia,Pa){return Pa-Ia}),Wa["".concat(Zr.id,"-").concat(ba)]=Dn,ba!==bn)for(var _a=(fn==null?void 0:fn.length)||0,Aa=function(Pa){var Ai=fn[Pa],Ls=Nt[G[Ai.id].idx],eo=Ls.nodeLabelCountMap[ba],fl=ot[ba].length;if(!eo||eo.count<fl)return fn.splice(Pa,1),"continue";for(var ih=!1,as=0;as<fl;as++)if(eo.dists[as]>ja[ba][as]){ih=!0;break}if(ih)return fn.splice(Pa,1),"continue";var Qs={};Ls.neighbors.forEach(function(is){var mu=x["".concat(Ai.id,"-").concat(is.id)];Qs["".concat(Ai.id,"-").concat(is.id)]={start:G[Ai.id].idx,end:G[is.id].idx,distance:mu}}),ae=Pi(Qs,Nt,e,ae);var Zu=[];Object.keys(Qs).forEach(function(is){if(Kr[is]){Zu.push(Kr[is]);return}var mu=ae[is];Kr[is]=zi(mu,Or,o,s),Zu.push(Kr[is])}),Zu=Zu.sort(function(is,mu){return mu-is});for(var wc=!1,as=0;as<fl;as++)if(Zu[as]<Dn[as]){wc=!0;break}if(wc)return fn.splice(Pa,1),"continue"},Qa=_a-1;Qa>=0;Qa--)Aa(Qa)});var ni=[];fn==null||fn.forEach(function(ba){for(var Ga=G[ba.id].idx,va=Ni(e.nodes,c[Ga],Ga,o,a),za=va.neighbors,$a=za.length,Dn=!1,_a=$a-1;_a>=0;_a--){if(za.length+1<t.nodes.length){Dn=!0;return}var Aa=za[_a],Qa=Aa[o];if(!ot[Qa]||!ot[Qa].length){za.splice(_a,1);continue}if(!ja[Qa]||!ja[Qa].length){za.splice(_a,1);continue}var Ia="".concat(ba.id,"-").concat(Aa.id),Pa=x[Ia],Ai=ja[Qa].length-1,Ls=ja[Qa][Ai];if(Pa>Ls){za.splice(_a,1);continue}if(r){var eo="".concat(Aa.id,"-").concat(ba.id),fl=x[eo];Ai=vi[Qa].length-1;var ih=vi[Qa][Ai];if(fl>ih){za.splice(_a,1);continue}}var as=Kr[Ia]?Kr[Ia]:Co(e,ba,Aa,G,Pa,Nt,Or,o,s,Kr,ae),Qs="".concat(Zr.id,"-").concat(Qa),Zu=Wa[Qs][Wa[Qs].length-1];if(as<Zu){za.splice(_a,1);continue}var wc=To(sa,Qa,rt,ot),is=wc.minPatternNodeLabelDegree,mu=wc.minPatternNodeLabelInDegree,Lf=wc.minPatternNodeLabelOutDegree;if(G[Aa.id].degree<is){za.splice(_a,1);continue}}Dn||ni.push({nodes:[ba].concat(za)})});var Zs=na(t,Zr.id,!1).length,fo={};r?(Object.keys(Zs).forEach(function(ba){var Ga=rt[ba].node[o];fo[Ga]?fo[Ga].push(Zs[ba]):fo[Ga]=[Zs[ba]]}),Object.keys(fo).forEach(function(ba){fo[ba].sort(function(Ga,va){return Ga-va})})):fo=ja;for(var $s=ni.length,co=function(Ga){var va=ni[Ga],za=va.nodes[0],$a={},Dn={};va.nodes.forEach(function(mi,Ds){Dn[mi.id]={idx:Ds,node:mi,degree:0,inDegree:0,outDegree:0};var xo=mi[o];$a[xo]?$a[xo]++:$a[xo]=1});var _a=[],Aa={};e.edges.forEach(function(mi){Dn[mi.source]&&Dn[mi.target]&&(_a.push(mi),Aa[mi[s]]?Aa[mi[s]]++:Aa[mi[s]]=1,Dn[mi.source].degree++,Dn[mi.target].degree++,Dn[mi.source].outDegree++,Dn[mi.target].inDegree++)});for(var Qa=Object.keys(lt).length,Ia=!1,Pa=0;Pa<Qa;Pa++){var Ai=Object.keys(lt)[Pa];if(!Aa[Ai]||Aa[Ai]<lt[Ai].length){Ia=!0;break}}if(Ia)return ni.splice(Ga,1),"continue";var Ls=_a.length;if(Ls<t.edges.length)return ni.splice(Ga,1),"break";for(var eo=!1,fl=function(Ds){var xo=_a[Ds],$u=xo[s],cl=lt[$u];if(!cl||!cl.length)return Aa[$u]--,cl&&Aa[$u]<cl.length?(eo=!0,"break"):(_a.splice(Ds,1),Dn[xo.source].degree--,Dn[xo.target].degree--,Dn[xo.source].outDegree--,Dn[xo.target].inDegree--,"continue");var U0=Dn[xo.source].node[o],W0=Dn[xo.target].node[o],Dv=!1;if(cl.forEach(function(X0){var Y0=rt[X0.source].node,V0=rt[X0.target].node;Y0[o]===U0&&V0[o]===W0&&(Dv=!0),!r&&Y0[o]===W0&&V0[o]===U0&&(Dv=!0)}),!Dv)return Aa[$u]--,cl&&Aa[$u]<cl.length?(eo=!0,"break"):(_a.splice(Ds,1),Dn[xo.source].degree--,Dn[xo.target].degree--,Dn[xo.source].outDegree--,Dn[xo.target].inDegree--,"continue")},Pa=Ls-1;Pa>=0;Pa--){var ih=fl(Pa);if(ih==="break")break}if(eo)return ni.splice(Ga,1),"continue";va.edges=_a;var as=na(va,va.nodes[0].id,!1).length;if(Object.keys(as).reverse().forEach(function(mi){if(!(mi===va.nodes[0].id||eo)){if(as[mi]===1/0){var Ds=Dn[mi].node[o];if($a[Ds]--,$a[Ds]<ot[Ds].length){eo=!0;return}var xo=va.nodes.indexOf(Dn[mi].node);va.nodes.splice(xo,1),Dn[mi]=void 0;return}var $u=G[mi].node[o];if(!fo[$u]||!fo[$u].length||as[mi]>fo[$u][fo[$u].length-1]){var Ds=Dn[mi].node[o];if($a[Ds]--,$a[Ds]<ot[Ds].length){eo=!0;return}var xo=va.nodes.indexOf(Dn[mi].node);va.nodes.splice(xo,1),Dn[mi]=void 0}}}),eo)return ni.splice(Ga,1),"continue";for(var Qs=!0,Zu=0;Qs&&!eo;){Qs=!1;var wc=r?Dn[za.id].degree<rt[Zr.id].degree||Dn[za.id].inDegree<rt[Zr.id].inDegree||Dn[za.id].outDegree<rt[Zr.id].outDegree:Dn[za.id].degree<rt[Zr.id].degree;if(wc){eo=!0;break}if($a[za[o]]<ot[za[o]].length){eo=!0;break}for(var is=va.nodes.length,mu=is-1;mu>=0;mu--){var Lf=va.nodes[mu],G0=Dn[Lf.id].degree,e_=Dn[Lf.id].inDegree,r_=Dn[Lf.id].outDegree,n_=Lf[o],Lv=To(sa,n_,rt,ot),z0=Lv.minPatternNodeLabelDegree,a_=Lv.minPatternNodeLabelInDegree,i_=Lv.minPatternNodeLabelOutDegree,o_=r?G0<z0||e_<a_||r_<i_:G0<z0;if(o_){if($a[Lf[o]]--,$a[Lf[o]]<ot[Lf[o]].length){eo=!0;break}va.nodes.splice(mu,1),Dn[Lf.id]=void 0,Qs=!0}}if(eo||!Qs&&Zu!==0)break;Ls=_a.length;for(var Td=Ls-1;Td>=0;Td--){var Df=_a[Td];if(!Dn[Df.source]||!Dn[Df.target]){_a.splice(Td,1);var Id=Df[s];if(Aa[Id]--,Dn[Df.source]&&(Dn[Df.source].degree--,Dn[Df.source].outDegree--),Dn[Df.target]&&(Dn[Df.target].degree--,Dn[Df.target].inDegree--),lt[Id]&&Aa[Id]<lt[Id].length){eo=!0;break}Qs=!0}}Zu++}if(eo||eo||va.nodes.length<t.nodes.length||_a.length<t.edges.length)return ni.splice(Ga,1),"continue"},lo=$s-1;lo>=0;lo--){var Os=co(lo);if(Os==="break")break}for(var Go=ni.length,ns=function(Ga){var va=ni[Ga],za={};va.edges.forEach(function(_a){var Aa="".concat(_a.source,"-").concat(_a.target,"-").concat(_a.label);za[Aa]?za[Aa]++:za[Aa]=1});for(var $a=function(Aa){var Qa=ni[Aa],Ia={};Qa.edges.forEach(function(Ai){var Ls="".concat(Ai.source,"-").concat(Ai.target,"-").concat(Ai.label);Ia[Ls]?Ia[Ls]++:Ia[Ls]=1});var Pa=!0;Object.keys(Ia).length!==Object.keys(za).length?Pa=!1:Object.keys(za).forEach(function(Ai){Ia[Ai]!==za[Ai]&&(Pa=!1)}),Pa&&ni.splice(Aa,1)},Dn=Go-1;Dn>Ga;Dn--)$a(Dn);Go=ni.length},lo=0;lo<=Go-1;lo++)ns(lo);return ni}}},bi=Io,Ui=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Ht,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Eo=Ui,os=Nn,ai={getAdjMatrix:st,breadthFirstSearch:ee,connectedComponent:Wt,getDegree:Ge,getInDegree:Be,getOutDegree:_r,detectCycle:Nn,detectDirectedCycle:os,detectAllCycles:Kn,detectAllDirectedCycle:Bn,detectAllUndirectedCycle:Sn,depthFirstSearch:rn,dijkstra:na,findAllPath:Jr,findShortestPath:Tr,floydWarshall:Tn,labelPropagation:kn,louvain:jr,iLouvain:pt,kCore:I,kMeans:bt,cosineSimilarity:It,nodesCosineSimilarity:Pe,minimumSpanningTree:Sr,pageRank:$t,getNeighbors:Gt,Stack:Eo,GADDI:bi},xi=B(77160),mn=B(31437),Oo=St,wo=function(e){return function(t,r){return t[e]-r[e]}},no=function(e,t,r){return e>=t&&e<=r},Lo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,x=s.x*s.x+s.y*s.y,w=u.x*u.x+u.y*u.y;if(c>a*x*w){var C=(o.x*u.y-o.y*u.x)*l,G=(o.x*s.y-o.y*s.x)*l;return!no(C,0,1)||!no(G,0,1)?null:{x:e.x+C*s.x,y:e.y+C*s.y}}return null},Uo=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,x=1;x<f.length&&(l=Lo(f[x-1],f[x],c,t),!l);x++);return l},ss=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},wn=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},Ja=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),xi.transformMat3(n,n,t),{x:n[0],y:n[1]}},Ki=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=tt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return xi.transformMat3(a,a,n),{x:a[0],y:a[1]}},Ka=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},_o=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},Jo=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ki=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Wo=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},Xo=function(e,t){e.translate(t.x,t.y)},So=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,x=0,w=0,C=0;e.animate(function(j){return w=f*j,C=c*j,a=Oo(a,[["t",w-l,C-x]]),l=w,x=C,{matrix:a}},n)}else{var G=Oo(a,[["t",s,u]]);e.setMatrix(G)}},ga=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,d.isArray)(t)||(n=[t,t]),(0,d.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Oo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},us=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Oo(r,[["r",t]]),e.setMatrix(r)},Zi=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Ri(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var vo=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(Ri(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Yo=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Ei=function(e,t){var r=!1;return(0,d.each)(e,function(n){if(Lo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},Wi=function(e,t){var r=function(x){var w=x.map(function(G){return G[0]}),C=x.map(function(G){return G[1]});return{minX:Math.min.apply(null,w),maxX:Math.max.apply(null,w),minY:Math.min.apply(null,C),maxY:Math.max.apply(null,C)}},n=function(x){for(var w=[],C=x.length,G=0;G<C-1;G++){var j=x[G],et=x[G+1];w.push({from:{x:j[0],y:j[1]},to:{x:et[0],y:et[1]}})}if(w.length>1){var rt=x[0],ot=x[C-1];w.push({from:{x:ot[0],y:ot[1]},to:{x:rt[0],y:rt[1]}})}return w};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Yo(a,o))return!1;var s=!1;if((0,d.each)(t,function(l){if(vo(e,l[0],l[1]))return s=!0,!1}),s||((0,d.each)(e,function(l){if(vo(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,d.each)(f,function(l){if(Ei(u,l))return c=!0,!1}),c},Za=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),Vo=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Xi=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},jo=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=Vo(n,r[s]),f=u[0],c=u[1],l=u[2],x=u[3];o[s]=Lo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:x}),o[s]&&(a+=1)}return[o,a]},ao=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Vo(n,r[s]),f=u[0],c=u[1],l=u[2],x=u[3],w=Xi(t,new Za(f,c,l,x));w=Math.abs(w-.5),w>=0&&w<=1&&(o+=1,a=w<a?w:a)}return o===0?-1:a},Yi=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},io=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},go=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},po=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},$i=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},la=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(mn.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];mn.normalize(c,c);var l=[s-r,u-n];return Math.abs(mn.dot(l,c))},ti=function(e,t,r){return e+(t-e)*r},gi=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=ti(e[o],t[o],r);return a},ta="rgb(95, 149, 255)",Qi="rgb(255, 255, 255)",yo="rgb(0, 0, 0)",ii="rgb(247, 250, 255)",Mo="rgb(239, 244, 255)",Bi="rgb(253, 253, 253)",Fi="rgb(250, 250, 250)",Do="rgb(224, 224, 224)",fs="rgb(234, 234, 234)",No="rgb(245, 245, 245)",Ho="rgb(191, 213, 255)",Ns="#4572d9",Ps="rgb(223, 234, 255)",$n={mainStroke:ta,mainFill:Mo,activeStroke:ta,activeFill:ii,inactiveStroke:Ho,inactiveFill:ii,selectedStroke:ta,selectedFill:Qi,highlightStroke:Ns,highlightFill:Ps,disableStroke:Do,disableFill:Fi,edgeMainStroke:Do,edgeActiveStroke:ta,edgeInactiveStroke:fs,edgeSelectedStroke:ta,edgeHighlightStroke:ta,edgeDisableStroke:No,comboMainStroke:Do,comboMainFill:Bi,comboActiveStroke:ta,comboActiveFill:ii,comboInactiveStroke:Do,comboInactiveFill:Bi,comboSelectedStroke:ta,comboSelectedFill:Bi,comboHighlightStroke:Ns,comboHighlightFill:Bi,comboDisableStroke:fs,comboDisableFill:Fi},xt={version:"0.8.13",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:$n.mainStroke,fill:Mo},size:20,color:$n.mainStroke,linkPoints:{size:8,lineWidth:1,fill:$n.activeFill,stroke:$n.activeStroke}},nodeStateStyles:{active:{fill:$n.activeFill,stroke:$n.activeStroke,lineWidth:2,shadowColor:$n.mainStroke,shadowBlur:10},selected:{fill:$n.selectedFill,stroke:$n.selectedStroke,lineWidth:4,shadowColor:$n.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:$n.highlightFill,stroke:$n.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:$n.inactiveFill,stroke:$n.inactiveStroke,lineWidth:1},disable:{fill:$n.disableFill,stroke:$n.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:yo,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:$n.edgeMainStroke,lineAppendWidth:2},color:$n.edgeMainStroke},edgeStateStyles:{active:{stroke:$n.edgeActiveStroke,lineWidth:1},selected:{stroke:$n.edgeSelectedStroke,lineWidth:2,shadowColor:$n.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$n.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:$n.edgeInactiveStroke,lineWidth:1},disable:{stroke:$n.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:yo,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:$n.comboMainFill,lineWidth:1,stroke:$n.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:$n.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:$n.comboActiveStroke,lineWidth:1,fill:$n.comboActiveFill},selected:{stroke:$n.comboSelectedStroke,lineWidth:2,fill:$n.comboSelectedFill,shadowColor:$n.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$n.comboHighlightStroke,lineWidth:2,fill:$n.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:$n.comboInactiveStroke,fill:$n.comboInactiveFill,lineWidth:1},disable:{stroke:$n.comboDisableStroke,fill:$n.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},pe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},De=Math.PI,$e=Math.sin,br=Math.cos,zr=$e(De/8),un=br(De/8),ha=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Ja(n,o),a=Ja(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Xa=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||xt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],x=[e.endPoint.x,e.endPoint.y],w=o.height/2,C=o.width/2,G=w,j=w,et=G*zr,rt=G*un,ot=j*zr,lt=j*un,wt=a.get("type"),Nt=Math.min(w/2,C/2),Dt=Math.min(w,C),qt=s!=null&&s.pointPadding?Math.min(Dt,s==null?void 0:s.pointPadding):Nt;if(l[0]===x[0]&&l[1]===x[1]){switch(f){case"top":wt==="circle"?(l=[c[0]-et,c[1]-rt],x=[c[0]+ot,c[1]-lt]):(l=[c[0]-qt,c[1]-w],x=[c[0]+qt,c[1]-w]);break;case"top-right":G=w,j=C,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]+et,c[1]-rt],x=[c[0]+lt,c[1]-ot]):(l=[c[0]+C-qt,c[1]-w],x=[c[0]+C,c[1]-w+qt]);break;case"right":G=C,j=C,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]+rt,c[1]-et],x=[c[0]+lt,c[1]+ot]):(l=[c[0]+C,c[1]-qt],x=[c[0]+C,c[1]+qt]);break;case"bottom-right":G=C,j=w,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]+rt,c[1]+et],x=[c[0]+ot,c[1]+lt]):(l=[c[0]+C,c[1]+w-qt],x=[c[0]+C-qt,c[1]+w]);break;case"bottom":G=w,j=w,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]+et,c[1]+rt],x=[c[0]-ot,c[1]+lt]):(l=[c[0]-qt,c[1]+w],x=[c[0]+qt,c[1]+w]);break;case"bottom-left":G=w,j=C,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]-et,c[1]+rt],x=[c[0]-lt,c[1]+ot]):(l=[c[0]-C,c[1]+w-qt],x=[c[0]-C+qt,c[1]+w]);break;case"left":G=C,j=C,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]-rt,c[1]+et],x=[c[0]-lt,c[1]-ot]):(l=[c[0]-C,c[1]-qt],x=[c[0]-C,c[1]+qt]);break;case"top-left":G=C,j=w,wt==="circle"?(et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]-rt,c[1]-et],x=[c[0]-ot,c[1]-lt]):(l=[c[0]-C+qt,c[1]-w],x=[c[0]-C,c[1]-w+qt]);break;default:G=C,j=C,et=G*zr,rt=G*un,ot=j*zr,lt=j*un,l=[c[0]-et,c[1]-rt],x=[c[0]+ot,c[1]-lt]}if(s.clockwise===!1){var ve=[l[0],l[1]];l=[x[0],x[1]],x=[ve[0],ve[1]]}}var ae=[l[0]-c[0],l[1]-c[1]],Me=(G+u)/G,Fe=(j+u)/j;s.clockwise===!1&&(Me=(j+u)/j,Fe=(G+u)/G);var wr=mn.scale([0,0],ae,Me),Yr=[c[0]+wr[0],c[1]+wr[1]],Dr=[x[0]-c[0],x[1]-c[1]],pr=mn.scale([0,0],Dr,Fe),an=[c[0]+pr[0],c[1]+pr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:x[0],y:x[1]},e.controlPoints=[{x:Yr[0],y:Yr[1]},{x:an[0],y:an[1]}],e},Ci=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=De*2),r&&(u.x+=br(c)*r,u.y+=$e(c)*r),n){var l=c-De/2;c>1/2*De&&c<3*1/2*De&&(l-=De),u.x+=br(l)*n,u.y+=$e(l)*n}var x={x:u.x,y:u.y,angle:c};return a?(c>.5*De&&c<1.5*De&&(c-=De),(0,y.__assign)({rotate:c},x)):x},Vi=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},ps=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},wi=function(e,t){typeof t=="function"&&Vi(e,null,-1,t)},oo=function(e,t){typeof t=="function"&&ps(e,null,-1,t)},cs=function(e,t){return t*(pe[e]||1)},ks=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=cs(a,t)}),[r,t]},Qu=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},qs=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,d.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var x=n[l.parentId];if(x)x.children?x.children.push(c):x.children=[c];else{var w={id:l.parentId,children:[l]};n[l.parentId]=w,n[c.id]=c}return}if((0,d.isString)(u.parentId)){var C=n[u.parentId];if(C)C.children?C.children.push(c):C.children=[c],n[c.id]=c;else{var G={id:u.parentId,children:[c]};n[G.id]=G,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,wi(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var x=o[f.id];return x&&(x.depth=f.depth),!0})}),r},Js=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(C){if(!u){if(C.id===t){o=C,C.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}wi(C,function(G){var j;return s[G.id]={children:(G==null?void 0:G.children)||[]},a=(j=s[G.parentId||G.comboId||"root"])===null||j===void 0?void 0:j.children,G&&(G.removed||t===G.id)&&a?(f=G.parentId||G.comboId||"root",o=G,G.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var x=0;(e||[]).forEach(function(C){l||wi(C,function(G){return r===G.id?(l=!0,G.children?G.children.push(o):G.children=[o],x=G.depth,o.itemType==="node"?o.depth=x+2:o.depth=x+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var w=o.depth;wi(o,function(C){return C.itemType==="node"?w+=2:w+=1,C.depth=w,!0})}return e},Rs=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,x=c?l:f,w=(0,d.isArray)(x)?x:[x,x],C=w[0],G=w[1],j=[C/2,G/2];return{minX:s-j[0],minY:u-j[1],maxX:s+j[0],maxY:u+j[1],x:s,y:u,width:C,height:G}}return e.forEach(function(et){var rt=t.findById(et.id);if(!(!rt||!rt.isVisible())){rt.set("bboxCanvasCache",void 0);var ot=rt.getCanvasBBox();ot.x&&n.minX>ot.minX&&(n.minX=ot.minX),ot.y&&n.minY>ot.minY&&(n.minY=ot.minY),ot.x&&n.maxX<ot.maxX&&(n.maxX=ot.maxX),ot.y&&n.maxY<ot.maxY&&(n.maxY=ot.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(et){(n[et]===1/0||n[et]===-1/0)&&(n[et]=void 0)}),n},Nf=function(e){var t=(0,d.isNumber)(e.x)||(0,d.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,d.isNumber)(e.style.r)||(0,d.isNumber)(e.style.width)||(0,d.isNumber)(e.style.height)||(0,d.isNumber)(e.style.rx)||(0,d.isNumber)(e.style.ry)),t},Po=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,d.isObject)(n)&&!(0,d.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,d.isString)(s)||(a[o]=(0,d.clone)(s))}),t[r]=a}else t[r]=(0,d.clone)(n)}),t},ys=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,d.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},ms=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return wi(e,function(x){return(0,d.isString)(x.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(x){return!(0,d.isString)(x.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(x){return x.id}),f=a==null?void 0:a.map(function(x){return x.id}),c=(0,y.__spreadArray)((0,y.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(x){return!c.includes(x.source)||!c.includes(x.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},mo=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,d.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Pf=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,d.each)(e,function(t){(0,d.each)(t,function(r,n){(0,d.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,d.each)(r||[],function(o){var s=Y.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,d.each)(t,function(r){e.indexOf(r)<0&&((0,d.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,d.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,d.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,d.isArray)(e)?a=e:a=[e],(0,d.isArray)(t))return(0,d.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,d.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),_c=Pf,tu=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,bu=new RegExp("([a-z])["+tu+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+tu+"]*,?["+tu+"]*)+)","ig"),Sc=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+tu+"]*,?["+tu+"]*","ig"),h=function(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(bu,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Sc,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},D=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},ft=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},mt=function(i){if(i=h(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,x=o,w=i.length;x<w;x++){if(e.push(c=[]),l=i[x],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var C=2,G=u.length;C<G;C++)u[C]=+u[C]+t,u[++C]=+u[C]+r;e.pop(),e=e.concat(D(u,f));break;case"O":e.pop(),u=ft(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(ft(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var C=1,G=l.length;C<G;C++)c[C]=+l[C]+(C%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(D(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=ft(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(ft(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var j=0,et=l.length;j<et;j++)c[j]=l[j];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Tt=function(i,e,t,r){return[i,e,t,r,t,r]},Xt=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},Yt=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),x=[],w,C,G,j,et,rt=function(Ua,La,Wa){var ja=Ua*Math.cos(Wa)-La*Math.sin(Wa),vi=Ua*Math.sin(Wa)+La*Math.cos(Wa);return{x:ja,y:vi}};if(f)C=f[0],G=f[1],j=f[2],et=f[3];else{w=rt(i,e,-l),i=w.x,e=w.y,w=rt(s,u,-l),s=w.x,u=w.y,i===s&&e===u&&(s+=1,u+=1);var ot=(i-s)/2,lt=(e-u)/2,wt=ot*ot/(t*t)+lt*lt/(r*r);wt>1&&(wt=Math.sqrt(wt),t=wt*t,r=wt*r);var Nt=t*t,Dt=r*r,qt=(a===o?-1:1)*Math.sqrt(Math.abs((Nt*Dt-Nt*lt*lt-Dt*ot*ot)/(Nt*lt*lt+Dt*ot*ot)));j=qt*t*lt/r+(i+s)/2,et=qt*-r*ot/t+(e+u)/2,C=Math.asin(((e-et)/r).toFixed(9)),G=Math.asin(((u-et)/r).toFixed(9)),C=i<j?Math.PI-C:C,G=s<j?Math.PI-G:G,C<0&&(C=Math.PI*2+C),G<0&&(G=Math.PI*2+G),o&&C>G&&(C=C-Math.PI*2),!o&&G>C&&(G=G-Math.PI*2)}var ve=G-C;if(Math.abs(ve)>c){var ae=G,Me=s,Fe=u;G=C+c*(o&&G>C?1:-1),s=j+t*Math.cos(G),u=et+r*Math.sin(G),x=Yt(s,u,t,r,n,0,o,Me,Fe,[G,ae,j,et])}ve=G-C;var wr=Math.cos(C),Yr=Math.sin(C),Dr=Math.cos(G),pr=Math.sin(G),an=Math.tan(ve/4),en=4/3*t*an,yr=4/3*r*an,Or=[i,e],Kr=[i+en*Yr,e-yr*wr],Zr=[s+en*pr,u-yr*Dr],fn=[s,u];if(Kr[0]=2*Or[0]-Kr[0],Kr[1]=2*Or[1]-Kr[1],f)return[Kr,Zr,fn].concat(x);x=[Kr,Zr,fn].concat(x).join().split(",");for(var bn=[],Vn=0,sa=x.length;Vn<sa;Vn++)bn[Vn]=Vn%2?rt(x[Vn-1],x[Vn],l).y:rt(x[Vn],x[Vn+1],l).x;return bn},ne=function(i,e){var t=mt(i),r=e&&mt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(ot,lt,wt){var Nt,Dt;if(!ot)return["C",lt.x,lt.y,lt.x,lt.y,lt.x,lt.y];switch(!(ot[0]in{T:1,Q:1})&&(lt.qx=lt.qy=null),ot[0]){case"M":lt.X=ot[1],lt.Y=ot[2];break;case"A":ot=["C"].concat(Yt.apply(0,[lt.x,lt.y].concat(ot.slice(1))));break;case"S":wt==="C"||wt==="S"?(Nt=lt.x*2-lt.bx,Dt=lt.y*2-lt.by):(Nt=lt.x,Dt=lt.y),ot=["C",Nt,Dt].concat(ot.slice(1));break;case"T":wt==="Q"||wt==="T"?(lt.qx=lt.x*2-lt.qx,lt.qy=lt.y*2-lt.qy):(lt.qx=lt.x,lt.qy=lt.y),ot=["C"].concat(Xt(lt.x,lt.y,lt.qx,lt.qy,ot[1],ot[2]));break;case"Q":lt.qx=ot[1],lt.qy=ot[2],ot=["C"].concat(Xt(lt.x,lt.y,ot[1],ot[2],ot[3],ot[4]));break;case"L":ot=["C"].concat(Tt(lt.x,lt.y,ot[1],ot[2]));break;case"H":ot=["C"].concat(Tt(lt.x,lt.y,ot[1],lt.y));break;case"V":ot=["C"].concat(Tt(lt.x,lt.y,lt.x,ot[1]));break;case"Z":ot=["C"].concat(Tt(lt.x,lt.y,lt.X,lt.Y));break;default:break}return ot},x=function(ot,lt){if(ot[lt].length>7){ot[lt].shift();for(var wt=ot[lt];wt.length;)o[lt]="A",r&&(s[lt]="A"),ot.splice(lt++,0,["C"].concat(wt.splice(0,6)));ot.splice(lt,1),c=Math.max(t.length,r&&r.length||0)}},w=function(ot,lt,wt,Nt,Dt){ot&&lt&&ot[Dt][0]==="M"&&lt[Dt][0]!=="M"&&(lt.splice(Dt,0,["M",Nt.x,Nt.y]),wt.bx=0,wt.by=0,wt.x=ot[Dt][1],wt.y=ot[Dt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var C=0;C<c;C++){t[C]&&(u=t[C][0]),u!=="C"&&(o[C]=u,C&&(f=o[C-1])),t[C]=l(t[C],n,f),o[C]!=="A"&&u==="C"&&(o[C]="C"),x(t,C),r&&(r[C]&&(u=r[C][0]),u!=="C"&&(s[C]=u,C&&(f=s[C-1])),r[C]=l(r[C],a,f),s[C]!=="A"&&u==="C"&&(s[C]="C"),x(r,C)),w(t,r,n,a,C),w(r,t,a,n,C);var G=t[C],j=r&&r[C],et=G.length,rt=r&&j.length;n.x=G[et-2],n.y=G[et-1],n.bx=parseFloat(G[et-4])||n.x,n.by=parseFloat(G[et-3])||n.y,a.bx=r&&(parseFloat(j[rt-4])||a.x),a.by=r&&(parseFloat(j[rt-3])||a.y),a.x=r&&j[rt-2],a.y=r&&j[rt-1]}return r?[t,r]:t},he=/,?([a-z]),?/gi,Se=function(i){return i.join(",").replace(he,"$1")},Ue=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},cr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],x=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],w=0,C=0;C<c;C++){var G=f*l[C]+f,j=Ue(G,i,t,n,o),et=Ue(G,e,r,a,s),rt=j*j+et*et;w+=x[C]*Math.sqrt(rt)}return f*w},gr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,x,w,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,x=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,x=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;w=-x/l,w>0&&w<1&&u.push(w);continue}var G=l*l-4*x*c,j=Math.sqrt(G);if(!(G<0)){var et=(-l+j)/(2*c);et>0&&et<1&&u.push(et);var rt=(-l-j)/(2*c);rt>0&&rt<1&&u.push(rt)}}for(var ot=u.length,lt=ot,wt;ot--;)w=u[ot],wt=1-w,f[0][ot]=wt*wt*wt*i+3*wt*wt*w*t+3*wt*w*w*n+w*w*w*o,f[1][ot]=wt*wt*wt*e+3*wt*wt*w*r+3*wt*w*w*a+w*w*w*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},lr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,x=f/c,w=+l.toFixed(2),C=+x.toFixed(2);if(!(w<+Math.min(i,t).toFixed(2)||w>+Math.max(i,t).toFixed(2)||w<+Math.min(n,o).toFixed(2)||w>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:x}}}},Pr=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},$r=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Se,a},xr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:$r(i,e,t,r),vb:[i,e,t,r].join(" ")}},ln=function(i,e){return i=xr(i),e=xr(e),Pr(e,i.x,i.y)||Pr(e,i.x2,i.y)||Pr(e,i.x,i.y2)||Pr(e,i.x2,i.y2)||Pr(i,e.x,e.y)||Pr(i,e.x2,e.y)||Pr(i,e.x,e.y2)||Pr(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},qn=function(i,e,t,r,n,a,o,s){(0,d.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=gr.apply(null,i);return xr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},ea=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),x=u*u,w=x*u,C=c*i+l*3*u*t+f*3*u*u*n+w*o,G=c*e+l*3*u*r+f*3*u*u*a+w*s,j=i+2*u*(t-i)+x*(n-2*t+i),et=e+2*u*(r-e)+x*(a-2*r+e),rt=t+2*u*(n-t)+x*(o-2*n+t),ot=r+2*u*(a-r)+x*(s-2*a+r),lt=f*i+u*t,wt=f*e+u*r,Nt=f*n+u*o,Dt=f*a+u*s,qt=90-Math.atan2(j-rt,et-ot)*180/Math.PI;return{x:C,y:G,m:{x:j,y:et},n:{x:rt,y:ot},start:{x:lt,y:wt},end:{x:Nt,y:Dt},alpha:qt}},jn=function(i,e,t){var r=qn(i),n=qn(e);if(!ln(r,n))return t?0:[];for(var a=cr.apply(0,i),o=cr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},x=t?0:[],w=0;w<s+1;w++){var C=ea.apply(0,i.concat(w/s));f.push({x:C.x,y:C.y,t:w/s})}for(var w=0;w<u+1;w++){var C=ea.apply(0,e.concat(w/u));c.push({x:C.x,y:C.y,t:w/u})}for(var w=0;w<s;w++)for(var G=0;G<u;G++){var j=f[w],et=f[w+1],rt=c[G],ot=c[G+1],lt=Math.abs(et.x-j.x)<.001?"y":"x",wt=Math.abs(ot.x-rt.x)<.001?"y":"x",Nt=lr(j.x,j.y,et.x,et.y,rt.x,rt.y,ot.x,ot.y);if(Nt){if(l[Nt.x.toFixed(4)]===Nt.y.toFixed(4))continue;l[Nt.x.toFixed(4)]=Nt.y.toFixed(4);var Dt=j.t+Math.abs((Nt[lt]-j[lt])/(et[lt]-j[lt]))*(et.t-j.t),qt=rt.t+Math.abs((Nt[wt]-rt[wt])/(ot[wt]-rt[wt]))*(ot.t-rt.t);Dt>=0&&Dt<=1&&qt>=0&&qt<=1&&(t?x+=1:x.push({x:Nt.x,y:Nt.y,t1:Dt,t2:qt}))}}return x},Ln=function(i,e,t){i=ne(i),e=ne(e);for(var r,n,a,o,s,u,f,c,l,x,w=t?0:[],C=0,G=i.length;C<G;C++){var j=i[C];if(j[0]==="M")r=s=j[1],n=u=j[2];else{j[0]==="C"?(l=[r,n].concat(j.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var et=0,rt=e.length;et<rt;et++){var ot=e[et];if(ot[0]==="M")a=f=ot[1],o=c=ot[2];else{ot[0]==="C"?(x=[a,o].concat(ot.slice(1)),a=x[6],o=x[7]):(x=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=jn(l,x,t);if(t)w+=lt;else{for(var wt=0,Nt=lt.length;wt<Nt;wt++)lt[wt].segment1=C,lt[wt].segment2=et,lt[wt].bez1=l,lt[wt].bez2=x;w=w.concat(lt)}}}}}return w},Wn=function(i,e){return Ln(i,e)};function li(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function oi(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=li(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var x=[];return l.length===4&&(x.push("C"),x=x.concat(l[2])),l.length>=3&&(l.length===3&&x.push("Q"),x=x.concat(l[1])),l.length===2&&x.push("L"),x=x.concat(l[l.length-1]),x});return c}var ei=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(oi(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},si=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(ei(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},ui=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,d.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function pi(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ti=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],ui(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,x=s[u-1][f-1].min+o;s[u][f]=pi(c,l,x)}}return s},pa=function(i,e){var t=Ti(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function ka(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=bs(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function bs(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ts=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=bs(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=ka(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=ka(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=ka(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},ko=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),eu=ko;function Mc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var ll=typeof window!="undefined"&&typeof window.document!="undefined";function hl(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Ac(i){return i.cfg.visible&&i.cfg.capture}var oh=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,d.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(nt),Cc=oh,qu=B(34155),dl=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},Tc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),vl=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=qu.platform}return i}(),sh=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),ru=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),gl=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),on=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,xu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ya=3,Ic=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",on]],kf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nu(i){return i?Rf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new gl:typeof navigator!="undefined"?Rf(navigator.userAgent):yl()}function Oc(i){return i!==""&&Ic.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function Lc(i){var e=Oc(i);return e?e[0]:null}function Rf(i){var e=Oc(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new ru;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<ya&&(n=dl(dl([],n,!0),es(ya-n.length),!0)):n=[];var a=n.join("."),o=pl(i),s=xu.exec(i);return s&&s[1]?new sh(t,a,o,s[1]):new Tc(t,a,o)}function pl(i){for(var e=0,t=kf.length;e<t;e++){var r=kf[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function yl(){var i=typeof qu!="undefined"&&qu.version;return i?new vl(qu.version.slice(1)):null}function es(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Dc(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],x=e[0],w=e[1],C=e[2],G=e[3],j=e[4],et=e[5],rt=e[6],ot=e[7],lt=e[8];return t[0]=x*r+w*o+C*f,t[1]=x*n+w*s+C*c,t[2]=x*a+w*u+C*l,t[3]=G*r+j*o+et*f,t[4]=G*n+j*s+et*c,t[5]=G*a+j*u+et*l,t[6]=rt*r+ot*o+lt*f,t[7]=rt*n+ot*s+lt*c,t[8]=rt*a+ot*u+lt*l,t}function Bs(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function _i(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,x=-c*a+s*u,w=f*a-o*u,C=t*l+r*x+n*w;return C?(C=1/C,e[0]=l*C,e[1]=(-c*r+n*f)*C,e[2]=(s*r-n*o)*C,e[3]=x*C,e[4]=(c*t-n*u)*C,e[5]=(-s*t+n*a)*C,e[6]=w*C,e[7]=(-f*t+r*u)*C,e[8]=(o*t-r*a)*C,e):null}var Fs=St,xs="matrix",Bf=["zIndex","capture","visible","type"],Nc=["repeat"],ml=":",bl="*";function xl(i){for(var e=[],t=0;t<i.length;t++)(0,d.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Ff(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function El(i,e){var t={},r=e.attr();return(0,d.each)(i,function(n,a){Nc.indexOf(a)===-1&&!(0,d.isEqual)(r[a],n)&&(t[a]=n)}),t}function Gf(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,d.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,d.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var wl=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,d.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,d.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(Mc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(xs,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(xs)},e.prototype.setMatrix=function(t){this.attr(xs,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Dc(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Dc(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?Bs(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=_i(r);if(n)return Bs(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,d.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,d.each)(r,function(s,u){(0,d.isArray)(r[u])?n[u]=xl(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,d.each)(Bf,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?d.noop:c,x=t[4],w=x===void 0?0:x,C,G,j,et,rt;(0,d.isFunction)(o)?(C=o,o={}):(0,d.isObject)(o)&&o.onFrame&&(C=o.onFrame,G=o.repeat),(0,d.isObject)(s)?(rt=s,s=rt.duration,f=rt.easing||"easeLinear",w=rt.delay||0,G=rt.repeat||G||!1,l=rt.callback||d.noop,j=rt.pauseCallback||d.noop,et=rt.resumeCallback||d.noop):((0,d.isNumber)(l)&&(w=l,l=null),(0,d.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var ot=El(o,this),lt={fromAttrs:Ff(ot,this),toAttrs:ot,duration:s,easing:f,repeat:G,callback:l,pauseCallback:j,resumeCallback:et,delay:w,startTime:n.getTime(),id:(0,d.uniqueId)(),onFrame:C,pathFormatted:!1};a.length>0?a=Gf(a,lt):n.addAnimator(this),a.push(lt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,d.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,d.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,d.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(x){var w=a[x],C=w.get("name");if(C){if((w.isGroup()||w.isCanvas&&w.isCanvas())&&s&&hl(w,s))return"break";(0,d.isArray)(C)?(0,d.each)(C,function(G){n.emitDelegateEvent(w,G,r)}):f.emitDelegateEvent(w,C,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+ml+n.type;(a[o]||a[bl])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Fs(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Fs(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Fs(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Fs(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Fs(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(Cc),Pc=wl,Ju={},kc="_INDEX";function Ko(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Ko(r,e)})}}function Rc(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Rc(r,e)})}}function tf(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function _l(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),Mc(i.getChildren(),e)}function uh(i){return function(e,t){var r=i(e,t);return r===0?e[kc]-t[kc]:r}}var Bc=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,x=f.minY,w=f.maxY;c<t&&(t=c),l>r&&(r=l),x<n&&(n=x),w>a&&(a=w)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,x=f.minY,w=f.maxY;c<t&&(t=c),l>r&&(r=l),x<n&&(n=x),w>a&&(a=w)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,d.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,d.isObject)(n)?a=n:a.type=n;var o=Ju[a.type];o||(o=(0,d.upperFirst)(a.type),Ju[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,d.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Ac(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Ac(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&_l(o,t,!1),t.set("parent",this),r&&Ko(t,r),a&&Rc(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,d.each)(t,function(r,n){return r[kc]=n,r}),t.sort(uh(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,d.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,d.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Pc),ef=Bc,fh=B(35374),Fc=B(18698);function Gc(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Sl(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function rf(){}var Eu=.7,au=1/Eu,wu="\\s*([+-]?\\d+)\\s*",nf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ml=/^#([0-9a-f]{3,8})$/,_u=new RegExp("^rgb\\(".concat(wu,",").concat(wu,",").concat(wu,"\\)$")),ch=new RegExp("^rgb\\(".concat(ls,",").concat(ls,",").concat(ls,"\\)$")),lh=new RegExp("^rgba\\(".concat(wu,",").concat(wu,",").concat(wu,",").concat(nf,"\\)$")),zf=new RegExp("^rgba\\(".concat(ls,",").concat(ls,",").concat(ls,",").concat(nf,"\\)$")),zc=new RegExp("^hsl\\(".concat(nf,",").concat(ls,",").concat(ls,"\\)$")),hh=new RegExp("^hsla\\(".concat(nf,",").concat(ls,",").concat(ls,",").concat(nf,"\\)$")),af={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gc(rf,of,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Al,formatHex:Al,formatHex8:dh,formatHsl:Cl,formatRgb:Tl,toString:Tl});function Al(){return this.rgb().formatHex()}function dh(){return this.rgb().formatHex8()}function Cl(){return Yf(this).formatHsl()}function Tl(){return this.rgb().formatRgb()}function of(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Ml.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Su(e):t===3?new Gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Mu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Mu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_u.exec(i))?new Gi(e[1],e[2],e[3],1):(e=ch.exec(i))?new Gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lh.exec(i))?Mu(e[1],e[2],e[3],e[4]):(e=zf.exec(i))?Mu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zc.exec(i))?Xf(e[1],e[2]/100,e[3]/100,1):(e=hh.exec(i))?Xf(e[1],e[2]/100,e[3]/100,e[4]):af.hasOwnProperty(i)?Su(af[i]):i==="transparent"?new Gi(NaN,NaN,NaN,0):null}function Su(i){return new Gi(i>>16&255,i>>8&255,i&255,1)}function Mu(i,e,t,r){return r<=0&&(i=e=t=NaN),new Gi(i,e,t,r)}function Uf(i){return i instanceof rf||(i=of(i)),i?(i=i.rgb(),new Gi(i.r,i.g,i.b,i.opacity)):new Gi}function Wf(i,e,t,r){return arguments.length===1?Uf(i):new Gi(i,e,t,r==null?1:r)}function Gi(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}Gc(Gi,Wf,Sl(rf,{brighter:function(e){return e=e==null?au:Math.pow(au,e),new Gi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Eu:Math.pow(Eu,e),new Gi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Gi(Zo(this.r),Zo(this.g),Zo(this.b),sf(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iu,formatHex:iu,formatHex8:Il,formatRgb:ou,toString:ou}));function iu(){return"#".concat(Es(this.r)).concat(Es(this.g)).concat(Es(this.b))}function Il(){return"#".concat(Es(this.r)).concat(Es(this.g)).concat(Es(this.b)).concat(Es((isNaN(this.opacity)?1:this.opacity)*255))}function ou(){var i=sf(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Zo(this.r),", ").concat(Zo(this.g),", ").concat(Zo(this.b)).concat(i===1?")":", ".concat(i,")"))}function sf(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Zo(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Es(i){return i=Zo(i),(i<16?"0":"")+i.toString(16)}function Xf(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ro(i,e,t,r)}function Yf(i){if(i instanceof Ro)return new Ro(i.h,i.s,i.l,i.opacity);if(i instanceof rf||(i=of(i)),!i)return new Ro;if(i instanceof Ro)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Ro(o,s,u,i.opacity)}function Uc(i,e,t,r){return arguments.length===1?Yf(i):new Ro(i,e,t,r==null?1:r)}function Ro(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}Gc(Ro,Uc,Sl(rf,{brighter:function(e){return e=e==null?au:Math.pow(au,e),new Ro(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Eu:Math.pow(Eu,e),new Ro(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Gi(Vf(e>=240?e-240:e+120,a,n),Vf(e,a,n),Vf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Ro(uf(this.h),ff(this.s),ff(this.l),sf(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=sf(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(uf(this.h),", ").concat(ff(this.s)*100,"%, ").concat(ff(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function uf(i){return i=(i||0)%360,i<0?i+360:i}function ff(i){return Math.max(0,Math.min(1,i||0))}function Vf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Wc(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Ol(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Wc((t-r/e)*e,o,n,a,s)}}function Ll(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Wc((t-r/e)*e,n,a,o,s)}}var cf=function(i){return function(){return i}};function jf(i,e){return function(t){return i+t*e}}function Dl(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function vh(i,e){var t=e-i;return t?jf(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function Nl(i){return(i=+i)==1?Au:function(e,t){return t-e?Dl(e,t,i):cf(isNaN(e)?t:e)}}function Au(i,e){var t=e-i;return t?jf(i,t):cf(isNaN(i)?e:i)}var Hf=function i(e){var t=Nl(e);function r(n,a){var o=t((n=Wf(n)).r,(a=Wf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Au(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function Ie(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=Wf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var gh=Ie(Ol),lf=Ie(Ll);function hf(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Xc(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Yc(i,e){return(Xc(e)?hf:Vc)(i,e)}function Vc(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Gs(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function Pl(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function su(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Kf(i,e){var t={},r={},n;(i===null||Fc(i)!=="object")&&(i={}),(e===null||Fc(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Gs(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var df=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cu=new RegExp(df.source,"g");function Ii(i){return function(){return i}}function Tu(i){return function(e){return i(e)+""}}function jc(i,e){var t=df.lastIndex=Cu.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=df.exec(i))&&(n=Cu.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:su(r,n)})),t=Cu.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Tu(u[0].x):Ii(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function Gs(i,e){var t=Fc(e),r;return e==null||t==="boolean"?cf(e):(t==="number"?su:t==="string"?(r=of(e))?(e=r,Hf):jc:e instanceof of?Hf:e instanceof Date?Pl:Xc(e)?hf:Array.isArray(e)?Vc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Kf:su)(i,e)}function hs(i){return+i}function Iu(i){return i*i}function uu(i){return i*(2-i)}function ws(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function Ou(i){return i*i*i}function fu(i){return--i*i*i+1}function zs(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var _s=3,Zf=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(_s),$f=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(_s),Lu=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(_s),Qf=Math.PI,qf=Qf/2;function Du(i){return+i==1?1:1-Math.cos(i*qf)}function $o(i){return Math.sin(i*qf)}function Jf(i){return(1-Math.cos(Qf*i))/2}function Ss(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function tc(i){return Ss(1-+i)}function Hc(i){return 1-Ss(i)}function ec(i){return((i*=2)<=1?Ss(1-i):2-Ss(i-1))/2}function kl(i){return 1-Math.sqrt(1-i*i)}function cu(i){return Math.sqrt(1- --i*i)}function Kc(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var rc=4/11,ph=6/11,Rl=8/11,Bl=3/4,yh=9/11,Fl=10/11,Gl=15/16,mh=21/22,zl=63/64,vf=1/rc/rc;function Ul(i){return 1-Nu(1-i)}function Nu(i){return(i=+i)<rc?vf*i*i:i<Rl?vf*(i-=ph)*i+Bl:i<Fl?vf*(i-=yh)*i+Gl:vf*(i-=mh)*i+zl}function Zc(i){return((i*=2)<=1?1-Nu(1-i):Nu(i-1)+1)/2}var lu=1.70158,nc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(lu),ac=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(lu),gf=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(lu),Us=2*Math.PI,Pu=1,ku=.3,pf=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Us);function n(a){return e*Ss(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Us)},n.period=function(a){return i(e,a)},n}(Pu,ku),ic=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Us);function n(a){return 1-e*Ss(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Us)},n.period=function(a){return i(e,a)},n}(Pu,ku),oc=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Us);function n(a){return((a=a*2-1)<0?e*Ss(-a)*Math.sin((r-a)/t):2-e*Ss(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Us)},n.period=function(a){return i(e,a)},n}(Pu,ku),yf={};function sc(i){return yf[i.toLowerCase()]||k[i]}function uc(i,e){yf[i.toLowerCase()]=e}var mf=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Ru=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},Bu=[1,0,0,0,1,0,0,0,1];function Fu(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,d.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=h(a[s]),f=h(n[s]),f=pa(f,u),f=ts(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=h(a[s]),f=h(n[s]),f=ts(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],x=f[c],w=[],C=0;C<l.length;C++)(0,d.isNumber)(l[C])&&x&&(0,d.isNumber)(x[C])?(o=Gs(x[C],l[C]),w.push(o(t))):w.push(l[C]);r[s].push(w)}}else if(s==="matrix"){var G=Yc(n[s]||Bu,a[s]||Bu),j=G(t);r[s]=j}else mf(s)&&Ru(a[s])?r[s]=a[s]:(0,d.isFunction)(a[s])||(o=Gs(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Wl(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=sc(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else Fu(i,e,a);return!1}var bf=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=fh.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Wl(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),hu=bf,Xl=40,xf=0,bh=":",Yl=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function jh(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(bh+e)>=0)return!0;return!1}function Ms(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function Vl(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&hl(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var jl=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Yl,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Yl,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new eu(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===xf&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===xf){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,x=s.clientY-e.clientY,w=l*l+x*x;c>120||w>Xl?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,Ms(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||Vl(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;Ms(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Hl=jl,Kl="px",$c=nu(),xh=$c&&$c.name==="firefox",qi=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,d.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Hl({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new hu(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");ll&&(n.style.width=t+Kl,n.style.height=r+Kl)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");ll&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(xh&&!(0,d.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,d.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(ef),Qc=qi,Gu=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(ef),As=Gu,Zl=function(i){(0,y.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=Bs(r,[t.minX,t.minY]),f=Bs(r,[t.maxX,t.minY]),c=Bs(r,[t.minX,t.maxY]),l=Bs(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var x=this.attrs;if(x.shadowColor){var w=x.shadowBlur,C=w===void 0?0:w,G=x.shadowOffsetX,j=G===void 0?0:G,et=x.shadowOffsetY,rt=et===void 0?0:et,ot=n-C+j,lt=o+C+j,wt=a-C+rt,Nt=s+C+rt;n=Math.min(n,ot),o=Math.max(o,lt),a=Math.min(a,wt),s=Math.max(s,Nt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Pc),fc=Zl,Ef=new Map;function rs(i,e){Ef.set(i,e)}function so(i){return Ef.get(i)}function Cs(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function hi(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Ba(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function du(i,e){return Math.abs(i-e)<.001}function zu(i,e){var t=(0,d.min)(i),r=(0,d.min)(e),n=(0,d.max)(i),a=(0,d.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Eh(i,e,t,r){return{minX:(0,d.min)([i,t]),maxX:(0,d.max)([i,t]),minY:(0,d.min)([e,r]),maxY:(0,d.max)([e,r])}}function cc(i){return(i+Math.PI*2)%(Math.PI*2)}var ji={box:function(i,e,t,r){return zu([i,t],[e,r])},length:function(i,e,t,r){return Ba(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Ba(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Ba(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(mn.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];mn.normalize(s,s);var u=[n-i,a-e];return Math.abs(mn.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},$l=1e-4;function Ql(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,x=0;x<=f;x++){var w=x*c,C=[n.apply(null,i.concat([w])),n.apply(null,e.concat([w]))],G=Ba(u[0],u[1],C[0],C[1]);G<s&&(o=w,s=G)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var j=i.length;return{x:i[j-1],y:e[j-1]}}s=1/0;for(var x=0;x<32&&!(l<$l);x++){var et=o-l,rt=o+l,C=[n.apply(null,i.concat([et])),n.apply(null,e.concat([et]))],G=Ba(u[0],u[1],C[0],C[1]);if(et>=0&&G<s)o=et,s=G;else{var ot=[n.apply(null,i.concat([rt])),n.apply(null,e.concat([rt]))],lt=Ba(u[0],u[1],ot[0],ot[1]);rt<=1&&lt<s?(o=rt,s=lt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function wh(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Ba(a,o,s,u)}return t/2}function Ws(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function ql(i,e,t){var r=i+t-2*e;if(du(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function qc(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function lc(i,e,t,r,n,a,o){var s=Ws(i,t,n,o),u=Ws(e,r,a,o),f=ji.pointAt(i,e,t,r,o),c=ji.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function Uu(i,e,t,r,n,a,o){if(o===0)return(Ba(i,e,t,r)+Ba(t,r,n,a)+Ba(i,e,n,a))/2;var s=lc(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),Uu.apply(null,u)+Uu.apply(null,f)}var Jc={box:function(i,e,t,r,n,a){var o=ql(i,t,n)[0],s=ql(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Ws(i,t,n,o)),s!==void 0&&f.push(Ws(e,r,a,s)),zu(u,f)},length:function(i,e,t,r,n,a){return Uu(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return Ql([i,t,n],[e,r,a],o,s,Ws)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Ba(u.x,u.y,o,s)},interpolationAt:Ws,pointAt:function(i,e,t,r,n,a,o){return{x:Ws(i,t,n,o),y:Ws(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return lc(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=qc(i,t,n,o),u=qc(e,r,a,o),f=Math.atan2(u,s);return cc(f)}};function Xs(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function tl(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function hc(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(du(n,0))du(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;du(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function wf(i,e,t,r,n,a,o,s,u){var f=Xs(i,t,n,o,u),c=Xs(e,r,a,s,u),l=ji.pointAt(i,e,t,r,u),x=ji.pointAt(t,r,n,a,u),w=ji.pointAt(n,a,o,s,u),C=ji.pointAt(l.x,l.y,x.x,x.y,u),G=ji.pointAt(x.x,x.y,w.x,w.y,u);return[[i,e,l.x,l.y,C.x,C.y,f,c],[f,c,G.x,G.y,w.x,w.y,o,s]]}function gt(i,e,t,r,n,a,o,s,u){if(u===0)return wh([i,t,n,o],[e,r,a,s]);var f=wf(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),gt.apply(null,c)+gt.apply(null,l)}var Jt={extrema:hc,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=hc(i,t,n,o),l=hc(e,r,a,s),x=0;x<c.length;x++)u.push(Xs(i,t,n,o,c[x]));for(var x=0;x<l.length;x++)f.push(Xs(e,r,a,s,l[x]));return zu(u,f)},length:function(i,e,t,r,n,a,o,s){return gt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return Ql([i,t,n,o],[e,r,a,s],u,f,Xs,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return Ba(l.x,l.y,u,f)},interpolationAt:Xs,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:Xs(i,t,n,o,u),y:Xs(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return wf(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=tl(i,t,n,o,u),c=tl(e,r,a,s,u);return cc(Math.atan2(c,f))}};function Ee(i,e){var t=Math.abs(i);return e>0?t:t*-1}var ar={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),x=o*o,w=s*s,C=Math.PI/4,G,j,et=0;et<4;et++){G=o*Math.cos(C),j=s*Math.sin(C);var rt=(x-w)*Math.pow(Math.cos(C),3)/o,ot=(w-x)*Math.pow(Math.sin(C),3)/s,lt=G-rt,wt=j-ot,Nt=c-rt,Dt=l-ot,qt=Math.hypot(wt,lt),ve=Math.hypot(Dt,Nt),ae=qt*Math.asin((lt*Dt-wt*Nt)/(qt*ve)),Me=ae/Math.sqrt(x+w-G*G-j*j);C+=Me,C=Math.min(Math.PI/2,Math.max(0,C))}return{x:i+Ee(G,u),y:e+Ee(j,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Ba(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return cc(o)}};function Er(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function nr(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function fr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function Lr(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function kr(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Fr(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Rr(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function Wr(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function v(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var A={box:function(i,e,t,r,n,a,o){for(var s=fr(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var x=s+l;a<o?a<x&&x<o&&c.push(x):o<x&&x<a&&c.push(x)}for(var l=0;l<c.length;l++){var w=kr(i,e,t,r,n,c[l]);w<u&&(u=w),w>f&&(f=w)}for(var C=Lr(t,r,n),G=1/0,j=-1/0,et=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var rt=C+l;a<o?a<rt&&rt<o&&et.push(rt):o<rt&&rt<a&&et.push(rt)}for(var l=0;l<et.length;l++){var ot=Fr(i,e,t,r,n,et[l]);ot<G&&(G=ot),ot>j&&(j=ot)}return{x:u,y:G,width:f-u,height:j-G}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=v(s-i,u-e,-n),c=f[0],l=f[1],x=ar.nearestPoint(0,0,t,r,c,l),w=Rr(t,r,x.x,x.y);w<a?x=Wr(t,r,a):w>o&&(x=Wr(t,r,o));var C=v(x.x,x.y,n);return{x:C[0]+i,y:C[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return Ba(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:kr(i,e,t,r,n,u),y:Fr(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=Er(i,e,t,r,n,a,o,u),c=nr(i,e,t,r,n,a,o,u);return cc(Math.atan2(c,f))}};function z(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Ba(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function K(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Ba(r[0],r[1],n[0],n[1])}return e}function it(i,e){if(e>1||e<0||i.length<2)return null;var t=z(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var x=(e-a)/l;o=ji.pointAt(f[0],f[1],c[0],c[1],x);break}a+=l}return o}function ut(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=z(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function vt(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=ji.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var yt={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return zu(e,t)},length:function(i){return K(i)},pointAt:function(i,e){return it(i,e)},pointDistance:function(i,e,t){return vt(i,e,t)},tangentAngle:function(i,e){return ut(i,e)}};function _t(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var Rt={box:function(i){return yt.box(i)},length:function(i){return K(_t(i))},pointAt:function(i,e){return it(_t(i),e)},pointDistance:function(i,e,t){return vt(_t(i),e,t)},tangentAngle:function(i,e){return ut(_t(i),e)}};function Qt(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Vt(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Qt(e,n)),r&&(a=r.getCanvasBBox(),e=Qt(e,a)),e}function xe(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=zu(r,n),u=s.x,f=s.y,c=s.width,l=s.height,x={minX:u,minY:f,maxX:u+c,maxY:f+l};return x=Vt(i,x),{x:x.minX,y:x.minY,width:x.maxX-x.minX,height:x.maxY-x.minY}}function ke(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return zu(r,n)}var dr=null;function Xe(){if(!dr){var i=document.createElement("canvas");i.width=1,i.height=1,dr=i.getContext("2d")}return dr}function Ve(i,e,t){var r=1;if((0,d.isString)(i)&&(r=i.split(`
`).length),r>1){var n=je(e,t);return e*r+n*(r-1)}return e}function je(i,e){return e?e-i:i*.14}function Br(i,e){var t=Xe(),r=0;if((0,d.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,d.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,d.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Qr(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function Xr(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Qr(e));var u=Br(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,x=Ve(n,a,o),w={x:t,y:r-x};c&&(c==="end"||c==="right"?w.x-=u:c==="center"&&(w.x-=u/2)),l&&(l==="top"?w.y+=x:l==="middle"&&(w.y+=x/2)),f={x:w.x,y:w.y,width:u,height:x}}return f}var yn=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,dn=/[^\s\,]+/ig;function An(i){var e=i||[];if((0,d.isArray)(e))return e;if((0,d.isString)(e))return e=e.match(yn),(0,d.each)(e,function(t,r){if(t=t.match(dn),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,d.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var Gn=An;function Pn(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,x;if(a){u=r[0],f=r[1];for(var w=0,C=i.length;w<C;w+=1){var G=i[w];u=mn.min([0,0],u,G),f=mn.max([0,0],f,G)}}for(var w=0,j=i.length;w<j;w+=1){var G=i[w];if(w===0&&!t)x=G;else if(w===j-1&&!t)l=G,n.push(x),n.push(l);else{var et=[w?w-1:j-1,w-1][t?0:1];o=i[et],s=i[t?(w+1)%j:w+1];var rt=[0,0];rt=mn.sub(rt,s,o),rt=mn.scale(rt,rt,e);var ot=mn.distance(G,o),lt=mn.distance(G,s),wt=ot+lt;wt!==0&&(ot/=wt,lt/=wt);var Nt=mn.scale([0,0],rt,-ot),Dt=mn.scale([0,0],rt,lt);l=mn.add([0,0],G,Nt),c=mn.add([0,0],G,Dt),c=mn.min([0,0],c,mn.max([0,0],s,G)),c=mn.max([0,0],c,mn.min([0,0],s,G)),Nt=mn.sub([0,0],c,G),Nt=mn.scale([0,0],Nt,-ot/lt),l=mn.add([0,0],G,Nt),l=mn.min([0,0],l,mn.max([0,0],o,G)),l=mn.max([0,0],l,mn.min([0,0],o,G)),Dt=mn.sub([0,0],G,l),Dt=mn.scale([0,0],Dt,lt/ot),c=mn.add([0,0],G,Dt),a&&(l=mn.max([0,0],l,u),l=mn.min([0,0],l,f),c=mn.max([0,0],c,u),c=mn.min([0,0],c,f)),n.push(x),n.push(l),x=c}}return t&&n.push(n.shift()),n}function Va(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=Pn(n,.4,r,t),u=n.length,f=[],c,l,x,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],x=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],x[0],x[1]]);return r&&(c=s[u],l=s[u+1],x=n[0],f.push(["C",c[0],c[1],l[0],l[1],x[0],x[1]])),f}var Xn=Va;function fi(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Fa=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,x=s[u-1][f-1].min+o;s[u][f]=fi(c,l,x)}}return s};function da(i,e){var t=Fa(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var Ya=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,ci=new RegExp("([a-z])["+Ya+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ya+"]*,?["+Ya+"]*)+)","ig"),Oi=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ya+"]*,?["+Ya+"]*","ig");function Hi(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(ci,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Oi,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Si=/[a-z]/;function Qn(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ji(i){var e=Hi(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Si.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,x,w=e[0];(w[0]==="M"||w[0]==="m")&&(o=+w[1],s=+w[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,C=e.length;r<C;r++){var G=e[r],j=a[r-1],et=[],n=G[0],rt=n.toUpperCase();if(n!==rt)switch(et[0]=rt,rt){case"A":et[1]=G[1],et[2]=G[2],et[3]=G[3],et[4]=G[4],et[5]=G[5],et[6]=+G[6]+o,et[7]=+G[7]+s;break;case"V":et[1]=+G[1]+s;break;case"H":et[1]=+G[1]+o;break;case"M":u=+G[1]+o,f=+G[2]+s,et[1]=u,et[2]=f;break;default:for(var ot=1,lt=G.length;ot<lt;ot++)et[ot]=+G[ot]+(ot%2?o:s)}else et=e[r];switch(rt){case"Z":o=+u,s=+f;break;case"H":o=et[1],et=["L",o,s];break;case"V":s=et[1],et=["L",o,s];break;case"T":o=et[1],s=et[2];var wt=Qn([j[1],j[2]],[j[3],j[4]]);et=["Q",wt[0],wt[1],o,s];break;case"S":o=et[et.length-2],s=et[et.length-1];var Nt=j.length,Dt=Qn([j[Nt-4],j[Nt-3]],[j[Nt-2],j[Nt-1]]);et=["C",Dt[0],Dt[1],et[1],et[2],o,s];break;case"M":u=et[et.length-2],f=et[et.length-1];break;default:o=et[et.length-2],s=et[et.length-1]}a.push(et)}return a}var wa=Math.PI*2,Cn=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},fa=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},xa=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Mi=function(i,e,t,r,n,a,o,s,u,f,c,l){var x=Math.pow(n,2),w=Math.pow(a,2),C=Math.pow(c,2),G=Math.pow(l,2),j=x*w-x*G-w*C;j<0&&(j=0),j/=x*G+w*C,j=Math.sqrt(j)*(o===s?-1:1);var et=j*n/a*l,rt=j*-a/n*c,ot=f*et-u*rt+(i+t)/2,lt=u*et+f*rt+(e+r)/2,wt=(c-et)/n,Nt=(l-rt)/a,Dt=(-c-et)/n,qt=(-l-rt)/a,ve=xa(1,0,wt,Nt),ae=xa(wt,Nt,Dt,qt);return s===0&&ae>0&&(ae-=wa),s===1&&ae<0&&(ae+=wa),[ot,lt,ve,ae]},Ys=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,x=l===void 0?0:l,w=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var C=Math.sin(u*wa/360),G=Math.cos(u*wa/360),j=G*(e-r)/2+C*(t-n)/2,et=-C*(e-r)/2+G*(t-n)/2;if(j===0&&et===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var rt=Math.pow(j,2)/Math.pow(a,2)+Math.pow(et,2)/Math.pow(o,2);rt>1&&(a*=Math.sqrt(rt),o*=Math.sqrt(rt));var ot=Mi(e,t,r,n,a,o,c,x,C,G,j,et),lt=ot[0],wt=ot[1],Nt=ot[2],Dt=ot[3],qt=Math.abs(Dt)/(wa/4);Math.abs(1-qt)<1e-7&&(qt=1);var ve=Math.max(Math.ceil(qt),1);Dt/=ve;for(var ae=0;ae<ve;ae++)w.push(fa(Nt,Dt)),Nt+=Dt;return w.map(function(Me){var Fe=Cn(Me[0],a,o,G,C,lt,wt),wr=Fe.x,Yr=Fe.y,Dr=Cn(Me[1],a,o,G,C,lt,wt),pr=Dr.x,an=Dr.y,en=Cn(Me[2],a,o,G,C,lt,wt),yr=en.x,Or=en.y;return{x1:wr,y1:Yr,x2:pr,y2:an,x:yr,y:Or}})};function dc(i,e,t,r,n,a,o,s,u){var f=Ys({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var x=l.x1,w=l.y1,C=l.x2,G=l.y2,j=l.x,et=l.y;return c.push(x,w,C,G,j,et),c},[])}function me(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function or(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),rr(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function rr(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var sn=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},oa=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],x=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],w=0,C=0;C<c;C++){var G=f*l[C]+f,j=sn(G,i,t,n,o),et=sn(G,e,r,a,s),rt=j*j+et*et;w+=x[C]*Math.sqrt(rt)}return f*w},oe=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,x,w,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,x=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,x=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;w=-x/l,w>0&&w<1&&u.push(w);continue}var G=l*l-4*x*c,j=Math.sqrt(G);if(!(G<0)){var et=(-l+j)/(2*c);et>0&&et<1&&u.push(et);var rt=(-l-j)/(2*c);rt>0&&rt<1&&u.push(rt)}}for(var ot=u.length,lt=ot,wt;ot--;)w=u[ot],wt=1-w,f[0][ot]=wt*wt*wt*i+3*wt*wt*w*t+3*wt*w*w*n+w*w*w*o,f[1][ot]=wt*wt*wt*e+3*wt*wt*w*r+3*wt*w*w*a+w*w*w*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},jt=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,x=f/c,w=+l.toFixed(2),C=+x.toFixed(2);if(!(w<+Math.min(i,t).toFixed(2)||w>+Math.max(i,t).toFixed(2)||w<+Math.min(n,o).toFixed(2)||w>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:x}}}},Ae=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},He=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},qe=function(i,e){return i=He(i),e=He(e),Ae(e,i.x,i.y)||Ae(e,i.x2,i.y)||Ae(e,i.x,i.y2)||Ae(e,i.x2,i.y2)||Ae(i,e.x,e.y)||Ae(i,e.x2,e.y)||Ae(i,e.x,e.y2)||Ae(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Ne=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=oe.apply(null,i);return He(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Oe=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),x=u*u,w=x*u,C=c*i+l*3*u*t+f*3*u*u*n+w*o,G=c*e+l*3*u*r+f*3*u*u*a+w*s,j=i+2*u*(t-i)+x*(n-2*t+i),et=e+2*u*(r-e)+x*(a-2*r+e),rt=t+2*u*(n-t)+x*(o-2*n+t),ot=r+2*u*(a-r)+x*(s-2*a+r),lt=f*i+u*t,wt=f*e+u*r,Nt=f*n+u*o,Dt=f*a+u*s,qt=90-Math.atan2(j-rt,et-ot)*180/Math.PI;return{x:C,y:G,m:{x:j,y:et},n:{x:rt,y:ot},start:{x:lt,y:wt},end:{x:Nt,y:Dt},alpha:qt}},We=function(i,e,t){var r=Ne(i),n=Ne(e);if(!qe(r,n))return t?0:[];for(var a=oa.apply(0,i),o=oa.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},x=t?0:[],w=0;w<s+1;w++){var C=Oe.apply(0,i.concat(w/s));f.push({x:C.x,y:C.y,t:w/s})}for(var w=0;w<u+1;w++){var C=Oe.apply(0,e.concat(w/u));c.push({x:C.x,y:C.y,t:w/u})}for(var w=0;w<s;w++)for(var G=0;G<u;G++){var j=f[w],et=f[w+1],rt=c[G],ot=c[G+1],lt=Math.abs(et.x-j.x)<.001?"y":"x",wt=Math.abs(ot.x-rt.x)<.001?"y":"x",Nt=jt(j.x,j.y,et.x,et.y,rt.x,rt.y,ot.x,ot.y);if(Nt){if(l[Nt.x.toFixed(4)]===Nt.y.toFixed(4))continue;l[Nt.x.toFixed(4)]=Nt.y.toFixed(4);var Dt=j.t+Math.abs((Nt[lt]-j[lt])/(et[lt]-j[lt]))*(et.t-j.t),qt=rt.t+Math.abs((Nt[wt]-rt[wt])/(ot[wt]-rt[wt]))*(ot.t-rt.t);Dt>=0&&Dt<=1&&qt>=0&&qt<=1&&(t?x++:x.push({x:Nt.x,y:Nt.y,t1:Dt,t2:qt}))}}return x},se=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,x,w=t?0:[],C=0,G=i.length;C<G;C++){var j=i[C];if(j[0]==="M")r=s=j[1],n=u=j[2];else{j[0]==="C"?(l=[r,n].concat(j.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var et=0,rt=e.length;et<rt;et++){var ot=e[et];if(ot[0]==="M")a=f=ot[1],o=c=ot[2];else{ot[0]==="C"?(x=[a,o].concat(ot.slice(1)),a=x[6],o=x[7]):(x=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=We(l,x,t);if(t)w+=lt;else{for(var wt=0,Nt=lt.length;wt<Nt;wt++)lt[wt].segment1=C,lt[wt].segment2=et,lt[wt].bez1=l,lt[wt].bez2=x;w=w.concat(lt)}}}}}return w};function Ce(i,e){return se(i,e)}function re(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Ye(i,e){return re(i)*re(e)?(i[0]*e[0]+i[1]*e[1])/(re(i)*re(e)):1}function er(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Ye(i,e))}function mr(i,e){return i[0]===e[0]&&i[1]===e[1]}function Ar(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,x=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,w=l*l/(t*t)+x*x/(r*r);w>1&&(t*=Math.sqrt(w),r*=Math.sqrt(w));var C=t*t*(x*x)+r*r*(l*l),G=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(G*=-1),isNaN(G)&&(G=0);var j=r?G*t*x/r:0,et=t?G*-r*l/t:0,rt=(s+f)/2+Math.cos(n)*j-Math.sin(n)*et,ot=(u+c)/2+Math.sin(n)*j+Math.cos(n)*et,lt=[(l-j)/t,(x-et)/r],wt=[(-1*l-j)/t,(-1*x-et)/r],Nt=er([1,0],lt),Dt=er(lt,wt);return Ye(lt,wt)<=-1&&(Dt=Math.PI),Ye(lt,wt)>=1&&(Dt=0),o===0&&Dt>0&&(Dt=Dt-2*Math.PI),o===1&&Dt<0&&(Dt=Dt+2*Math.PI),{cx:rt,cy:ot,rx:mr(i,[f,c])?0:t,ry:mr(i,[f,c])?0:r,startAngle:Nt,endAngle:Nt+Dt,xRotation:n,arcFlag:a,sweepFlag:o}}function vr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ur(i){i=Gn(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=Ar(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var x=u.length;t=[u[x-2],u[x-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&mr(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var w=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=w;var C=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]];else if(f==="Q"){var G=[u[1],u[2]];c.startTangent=[C[0]-G[0],C[1]-G[1]],c.endTangent=[t[0]-G[0],t[1]-G[1]]}else if(f==="T"){var j=e[s-1],G=vr(j.currentPoint,C);j.command==="Q"?(c.command="Q",c.startTangent=[C[0]-G[0],C[1]-G[1]],c.endTangent=[t[0]-G[0],t[1]-G[1]]):(c.command="TL",c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]])}else if(f==="C"){var et=[u[1],u[2]],rt=[u[3],u[4]];c.startTangent=[C[0]-et[0],C[1]-et[1]],c.endTangent=[t[0]-rt[0],t[1]-rt[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[et[0]-rt[0],et[1]-rt[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[rt[0]-et[0],rt[1]-et[1]])}else if(f==="S"){var j=e[s-1],et=vr(j.currentPoint,C),rt=[u[1],u[2]];j.command==="C"?(c.command="C",c.startTangent=[C[0]-et[0],C[1]-et[1]],c.endTangent=[t[0]-rt[0],t[1]-rt[1]]):(c.command="SQ",c.startTangent=[C[0]-rt[0],C[1]-rt[1]],c.endTangent=[t[0]-rt[0],t[1]-rt[1]])}else if(f==="A"){var ot=.001,lt=c.arcParams||{},wt=lt.cx,Nt=wt===void 0?0:wt,Dt=lt.cy,qt=Dt===void 0?0:Dt,ve=lt.rx,ae=ve===void 0?0:ve,Me=lt.ry,Fe=Me===void 0?0:Me,wr=lt.sweepFlag,Yr=wr===void 0?0:wr,Dr=lt.startAngle,pr=Dr===void 0?0:Dr,an=lt.endAngle,en=an===void 0?0:an;Yr===0&&(ot*=-1);var yr=ae*Math.cos(pr-ot)+Nt,Or=Fe*Math.sin(pr-ot)+qt;c.startTangent=[yr-n[0],Or-n[1]];var Kr=ae*Math.cos(pr+en+ot)+Nt,Zr=Fe*Math.sin(pr+en-ot)+qt;c.endTangent=[C[0]-Kr,C[1]-Zr]}e.push(c)}return e}function En(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Jn(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function hn(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function On(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Hn(i,e){if(i.length<2||e.length<2)return!1;var t=hn(i),r=hn(e);if(!On(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=En(i),o=En(e),s=!1;return each(o,function(u){if(Jn(a,u))return s=!0,!1}),s}function Ta(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=Jc.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Jt.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=A.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(et){return!Number.isNaN(et)&&et!==1/0&&et!==-1/0}),r=r.filter(function(et){return!Number.isNaN(et)&&et!==1/0&&et!==-1/0});var x=(0,d.min)(t),w=(0,d.min)(r),C=(0,d.max)(t),G=(0,d.max)(r);if(n.length===0)return{x,y:w,width:C-x,height:G-w};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,j=void 0;s[0]===x?(j=ri(o,e),x=x-j.xExtra):s[0]===C&&(j=ri(o,e),C=C+j.xExtra),s[1]===w?(j=ri(o,e),w=w-j.yExtra):s[1]===G&&(j=ri(o,e),G=G+j.yExtra)}return{x,y:w,width:C-x,height:G-w}}function ri(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,d.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function Bo(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Ur(t),o=Ta(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=Vt(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function _h(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=Vt(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function ds(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}rs("rect",Cs),rs("image",Cs),rs("circle",hi),rs("marker",hi),rs("polyline",xe),rs("polygon",ke),rs("text",Xr),rs("path",Bo),rs("line",_h),rs("ellipse",ds);var Od="0.5.11",Ts=function(i){(0,y.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(eu),Jl=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Ld=function(e){if((0,d.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,d.isNumber)(e))return[e,e,e,e];if((0,d.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},j0=function(e){var t=new Ts(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},H0=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Wu=function(e){return Number.isNaN(Number(e))},Nv=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,x=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),x>a&&(a=x)}var w=Math.floor(t),C=Math.floor(n),G=Math.ceil(r)-Math.floor(t),j=Math.ceil(a)-Math.floor(n);return{x:w,y:C,width:G,height:j,minX:t,minY:n,maxX:r,maxY:a}},K0=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},x=0;x<o;x++){var w=e[x],C=w.source,G=w.target,j="".concat(C,"-").concat(G);if(!c[x]){f[j]||(f[j]=[]),c[x]=!0,f[j].push(w);for(var et=0;et<o;et++)if(x!==et){var rt=e[et],ot=rt.source,lt=rt.target;c[et]||(C===lt&&G===ot?(f[j].push(rt),c[et]=!0,l["".concat(ot,"|").concat(lt,"|").concat(f[j].length-1)]=!0):C===ot&&G===lt&&(f[j].push(rt),c[et]=!0))}}}for(var wt in f)for(var Nt=f[wt],Dt=Nt.length,qt=0;qt<Dt;qt++){var ve=Nt[qt];if(ve.source===ve.target){a&&(ve.type=a),ve.loopCfg={position:u[qt%8],dist:Math.floor(qt/8)*20+50};continue}if(Dt===1&&n&&ve.source!==ve.target){ve.type=n;continue}ve.type=r;var ae=(qt%2===0?1:-1)*(l["".concat(ve.source,"|").concat(ve.target,"|").concat(qt)]?-1:1);Dt%2===1?ve.curveOffset=ae*Math.ceil(qt/2)*s:ve.curveOffset=ae*(Math.floor(qt/2)*s+t)}return e},Pv=B(31278),Z0=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(lt){var wt=lt.getModel(),Nt=wt.x,Dt=wt.y;s>Nt&&(s=Nt),u>Dt&&(u=Dt),f<Nt&&(f=Nt),c<Dt&&(c=Dt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],x=Ja({x:s,y:u},l),w=x.x,C=x.y,G=Ja({x:f,y:c},l),j=G.x,et=G.y;a={minX:w,maxX:j,minY:C,maxY:et,width:j-w,height:et-C,x:w,y:C}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var rt=this.getViewCenter(),ot={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(rt.x-ot.x,rt.y-ot.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,x=n.y+a.y-o.y-n.minY;if(!(Wu(l)||Wu(x))){var w=(0,Pv.vs)(c,[["t",l,x]]);if(!u){var C=ys({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:w})}});e.animate(function(lt){return{matrix:gi(t,w,lt)}},C);return}var G=f.get("minZoom"),j=f.get("maxZoom"),et=s;G&&s<G?(et=G,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):j&&s>j&&(et=j,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var rt=(0,Pv.vs)(w,[["t",-a.x,-a.y],["s",et,et],["t",a.x,a.y]]),ot=ys({animateCfg:r,callback:function(){e.setMatrix(rt),f.emit("viewportchange",{action:"translate",matrix:w}),f.emit("viewportchange",{action:"zoom",matrix:rt})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(lt){return{matrix:gi(t,rt,lt)}},ot)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,x=1/0,w=-1/0,C=-1/0;c.forEach(function(Nt){var Dt=Nt.getModel(),qt=Dt.x,ve=Dt.y;l>qt&&(l=qt),x>ve&&(x=ve),w<qt&&(w=qt),C<ve&&(C=ve)}),f={minX:l,maxX:w,minY:x,maxY:C,width:w-l,height:C-x,x:l,y:x}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var G=this.getViewCenter(),j={x:f.x+f.width/2,y:f.y+f.height/2},et=(a-n[1]-n[3])/f.width,rt=(o-n[0]-n[2])/f.height,ot=et;if(et>rt&&(ot=rt),e)this.animatedFitView(s,u,t,f,G,j,ot,!0);else{var lt=G.x-j.x,wt=G.y-j.y;if(Wu(lt)||Wu(wt))return;r.translate(lt,wt),r.zoom(ot,G)||console.warn("zoom failed, ratio out of range, ratio: %f",ot)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),x=c.get("width"),w=c.get("height"),C=c.get("group"),G=C.getMatrix()||[1,0,0,0,1,0,0,0,1];C.resetMatrix();var j,et=c.getNodes();if(et.length>c.get("optimizeThreshold")){var rt=1/0,ot=1/0,lt=-1/0,wt=-1/0;et.forEach(function(Yr){var Dr=Yr.getModel(),pr=Dr.x,an=Dr.y;rt>pr&&(rt=pr),ot>an&&(ot=an),lt<pr&&(lt=pr),wt<an&&(wt=an)}),j={minX:rt,maxX:lt,minY:ot,maxY:wt,width:lt-rt,height:wt-ot,x:rt,y:ot}}else j=C.getCanvasBBox();if(!(j.width===0||j.height===0)){var Nt=this.getViewCenter(),Dt={x:j.x+j.width/2,y:j.y+j.height/2},qt=(x-l[1]-l[3])/j.width,ve=(w-l[0]-l[2])/j.height,ae;if(s==="x"?ae=qt:s==="y"?ae=ve:ae=f==="max"?Math.max(qt,ve):Math.min(qt,ve),a&&(ae=ae<1?ae:1),t)this.animatedFitView(C,G,r,j,Nt,Dt,ae,!0);else{var Me=c.getZoom(),Fe=Me*ae,wr=c.get("minZoom");Fe<wr&&(Fe=wr,console.warn("fitview failed, ratio out of range, ratio: %f",ae,"graph minzoom has been used instead")),c.translate(Nt.x-Dt.x,Nt.y-Dt.y),c.zoomTo(Fe,Nt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Ld(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,x=0,w=0;this.graph.get("canvas").animate(function(C){x=u*C,w=f*C,n.graph.translate(x-c,w-l),c=x,l=w},(0,y.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=Ki({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Ja({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,d.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},x=0,w=e;x<w.length;x++){var C=w[x],G=C.getBBox();G.minX<l.minX&&(l.minX=G.minX),G.minY<l.minY&&(l.minY=G.minY),G.maxX>l.maxX&&(l.maxX=G.maxX),G.maxY>l.maxY&&(l.maxY=G.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var j=this.getViewCenter(),et={x:l.x+l.width/2,y:l.y+l.height/2},rt=(s-o[1]-o[3])/l.width,ot=(u-o[0]-o[2])/l.height,lt=rt;rt>ot&&(lt=ot),r?this.animatedFitView(f,c,n,l,j,et,lt,t):(a.translate(j.x-et.x,j.y-et.y),t&&!a.zoom(lt,j)&&console.warn("zoom failed, ratio out of range, ratio: %f",lt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,d.isNumber)(e)||!(0,d.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),$0=Z0;function Dd(i){return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(i)}function kv(i){if(typeof i!="string")return i;var e=function(Dt){if(typeof Dt!="string")return Dt;try{return JSON.parse(Dt.trim())}catch(qt){return Dt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Dt){return Dt[Dt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Dt=[],qt=0;qt<arguments.length;qt++)Dt[qt]=arguments[qt];return Dt.some(function(ve){return r(o)===ve})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var x=n[c],w=s('"',"'");if(!w&&!x.trim()){c+=1;continue}var C=n[c-1]==="\\",G=s("}"),j=s("]"),et=s(","),rt=u();if(w)if(r(o)===x&&!C){o.pop();var ot=e(l);rt.push(ot),f=ot,l=""}else l+=x;else if(j&&x===",")l&&(rt.push(e(l)),l="");else if(G&&x===":")o.push(","),l&&(rt.push(l),l="");else if(et&&x===",")l&&(rt.push(e(l)),l=""),o.pop();else if(x==="}"&&(G||et)){l&&(rt.push(e(l)),l=""),et&&o.pop();for(var lt={},wt=1;wt<rt.length;wt+=2)lt[rt[wt-1]]=rt[wt];a.pop(),a.length&&r(a).push(lt),o.pop(),f=lt}else x==="]"&&j?(l&&(rt.push(e(l)),l=""),a.pop(),a.length&&r(a).push(rt),o.pop(),f=rt):x==="{"?(a.push([]),o.push("}")):x==="["?(a.push([]),o.push("]")):x==='"'?o.push('"'):x==="'"?o.push("'"):l+=x;c+=1}return f||l}var Q0=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},q0=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,d.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Rv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Rv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=Q0(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=kv(f);t=(0,y.__assign)((0,y.__assign)({},t),c)}else a[u]=kv(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&Dd(e.style[a.name])==="object"&&(a.attrs=(0,y.__assign)((0,y.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,y.__assign)((0,y.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function J0(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=ks(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,y.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Bv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,y.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,y.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=Bv(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=J0(i,e,r),i.attrs=(0,y.__assign)((0,y.__assign)({},i.attrs),i.bbox),i}function Fv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],x=0;x<f;x+=1)u.push(Fv(l[x],c[x]));var w=Object.keys(e.attrs),C=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:w.filter(function(G){return G!=="children"}).some(function(G){return i.attrs[G]!==e.attrs[G]||!C.includes(G)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Gv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=q0(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Bv(Rv(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,x=l===void 0?{}:l,w=c.bbox,C=c.type,G=c.children,j=(0,y.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var et=a.addShape(c.type,(0,y.__assign)({attrs:x,origin:{bbox:w,type:C,children:G}},j));c.keyshape&&(s=et)}c.children&&c.children.forEach(function(rt){return f(rt)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Fv(u,f),l=function C(G){var j;G.type!=="group"&&o.addShape(G.type,{attrs:G.attrs}),!((j=G.children)===null||j===void 0)&&j.length&&G.children.map(function(et){return C(et)})},x=function C(G){var j,et=s.find(function(rt){return rt.attrs.key===G.attrs.key});et&&o.removeChild(et),!((j=G.children)===null||j===void 0)&&j.length&&G.children.map(function(rt){return C(rt)})},w=function C(G){var j=G.key;if(G.type!=="group"){var et=s.find(function(ot){return ot.attrs.key===j});switch(G.action){case"change":if(et){var rt=G.val.keyshape?a.getOriginStyle():{};et.attr((0,y.__assign)((0,y.__assign)({},rt),G.val.attrs))}break;case"add":l(G.val);break;case"delete":x(G.val);break;case"restructure":x(G.formerTarget),l(G.nowTarget);break;default:break}}G.children&&G.children.forEach(function(ot){return C(ot)})};w(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Nd={};function zv(i){return Nd[i]||(Nd[i]=(0,d.upperFirst)(i)),Nd[i]}var ty={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Pd={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Hh=function(){function i(){}return i.registerFactory=function(e,t){var r=zv(e),n=ty,a=(0,y.__assign)((0,y.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=zv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Gv(t);a=(0,y.__assign)((0,y.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Gv(s);a=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Pd;a=(0,y.__assign)((0,y.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Pd,o=(0,y.__assign)((0,y.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Pd,o=(0,y.__assign)((0,y.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Ao=Hh;Hh.registerFactory("node",{defaultShapeType:"circle"}),Hh.registerFactory("edge",{defaultShapeType:"line"}),Hh.registerFactory("combo",{defaultShapeType:"circle"});var kd="bboxCache",Rd="bboxCanvasCache",s_=null,ey=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Jl(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,d.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ha(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ha(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var w=this.get("originStyle");a&&!w[a]&&(w[a]={});for(var C=this.getCurrentStatesStyle(),G=function(et){var rt=t[et],ot=rt.get("name"),lt=rt.attr();if(ot&&ot!==a){var wt=C[ot];w[ot]||(w[ot]={}),wt?Object.keys(lt).forEach(function(qt){var ve=lt[qt];ve!==wt[qt]&&(w[ot][qt]=ve)}):w[ot]=rt.get("type")!=="image"?(0,d.clone)(lt):n.getShapeStyleByName(ot)}else{var Nt=rt.attr(),Dt={};Object.keys(C).forEach(function(qt){var ve=C[qt];(qt===a||!(0,d.isPlainObject)(ve))&&(Dt[qt]=ve)}),Object.keys(Nt).forEach(function(qt){var ve=Nt[qt];Dt[qt]!==ve&&(a?w[a][qt]=ve:w[qt]=ve)})}},s=0;s<t.length;s++)G(s);delete w.path,delete w.matrix,delete w.x,delete w.y,w[a]&&(delete w[a].x,delete w[a].y,delete w[a].matrix,delete w[a].path),n.set("originStyle",w)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var x=Jl("shape");u.set("name",x),e.shapeMap[x]=u,o[x]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,d.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Ao.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,d.isPlainObject)(e)?this._cfg=(0,y.__assign)((0,y.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(kd,null),this.set(Rd,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,d.each)(r.attr(),function(a,o){(o!=="img"||(0,d.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,y.__assign)((0,y.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,d.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,d.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,d.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,d.isString)(t)){var f=r.filter(function(x){return x.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(x){return!x.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,d.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,d.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Xo(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(kd);return e||(e=this.calculateBBox(),this.set(kd,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Rd);return e||(e=this.calculateCanvasBBox(),this.set(Rd,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Uv=ey,Kh={source:"start",target:"end"},Xu="Node",th="Point",ry="Anchor",ny=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Kh[t]+th,a=t+Xu,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,d.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Kh[t]+th,o=t+Xu,s=this.get(a);if(!s){var u=this.get(o),f=t+ry,c=this.getPrePoint(t,n),l=r[f];(0,d.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,d.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Xu,n=Kh[t]+th,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Xu,n=Kh[t]+th,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Xu)),n=this.get("target".concat(Xu));return r?delete t["source".concat(Xu)]:t.source=this.get("start".concat(th)),n?delete t["target".concat(Xu)]:t.target=this.get("end".concat(th)),!(0,d.isString)(t.source)&&!(0,d.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,d.isString)(t.target)&&!(0,d.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,d.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Xu)),r=this.get("target".concat(Xu));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Uv),Wv=ny,Bd="anchorPointsCache",ay="bboxCache",iy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=_o(t[0],r),s=0;s<t.length;s++){var u=t[s],f=_o(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=ss({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=wn({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Uo(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Bd);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,d.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Bd,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(ay,null),this.set(Bd,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,d.isNil)(t.x),f=!(0,d.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,d.isNumber)(t.x)||(0,d.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Uv),Fd=iy,Xv="bboxCache",Yv="bboxCanvasCache",Vv="sizeCache",jv="anchorPointsCache",oy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,d.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,d.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||xt.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},r),t.style),f);var c=t.padding||xt.defaultCombo.padding;return(0,d.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Vv,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=ha(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(Xv)||{},o=a.x,s=a.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(jv,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Yv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Xv,null),this.set(Yv,null),this.set(jv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Vv,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Fd),Hv=oy,Zh="node",$h="edge",Kv="vedge",Sh="combo",sy="default",Zv="Mapper",_f="stateStyles",uy=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,d.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Kv?$h:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,d.upperFirst)(n),s=null,u=r.get(n+(0,d.upperFirst)(_f))||{},f=r.get(sy+o);t[_f]&&(u=t[_f]),f&&(0,d.each)(f,function(Nt,Dt){(0,d.isObject)(Nt)&&!(0,d.isArray)(Nt)?t[Dt]=(0,d.deepMix)({},Nt,t[Dt]):(0,d.isArray)(Nt)?t[Dt]=t[Dt]||(0,d.clone)(f[Dt]):t[Dt]=t[Dt]||f[Dt]});var c=r.get(n+Zv);if(c){var l=c(t);l[_f]&&(u=l[_f],delete l[_f]),(0,d.each)(l,function(Nt,Dt){(0,d.isObject)(Nt)&&!(0,d.isArray)(Nt)?t[Dt]=(0,d.deepMix)({},t[Dt],Nt):t[Dt]=l[Dt]||t[Dt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===$h||e===Kv){var x=void 0,w=void 0;if(x=t.source,w=t.target,x&&(0,d.isString)(x)&&(x=r.findById(x)),w&&(0,d.isString)(w)&&(w=r.findById(w)),!x||!w){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}x.getType&&x.getType()==="combo"&&(t.isComboEdge=!0),w.getType&&w.getType()==="combo"&&(t.isComboEdge=!0),s=new Wv({model:t,source:x,target:w,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Zh)s=new Fd({model:t,styles:u,group:a.addGroup()});else if(e===Sh){var C=t.children,G=Rs(C,r),j=void 0,et=void 0;if(isNaN(G.x)?isNaN(t.x)&&(j=Math.random()*100):j=G.x,isNaN(G.y)?isNaN(t.y)&&(et=Math.random()*100):et=G.y,isNaN(t.x)||isNaN(t.y))t.x=j,t.y=et;else{var rt=t.x-j,ot=t.y-et;this.updateComboSucceeds(t.id,rt,ot,C)}var lt=a.addGroup();lt.setZIndex(t.depth),s=new Hv({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Rs([],r):G,group:lt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(G.width=Math.hypot(G.height,G.width),G.height=G.width,s.set("bbox",G),s.refresh());var wt=s.getModel();(C||[]).forEach(function(Nt){var Dt=r.findById(Nt.id);s.addChild(Dt),Nt.depth=wt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,d.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Zv),f=e.getModel(),c=f.x,l=f.y,x=e.getUpdateType(t);if(u){var w=(0,d.deepMix)({},f,t),C=u(w),G=(0,d.deepMix)({},f,C,t);C[_f]&&(e.set("styles",G[_f]),delete G[_f]),(0,d.each)(G,function(ae,Me){t[Me]=ae})}else(0,d.each)(t,function(ae,Me){f[Me]&&(0,d.isObject)(ae)&&!(0,d.isArray)(ae)&&(t[Me]=(0,y.__assign)((0,y.__assign)({},f[Me]),t[Me]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===$h){if(t.source){var j=t.source;(0,d.isString)(j)&&(j=o.findById(j)),e.setSource(j)}if(t.target){var et=t.target;(0,d.isString)(et)&&(et=o.findById(et)),e.setTarget(et)}e.update(t)}else if(s===Zh){e.update(t,x);var rt=e.getEdges();x==="move"?(0,d.each)(rt,function(ae){r.edgeToBeUpdateMap[ae.getID()]={edge:ae,updateType:x},r.throttleRefresh()}):x!=null&&x.includes("bbox")&&(0,d.each)(rt,function(ae){ae.refresh(x)})}else if(s===Sh){if(e.update(t,x),!isNaN(t.x)||!isNaN(t.y)){var ot=t.x-c||0,lt=t.y-l||0;this.updateComboSucceeds(f.id,ot,lt)}var wt=e.getEdges(),Nt=(x==null?void 0:x.includes("bbox"))||x==="move";if(Nt&&s===Sh){var Dt=e.get("shapeFactory"),qt=f.type||"circle",ve=f.animate===void 0||t.animate===void 0?(a=(n=Dt[qt])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;ve?setTimeout(function(){if(!(!e||e.destroyed)){var ae=e.getKeyShape();!ae||ae.destroyed||(0,d.each)(wt,function(Me){Me&&!Me.destroyed&&Me.refresh()})}},201):(0,d.each)(wt,function(ae){ae.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,d.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Rs(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var x=c,w=l;r?(x=isNaN(u.x)?c:u.x,w=isNaN(u.y)?l:u.y):(x=isNaN(c)?u.x:c,w=isNaN(l)?u.y:l),e.update({x,y:w});var C=e.get("shapeFactory"),G=u.type||"circle",j=u.animate===void 0?(o=(a=C[G])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;j?setTimeout(function(){if(!(!e||e.destroyed)){var et=e.getKeyShape();!et||et.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){wi(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,d.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,d.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===$h){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var x=r.get("comboTrees"),w=e.get("id");if(a===Zh){var C=e.getModel().comboId;if(x&&C){var G=x,j=!1;x.forEach(function(Nt){j||wi(Nt,function(Dt){if(Dt.id===w&&G){var qt=G.indexOf(Dt);return G.splice(qt,1),j=!0,!1}return G=Dt.children,!0})})}for(var et=e.getEdges(),rt=et.length-1;rt>=0;rt--)r.removeItem(et[rt],!1);C&&r.updateCombo(C)}else if(a===Sh){var ot=e.getModel().parentId,lt,wt=!1;(x||[]).forEach(function(Dt){wt||wi(Dt,function(qt){return qt.id===w?(lt=qt,wt=!0,!1):!0})}),lt.removed=!0,lt&&lt.children&&lt.children.forEach(function(Dt){t.removeItem(Dt.id)});for(var et=e.getEdges(),rt=et.length;rt>=0;rt--)r.removeItem(et[rt],!1);ot&&r.updateCombo(ot)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,d.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,d.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,d.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){oo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,d.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Zh){var a=e.getEdges();(0,d.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Sh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||wi(l,function(x){return x.id===s?(u=x.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var x=n.findById(l.id);r.changeItemVisibility(x,t)});var a=e.getEdges();(0,d.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),fy=uy,cy=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,d.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,d.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),ly=cy,hy=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},$v=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Xn(t);return u.unshift(["M",e[0].x,e[0].y]),u},Qh=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];mn.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},dy=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=hy(a,s)}return t&&(n+="Z"),n},Gd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},zd=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,x=e[s+1].x,w=e[s+1].y,C=s!==e.length-2?e[s+2].x:x,G=s!==e.length-2?e[s+2].y:w,j=c+(x-u)/6,et=l+(w-f)/6,rt=x-(C-c)/6,ot=w-(G-l)/6;o.push(["C",j,et,rt,ot,x,w])}return o.unshift(["M",n.x,n.y]),o},Qv=function(e,t){return mn.scale([0,0],mn.normalize([0,0],e),t)},qv=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},Jv=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Ud(i,e){var t=function(l){var x=[l[0][0],l[0][1]-e],w=[l[0][0],l[0][1]+e];return"M ".concat(x," A ").concat(e,",").concat(e,",0,0,0,").concat(w," A ").concat(e,",").concat(e,",0,0,0,").concat(x)},r=function(l){var x=mn.scale([0,0],qv(l[0],l[1]),e),w=mn.scale([0,0],x,-1),C=mn.add([0,0],l[0],x),G=mn.add([0,0],l[1],x),j=mn.add([0,0],l[1],w),et=mn.add([0,0],l[0],w);return"M ".concat(C," L ").concat(G," A ").concat([e,e,"0,0,0",j].join(",")," L ").concat(et," A ").concat([e,e,"0,0,0",C].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=mn.scale([0,0],qv(o,s),e);n[a]=[mn.add([0,0],o,u),mn.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var x="";return l===0&&(x="M ".concat(n[n.length-1][1]," ")),x+="".concat(f+c[0]," L ").concat(c[1]),x}),n.join(" ")}function tg(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],x=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",x].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=Jv(c[0],c[1]),x=Qv(l,e),w=mn.add([0,0],c[0],mn.scale([0,0],x,-1)),C=mn.add([0,0],c[1],x),G=1.2*e,j=Qv(mn.normalize([0,0],l),G),et=mn.scale([0,0],j,-1),rt=mn.add([0,0],w,et),ot=mn.add([0,0],C,et),lt=mn.add([0,0],w,j);return"M ".concat(w," C ").concat([rt,ot,C].join(",")," S ").concat([lt,w].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:mn.normalize([0,0],Jv(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=mn.normalize([0,0],mn.add([0,0],a[s].v,mn.scale([0,0],a[o].v,-1)));a[o].p=mn.add([0,0],a[o].p,mn.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var vy=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},eg=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},rg=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,x){return l.x===x.x?l.y-x.y:l.x-x.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&eg(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&eg(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},gy={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function py(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,x,w,C=0;C<e.width*e.height;C++){if(x=c,w=l,i.findIndex(function(j){return j.x===c&&j.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var G=a(c,l);switch(G){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:x===0&&(w===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:x===1&&(w===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(G)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var yy=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},my=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=io(s,u),c=new Za(s.x,s.y,u.x,u.y),l=r.reduce(function(x,w){return ao(w,c)>0?x+1:x},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},ng=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=ao(a,t);o>=0&&o<r&&(n=a,r=o)}),n},by=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(w,C){var G=!1;return C.forEach(function(j){G||(po(w,{x:j.x1,y:j.y1})||po(w,{x:j.x2,y:j.y2}))&&(G=!0)}),G},c=function(w,C){for(var G=0,j=C;G<j.length;G++){var et=j[G],rt=et.getBBox(),ot=[[rt.x,rt.y],[rt.x+rt.width,rt.y],[rt.x,rt.y+rt.height],[rt.x+rt.width,rt.y+rt.height]];if(vo(ot,w.x,w.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var w=o.pop(),C=ng(t,w);if(C){var G=jo(C,w),j=G[0],et=G[1];if(et===2){var rt=function(lt){for(var wt=n,Nt=ag(C,wt,j,lt),Dt=f(Nt,o)||f(Nt,a),qt=c(Nt,t);!Dt&&qt&&wt>=1;)wt/=1.5,Nt=ag(C,wt,j,lt),Dt=f(Nt,o)||f(Nt,a),qt=c(Nt,t);Nt&&!Dt&&(!lt||!qt)&&(o.push(new Za(w.x1,w.y1,Nt.x,Nt.y)),o.push(new Za(Nt.x,Nt.y,w.x2,w.y2)),s=!0)};rt(!0),s||rt(!1)}}s||a.push(w),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function xy(i,e,t,r,n){var a=my(i,t,e);if(a===null)return[];var o=function(l){for(var x=[];l.length>0;){var w=l.pop();if(l.length===0){x.push(w);break}var C=l.pop(),G=new Za(w.x1,w.y1,C.x2,C.y2),j=ng(e,G);j?(x.push(w),l.push(C)):l.push(G)}return x},s=new Za(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=by(s,e,r,n),f=o(u);return f}var Ey=function(e,t,r){var n=Object.assign(gy,r),a=Yi(e.map(function(rt){return{x:rt.getModel().x,y:rt.getModel().y}}));e=e.sort(function(rt,ot){return io({x:rt.getModel().x,y:rt.getModel().y},a)-io({x:ot.getModel().x,y:ot.getModel().y},a)});var o=[],s=[];e.forEach(function(rt){var ot=xy(rt,t,o,n.maxRoutingIterations,n.morphBuffer);ot.forEach(function(lt){s.push(lt)}),o.push(rt)});for(var u=wy(e,s,n.nodeR0),f=yy(u.width,u.height,n.pixelGroupSize),c=[],l=[],x=0;x<n.maxMarchingIterations;x++)if(_y(e,t,s,u,f,n),c=[],l=[],!!new py(c,f,n.threshold).march()){var w=c.map(function(rt){return{x:Math.round(rt.x*n.pixelGroupSize+u.minX),y:Math.round(rt.y*n.pixelGroupSize+u.minY)}});if(w){var C=w.length;if(n.skip>1)for(C=Math.floor(w.length/n.skip);C<3&&n.skip>1;)n.skip-=1,C=Math.floor(w.length/n.skip);for(var G=0,j=0;j<C;j+=1,G+=n.skip)l.push({x:w[G].x,y:w[G].y})}var et=function(){for(var ot=0,lt=e;ot<lt.length;ot++){var wt=lt[ot],Nt=l.map(function(Dt){return[Dt.x,Dt.y]});if(!vo(Nt,wt.getBBox().centerX,wt.getBBox().centerY))return!1}return!0};if(l&&et())return l;if(n.threshold*=.9,x<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function wy(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function _y(i,e,t,r,n,a){function o(w,C){var G=Math.floor((w-C)/a.pixelGroupSize);return G<0?0:G}function s(w,C){return w*a.pixelGroupSize+C}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(C,G){var j=Math.min(o(C.minX,G+r.minX),n.width),et=Math.min(o(C.minY,G+r.minY),n.height),rt=Math.min(o(C.maxX,-G+r.minX),n.width),ot=Math.min(o(C.maxY,-G+r.minY),n.height);return[j,et,rt,ot]},l=function(C,G){for(var j=C.getBBox(),et=c(j,a.nodeR1),rt=et[0],ot=et[1],lt=et[2],wt=et[3],Nt=ot;Nt<wt;Nt+=1)for(var Dt=rt;Dt<lt;Dt+=1)if(!(G<0&&n[Dt+Nt*n.width]<=0)){var qt=s(Dt,r.minX),ve=s(Nt,r.minY),ae=$i({x:qt,y:ve},{x:j.minX,y:j.minY,width:j.width,height:j.height});if(ae<Math.pow(a.nodeR1,2)){var Me=Math.sqrt(ae)-a.nodeR1;n.cells[Dt+Nt*n.width]+=G*Me*Me}}},x=function(C,G){for(var j=C.getBBox(),et=c(j,a.edgeR1),rt=et[0],ot=et[1],lt=et[2],wt=et[3],Nt=ot;Nt<wt;Nt+=1)for(var Dt=rt;Dt<lt;Dt+=1)if(!(G<0&&n.cells[Dt+Nt*n.width]<=0)){var qt=s(Dt,r.minX),ve=s(Nt,r.minY),ae=go({x:qt,y:ve},C);if(ae<Math.pow(a.edgeR1,2)){var Me=Math.sqrt(ae)-a.edgeR1;n.cells[Dt+Nt*n.width]+=G*Me*Me}}};a.nodeInfluenceFactor&&i.forEach(function(w){l(w,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(w){x(w,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(w){l(w,a.negativeNodeInfluenceFactor/u)})}function ag(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(C,G){return n.width*((C.y-n.minY+(G.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var x=l(o,u);return x<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var w=l(a,s);return w<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Sy=function(){function i(e,t){this.cfg=(0,d.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=rg(e),a=Ud(r.map(function(o){return[o.x,o.y]}),this.padding),n=Hi(a);break;case"smooth-convex":r=rg(e),r.length===2?(a=Ud(r.map(function(o){return[o.x,o.y]}),this.padding),n=Hi(a)):r.length>2&&(a=tg(r.map(function(o){return[o.x,o.y]}),this.padding),n=zd(a));break;case"bubble":r=Ey(e,t,this.cfg.bubbleCfg),n=r.length>=2&&zd(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,y.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,d.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,d.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Gd(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Wi(n,Gd(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),ig=Sy,Mh=St,My="node",Ay=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,d.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){wi(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,x=o[c.target]||0,w=Math.max(l,x);a[w]?a[w].push(c.id):a[w]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,d.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Eo(r.cfg.maxStep),r.redoStack=new Eo(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new $0(this),r=new _c(this),n=new fy(this),a=new ly(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:xt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:xt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:xt.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:xt.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:xt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,d.isPlainObject)(t)?this.cfg=(0,y.__assign)((0,y.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Eo(this.cfg.maxStep),this.redoStack=new Eo(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,d.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,d.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,d.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=ys({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});So(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Mh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");So(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,x=l*t,w=t,C=!1;if(f&&x<f?(w=f/l,C=!0):c&&x>c&&(w=c/l,C=!0),r?u=Mh(u,[["t",-r.x,-r.y],["s",w,w],["t",r.x,r.y]]):u=Mh(u,[["s",w,w]]),n){var G=(0,d.clone)(s.getMatrix());G||(G=[1,0,0,0,1,0,0,0,1]);var j=G[0],et=j*w,rt=ys({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(ot){if(ot===1)G=u;else{var lt=ti(j,et,ot)/G[0];r?G=Mh(G,[["t",-r.x,-r.y],["s",lt,lt],["t",r.x,r.y]]):G=Mh(G,[["s",lt,lt]])}return{matrix:G}},rt)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!C},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,d.isString)(t)&&(n=this.findById(t)),!n&&(0,d.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,y.__assign)((0,y.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,y.__assign)((0,y.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var x=Js(this.get("comboTrees"));this.set("comboTrees",x)}}},e.prototype.innerAddItem=function(t,r,n){if(!mo(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(C){u||oo(C,function(G){if(r.parentId===G.id){u=!0;var j=(0,y.__assign)({id:r.id,depth:G.depth+2},r);G.children?G.children.push(j):G.children=[j],r.depth=j.depth,a=n.addItem(t,r)}var et=s[G.id];return u&&et&&et.getType&&et.getType()==="combo"&&n.updateCombo(et,G.children),!0})}),!u){var f=(0,y.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,d.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),x=!1,w=!1;o.forEach(function(C){w||x||oo(C,function(G){if(G.id===r.id)return w=!0,!1;if(r.comboId===G.id&&!w){x=!0;var j=(0,d.clone)(r);j.itemType="node",G.children?G.children.push(j):G.children=[j],j.depth=G.depth+1}return x&&l[G.id].getType&&l[G.id].getType()==="combo"&&n.updateCombo(l[G.id],G.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,y.__assign)((0,y.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var x=t[u].type,w=s[u];if(w&&w!==!0){var C=(0,y.__assign)((0,y.__assign)({},w.getModel()),{itemType:x});switch(x){case"node":l.nodes.push(C);break;case"edge":l.edges.push(C);break;case"combo":l.combos.push(C);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,d.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,d.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,y.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,d.each)(l,function(G){return a.setItemState(s,G,!1)}),o.updateItem(s,r),c==="combo"&&(0,d.each)(l,function(G){return a.setItemState(s,G,!0)}),u){var x={nodes:[],edges:[],combos:[]},w={nodes:[],edges:[],combos:[]},C=(0,y.__assign)({id:f.id},r);switch(c){case"node":x.nodes.push(f),w.nodes.push(C);break;case"edge":x.edges.push(f),w.edges.push(C);break;case"combo":x.combos.push(f),w.combos.push(C);break;default:break}this.pushStack("update",{before:x,after:w})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,d.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){ms(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(j){return{type:"node",model:j}}),!1,!1),(f==null?void 0:f.length)!==0){var c=qs(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(j){return{type:"edge",model:j}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var x=t.get("layoutController");if(x){if(x.layout(w),this.destroyed)return}else w();function w(){(t.get("comboTrees")||[]).forEach(function(j){oo(j,function(et){var rt=t.findById(et.id);return rt.getType()==="combo"&&et.collapsed&&(t.collapseCombo(et.id,!1),t.updateCombo(rt)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var j;(j=t.getCombos())===null||j===void 0||j.forEach(function(et){et.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var C=this.getNodes();C.forEach(function(j){j.toFront()})}else{var G=this.getEdges();G.forEach(function(j){j.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,d.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===My){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!ms(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(rt){return o.clearItemStates(rt)}),this.getEdges().map(function(rt){return o.clearItemStates(rt)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},x=s.combos;if(x){var w=qs(x,s.nodes);this.set("comboTrees",w)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,d.each)(c,function(rt,ot){c[ot].getModel().depth=0,!(rt.getType&&rt.getType()==="edge")&&(rt.getType&&rt.getType()==="combo"?(delete c[ot],rt.destroy()):l.nodes.indexOf(rt)<0&&(delete c[ot],o.remove(rt,!1)))});for(var C=this.getCombos(),G=C.length,j=G-1;j>=0;j--)C[j].destroyed&&C.splice(j,1);x&&(o.addCombos(x),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,d.each)(c,function(rt,ot){rt.getType&&(rt.getType()==="node"||rt.getType()==="combo")||l.edges.indexOf(rt)<0&&(delete c[ot],o.remove(rt,!1))}),(this.get("comboTrees")||[]).forEach(function(rt){oo(rt,function(ot){var lt=n.findById(ot.id);return lt.getType()==="combo"&&ot.collapsed&&n.collapseCombo(ot.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var et=this.get("layoutController");return et&&(et.changeData(function(){setTimeout(function(){var rt;(rt=o.getCombos())===null||rt===void 0||rt.forEach(function(ot){ot.set("animate",!0)})},0)}),o.get("animate")&&!et.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(rt){return rt.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,d.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(et){var rt=a.findById(et),ot=rt.getType();if(!(ot!=="node"&&ot!=="combo")){var lt=rt.getModel();c["".concat(ot,"s")].push({id:et,parentId:ot==="node"?lt.comboId:lt.parentId})}});var l=this.get("comboTrees"),x=new Set(r),w=new Map;l&&(l.forEach(function(et){oo(et,function(rt,ot,lt){if(x.has(rt.id)){if(ot){var wt=a.findById(ot.id),Nt=a.findById(rt.id);ot.children.splice(lt,1),wt.removeChild(Nt),o.updateCombo(wt,ot.children)}rt.itemType==="combo"&&w.set(rt.id,rt)}return!0})}),l=l.filter(function(et){return!x.has(et.id)}),this.set("comboTrees",l));var C={nodes:[],combos:[]},G=r.map(function(et){var rt=a.findById(et),ot=rt.getModel(),lt="";rt.getType&&(lt=rt.getType());var wt=w.get(et)||{id:rt.getID(),itemType:lt};return lt==="combo"?(wt.parentId=s,ot.parentId=s):lt==="node"&&(wt.comboId=s,ot.comboId=s),f&&C["".concat(lt,"s")].push({id:ot.id,parentId:s}),wt});u.children=G,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(et){wi(et,function(rt){return rt.id===s?(rt.itemType="combo",rt.children=G,!1):!0})}),this.sortCombos()),f&&(C.combos.push(u),this.pushStack("createCombo",{before:c,after:C}));var j=this.findById(s);!j.getModel().parentId&&j.getChildren().combos.length&&this.updateComboTree(j,void 0,!1)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,d.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var x=this.get("itemMap"),w=u.get("id"),C,G=[],j=this.get("combos"),et=this.findById(c),rt=r&&this.get("enabledStack"),ot={};if(rt&&(ot=(0,d.clone)(f),ot.children=[]),l.forEach(function(Dt){C||oo(Dt,function(qt){var ve;if(qt.id===w){C=qt;var ae=u.getEdges().map(function(wr){return wr.getID()});ae.forEach(function(wr){n.removeItem(wr,!1)});var Me=j.indexOf(u);j.splice(Me,1),delete x[w];var Fe=(0,d.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:Fe,type:"combo"})}if(c&&C&&qt.id===c){et.removeCombo(u),G=qt.children;var Me=G.indexOf(C);return Me!==-1&&G.splice(Me,1),(ve=C.children)===null||ve===void 0||ve.forEach(function(Yr){var Dr=n.findById(Yr.id),pr=Dr.getModel();Dr.getType&&Dr.getType()==="combo"?(Yr.parentId=c,delete Yr.comboId,pr.parentId=c,delete pr.comboId):Dr.getType&&Dr.getType()==="node"&&(Yr.comboId=c,pr.comboId=c),et.addChild(Dr),G.push(Yr)}),n.updateCombo(et),!1}return!0})}),!c&&C){var lt=l.indexOf(C);l.splice(lt,1),(a=C.children)===null||a===void 0||a.forEach(function(Dt){Dt.parentId=void 0;var qt=n.findById(Dt.id).getModel();delete qt.parentId,delete qt.comboId,Dt.itemType!=="node"&&l.push(Dt)})}if(rt){var wt={nodes:[],combos:[]},Nt={nodes:[],combos:[]};(o=C.children)===null||o===void 0||o.forEach(function(Dt){var qt=n.findById(Dt.id),ve=qt.getType();ve!=="node"&&ve!=="combo"||(wt["".concat(ve,"s")].push({id:Dt.id,parentId:w}),Nt["".concat(ve,"s")].push({id:Dt.id,parentId:c}))}),wt.combos.push(ot),this.pushStack("uncombo",{before:wt,after:Nt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){oo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var x=(0,y.__spreadArray)([],l.getStates(),!0);(0,d.each)(x,function(w){return r.setItemState(l,w,!1)}),o.updateCombo(l,f.children,t),(0,d.each)(x,function(w){return r.setItemState(l,w,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,d.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){oo(c,function(l){if(!l)return!0;var x=f[l.id];if(o===l.id&&x&&x.getType&&x.getType()==="combo"){var w=(0,y.__spreadArray)([],x.getStates(),!0);(0,d.each)(w,function(C){x.getStateStyle(C)&&r.setItemState(x,C,!1)}),u.updateCombo(x,l.children),(0,d.each)(w,function(C){x.getStateStyle(C)&&r.setItemState(x,C,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,d.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,x;if((c||[]).forEach(function(rt){x||wi(rt,function(ot){if(!x)return ot.id===o.getID()&&(x=ot),!0})}),wi(x,function(rt){return rt.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var w={},C={};f==="combo"?(w.combos=[{id:s.id,parentId:s.parentId}],C.combos=[{id:s.id,parentId:r}]):f==="node"&&(w.nodes=[{id:s.id,parentId:s.comboId}],C.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:w,after:C})}if(s.parentId||s.comboId){var G=this.findById(s.parentId||s.comboId);G&&G.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var j=this.findById(r);j&&j.addChild(o)}if(u){var j=this.findById(u);j&&j.removeChild(o)}var et=Js(this.get("comboTrees"),s.id,r);this.set("comboTrees",et),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,d.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,d.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,d.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,d.each)(r,function(o){o.refresh()}),(0,d.each)(n,function(o){o.refresh()}),(0,d.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,d.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var x=l.get("originAttrs"),w=l.get("model"),C=l.getContainer().getMatrix();if(x==null&&(C&&(x={x:C[6],y:C[7]}),l.set("originAttrs",x||0)),a){var G=a(l,f,c,x||{x:0,y:0});l.set("model",Object.assign(w,G))}else x?(w.x=x.x+(c.x-x.x)*f,w.y=x.y+(c.y-x.y)*f):(w.x=c.x,w.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,d.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(x){(0,d.each)(x,function(w){u=w.getModel();var C=w.get("originAttrs");if(!(C&&u.x===C.x&&u.y===C.y)){var G=w.updatePosition({x:u.x,y:u.y});f[u.id]=G,u.comboId&&(f[u.comboId]=f[u.comboId]||G),u.parentId&&(f[u.parentId]=f[u.parentId]||G)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,d.each)(a,function(l){var x=l.getSource().getModel(),w=l.getTarget();if(!(0,d.isPlainObject)(w)){var C=w.getModel();(f[x.id]||f[C.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,d.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,d.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(x){var w=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*w[0]+w[6],u.y=u.y*w[0]+w[7];var C=o.getGroup().getCanvasBBox(),G=C.minX,j=C.maxX,et=C.minY,rt=C.maxY,ot={x:(G+j)/2,y:(et+rt)/2};r==="begin"&&(ot.x=G,ot.y=et),o.translate(u.x-ot.x,u.y-ot.y)})}var c=(0,y.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,d.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(x){c||wi(x,function(w){if(c&&w.depth<=a.depth)return!1;if(a.id===w.id&&(c=!0),c){var C=n.findById(w.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(x){var w=x.getModel(),C=w.isVEdge,G=w.size,j=G===void 0?1:G;if(!(x.isVisible()&&!C)){var et=x.getSource(),rt=x.getTarget(),ot=null,lt;if(et.getModel().id===a.id||u.includes(et)&&!u.includes(rt)?(ot=rt,lt=!1):(rt.getModel().id===a.id||!u.includes(et)&&u.includes(rt))&&(ot=et,lt=!0),ot){if(C){n.removeItem(x,!1);return}for(var wt=ot.getModel();!ot.isVisible();){var Nt=wt.parentId,Dt=wt.comboId,qt=Nt||Dt;if(ot=n.findById(qt),!ot||!qt)return;wt=ot.getModel()}var ve=wt.id,ae=lt?{source:ve,target:a.id,size:j,isVEdge:!0}:{source:a.id,target:ve,size:j,isVEdge:!0},Me="".concat(ae.source,"-").concat(ae.target);if(l[Me]){l[Me].size+=j;return}l[Me]=ae}}}),this.addItems(Object.values(l).map(function(x){return{type:"vedge",model:x}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(x){c||wi(x,function(w){if(c&&w.depth<=a.depth)return!1;if(a.id===w.id&&(c=!0),c){var C=n.findById(w.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(x){if(!(x.isVisible()&&!x.getModel().isVEdge)){var w=x.getSource(),C=x.getTarget(),G=w.get("id"),j=C.get("id"),et=null,rt;if(G===a.id||u.includes(w)&&!u.includes(C)?(et=C,rt=!1):j===a.id||!u.includes(w)&&u.includes(C)?(et=w,rt=!0):u.includes(w)&&u.includes(C)&&w.isVisible()&&C.isVisible()&&x.show(),et){var ot=x.getModel(),lt=ot.isVEdge,wt=ot.size,Nt=wt===void 0?1:wt;if(lt){n.removeItem(x,!1);return}for(var Dt=et.getModel();!et.isVisible();){var qt=Dt.parentId,ve=Dt.comboId,ae=qt||ve;if(et=n.findById(ae),!et||!ae)return;Dt=et.getModel()}for(var Me=Dt.id,Fe=rt?C:w,wr=Fe.getModel();!Fe.isVisible();){var Yr=wr.parentId,Dr=wr.comboId,pr=Yr||Dr;if(Fe=n.findById(pr),!Fe||!pr)return;if(wr.comboId===a.id||wr.parentId===a.id)break;wr=Fe.getModel()}var an=wr.id;if(Me){var en=rt?{source:Me,target:an,isVEdge:!0,size:Nt}:{source:an,target:Me,isVEdge:!0,size:Nt},yr="".concat(en.source,"-").concat(en.target);if(l[yr]){l[yr].size+=Nt;return}l[yr]=en}}}}),this.addItems(Object.values(l).map(function(x){return{type:"vedge",model:x}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,d.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,d.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=Ge(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,d.clone)(r):{before:{},after:(0,d.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=st(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=st(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Tn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new ig(this,(0,y.__assign)((0,y.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,d.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(nt),og=Ay;function Wd(i){return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(i)}var eh=St,sg="-shape",Xd="-label",qh=["startArrow","endArrow"],ug={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Cy={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Jh={edge:Cy,node:ug,combo:ug},Yd="-label-bg",Vd={options:{labelCfg:{style:{fontFamily:xt.windowFontFamily}},descriptionCfg:{style:{fontFamily:xt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+sg),t.shapeMap[this.itemType+sg]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Xd),t.shapeMap[this.itemType+Xd]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=eh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=eh(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=eh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=eh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=eh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Yd;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,d.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=xt[a]?xt[a].style:null;return(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,d.mix)({},o.attr(),e.style),u=function(l){var x,w=s[l];if((0,d.isPlainObject)(w)){var C=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(G){return G.get("name")===l});C==null||C.attr(w)}else o.attr((x={},x[l]=w,x))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Xd,c=o.shapeMap[f]||o.find(function(lt){return lt.get("className")===f}),l=this.itemType+Yd,x=o.shapeMap[l]||o.find(function(lt){return lt.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],x&&(o.removeChild(x),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,d.deepMix)(u,e.labelCfg));var C=this.getLabelStyleByPosition(e,u,o),G=(n=e.labelCfg)===null||n===void 0?void 0:n.style,j=(0,y.__assign)((0,y.__assign)({},C),G),et=j.rotate;if(delete j.rotate,!isNaN(et)&&et!==""){var rt=[1,0,0,0,1,0,0,0,1];rt=eh(rt,[["t",-j.x,-j.y],["r",et],["t",j.x,j.y]]),j.matrix=rt,c.attr(j)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(j);if(!x)j.background&&(x=this.drawLabelBg(e,o,c),x.set("classname",l),o.shapeMap[l]=x,c.toFront());else if(j.background){var ot=this.getLabelBgStyleByPosition(c,u);x.attr(ot)}else o.removeChild(x)}else{var w=this.drawLabel(e,o);w.set("className",f),o.shapeMap[f]=w}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,d.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var x=(0,d.mix)({},l||c),w=r.getContainer(),C={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(C.r=1,C.width=1,C.height=1),t){var G=function(pr){var an,en=x[pr];if((0,d.isPlainObject)(en)&&!qh.includes(pr)){var yr=((o=w.shapeMap)===null||o===void 0?void 0:o[pr])||w.find(function(Or){return Or.get("name")===pr});yr==null||yr.attr(en)}else s.attr((an={},an[pr]=en,an))};for(var j in x)G(j)}else{var et=Po(r.getCurrentStatesStyle()),rt=r.getModel(),ot=(0,d.mix)({},rt.style,Po(r.getOriginStyle())),lt=s.get("name"),wt=s.attr(),Nt={};Object.keys(wt).forEach(function(Dr){if(Dr!=="img"){var pr=wt[Dr];pr&&Wd(pr)==="object"?Nt[Dr]=(0,d.clone)(pr):Nt[Dr]=pr}});var Dt={},qt=function(pr){var an=x[pr];if((0,d.isPlainObject)(an)&&!qh.includes(pr)){var en=w.shapeMap[pr]||w.find(function(Kr){return Kr.get("name")===pr});if(en){var yr=Po(en.attr());(0,d.each)(an,function(Kr,Zr){if(pr===lt&&Nt[Zr]&&!C[Zr]){delete Nt[Zr];var fn=ot[pr][Zr]||Jh[u][Zr];s.attr(Zr,fn)}else if(yr[Zr]||yr[Zr]===0){delete yr[Zr];var bn=ot[pr][Zr]||Jh[u][Zr];en.attr(Zr,bn)}}),Dt[pr]=yr}}else if(Nt[pr]&&!C[pr]){delete Nt[pr];var Or=ot[pr]||(ot[lt]?ot[lt][pr]:void 0)||Jh[u][pr];s.attr(pr,Or)}};for(var ve in x)qt(ve);lt?Dt[lt]=Nt:(0,d.mix)(Dt,Nt);for(var j in et)if(!C[j]){var ae=et[j];(!(0,d.isPlainObject)(ae)||qh.includes(j))&&(lt?((0,d.mix)(ot[lt],(a={},a[j]=ae,a)),delete ot[j]):(0,d.mix)(ot,(n={},n[j]=ae,n)),delete et[j])}var Me={};(0,d.deepMix)(Me,ot,Dt,et);var Fe=!1,wr=function(pr){var an,en,yr=Me[pr];if((0,d.isPlainObject)(yr)&&!qh.includes(pr)){var Or=w.shapeMap[pr]||w.find(function(Zr){return Zr.get("name")===pr});Or&&((Or.get("type")==="text"||Or.get("labelRelated"))&&(delete yr.x,delete yr.y,delete yr.matrix),pr===lt&&(u==="combo"&&(delete yr.r,delete yr.width,delete yr.height),Fe=!0),Or.attr(yr))}else if(!Fe){var Kr=yr||Jh[u][pr];u==="combo"?lt||s.attr((an={},an[pr]=Kr,an)):s.attr((en={},en[pr]=Kr,en))}};for(var Yr in Me)wr(Yr)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,d.clone)(f):(0,d.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},Ty={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:xt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||xt.defaultNode.size;return(0,d.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,d.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=Qu(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,d.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Ld(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,y.__assign)((0,y.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Me){return Me.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Me){return Me.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Me){return Me.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Me){return Me.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,d.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,x=f.lineWidth,w=f.size/2;w||(w=f.r);var C=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},G=C.left,j=C.right,et=C.top,rt=C.bottom,ot=this.getSize(e),lt=ot[0],wt=ot[1],Nt={r:w,fill:c,stroke:l,lineWidth:x};if(n)!G&&G!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.__assign)((0,y.__assign)({},Nt),{x:-lt/2,y:0}));else if(G){var Dt="link-point-left";t.shapeMap[Dt]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Nt),{x:-lt/2,y:0}),className:Dt,name:Dt,isAnchorPoint:!0})}if(a)!j&&j!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,y.__assign)((0,y.__assign)({},Nt),{x:lt/2,y:0}));else if(j){var qt="link-point-right";t.shapeMap[qt]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Nt),{x:lt/2,y:0}),className:qt,name:qt,isAnchorPoint:!0})}if(o)!et&&et!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,y.__assign)((0,y.__assign)({},Nt),{x:0,y:-wt/2}));else if(et){var ve="link-point-top";t.shapeMap[ve]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Nt),{x:0,y:-wt/2}),className:ve,name:ve,isAnchorPoint:!0})}if(s)!rt&&rt!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,y.__assign)((0,y.__assign)({},Nt),{x:0,y:wt/2}));else if(rt){var ae="link-point-bottom";t.shapeMap[ae]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Nt),{x:0,y:wt/2}),className:ae,name:ae,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(et){return et.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,d.mix)({},f.attr(),a),l=c.width,x=l===void 0?20:l,w=c.height,C=w===void 0?20:w;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(x=0,C=0),f.attr((0,y.__assign)((0,y.__assign)({},c),{x:-x/2,y:-C/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var G="".concat(this.type,"-icon");if(u)n.shapeMap[G]=n.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:G,name:G});else{var x=a.width,C=a.height;n.shapeMap[G]=n.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},a),{x:-x/2,y:-C/2}),className:G,name:G})}var j=n.shapeMap["node-label"]||n.find(function(et){return et.get("name")==="node-label"});j&&j.toFront()}}},Iy=(0,y.__assign)((0,y.__assign)({},Vd),Ty);Ao.registerNode("single-node",Iy);var td="edge-shape";function Oy(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Ly={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:xt.defaultEdge.size,style:{x:0,y:0,stroke:xt.defaultEdge.style.stroke,lineAppendWidth:xt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:xt.edgeLabel.style.fill,fontSize:xt.edgeLabel.style.fontSize,fontFamily:xt.windowFontFamily}},stateStyles:(0,y.__assign)({},xt.edgeStateStyles)},getPath:function(e){var t=[];return(0,d.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style),a=e.size||xt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,d.mix)({},xt.defaultEdge.style,{stroke:xt.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var x=o.attr(),w=e.style||{};w.stroke===void 0&&(w.stroke=e.color);var C=e.sourceNode,G=e.targetNode,j={radius:w.radius};c||(j={source:C,target:G,offset:w.offset,radius:w.radius});var et=this.getPath(l,j),rt={};r==="move"?rt={path:et}:(x.endArrow&&w.endArrow===!1&&(e.style.endArrow={path:""}),x.startArrow&&w.startArrow===!1&&(e.style.startArrow={path:""}),rt=(0,y.__assign)({},e.style),rt.lineWidth===void 0&&(rt.lineWdith=((0,d.isNumber)(s)?s:s==null?void 0:s[0])||x.lineWidth),rt.path===void 0&&(rt.path=et),rt.stroke===void 0&&(rt.stroke=x.stroke||e.color)),o&&o.attr(rt)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[td],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,d.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=Ci(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,y.__assign)((0,y.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,d.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Oy(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:td,name:td,attrs:r});return t.shapeMap[td]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,d.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Yd;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,d.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},Dy=(0,y.__assign)((0,y.__assign)({},Vd),Ly);Ao.registerEdge("single-edge",Dy),Ao.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ao.registerEdge("spline",{getPath:function(e){var t=$v(e);return t}},"single-edge"),Ao.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Ka(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Ka(t,o,r)}var f=_o(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Ao.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,d.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Qh(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Ao.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Qh(r,n,e.curvePosition[0],e.curveOffset[0]),o=Qh(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Ao.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Ao.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Ao.registerEdge("loop",{getPathPoints:function(e){return Xa(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Ny={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:xt.comboLabel.refX,refY:xt.comboLabel.refY,options:{style:{stroke:xt.defaultCombo.style.stroke,fill:xt.defaultCombo.style.fill,lineWidth:xt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:xt.comboLabel.style.fill,fontSize:xt.comboLabel.style.fontSize,fontFamily:xt.windowFontFamily}},stateStyles:(0,y.__assign)({},xt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,d.clone)(e.size||this.options.size||xt.defaultCombo.size);return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,x=t.getContainer(),w=x.find(function(et){return et.get("name")==="combo-collapsed-substitute-icon"}),C=w&&!w.destroyed,G=t.get("keyShape");if(n&&u){if(C)w.show();else{var j={width:c||r.r*2||r.width,height:l||r.r*2||r.height};w=x.addShape("image",{attrs:(0,y.__assign)({img:f,x:-j.width/2,y:-j.height/2},j),name:"combo-collapsed-substitute-icon",draggable:!0})}G.hide()}else C&&(w.hide(),G.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,y.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Py=(0,y.__assign)((0,y.__assign)({},Vd),Ny);Ao.registerCombo("single-combo",Py),Ao.registerCombo("circle",{options:{size:[xt.defaultCombo.size[0],xt.defaultCombo.size[0]],padding:Math.max.apply(Math,xt.defaultCombo.padding),animate:!0,style:{stroke:xt.defaultCombo.style.stroke,fill:xt.defaultCombo.style.fill,lineWidth:xt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:xt.comboLabel.style.fill,fontSize:xt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.__assign)({},xt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,d.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,d.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||xt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,y.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,d.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,d.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,d.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),Ao.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:xt.defaultCombo.style.stroke,fill:xt.defaultCombo.style.fill,lineWidth:xt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:xt.comboLabel.style.fill,fontSize:xt.comboLabel.style.fontSize,fontFamily:xt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},xt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],x;switch(r){case"top":x={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":x={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":x={x:u+s,y:0,textAlign:"left"};break;case"center":x={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":x={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:x={x:f+o,y:0,textAlign:"right"};break}return x.text=e.label,x},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,d.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,d.isNumber)(a.width)||isNaN(a.width)?s=o[0]||xt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,d.isNumber)(a.height)||isNaN(a.height)?u=o[1]||xt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var x=(0,y.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},x},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,d.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,d.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),x=(0,d.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,x,!1)}},"single-combo"),Ao.registerNode("simple-circle",{options:{size:xt.defaultNode.size,style:{x:0,y:0,stroke:xt.defaultNode.style.stroke,fill:xt.defaultNode.style.fill,lineWidth:xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:xt.nodeLabel.style.fill,fontSize:xt.nodeLabel.style.fontSize,fontFamily:xt.windowFontFamily}},stateStyles:(0,y.__assign)({},xt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,d.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Ao.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:xt.defaultNode.style.stroke,fill:xt.defaultNode.style.fill,lineWidth:xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:xt.nodeLabel.style.fill,fontSize:xt.nodeLabel.style.fontSize,fontFamily:xt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},xt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Ao.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:xt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,y.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,x=o-c/2;t.setClip({type:"rect",attrs:(0,y.__assign)({x:l,y:x,width:f,height:c},s)})}else if(n==="ellipse"){var w=r.rx,C=r.ry;t.setClip({type:"ellipse",attrs:(0,y.__assign)({x:a,y:o,rx:w,ry:C},s)})}else if(n==="polygon"){var G=r.points;t.setClip({type:"polygon",attrs:(0,y.__assign)({points:G},s)})}else if(n==="path"){var j=r.path;t.setClip({type:"path",attrs:(0,y.__assign)({path:j},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var fg={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},cg={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},vc=Ao,ky=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],lg=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Ry=St,By=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},N),R),E),W),b),p),{transform:Ry,mat3:tt}),Fo=By,Fy=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=lg(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,y.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),x=f.length,w=0;w<x;w++){var C=f[w];if(!(!C||C.destroyed)){var G=C.getModel();if(!C.isVisible()){r.push(G);continue}t.push(G)}}for(var j=c.length,w=0;w<j;w++){var et=c[w];if(!(!et||et.destroyed)){var G=et.getModel();if(!et.isVisible()){a.push(G);continue}G.isComboEdge?o.push(G):n.push(G)}}for(var rt=l.length,w=0;w<rt;w++){var ot=l[w];if(!ot.destroyed){var G=ot.getModel();if(!ot.isVisible()){u.push(G);continue}s.push(G)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(lt){return lt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var x,w=t.execLayoutMethod(l,c);return c===a.length-1&&((x=o.onAllLayoutEnd)===null||x===void 0||x.call(o)),w})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,y.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,d.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,d.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,y.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,d.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Nv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,d.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Wu(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,y.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,y.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Wu(u.x)||Wu(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),x=u/(c-1),w=f/(l-1);(!isFinite(x)||!x)&&(x=0),(!isFinite(w)||!x)&&(w=0);for(var C=e[0]-u/2,G=e[1]-f/2,j=!0,et=0;et<o;et++){var rt=a[et];Wu(+rt.x)&&(j=!1,rt.x=et%c*x+C),Wu(+rt.y)&&(j=!1,rt.y=Math.floor(et/c)*w+G)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),hg=Fy,Gy=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),dg=Gy,Sf=vc.registerNode,vg=vc.registerEdge,zy=vc.registerCombo,gg=X.registerBehavior,nn=xt,u_={version:xt.version,AbstractGraph:og,BaseGlobal:nn,Util:Fo,Shape:vc,Node:Fd,Edge:Wv,Combo:Hv,Hull:ig,registerNode:vc.registerNode,registerEdge:vc.registerEdge,registerCombo:vc.registerCombo,registerBehavior:X.registerBehavior,Arrow:fg,Marker:cg,AbstractLayout:hg,AbstractEvent:dg},Uy=B(10369);function Wy(){return window?window.devicePixelRatio:1}function pg(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function el(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Ah(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Xy(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function yg(i,e){return i[0]===e[0]&&i[1]===e[1]}var Yy=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Vy=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,jy=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,mg=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function bg(i,e){var t=i.match(mg);(0,d.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function Hy(i,e,t){var r=Yy.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,x=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,w=i.createLinearGradient(s.x,s.y,l,x);return bg(a,w),w}function Ky(i,e,t){var r=Vy.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(mg);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,x=Math.sqrt(c*c+l*l)/2,w=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*x);return bg(s,w),w}function Zy(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=jy.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function $y(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,d.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Hy(i,e,t);if(t[0]==="r")return Ky(i,e,t);if(t[0]==="p")return Zy(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function Qy(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function ed(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function jd(i,e){return ed(i)*ed(e)?(i[0]*e[0]+i[1]*e[1])/(ed(i)*ed(e)):1}function xg(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(jd(i,e))}function Eg(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,x=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,w=l*l/(t*t)+x*x/(r*r);w>1&&(t*=Math.sqrt(w),r*=Math.sqrt(w));var C=t*t*(x*x)+r*r*(l*l),G=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(G*=-1),isNaN(G)&&(G=0);var j=r?G*t*x/r:0,et=t?G*-r*l/t:0,rt=(s+f)/2+Math.cos(n)*j-Math.sin(n)*et,ot=(u+c)/2+Math.sin(n)*j+Math.cos(n)*et,lt=[(l-j)/t,(x-et)/r],wt=[(-1*l-j)/t,(-1*x-et)/r],Nt=xg([1,0],lt),Dt=xg(lt,wt);return jd(lt,wt)<=-1&&(Dt=Math.PI),jd(lt,wt)>=1&&(Dt=0),o===0&&Dt>0&&(Dt=Dt-2*Math.PI),o===1&&Dt<0&&(Dt=Dt+2*Math.PI),{cx:rt,cy:ot,rx:yg(i,[f,c])?0:t,ry:yg(i,[f,c])?0:r,startAngle:Nt,endAngle:Nt+Dt,xRotation:n,arcFlag:a,sweepFlag:o}}var rd=Math.sin,nd=Math.cos,Hd=Math.atan2,ad=Math.PI;function wg(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=Hd(c,f),x=new tv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*nd(ad/6)+","+10*rd(ad/6)+" L0,0 L"+10*nd(ad/6)+",-"+10*rd(ad/6),stroke:s,lineWidth:u}});x.translate(n,a),x.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",x)}function _g(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,x=l.d,w=l.fill,C=l.stroke,G=l.lineWidth,j=(0,y.__rest)(l,["d","fill","stroke","lineWidth"]),et=t-n,rt=r-a,ot=Hd(rt,et);x&&(n=n-nd(ot)*x,a=a-rd(ot)*x);var lt=new tv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,y.__assign)((0,y.__assign)({},j),{stroke:C||f,lineWidth:G||c,fill:w})});lt.translate(n,a),lt.rotateAtPoint(n,a,ot),i.set(o?"startArrowShape":"endArrowShape",lt)}function rl(i,e,t,r,n){var a=Hd(r-e,t-i);return{dx:nd(a)*n,dy:rd(a)*n}}function Kd(i,e,t,r,n,a){typeof e.startArrow=="object"?_g(i,e,t,r,n,a,!0):e.startArrow?wg(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Zd(i,e,t,r,n,a){typeof e.endArrow=="object"?_g(i,e,t,r,n,a,!1):e.endArrow?wg(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Sg={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function rh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Sg[r]?Sg[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,d.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=$y(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function $d(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function qy(i,e,t){var r=i.get("refreshElements");(0,d.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?qd(e,t):Qd(e,t)}function Qd(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&qd(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Qd(r.cfg.children,e);else{var n=Jy(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Qd(r.cfg.children,e)}}}function Mg(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Mg(t.cfg.children)}}function qd(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&qd(r.get("children"),e))}}function Jy(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Ah(t,e);return r}function Ag(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],x=l[0];if(c===0&&a&&a.d){var w=i.getStartTangent();f=rl(w[0][0],w[0][1],w[1][0],w[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var C=n[c+1];if(C[0]==="Z"){var w=i.getEndTangent();f=rl(w[0][0],w[0][1],w[1][0],w[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var w=i.getEndTangent();f=rl(w[0][0],w[0][1],w[1][0],w[1][1],o.d)}var G=f.dx,j=f.dy;switch(x){case"M":e.moveTo(l[1]-G,l[2]-j),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-G,l[2]-j);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-G,l[4]-j);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-G,l[6]-j);break;case"A":{var et=void 0;r?(et=r[c],et||(et=Eg(s,l),r[c]=et)):et=Eg(s,l);var rt=et.cx,ot=et.cy,lt=et.rx,wt=et.ry,Nt=et.startAngle,Dt=et.endAngle,qt=et.xRotation,ve=et.sweepFlag;if(e.ellipse)e.ellipse(rt,ot,lt,wt,qt,Nt,Dt,1-ve);else{var ae=lt>wt?lt:wt,Me=lt>wt?1:lt/wt,Fe=lt>wt?wt/lt:1;e.translate(rt,ot),e.rotate(qt),e.scale(Me,Fe),e.arc(0,0,ae,Nt,Dt,1-ve),e.scale(1/Me,1/Fe),e.rotate(-qt),e.translate(-rt,-ot)}break}case"Z":e.closePath();break;default:break}if(x==="Z")s=u;else{var wr=l.length;s=[l[wr-2],l[wr-1]]}}}}function Cg(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function tm(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Xy(t,n):r?e=t:a&&(e=n)}return e}function em(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,d.each)(i,function(a){var o=tm(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,d.min)(e),minY:(0,d.min)(t),maxX:(0,d.max)(r),maxY:(0,d.max)(n)}}function rm(i,e){return!i||!e||!Ah(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var nm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Cg(this,t)},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),rh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,d.each)(t,function(x){var w=x.cfg.cacheCanvasBBox;w&&x.cfg.isInView&&(r.push(w.minX,w.maxX),n.push(w.minY,w.maxY))});var a=null;if(r.length){var o=(0,d.min)(r),s=(0,d.max)(r),u=(0,d.min)(n),f=(0,d.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Ah(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),rh(t,this),this._applyClip(t,this.getClip()),$d(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(As),Tg=nm,am=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return Tg},e.prototype.onCanvasChange=function(t){Cg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=so(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),rh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ah(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),rh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Ah(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(fc),vu=am,im=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,x=pg(u,f,t,r);return a&&n?x<=c+l:a?x<=c:n?x>=c-l&&x<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(vu),om=im;function id(i,e,t,r){return i/(t*t)+e/(r*r)}var sm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,x=s.ry,w=(t-f)*(t-f),C=(r-c)*(r-c);return a&&n?id(w,C,l+u,x+u)<=1:a?id(w,C,l,x)<=1:n?id(w,C,l-u,x-u)>=1&&id(w,C,l+u,x+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(vu),um=sm;function Ig(i){return i instanceof HTMLElement&&(0,d.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var fm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,d.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Ig(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,x=r.img;(x instanceof Image||Ig(x))&&(!(0,d.isNil)(u)&&!(0,d.isNil)(f)&&!(0,d.isNil)(c)&&!(0,d.isNil)(l)?t.drawImage(x,u,f,c,l,n,a,o,s):t.drawImage(x,n,a,o,s))},e}(vu),cm=fm;function gc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?ji.pointToLine(i,e,t,r,a,o)<=n/2:!1}var lm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Kd(this,t,a,o,r,n),u&&Zd(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return gc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=rl(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=rl(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return ji.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return ji.pointAt(n,a,o,s,t)},e}(vu),hm=lm,dm={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},vm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,d.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,d.isFunction)(a))s=a,u=s(r,n,o),u=Ji(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Ag(this,t,{path:r},n)},e.Symbols=dm,e}(vu),gm=vm;function Og(i,e,t){var r=Xe();return i.createPath(r),r.isPointInPath(e,t)}var pm=1e-6;function Jd(i){return Math.abs(i)<pm?0:i<0?-1:1}function ym(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Lg(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(ym(o,s,[e,t]))return!0;Jd(o[1]-t)>0!=Jd(s[1]-t)>0&&Jd(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ch(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return pg(f.x,f.y,o,s)<=a/2}var mm=St;function bm(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function xm(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,x=u.box;if(!(x&&!el(x.x-o,x.y-o,x.width+e,x.height+e,t,r))){switch(u.command){case"L":case"Z":a=gc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var w=Jc.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=w<=e/2;break;case"C":var C=Jt.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=C<=e/2;break;case"A":var G=u.arcParams,j=G.cx,et=G.cy,rt=G.rx,ot=G.ry,lt=G.startAngle,wt=G.endAngle,Nt=G.xRotation,Dt=[t,r,1],qt=rt>ot?rt:ot,ve=rt>ot?1:rt/ot,ae=rt>ot?ot/rt:1,Me=mm(null,[["t",-j,-et],["r",-Nt],["s",1/ve,1/ae]]);xi.transformMat3(Dt,Dt,Me),a=Ch(0,0,qt,lt,wt,e,Dt[0],Dt[1]);break;default:break}if(a)break}}return a}function Em(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var od=(0,y.__assign)({hasArc:bm,extractPolygons:Em,isPointInStroke:xm},L);function Dg(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Lg(a,e,t),r)break}return r}var wm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ji(t);var r=od.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Ur(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Kd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Zd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=od.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Og(this,t,r);else{var l=this.attr("path"),x=od.extractPolygons(l);f=Dg(x.polygons,t,r)||Dg(x.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Ag(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,d.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,d.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,d.isNil)(s)||(0,d.isNil)(a))return null;var u=s.length,f=o[a+1];return Jt.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",od.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=Jt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=Jt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(vu),tv=wm;function Ng(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(gc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],x=i[a-1];if(gc(l[0],l[1],x[0],x[1],e,t,r))return!0}return!1}var _m=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Ng(s,o,t,r,!0)),!u&&a&&(u=Lg(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(vu),Sm=_m,Mm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&Kd(this,t,n[1][0],n[1][1],u,f),o&&Zd(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Ng(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var x=rl(u,f,n[1][0],n[1][1],a.d);u+=x.dx,f+=x.dy}if(o&&o.d){var x=rl(n[s-2][0],n[s-2][1],c,l,o.d);c-=x.dx,l-=x.dy}t.beginPath(),t.moveTo(u,f);for(var w=0;w<s-1;w++){var C=n[w];t.lineTo(C[0],C[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",yt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),ji.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=ji.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(vu),Am=Mm;function Cm(i,e,t,r,n,a,o){var s=n/2;return el(i-s,e-s,t,n,a,o)||el(i+t-s,e-s,n,r,a,o)||el(i+s,e+r-s,t,n,a,o)||el(i-s,e+s,n,r,a,o)}function Tm(i,e,t,r,n,a,o,s){var u=a/2;return gc(i+n,e,i+t-n,e,a,o,s)||gc(i+t,e+n,i+t,e+r-n,a,o,s)||gc(i+t-n,e+r,i+n,e+r,a,o,s)||gc(i,e+r-n,i,e+n,a,o,s)||Ch(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Ch(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Ch(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Ch(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Im=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,x=s.radius;if(x){var C=!1;return n&&(C=Tm(u,f,c,l,x,o,t,r)),!C&&a&&(C=Og(this,t,r)),C}else{var w=o/2;if(a&&n)return el(u-w,f-w,c+w,l+w,t,r);if(a)return el(u,f,c,l,t,r);if(n)return Cm(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=Qy(u),c=f[0],l=f[1],x=f[2],w=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-x),x!==0&&t.arc(n+o-x,a+s-x,x,0,Math.PI/2),t.lineTo(n+w,a+s),w!==0&&t.arc(n+w,a+s-w,w,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(vu),Om=Im,Lm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Qr(t)},e.prototype._setText=function(t){var r=null;(0,d.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Ve(a.text,a.fontSize,a.lineHeight),x;(0,d.each)(r,function(w,C){x=u+C*(c+f)-l+f,o==="middle"&&(x+=l-f-(l-f)/2),o==="top"&&(x+=l-f),(0,d.isNil)(w)||(n?t.fillText(w,s,x):t.strokeText(w,s,x))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,d.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(vu),Dm=Lm;function Nm(i,e){if(e){var t=_i(e);return Bs(t,i)}return i}function Pg(i,e,t){var r=i.getTotalMatrix();if(r){var n=Nm([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function kg(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Ac(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Pg(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Rg(i,e,t){if(!kg(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Rg(s,e,t);else if(kg(s,e,t)){var u=s,f=Pg(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var Pm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return Tg},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Wy();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Rg(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=em(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=rm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,d.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),rh(t,this),$d(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),rh(t,this),qy(this,n,a),$d(t,n,a),t.restore()):r.length&&Mg(r),(0,d.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,d.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Qc),Mf=Pm,f_="0.5.12",ev={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Na={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},c_=null;function Vs(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Bg(i){var e=ev[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Vs(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Fg(i,e){var t=i.get("el"),r=(0,d.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function km(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Rm(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Th(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Ih(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Bg(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Gg(i,e){e.forEach(function(t){t.draw(i)})}function zg(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")km(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&Fg(i,function(l,x){return c.indexOf(l)-c.indexOf(x)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Th(i):e==="clip"?Ih(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Bm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Vs("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){zg(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Ih(this,t),this.createPath(t),r.length&&Gg(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){Na[s]&&a.setAttribute(Na[s],o)}),Th(this)},e}(As),Ug=Bm,Fm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Ug},e.prototype.onCanvasChange=function(t){zg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=so(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,x=o-c,w=a+s+c,C=o+u+c;return{x:l,y:x,minX:l,minY:x,maxX:w,maxY:C,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Bg(this),Ih(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,x=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&x.setAttribute(Na.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&x.setAttribute(Na.strokeOpacity,c),l&&x.setAttribute(Na.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(Na[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(Na[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(Na[r],"url(#"+o+")")}else a.setAttribute(Na[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&Rm(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Th(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(fc),js=Fm,Gm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Na[s]&&a.setAttribute(Na[s],o)})},e}(js),zm=Gm,Um=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,d.each)(r||n,function(f,c){Na[c]&&a.setAttribute(Na[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(js),Wm=Um,Xm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Na[s]&&a.setAttribute(Na[s],o)})},e}(js),Ym=Xm,Vm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):Na[u]&&o.setAttribute(Na[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,d.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,d.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(js),jm=Vm,Hm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,d.isObject)(o)?t.addArrow(n,Na[s]):t.getDefaultArrow(n,Na[s]);a.setAttribute(Na[s],"url(#"+u+")")}else a.removeAttribute(Na[s]);else Na[s]&&a.setAttribute(Na[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return ji.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return ji.pointAt(n,a,o,s,t)},e}(js),Km=Hm,sd={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Wg={get:function(i){return sd[i]},register:function(i,e){sd[i]=e},remove:function(i){delete sd[i]},getAll:function(){return sd}},Zm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,d.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,d.isFunction)(o)?s=o:s=Wg.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Wg,e}(js),$m=Zm,Qm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){if(u==="path"&&(0,d.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,d.isObject)(s)?t.addArrow(a,Na[u]):t.getDefaultArrow(a,Na[u]);o.setAttribute(Na[u],"url(#"+f+")")}else o.removeAttribute(Na[u]);else Na[u]&&o.setAttribute(Na[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(js),qm=Qm,Jm=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Na[s]&&a.setAttribute(Na[s],o)})},e}(js),t1=Jm,e1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Na[s]&&a.setAttribute(Na[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",yt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),ji.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=ji.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(js),r1=e1,n1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a1=/[^\s,]+/gi;function i1(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function l_(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(n1),each(i,function(e,t){if(e=e.match(a1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var o1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,d.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&Na[c]&&o.setAttribute(Na[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=i1(s);(0,d.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(js),s1=o1,Xg=.3,u1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},f1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},c1={left:"left",start:"left",center:"middle",right:"end",end:"end"},l1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,d.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Th(n):Na[u]&&o.setAttribute(Na[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=nu();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",f1[n]||"alphabetic"):t.setAttribute("alignment-baseline",u1[n]||"baseline"),t.setAttribute("text-anchor",c1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,d.each)(u,function(l,x){x===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+Xg)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-Xg)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(js),h1=l1,d1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,v1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,g1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Yg(i){var e=i.match(g1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,d.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function p1(i,e){var t=d1.exec(i),r=(0,d.mod)((0,d.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=Yg(n)}function y1(i,e){var t=v1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=Yg(o)}var m1=function(){function i(e){this.cfg={};var t=null,r=(0,d.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Vs("linearGradient"),p1(e,t)):(t=Vs("radialGradient"),y1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),b1=m1,x1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},E1={x:"-40%",y:"-40%",width:"200%",height:"200%"},w1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Vs("filter");return(0,d.each)(E1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,d.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[x1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),_1=w1,S1=function(){function i(e,t){this.cfg={};var r=Vs("marker"),n=(0,d.uniqueId)("marker_");r.setAttribute("id",n);var a=Vs("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY",""+5)},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,d.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),Vg=S1,M1=function(){function i(e){this.type="clip",this.cfg={};var t=Vs("clipPath");this.el=t,this.id=(0,d.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),A1=M1,C1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,T1=function(){function i(e){this.cfg={};var t=Vs("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Vs("image");t.appendChild(r);var n=(0,d.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=C1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),I1=T1,O1=function(){function i(e){var t=Vs("defs"),r=(0,d.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new Vg(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new b1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new Vg(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new _1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new I1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new A1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),L1=O1,D1=function(i){(0,y.__extends)(e,i);function e(t){return i.call(this,(0,y.__assign)((0,y.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Ug},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!ev[a.tagName]){for(var o=a.parentNode;o&&!ev[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Vs("svg"),r=new L1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Fg(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Th(this):t==="clip"?Ih(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Ih(this,t),r.length&&Gg(t,r)},e}(Qc),Oh=D1,h_="0.5.6",N1=B(6767),Lh=B.n(N1);function ud(i){return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(i)}var P1=/^\s+/,k1=/\s+$/;function Rn(i,e){if(i=i||"",e=e||{},i instanceof Rn)return i;if(!(this instanceof Rn))return new Rn(i,e);var t=R1(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Rn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,n,a,o,s;return t=e.r/255,r=e.g/255,n=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=Qg(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Hg(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Hg(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=jg(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=jg(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return Kg(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return z1(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Li(this._r,255)*100)+"%",g:Math.round(Li(this._g,255)*100)+"%",b:Math.round(Li(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Li(this._r,255)*100)+"%, "+Math.round(Li(this._g,255)*100)+"%, "+Math.round(Li(this._b,255)*100)+"%)":"rgba("+Math.round(Li(this._r,255)*100)+"%, "+Math.round(Li(this._g,255)*100)+"%, "+Math.round(Li(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:q1[Kg(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+Zg(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=Rn(e);r="#"+Zg(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Rn(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Y1,arguments)},brighten:function(){return this._applyModification(V1,arguments)},darken:function(){return this._applyModification(j1,arguments)},desaturate:function(){return this._applyModification(U1,arguments)},saturate:function(){return this._applyModification(W1,arguments)},greyscale:function(){return this._applyModification(X1,arguments)},spin:function(){return this._applyModification(H1,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination($1,arguments)},complement:function(){return this._applyCombination(K1,arguments)},monochromatic:function(){return this._applyCombination(Q1,arguments)},splitcomplement:function(){return this._applyCombination(Z1,arguments)},triad:function(){return this._applyCombination($g,[3])},tetrad:function(){return this._applyCombination($g,[4])}},Rn.fromRatio=function(i,e){if(ud(i)=="object"){var t={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?t[r]=i[r]:t[r]=Dh(i[r]));i=t}return Rn(i,e)};function R1(i){var e={r:0,g:0,b:0},t=1,r=null,n=null,a=null,o=!1,s=!1;return typeof i=="string"&&(i=rb(i)),ud(i)=="object"&&(Af(i.r)&&Af(i.g)&&Af(i.b)?(e=B1(i.r,i.g,i.b),o=!0,s=String(i.r).substr(-1)==="%"?"prgb":"rgb"):Af(i.h)&&Af(i.s)&&Af(i.v)?(r=Dh(i.s),n=Dh(i.v),e=G1(i.h,r,n),o=!0,s="hsv"):Af(i.h)&&Af(i.s)&&Af(i.l)&&(r=Dh(i.s),a=Dh(i.l),e=F1(i.h,r,a),o=!0,s="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=Qg(t),{ok:o,format:i.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function B1(i,e,t){return{r:Li(i,255)*255,g:Li(e,255)*255,b:Li(t,255)*255}}function jg(i,e,t){i=Li(i,255),e=Li(e,255),t=Li(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=(r+n)/2;if(r==n)a=o=0;else{var u=r-n;switch(o=s>.5?u/(2-r-n):u/(r+n),r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function F1(i,e,t){var r,n,a;i=Li(i,360),e=Li(e,100),t=Li(t,100);function o(f,c,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?f+(c-f)*6*l:l<1/2?c:l<2/3?f+(c-f)*(2/3-l)*6:f}if(e===0)r=n=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;r=o(u,s,i+1/3),n=o(u,s,i),a=o(u,s,i-1/3)}return{r:r*255,g:n*255,b:a*255}}function Hg(i,e,t){i=Li(i,255),e=Li(e,255),t=Li(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=r,u=r-n;if(o=r===0?0:u/r,r==n)a=0;else{switch(r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:s}}function G1(i,e,t){i=Li(i,360)*6,e=Li(e,100),t=Li(t,100);var r=Math.floor(i),n=i-r,a=t*(1-e),o=t*(1-n*e),s=t*(1-(1-n)*e),u=r%6,f=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],l=[a,a,s,t,t,o][u];return{r:f*255,g:c*255,b:l*255}}function Kg(i,e,t,r){var n=[gu(Math.round(i).toString(16)),gu(Math.round(e).toString(16)),gu(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function z1(i,e,t,r,n){var a=[gu(Math.round(i).toString(16)),gu(Math.round(e).toString(16)),gu(Math.round(t).toString(16)),gu(qg(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Zg(i,e,t,r){var n=[gu(qg(r)),gu(Math.round(i).toString(16)),gu(Math.round(e).toString(16)),gu(Math.round(t).toString(16))];return n.join("")}Rn.equals=function(i,e){return!i||!e?!1:Rn(i).toRgbString()==Rn(e).toRgbString()},Rn.random=function(){return Rn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function U1(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.s-=e/100,t.s=fd(t.s),Rn(t)}function W1(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.s+=e/100,t.s=fd(t.s),Rn(t)}function X1(i){return Rn(i).desaturate(100)}function Y1(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.l+=e/100,t.l=fd(t.l),Rn(t)}function V1(i,e){e=e===0?0:e||10;var t=Rn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Rn(t)}function j1(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.l-=e/100,t.l=fd(t.l),Rn(t)}function H1(i,e){var t=Rn(i).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,Rn(t)}function K1(i){var e=Rn(i).toHsl();return e.h=(e.h+180)%360,Rn(e)}function $g(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Rn(i).toHsl(),r=[Rn(i)],n=360/e,a=1;a<e;a++)r.push(Rn({h:(t.h+a*n)%360,s:t.s,l:t.l}));return r}function Z1(i){var e=Rn(i).toHsl(),t=e.h;return[Rn(i),Rn({h:(t+72)%360,s:e.s,l:e.l}),Rn({h:(t+216)%360,s:e.s,l:e.l})]}function $1(i,e,t){e=e||6,t=t||30;var r=Rn(i).toHsl(),n=360/t,a=[Rn(i)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,a.push(Rn(r));return a}function Q1(i,e){e=e||6;for(var t=Rn(i).toHsv(),r=t.h,n=t.s,a=t.v,o=[],s=1/e;e--;)o.push(Rn({h:r,s:n,v:a})),a=(a+s)%1;return o}Rn.mix=function(i,e,t){t=t===0?0:t||50;var r=Rn(i).toRgb(),n=Rn(e).toRgb(),a=t/100,o={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return Rn(o)},Rn.readability=function(i,e){var t=Rn(i),r=Rn(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)},Rn.isReadable=function(i,e,t){var r=Rn.readability(i,e),n,a;switch(a=!1,n=nb(t),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a},Rn.mostReadable=function(i,e,t){var r=null,n=0,a,o,s,u;t=t||{},o=t.includeFallbackColors,s=t.level,u=t.size;for(var f=0;f<e.length;f++)a=Rn.readability(i,e[f]),a>n&&(n=a,r=Rn(e[f]));return Rn.isReadable(i,r,{level:s,size:u})||!o?r:(t.includeFallbackColors=!1,Rn.mostReadable(i,["#fff","#000"],t))};var rv=Rn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q1=Rn.hexNames=J1(rv);function J1(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function Qg(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function Li(i,e){tb(i)&&(i="100%");var t=eb(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function fd(i){return Math.min(1,Math.max(0,i))}function Is(i){return parseInt(i,16)}function tb(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function eb(i){return typeof i=="string"&&i.indexOf("%")!=-1}function gu(i){return i.length==1?"0"+i:""+i}function Dh(i){return i<=1&&(i=i*100+"%"),i}function qg(i){return Math.round(parseFloat(i)*255).toString(16)}function Jg(i){return Is(i)/255}var pu=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Af(i){return!!pu.CSS_UNIT.exec(i)}function rb(i){i=i.replace(P1,"").replace(k1,"").toLowerCase();var e=!1;if(rv[i])i=rv[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=pu.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=pu.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=pu.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=pu.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=pu.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=pu.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=pu.hex8.exec(i))?{r:Is(t[1]),g:Is(t[2]),b:Is(t[3]),a:Jg(t[4]),format:e?"name":"hex8"}:(t=pu.hex6.exec(i))?{r:Is(t[1]),g:Is(t[2]),b:Is(t[3]),format:e?"name":"hex"}:(t=pu.hex4.exec(i))?{r:Is(t[1]+""+t[1]),g:Is(t[2]+""+t[2]),b:Is(t[3]+""+t[3]),a:Jg(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=pu.hex3.exec(i))?{r:Is(t[1]+""+t[1]),g:Is(t[2]+""+t[2]),b:Is(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function nb(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var cd=2,tp=.16,ab=.05,ib=.05,ob=.15,ep=5,rp=4,sb=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function np(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-cd*e:Math.round(i.h)+cd*e:r=t?Math.round(i.h)+cd*e:Math.round(i.h)-cd*e,r<0?r+=360:r>=360&&(r-=360),r}function ap(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-tp*e:e===rp?r=i.s+tp:r=i.s+ab*e,r>1&&(r=1),t&&e===ep&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function ip(i,e,t){var r;return t?r=i.v+ib*e:r=i.v-ob*e,r>1&&(r=1),Number(r.toFixed(2))}function ld(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=Rn(i),n=ep;n>0;n-=1){var a=r.toHsv(),o=Rn({h:np(a,n,!0),s:ap(a,n,!0),v:ip(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=rp;s+=1){var u=r.toHsv(),f=Rn({h:np(u,s),s:ap(u,s),v:ip(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?sb.map(function(c){var l=c.index,x=c.opacity,w=Rn.mix(e.backgroundColor||"#141414",t[l],x*100).toHexString();return w}):t}var nv={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Qo={},av={};Object.keys(nv).forEach(function(i){Qo[i]=ld(nv[i]),Qo[i].primary=Qo[i][5],av[i]=ld(nv[i],{theme:"dark",backgroundColor:"#141414"}),av[i].primary=av[i][5]});var d_=Qo.red,v_=Qo.volcano,g_=Qo.gold,p_=Qo.orange,y_=Qo.yellow,m_=Qo.lime,b_=Qo.green,x_=Qo.cyan,E_=Qo.blue,w_=Qo.geekblue,__=Qo.purple,S_=Qo.magenta,M_=Qo.grey,bo=function(e,t,r){var n=Lh()(e),a=Lh()(t);return Lh()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},ub=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=bo(t,e,.05).rgb().toString(),a=bo(t,e,.1).rgb().toString(),o=bo(t,e,.2).rgb().toString(),s=bo(t,e,.4).rgb().toString(),u=bo(t,r,.02).rgb().toString(),f=bo(t,r,.05).rgb().toString(),c=bo(t,r,.1).rgb().toString(),l=bo(t,r,.2).rgb().toString(),x=bo(t,r,.3).rgb().toString(),w=ld(e,{theme:"default",backgroundColor:t}),C=Lh()(e).hex().toLowerCase(),G=w.indexOf(C),j=e;return G!==-1&&(j=w[G+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:j,highlightFill:o,disableStroke:x,disableFill:f,edgeMainStroke:x,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:x,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:x,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:j,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},fb=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=bo(t,e,.2).rgb().toString(),a=bo(t,e,.3).rgb().toString(),o=bo(t,e,.6).rgb().toString(),s=bo(t,e,.8).rgb().toString(),u=bo(t,r,.2).rgb().toString(),f=bo(t,r,.25).rgb().toString(),c=bo(t,r,.3).rgb().toString(),l=bo(t,r,.4).rgb().toString(),x=bo(t,r,.5).rgb().toString(),w=ld(e,{theme:"dark",backgroundColor:t}),C=Lh()(e).hex().toLowerCase(),G=w.indexOf(C),j=e;return G!==-1&&(j=w[G+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:x,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:j,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},iv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?ub(e,t,"rgb(150, 150, 150)"):fb(e,t,"#777")},cb=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(iv(o,t,r,n))}),a},lb="rgb(95, 149, 255)",hb="rgb(255, 255, 255)",op="rgb(0, 0, 0)",Oa=iv(lb,hb),nl={version:"0.8.13",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Oa.mainStroke,fill:Oa.mainFill},size:20,color:Oa.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Oa.activeFill,stroke:Oa.activeStroke}},nodeStateStyles:{active:{fill:Oa.activeFill,stroke:Oa.activeStroke,lineWidth:2,shadowColor:Oa.mainStroke,shadowBlur:10},selected:{fill:Oa.selectedFill,stroke:Oa.selectedStroke,lineWidth:4,shadowColor:Oa.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Oa.highlightFill,stroke:Oa.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Oa.inactiveFill,stroke:Oa.inactiveStroke,lineWidth:1},disable:{fill:Oa.disableFill,stroke:Oa.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:op,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Oa.edgeMainStroke,lineAppendWidth:2},color:Oa.edgeMainStroke},edgeStateStyles:{active:{stroke:Oa.edgeActiveStroke,lineWidth:1},selected:{stroke:Oa.edgeSelectedStroke,lineWidth:2,shadowColor:Oa.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Oa.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Oa.edgeInactiveStroke,lineWidth:1},disable:{stroke:Oa.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:op,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Oa.comboMainFill,lineWidth:1,stroke:Oa.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Oa.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Oa.comboActiveStroke,lineWidth:1,fill:Oa.comboActiveFill},selected:{stroke:Oa.comboSelectedStroke,lineWidth:2,fill:Oa.comboSelectedFill,shadowColor:Oa.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Oa.comboHighlightStroke,lineWidth:2,fill:Oa.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Oa.comboInactiveStroke,fill:Oa.comboInactiveFill,lineWidth:1},disable:{stroke:Oa.comboDisableStroke,fill:Oa.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function hd(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var db=Fo.cloneEvent,vb=Fo.isViewportChanged,gb=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,d.wrapBehavior)(this,"onCanvasEvents"),f=(0,d.wrapBehavior)(this,"onExtendEvents"),c=(0,d.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(hd(s,"wheel",c)),typeof window!="undefined"&&(a.push(hd(window,"keydown",f)),a.push(hd(window,"keyup",f)),a.push(hd(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,d.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),vb(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var x=l.get("item");if(!x.destroyed){var w=x.getType();if(t.target=o,t.item=x,t.canvasX===t.x&&t.canvasY===t.y){var C=n.getCanvasByPoint(t.x,t.y);t.canvasX=C.x,t.canvasY=C.y}t.name&&!t.name.includes(":")?(n.emit("".concat(w,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,w)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,d.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=db(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,d.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(dg),pb=gb,Ma=B(83360),yb=B(81746),dd=B.n(yb),sp=Fo.traverseTree,mb=function(e,t){var r;return e?(0,d.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},bb=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],x=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var w=0;w<x;++w){var C=l[w];r.push(+C)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},xb=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,x=a[s],w=x.length;n[s*4+2]=l,n[s*4+3]=w/2,c=Math.max(c,w/2);for(var C=0;C<w;++C){var G=x[C];n.push(+G)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},Eb=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var x=a.length,w=o[u],C=w.length;a[u*4+2]=x+1048576*C/4,a[u*4+3]=0,l=Math.max(l,C/4);for(var G=0;G<C;++G){var j=w[G];a.push(+j)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},wb=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},_b=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},Sb=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;sp(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||sp(e,function(l){var x=(l[s]-n[s])/c*(Math.PI*2-f)+f,w=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=w*Math.cos(x),l.y=w*Math.sin(x),!0}),e},up=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},Mb=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},Fo),M),_),S),Cf=Mb,Ab=Cf.radialLayout,Cb=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=dd()[t.type](r,t.config);return Ab(n),n};return}this.layoutMethod=function(r){return dd()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),Tb=Cb;(0,Ma.registerLayout)("grid",Ma.GridLayout),(0,Ma.registerLayout)("random",Ma.RandomLayout),(0,Ma.registerLayout)("force",Ma.ForceLayout),(0,Ma.registerLayout)("circular",Ma.CircularLayout),(0,Ma.registerLayout)("dagre",Ma.DagreLayout),(0,Ma.registerLayout)("dagreCompound",Ma.DagreCompoundLayout),(0,Ma.registerLayout)("radial",Ma.RadialLayout),(0,Ma.registerLayout)("concentric",Ma.ConcentricLayout),(0,Ma.registerLayout)("mds",Ma.MDSLayout),(0,Ma.registerLayout)("fruchterman",Ma.FruchtermanLayout),(0,Ma.registerLayout)("fruchterman-gpu",Ma.FruchtermanGPULayout),(0,Ma.registerLayout)("gForce",Ma.GForceLayout),(0,Ma.registerLayout)("force2",Ma.Force2Layout),(0,Ma.registerLayout)("gForce-gpu",Ma.GForceGPULayout),(0,Ma.registerLayout)("comboForce",Ma.ComboForceLayout),(0,Ma.registerLayout)("comboCombined",Ma.ComboCombinedLayout),(0,Ma.registerLayout)("forceAtlas2",Ma.ForceAtlas2Layout);var Ib=function(e,t){t.isCustomLayout=!0,Ma.Layouts[e]=(0,Ma.registerLayout)(e,t)},Ob=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),Lb=Ob,Db=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,x=c.edges,w=c.layoutCfg,C=w===void 0?{}:w,G=C.type,j=layout.getLayoutByName(G);if(!j){this.postMessage({type:n.ERROR,message:"layout ".concat(G," not found")});break}var et;C.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),et==null||et.destroy()},et=new j(C),et.init({nodes:l,edges:x}),et.execute();break}case n.GPURUN:{var rt=s.data,ot=rt.nodes,x=rt.edges,lt=rt.layoutCfg,C=lt===void 0?{}:lt,wt=rt.canvas,G=C.type,j=layout.getLayoutByName(G);if(!j){this.postMessage({type:n.ERROR,message:"layout ".concat(G," not found")});break}if(G.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(G," does not support GPU")});break}var Nt=new j(C);Nt.init({nodes:ot,edges:x}),Nt.executeWithWorker(wt,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new Lb(t,e);return r},nh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function ov(i){return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(i)}var fp=function(e){return setTimeout(e,16)},cp=function(e){return clearTimeout(e)},vd={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||fp;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||cp;return t(e)}},Nb=["fruchterman","gForce"],Pb=["force","grid","circular"],kb=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=Db(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(vd.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(vd.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,G,x,w,C,G,j;return(0,y.__generator)(this,function(et){switch(et.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(lp(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Fo.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),G=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=G):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),x=!1;try{w=new Ma.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=w}catch(rt){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return x=w.enableTick,x&&(C=t.onTick,G=function(){C&&C(),s.refreshPositions()},w.tick=G),j=this.filterLayoutData(this.data,t),Gb(j,r),w.init(j),s.emit("beforesublayout",{type:u}),[4,w.execute()];case 1:return et.sent(),w.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,x,w;return(0,y.__generator)(this,function(C){switch(C.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Fo.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),x=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=x),w=this.filterLayoutData(this.data,r),t.init(w),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return C.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var x=l.type,w=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(wt){var Nt;return w=!!(!((Nt=wt.nodes)===null||Nt===void 0)&&Nt.length)||w});var C=this.destoryLayoutMethods();a.emit("beforelayout");var G=Promise.resolve();w&&x&&(C==null?void 0:C.length)===1&&C[0]===x?this.tweakInit():G=this.initPositions(l.center,s);var j=this.initPositions(l.center,u);j.then(),this.isGPU=hp(l,x);var et=l.onLayoutEnd,rt=l.layoutEndFormatted,ot=l.adjust;if(rt||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(wt){switch(wt.label){case 0:return et&&et(s),this.refreshLayout(),ot&&l.pipes?[4,this.adjustPipesBox(this.data,ot)]:[3,2];case 1:wt.sent(),this.refreshLayout(),wt.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var lt=!1;return l.type?(lt=!0,G=G.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(wt){switch(wt.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,wt.sent()]}})})})):l.pipes&&(lt=!0,l.pipes.forEach(function(wt,Nt){G=G.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(Dt){switch(Dt.label){case 0:return[4,this.execLayoutMethod(wt,Nt)];case 1:return[2,Dt.sent()]}})})})})),lt?G.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(wt){console.warn("graph layout failed,",wt)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,x=c.y;!isNaN(l)&&!isNaN(x)&&(s[c.id]={x:l,y:x},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,x=c.target,w=s[l],C=s[x];!w&&C?s[l]={x:C.x+(Math.random()-.5)*80,y:C.y+(Math.random()-.5)*80}:!C&&w&&(s[x]={x:w.x+(Math.random()-.5)*80,y:w.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,x,w;return(0,y.__generator)(this,function(C){switch(C.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Ma.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=hp(c,c.type),x=l?"".concat(c.type,"-gpu"):c.type,w=new Ma.Layouts[x](c),delete u.preset,w.init(f),[4,w.execute()]);case 1:return C.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var x=function(et){c=c.then(function(){return n.runWebworker(u,t,et)})},w=0,C=o.pipes;w<C.length;w++){var G=C[w];x(G)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(j){console.error("layout failed",j)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,x=Bb(n,function(C){return typeof C!="function"});if(!l)t.postMessage({type:nh.RUN,nodes:u,edges:f,layoutCfg:x});else{var w=c.transferControlToOffscreen();x.type="".concat(x.type,"-gpu"),t.postMessage({type:nh.GPURUN,nodes:u,edges:f,layoutCfg:x,canvas:w},[w])}return new Promise(function(C,G){t.onmessage=function(j){a.handleWorkerMessage(C,G,j,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,x=function(){o.onTick&&o.onTick()};switch(l){case nh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=vd.requestAnimationFrame(function(){sv(a,c),u.refreshPositions(),x(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=vd.requestAnimationFrame(function(){sv(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,x(),t()})),f.requestId=null}));break;case nh.END:f.currentTick==null&&(sv(a,c),t());break;case nh.GPUEND:f.currentTick==null&&(Fb(a,c),t());break;case nh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,y.__rest)(t,["disableTriggerLayout"]),f=(0,d.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(x){switch(x.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,x.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(x,w){var C=f.pipes[w];c=c.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(G){switch(G.label){case 0:return[4,this.updateLayoutMethod(x,C)];case 1:return[2,G.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(x){console.warn("layout failed",x)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),Pb.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(C){return Math.max(C.height,C.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,d.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(w,C){var G,j,et,rt=w.x-((G=l[C])===null||G===void 0?void 0:G.x),ot=w.y-((j=l[C])===null||j===void 0?void 0:j.y);(et=f[C])===null||et===void 0||et.forEach(function(lt){lt.x+=rt,lt.y+=ot})}),a()};var x=new Ma.Layouts[r](s);x.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(hg),Rb=kb;function sv(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function Bb(i,e){var t={};return i&&ov(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function Fb(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function Gb(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function lp(i){return Nb.includes(i)}function hp(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,up().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!lp(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Nh,uv,dp,fv;function zb(){Nh=document.createElement("table"),uv=document.createElement("tr"),dp=/^\s*<(\w+|!)[^>]*>/,fv={tr:document.createElement("tbody"),tbody:Nh,thead:Nh,tfoot:Nh,td:uv,th:uv,"*":document.createElement("div")}}function yi(i){Nh||zb();var e=dp.test(i)&&RegExp.$1;(!e||!(e in fv))&&(e="*");var t=fv[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var Ub=function(e){var t=e.clone();return Wb(e,t),t},Wb=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},vp=St,Xb="svg",Yb=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new Rb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new pb(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===Xb)u=new Oh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new Mf(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,d.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,y.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,y.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),x=s||c.get("el"),w="";t||(t="image/png"),setTimeout(function(){return(0,y.__awaiter)(u,void 0,void 0,function(){var C,G,j,et,rt,ot,lt,wt,Nt,Dt;return(0,y.__generator)(this,function(qt){switch(qt.label){case 0:return l!=="svg"?[3,1]:(C=x.cloneNode(!0),G=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),j=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",G),j.replaceChild(C,j.documentElement),et=new XMLSerializer().serializeToString(j),w="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(et)),[3,4]);case 1:return rt=void 0,ot=x.getContext("2d"),lt=a||this.get("width"),wt=o||this.get("height"),Nt=void 0,f?[4,this.downloadImageWatermark(f,ot,lt,wt)]:[3,3];case 2:qt.sent(),qt.label=3;case 3:if(r){Dt=typeof window!="undefined"?window.devicePixelRatio:1;try{rt=ot.getImageData(0,0,lt*Dt,wt*Dt),Nt=ot.globalCompositeOperation,ot.globalCompositeOperation="destination-over",ot.fillStyle=r,ot.fillRect(0,0,lt,wt)}catch(ve){console.error("Download image failed. Out of memory at ImageData creation")}}w=x.toDataURL(t),r&&(ot.clearRect(0,0,lt,wt),ot.putImageData(rt,0,0),ot.globalCompositeOperation=Nt),qt.label=4;case 4:return n&&n(w),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var x=void 0,w=o.getContext("2d"),C=Math.max(this.get("width"),500),G=Math.max(this.get("height"),500),j=void 0;if(r){var et=typeof window!="undefined"&&window.devicePixelRatio||1;try{x=w.getImageData(0,0,C*et,G*et),j=w.globalCompositeOperation,w.globalCompositeOperation="destination-over",w.fillStyle=r,w.fillRect(0,0,C,G)}catch(rt){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(w.clearRect(0,0,C,G),w.putImageData(x,0,0),w.globalCompositeOperation=j)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=yi('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,d.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var x=o+l[0]+l[2],w=s+l[1]+l[3],C={container:f,height:x,width:w,quickHit:!0},G=u==="svg"?new Oh(C):new Mf(C),j=this.get("group"),et=j.clone(),rt=(0,d.clone)(et.getMatrix());rt||(rt=[1,0,0,0,1,0,0,0,1]);var ot=(a.maxX+a.minX)/2,lt=(a.maxY+a.minY)/2;rt=vp(rt,[["t",-ot,-lt],["t",s/2+l[3],o/2+l[0]]]),et.resetMatrix(),et.setMatrix(rt),G.add(et);var wt=G.get("el"),Nt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Dt=wt.cloneNode(!0),qt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),ve=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",qt);ve.replaceChild(Dt,ve.documentElement);var ae=new XMLSerializer().serializeToString(ve);Nt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ae))}else{var Me=void 0,Fe=wt.getContext("2d"),wr=void 0;if(c){var Yr=typeof window!="undefined"?window.devicePixelRatio:1;try{Me=Fe.getImageData(0,0,w*Yr,x*Yr),wr=Fe.globalCompositeOperation,Fe.globalCompositeOperation="destination-over",Fe.fillStyle=c,Fe.fillRect(0,0,w,x)}catch(Dr){console.error("Download image failed. Out of memory at ImageData creation")}}Nt=wt.toDataURL(r),c&&(Fe.clearRect(0,0,w,x),Fe.putImageData(Me,0,0),Fe.globalCompositeOperation=wr)}t&&t(Nt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=yi('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),x=n?n.backgroundColor:void 0,w=n?n.padding:void 0;w?(0,d.isNumber)(w)&&(w=[w,w,w,w]):w=[0,0,0,0];var C=s+w[0]+w[2],G=u+w[1]+w[3];if(l){var j=this.get("graphWaterMarker").cfg||{},et=j.width,rt=j.height;C=Math.ceil(C/rt)*rt,G=Math.ceil(G/et)*et}var ot={container:c,height:C,width:G},lt=f==="svg"?new Oh(ot):new Mf(ot),wt=this.get("group"),Nt=Ub(wt),Dt=(0,d.clone)(Nt.getMatrix());Dt||(Dt=[1,0,0,0,1,0,0,0,1]);var qt=(o.maxX+o.minX)/2,ve=(o.maxY+o.minY)/2;Dt=vp(Dt,[["t",-qt,-ve],["t",u/2+w[3],s/2+w[0]]]),Nt.resetMatrix(),Nt.setMatrix(Dt),lt.add(Nt);var ae=lt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,x,function(Me){var Fe=document.createElement("a"),wr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Me,f,Fe,wr);var Yr=document.createEvent("MouseEvents");Yr.initEvent("click",!1,!1),Fe.dispatchEvent(Yr)},G,C,ae)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var x=document.createEvent("MouseEvents");x.initEvent("click",!1,!1),c.dispatchEvent(x)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var x=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(x,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(x)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=nl.waterMarkerImage);var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},nl.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var x={container:n,width:s,height:u,capture:!1},w=this.get("pixelRatio");w&&(x.pixelRatio=w,window.devicePixelRatio=w),a=new Mf(x),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),G=c.rotate,j=c.x,et=c.y;C.rotate(-G*Math.PI/180);var rt=new Image;rt.crossOrigin="anonymous",rt.src=t,rt.onload=function(){if(C.drawImage(rt,j,et,c.width,c.height),C.rotate(G*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ot=document.querySelector(".g6-graph-watermarker");ot||(ot=document.createElement("div"),ot.className="g6-graph-watermarker"),ot.className="g6-graph-watermarker",a.destroyed||(ot.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(ot))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},nl.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var x={container:n,width:s,height:u,capture:!1},w=this.get("pixelRatio");w&&(x.pixelRatio=w,window.devicePixelRatio=w),a=new Mf(x),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),G=c.rotate,j=c.fill,et=c.fontFamily,rt=c.fontSize,ot=c.baseline,lt=c.x,wt=c.y,Nt=c.lineHeight;C.rotate(-G*Math.PI/180),C.font="".concat(rt,"px ").concat(et),C.fillStyle=j,C.textBaseline=ot;for(var Dt=(0,d.isString)(t)?[t]:t,qt=Dt.length-1;qt>=0;qt--)C.fillText(Dt[qt],lt,wt+qt*Nt);if(C.rotate(G*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ve=document.querySelector(".g6-graph-watermarker");ve||(ve=document.createElement("div"),ve.className="g6-graph-watermarker"),ve.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(ve)}},e.prototype.destroy=function(){var t,r,n,a;(0,d.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(og),gp=Yb,Vb=Cf.radialLayout,cv=Cf.traverseTree,jb=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=dd()[t.type](r,t);return Vb(n),n}:function(r){return dd()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,d.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,d.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,d.each)(t.children||[],function(C){a.innerUpdateChild(C,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,x;o.get("originAttrs")&&(l=o.get("originAttrs").x,x=o.get("originAttrs").y);var w=o.getModel();n&&o.set("originAttrs",{x:w.x,y:w.y}),o.set("model",Object.assign(w,t.data)),(l!==t.x||x!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,d.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,x=f.minY,w=f.maxY,C={x:(c+l)/2,y:(x+w)/2};r==="begin"&&(C.x=c,C.y=x),this.translate(s.x-C.x,s.y-C.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,d.clone)(n.get("data"));var f={};cv(a,function(x){var w=x.children;if(!(w!=null&&w.length))return!0;for(var C=w.length-1;C>=0;C--){var G=r.findById(w[C].id),j=G?!G.isVisible():w[C].visible===!1;j&&(f[x.id]=f[x.id]||[],f[x.id].push({idx:C,child:w.splice(C,1)[0]}))}}),u=o?o(a,n.get("layout")):a,cv(u,function(x){var w=f[x.id];if(w!=null&&w.length)for(var C=w.length-1;C>=0;C--){var G=w[C],j=G.idx,et=G.child;x.children.splice(j,0,et)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,d.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var x=l.getModel().children||[];return!!x.find(function(w){return w.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,d.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){cv(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,d.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,d.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,d.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,d.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(gp),Hb=jb;function ma(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var Kb=function(){function i(e){this._cfgs=(0,d.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,d.each)(r,function(a,o){var s=(0,d.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,d.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),vs=Kb,Zb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pp="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",$b=function(i){Zb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:pp,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||pp;a.includes("url(")||(a='url("'.concat(a,'")'));var o=yi(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=yi(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");ma(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;ma(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");ma(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(vs),Qb=$b,qb=B(38186),gd=B.n(qb),Jb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&gd()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var tx=function(i){Jb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=yi("<div class=".concat(t||"g6-component-contextmenu","></div>"));ma(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,d.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,d.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(qt){c(qt.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var x=u.get("width"),w=u.get("height"),C=o.getBoundingClientRect(),G=this.get("offsetX")||0,j=this.get("offsetY")||0,et=u.getContainer().offsetTop,rt=u.getContainer().offsetLeft,ot=t.canvasX+rt+G,lt=t.canvasY+et+j;ot+C.width>x&&(ot=t.canvasX-C.width-G+rt),lt+C.height>w&&(lt=t.canvasY-C.height-j+et),ma(o,{top:"".concat(lt,"px"),left:"".concat(ot,"px"),visibility:"visible"});var wt=this.get("trigger")==="click",Nt=function(qt){if(wt){wt=!1;return}r.onMenuHide()};document.body.addEventListener("click",Nt),this.set("handler",Nt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&ma(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(vs),ex=tx,rx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lv=function(){return lv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},lv.apply(this,arguments)},yp=Math.max,nx=St,ax="default",ix="keyShape",ox="delegate",mp="svg",sx=function(i){rx(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,d.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=yi(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,x=0,w=!1,C=0,G=0,j=0,et=0,rt=0,ot=0,lt=f||u?"mousedown":"dragstart";c.addEventListener(lt,function(qt){var ve,ae;if(qt.dataTransfer){var Me=new Image;Me.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(ae=(ve=qt.dataTransfer).setDragImage)===null||ae===void 0||ae.call(ve,Me,0,0);try{qt.dataTransfer.setData("text/html","view-port-minimap")}catch(wr){qt.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,qt.target===c){var Fe=c.style;C=parseInt(Fe.left,10),G=parseInt(Fe.top,10),j=parseInt(Fe.width,10),et=parseInt(Fe.height,10),!(j>n[0]||et>n[1])&&(ot=a.getZoom(),rt=t.get("ratio"),w=!0,l=qt.clientX,x=qt.clientY)}},!1);var wt=function(ve){if(!(!w||(0,d.isNil)(ve.clientX)||(0,d.isNil)(ve.clientY))){var ae=l-ve.clientX,Me=x-ve.clientY;(C-ae<0||C-ae+j>=n[0])&&(ae=0),(G-Me<0||G-Me+et>=n[1])&&(Me=0),C-=ae,G-=Me,ma(c,{left:"".concat(C,"px"),top:"".concat(G,"px")}),a.translate(ae*ot/rt,Me*ot/rt),l=ve.clientX,x=ve.clientY}};!f&&!u&&c.addEventListener("drag",wt,!1);var Nt=function(){w=!1,r.refresh=!0},Dt=f||u?"mouseup":"dragend";c.addEventListener(Dt,Nt,!1),s.addEventListener("mouseleave",Nt),s.addEventListener("mouseup",Nt),(f||u)&&s.addEventListener("mousemove",wt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),x=this.get("viewport");x||this.initViewport();var w=(l.x-c.x)*t,C=(l.y-c.y)*t,G=c.x*t+r,j=c.y*t+n,et=G+w,rt=j+C;G<0&&(w+=G,G=0),et>o[0]&&(w=w-(et-o[0])),j<0&&(C+=j,j=0),rt>o[1]&&(C=C-(rt-o[1])),this.set("ratio",t);var ot="".concat(G,"px"),lt="".concat(j,"px");ma(x,{left:ot,top:lt,width:"".concat(w,"px"),height:"".concat(C,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===mp&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:lv({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=yi("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,d.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=yi('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===mp?f=new Oh({container:u,width:n[0],height:n[1]}):f=new Mf({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case ax:this.updateGraphShapes();break;case ix:this.updateKeyShapes();break;case ox:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,x=c.width/l,w=c.height/l;Number.isFinite(f.width)&&(x=yp(f.width,x),w=yp(f.height,w)),x+=2*s,w+=2*s;var C=Math.min(n[0]/x,n[1]/w),G=[1,0,0,0,1,0,0,0,1],j=0,et=0;Number.isFinite(f.minX)&&(j=-f.minX),Number.isFinite(f.minY)&&(et=-f.minY);var rt=(n[0]-(x-2*s)*C)/2,ot=(n[1]-(w-2*s)*C)/2;G=nx(G,[["t",j,et],["s",C,C],["t",rt,ot]]),u.setMatrix(G),this.set("ratio",C),this.set("totaldx",rt+j*C),this.set("totaldy",ot+et*C),this.set("dx",rt),this.set("dy",ot),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(vs),ux=sx,fx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Yu(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function cx(i,e){return i.x*e.x+i.y*e.y}function bp(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var lx=function(i){fx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(lt){(lt.x===null||!lt.y===null||lt.x===void 0||!lt.y===void 0)&&(s=!0),o[lt.id]=lt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var x=r.get("cycles"),w=r.get("iterations"),C=r.get("iterRate"),G=r.get("lambda"),j=0;j<x;j++){for(var et=function(wt){var Nt=[];n.forEach(function(Dt,qt){if(Dt.source!==Dt.target){var ve=o[Dt.source],ae=o[Dt.target];Nt[qt]=r.getEdgeForces({source:ve,target:ae},qt,u,G);for(var Me=0;Me<u+1;Me++)c[qt][Me].x+=Nt[qt][Me].x,c[qt][Me].y+=Nt[qt][Me].y}})},rt=0;rt<w;rt++)et(rt);G=G/2,u*=f,w*=C,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(lt,wt){lt.source!==lt.target&&(lt.type="polyline",lt.controlPoints=c[wt].slice(1,c[wt].length-1))});var ot=r.get("graph");ot.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var x=0;!((f=o[u])===null||f===void 0)&&f.length?x=r.getEdgeLength(o[u]):x=Yu({x:c.x,y:c.y},{x:l.x,y:l.y});var w=x/(t+1),C=w,G=[{x:c.x,y:c.y}];o[u].forEach(function(j,et){if(et!==0){for(var rt=Yu(j,o[u][et-1]);rt>C;){var ot=C/rt,lt={x:o[u][et-1].x,y:o[u][et-1].y};lt.x+=ot*(j.x-o[u][et-1].x),lt.y+=ot*(j.y-o[u][et-1].y),G.push(lt),rt-=C,C=w}C-=rt}}),G.push({x:l.x,y:l.y}),o[u]=G}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Yu(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(x,w){if(!(w<=f)){var C=o[x.source],G=o[x.target],j=t.getBundleScore({source:c,target:l},{source:C,target:G});j>=a&&(s[f].push(w),s[w].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Yu({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Yu({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=cx({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Yu(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=bp(r.source,t),a=bp(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Yu(o,s)/Yu(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Yu(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var x={x:0,y:0},w=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),C=o.getElectrostaticForce(l,r);x.x=a*(w.x+C.x),x.y=a*(w.y+C.y),c.push(x)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var x=Yu(s[c][t],s[r][t]),w=1/x;f.x+=l.x*w,f.y+=l.y*w}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(vs),hx=lx,dx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hv=function(){return hv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},hv.apply(this,arguments)},pd=.05,xp={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},vx=function(i){dx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,d.clone)(xp),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-pd:a=1/(1-pd);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var x=r.get("d");r.set("molecularParam",(x+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-pd:o=1/(1-pd);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),x=n.get("molecularParam"),w=a.getNodes(),C=w.length,G=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(G=n.get("cacheCenter"));var j=n.get("delegateCenterDiff");j&&(G.x+=j.x,G.y+=j.y),n.updateDelegate(G,f);for(var et=0;et<C;et++){var rt=w[et].getModel(),ot=rt.x,lt=rt.y;if(!(isNaN(ot)||isNaN(lt))){var wt=(ot-G.x)*(ot-G.x)+(lt-G.y)*(lt-G.y);if(!isNaN(wt)&&wt<c&&wt!==0){var Nt=Math.sqrt(wt),Dt=x*Nt/(l*Nt+f),qt=(ot-G.x)/Nt,ve=(lt-G.y)/Nt;if(rt.x=qt*Dt+G.x,rt.y=ve*Dt+G.y,s[rt.id]||(s[rt.id]={x:ot,y:lt,texts:[]}),o.push(rt),u&&2*Nt<f)for(var ae=w[et],Me=ae.getContainer(),Fe=Me.getChildren(),wr=Fe.length,Yr=0;Yr<wr;Yr++){var Dr=Fe[Yr];Dr.get("type")==="text"&&(s[rt.id].texts.push({visible:Dr.get("visible"),shape:Dr}),Dr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var x=f.texts[l];x.shape.set("visible",x.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,x=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var w=r.get("d"),C=r.get("r");if(r.set("molecularParam",(w+1)*C),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var G=r.get("dPercentText");G&&(G.remove(),G.destroy())}if(x==="drag"||x==="wheel"||x==="unset"){r.set("scaleRBy",x),r.get("delegate").remove(),r.get("delegate").destroy();var G=r.get("dPercentText");G&&(G.remove(),G.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||xp;s=u.addShape("circle",{attrs:hv({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(C){a.scaleRByWheel(C)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){a.scaleRByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(C){n.scaleDByWheel(C)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){n.scaleDByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),x=t.y+r/1.5+16;if(!l||l.destroyed){var w=o.get("group");l=w.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:x,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:x})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(vs),gx=vx,px=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ep=.05;typeof document!="undefined"&&gd()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var yx=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},mx=function(i){px(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,d.isString)(a)&&(o=yi(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,d.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var x=yx(l).filter(function(C){return C.nodeName==="LI"});if(x.length!==0){var w=x[0].getAttribute("code");w&&(f?f(w,r):t.handleDefaultOperator(w))}});var c=this.get("position");c&&ma(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,d.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(w){var C=t.findById(w.id);w.visible?t.showItem(C,!1):t.hideItem(C,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(w){var C=t.findById(w.id);delete w.id,t.updateItem(C,w,!1),C.getType()==="combo"&&t.updateCombo(C)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(w){var C=w.itemType;delete w.itemType,t.addItem(C,w,!1)})});break}case"add":Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(w){t.removeItem(w.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,d.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){var w=t.findById(x.id);x.visible?t.showItem(w,!1):t.hideItem(w,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){var w=t.findById(x.id);delete x.id,t.updateItem(w,x,!1),w.getType()==="combo"&&t.updateCombo(w)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){var w=x.itemType;delete x.itemType,t.addItem(w,x,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){t.updateComboTree(x.id,x.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-Ep*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-Ep*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(vs),bx=mx,xx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&gd()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Ex=function(i){xx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=yi("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),ma(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){ma(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,d.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&ma(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){ma(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),x=t.item;if(x.getType&&x.getType()==="node"&&l&&(0,d.isArray)(l)&&l.length>=2){var w=x.getBBox();c={x:w.minX+w.width*l[0],y:w.minY+w.height*l[1]}}var C=a.getCanvasByPoint(c.x,c.y),G=C.x,j=C.y,et=a.getContainer(),rt={x:G+et.offsetLeft+u,y:j+et.offsetTop+f};ma(n,{visibility:"visible",display:"unset"});var ot=n.getBoundingClientRect();G+ot.width+u>o&&(rt.x-=ot.width+u),j+ot.height+f>s&&(rt.y-=ot.height+f,rt.y<0&&(rt.y=0)),ma(n,{left:"".concat(rt.x,"px"),top:"".concat(rt.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(vs),wx=Ex,wp="timebarstartplay",_p="timebarendplay",Vu="valuechange",al="timebarConfigChanged",pc="playPauseBtn",Ph="nextStepBtn",kh="preStepBtn",A_={opacity:.5,fill:"#000"},C_={opacity:.5,fill:"#000",r:5},T_={fill:"#fff",fontSize:12},_x=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,x=e.backgroundColor,w=x===void 0?"#000":x,C=e.textColor,G=C===void 0?"#fff":C,j=e.opacity,et=j===void 0?.8:j,rt=e.fontSize,ot=rt===void 0?12:rt;this.container=o,this.className=l,this.backgroundColor=w,this.textColor=G,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=et,this.fontSize=ot,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,x=yi("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,d.isString)(l)&&(l=document.getElementById(l)),l.appendChild(x),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,ma(x,{visibility:"hidden",top:0,left:0});var w=yi(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));w.innerHTML=s,x.appendChild(w),e.backgroundDOM=w;var C=yi("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));x.appendChild(C),e.arrowDOM=C,e.container=x},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;ma(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),ma(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),ma(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var x=n-u/2,w=n+u/2;x<0?ma(t.backgroundDOM,{marginLeft:"".concat(-u/2-x,"px")}):w>t.parentWidth&&ma(t.backgroundDOM,{marginLeft:"".concat(-u/2-w+t.parentWidth+12,"px")})},i.prototype.hide=function(){ma(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Sx=_x,dv=function(){return dv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dv.apply(this,arguments)},Mx=function(){function i(e){this.config=(0,d.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,d.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,x=t.addGroup({name:pc});this.startMarkerGroup=x.addGroup({name:pc}),this.circle=t.addShape("circle",{attrs:dv({x:c,y:l,r:this.config.r*a},r),name:pc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=x.addGroup({name:pc});var w=.25*this.config.r*a,C=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-C/2,width:w,height:C,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-C/2,width:w,height:C,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),Ax=Mx,to=function(){return to=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},to.apply(this,arguments)},Rh=St,Cx="#aaa",Tx="green",Ix={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Ox={fill:"#fff"},Lx={fill:"green"},Sp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Mp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Dx={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Sp,timeTypeControllerStyle:Mp},vv=110,yc=50,ju={SINGLE:"single",RANGE:"range"},Nx=function(){function i(e){this.controllerCfg=(0,d.deepMix)({},Dx,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||ju.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Cx:s,f=e.stroke,c=f===void 0?Tx:f,l=e.containerStyle,x=l===void 0?{}:l,w=to(to({},Ix),e.playBtnStyle||{}),C=to(to({},Ox),e.preBtnStyle||{}),G=to(to({},Lx),e.nextBtnStyle||{}),j=r/2-5,et=a+10,rt=this.controllerGroup.addShape("rect",{attrs:to({x:n,y:et,width:t,height:r,stroke:c,fill:u},x),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:et,r:j}):this.playButton=new Ax({group:this.controllerGroup,x:t/2,y:et+j+5,r:j,isPlay:this.isPlay,style:w});var ot=C.offsetX||0,lt=C.offsetY||0,wt=(C.scale||1)*j;this.controllerGroup.addShape("path",{attrs:to({path:this.getPreMarkerPath(t/2-5*j+ot,et+j+5+lt,wt*.5)},C),name:kh});var Nt=G.offsetX||0,Dt=G.offsetY||0,qt=(G.scale||1)*j;this.controllerGroup.addShape("path",{attrs:to({path:this.getNextMarkerPath(t/2+5*j+Nt,et+j+5+Dt,qt*.5)},G),name:Ph}),rt.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var ve=this.controllerCfg.scale,ae=ve===void 0?1:ve,Me=this.controllerGroup.getCanvasBBox(),Fe=(Me.maxX+Me.minX)/2,wr=(Me.maxY+Me.minY)/2,Yr=Rh([1,0,0,0,1,0,0,0,1],[["t",-Fe,-wr],["s",ae,ae],["t",Fe,wr]]);this.controllerGroup.setMatrix(Yr)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=to(to({},Sp),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,x=a.scale,w=x===void 0?1:x,C=a.offsetX,G=C===void 0?0:C,j=a.offsetY,et=j===void 0?0:j,rt=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=rt;var ot=[],lt=5;this.speedAxisY=[19,22,26,32,39];for(var wt=0;wt<5;wt++){var Nt=t+this.speedAxisY[wt],Dt=r-(n?yc:vv);rt.addShape("line",{attrs:to({x1:Dt,x2:Dt+15,y1:Nt,y2:Nt},s),speed:lt,name:"speed-rect"}),this.speedAxisY[wt]=Nt,ot.push(lt),lt=lt-1}this.speedText=rt.addShape("text",{attrs:to({x:r-(n?yc:vv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=rt.addShape("path",{attrs:to({path:this.getPointerPath(r-(n?yc:vv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var qt=this.speedGroup.getCanvasBBox(),ve=(qt.maxX+qt.minX)/2,ae=(qt.maxY+qt.minY)/2,Me=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Me=Rh(Me,[["t",-ve,-ae],["s",w,w],["t",ve+G*w,ae+et*w]]),this.speedGroup.setMatrix(Me)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=to(to({},Mp),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,x=l===void 0?0:l,w=o.box,C=w===void 0?{}:w,G=o.check,j=G===void 0?{}:G,et=o.text,rt=et===void 0?{}:et;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var ot=a===ju.SINGLE;this.toggleGroup.addShape("rect",{attrs:to({x:n-yc,y:this.speedAxisY[0]+3.5},C),isChecked:ot,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:to({path:[["M",n-yc+3,this.speedAxisY[1]+6],["L",n-yc+7,this.speedAxisY[1]+10],["L",n-yc+12,this.speedAxisY[1]+4]]},j),capture:!1,name:"check-icon"}),ot||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:to({text:ot?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-yc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},rt),name:"checked-text"});var lt=this.toggleGroup.getCanvasBBox(),wt=(lt.maxX+lt.minX)/2,Nt=(lt.maxY+lt.minY)/2,Dt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Dt=Rh(Dt,[["t",-wt,-Nt],["s",u,u],["t",wt+c*u,Nt+x*u]]),this.toggleGroup.setMatrix(Dt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Rh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(al,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Rh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(al,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=ju.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=ju.SINGLE),t.target.set("isChecked",!a),e.group.emit(al,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Ap=Nx,Bh=function(){return Bh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bh.apply(this,arguments)},Px=St,kx={fill:"#5B8FF9"},Rx={fill:"#e6e8e9"},Bx=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,x=l===void 0?0:l,w=e.y,C=w===void 0?0:w,G=e.tickLabelFormatter,j=e.selectedTickStyle,et=j===void 0?kx:j,rt=e.unselectedTickStyle,ot=rt===void 0?Rx:rt,lt=e.tooltipBackgroundColor,wt=e.tooltipFomatter,Nt=e.tickLabelStyle,Dt=e.controllerCfg,qt=Dt===void 0?{speed:1}:Dt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=G,this.tickLabelStyle=Nt||{},this.selectedTickStyle=et,this.unselectedTickStyle=ot,this.controllerCfg=qt,this.currentSpeed=qt.speed||1,this.x=x,this.y=C,this.tooltipBackgroundColor=lt,this.tooltipFomatter=wt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,x=t.tickLabelStyle,w=r-2*a,C=10,G=4,j=3*a+G+C,et=n-j-2*a,rt=2,ot=o.length,lt=(w-rt*(ot-1))/ot;this.tickWidth=lt;var wt=this.sliceGroup,Nt=[],Dt=[],qt=Math.round(ot*s),ve=Math.round(ot*u);this.startTickRectId=qt,this.endTickRectId=ve;var ae=x.rotate;delete x.rotate,o.forEach(function(Fe,wr){var Yr=wr>=qt&&wr<=ve,Dr=Yr?c:l,pr=wt.addShape("rect",{attrs:Bh({x:a+wr*(lt+rt),y:a,width:lt,height:et},Dr),draggable:!0,name:"tick-rect-".concat(wr)}),an=wt.addShape("rect",{attrs:{x:a+wr*lt+rt*(2*wr-1)/2,y:a,width:wr===0||wr===ot-1?lt+rt/2:lt+rt,height:et,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(wr)});an.toFront();var en=pr.getBBox(),yr=(en.minX+en.maxX)/2;Nt.push({rect:pr,pickRect:an,value:Fe.date,x:yr,y:en.minY});var Or;if(f?(Or=f(Fe),!(0,d.isString)(Or)&&Or&&(Or=Fe.date)):wr%Math.round(ot/10)===0&&(Or=Fe.date),Or){Dt.push(Or);var Kr=en.maxY+a*2;wt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:yr,y1:Kr,x2:yr,y2:Kr+G},name:"tick-line"});var Zr=Kr+G+a,fn=wt.addShape("text",{attrs:Bh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:yr,y:Zr,textAlign:"center",text:Or,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},x),capture:!1,name:"tick-label"}),bn=fn.getBBox();if(bn.maxX>r?fn.attr("textAlign","right"):bn.minX<0&&fn.attr("textAlign","left"),(0,d.isNumber)(ae)&&Dt.length!==10){var Vn=Px([1,0,0,0,1,0,0,0,1],[["t",-yr,-Zr],["r",ae],["t",yr-5,Zr+2]]);fn.attr({textAlign:"left",matrix:Vn})}Dt.length===1?fn.attr({textAlign:"left"}):Dt.length===10&&fn.attr({textAlign:"right"})}}),this.tickRects=Nt;var Me=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Ap(Bh({group:Me,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var x=parseInt(l.get("name").split("-")[2],10);if(!isNaN(x)){var w=e.tickRects,C=e.unselectedTickStyle;w.forEach(function(rt){rt.rect.attr(C)});var G=e.selectedTickStyle;w[x].rect.attr(G),e.startTickRectId=x,e.endTickRectId=x;var j=w.length,et=x/j;e.graph.emit(Vu,{value:[et,et]})}}}),t.on("dragstart",function(c){var l=e.tickRects,x=e.unselectedTickStyle;l.forEach(function(rt){rt.rect.attr(x)});var w=c.target,C=parseInt(w.get("name").split("-")[2],10),G=e.selectedTickStyle;l[C].rect.attr(G),e.startTickRectId=C;var j=l.length,et=C/j;e.graph.emit(Vu,{value:[et,et]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),x=e.startTickRectId,w=e.tickRects,C=e.selectedTickStyle,G=e.unselectedTickStyle,j=0;j<w.length;j++){var et=j>=x&&j<=l?C:G;w[j].rect.attr(et)}var rt=w.length;e.endTickRectId=l;var ot=x/rt,lt=l/rt;e.graph.emit(Vu,{value:[ot,lt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,x=parseInt(c.target.get("name").split("-")[2],10);if(!(x<l)){var w=e.selectedTickStyle,C=e.tickRects;C[x].rect.attr(w),e.endTickRectId=x;var G=C.length,j=l/G,et=x/G;e.graph.emit(Vu,{value:[j,et]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Sx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(x){var w=x.target;if(w.get("type")==="rect"){var C=parseInt(w.get("name").split("-")[2],10),G=o.getClientByPoint(u[C].x,u[C].y);s.show({x:u[C].x,y:u[C].y,clientX:G.x,clientY:G.y,text:a?a(u[C].value):u[C].value})}}),l.on("mouseleave",function(x){s.hide()})});var f=this.group;f.on("".concat(pc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Ph,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(kh,":click"),function(){e.updateStartEnd(-1)}),f.on(al,function(c){var l=c.type,x=c.speed;e.currentSpeed=x})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(wp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(_p,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Vu,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(pc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(al),this.sliceGroup.destroy()},i}(),Fx=Bx,Cp={};function Gx(i){return Cp[i]}function Hu(i,e){Cp[i]=e}var zx=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,d.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,d.map)(this.ticks,function(t,r){return(0,d.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,d.isNil)(n)||!(0,d.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,d.assign)(this,this.__cfg__),this.setDomain(),(0,d.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,d.isString)(e)){var r=Gx(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,d.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,d.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),gv=zx,Ux=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,d.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,d.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,y.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,d.isNil)(this.getConfig("min"))&&(this.min=0),(0,d.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(gv),Fh=Ux,Tp=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,mc="\\d\\d?",bc="\\d\\d",Wx="\\d{3}",Xx="\\d{4}",Gh="[^\\s]+",Ip=/\[([^]*?)\]/gm;function Op(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var Lp=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function xc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var Dp=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Np=["January","February","March","April","May","June","July","August","September","October","November","December"],Yx=Op(Np,3),Vx=Op(Dp,3),pv={dayNamesShort:Vx,dayNames:Dp,monthNamesShort:Yx,monthNames:Np,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},yd=xc({},pv),Pp=function(i){return yd=xc(yd,i)},kp=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},gs=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},jx={D:function(i){return String(i.getDate())},DD:function(i){return gs(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return gs(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return gs(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return gs(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return gs(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return gs(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return gs(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return gs(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return gs(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return gs(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return gs(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+gs(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+gs(Math.floor(Math.abs(e)/60),2)+":"+gs(Math.abs(e)%60,2)}},Rp=function(i){return+i-1},Bp=[null,mc],Fp=[null,Gh],Gp=["isPm",Gh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],zp=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Hx={D:["day",mc],DD:["day",bc],Do:["day",mc+Gh,function(i){return parseInt(i,10)}],M:["month",mc,Rp],MM:["month",bc,Rp],YY:["year",bc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",mc,void 0,"isPm"],hh:["hour",bc,void 0,"isPm"],H:["hour",mc],HH:["hour",bc],m:["minute",mc],mm:["minute",bc],s:["second",mc],ss:["second",bc],YYYY:["year",Xx],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",bc,function(i){return+i*10}],SSS:["millisecond",Wx],d:Bp,dd:Bp,ddd:Fp,dddd:Fp,MMM:["month",Gh,Lp("monthNamesShort")],MMMM:["month",Gh,Lp("monthNames")],a:Gp,A:Gp,ZZ:zp,Z:zp},md={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Up=function(i){return xc(md,i)},Wp=function(i,e,t){if(e===void 0&&(e=md.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=md[e]||e;var r=[];e=e.replace(Ip,function(a,o){return r.push(o),"@@@"});var n=xc(xc({},yd),t);return e=e.replace(Tp,function(a){return jx[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Xp(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=md[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Ip,function(lt,wt){return o.push(kp(wt)),"@@@"}),u={},f={};s=kp(s).replace(Tp,function(lt){var wt=Hx[lt],Nt=wt[0],Dt=wt[1],qt=wt[3];if(u[Nt])throw new Error("Invalid format. "+Nt+" specified twice in format");return u[Nt]=!0,qt&&(f[qt]=!0),a.push(wt),"("+Dt+")"}),Object.keys(f).forEach(function(lt){if(!u[lt])throw new Error("Invalid format. "+lt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=xc(xc({},yd),t),x=1;x<c.length;x++){var w=a[x-1],C=w[0],G=w[2],j=G?G(c[x],l):+c[x];if(j==null)return null;n[C]=j}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var et;if(n.timezoneOffset==null){et=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var rt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],x=0,ot=rt.length;x<ot;x++)if(u[rt[x][0]]&&n[rt[x][0]]!==et[rt[x][1]]())return null}else if(et=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return et}var Kx={format:Wp,parse:Xp,defaultI18n:pv,setGlobalDateI18n:Pp,setGlobalDateMasks:Up},Yp=Kx;function Zx(i){return function(e,t,r,n){for(var a=(0,d.isNil)(r)?0:r,o=(0,d.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var Vp="format";function jp(i,e){var t=O[Vp]||Yp[Vp];return t(i,e)}function bd(i){return(0,d.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,d.isDate)(i)&&(i=i.getTime()),i}var yu=1e3,il=60*yu,ol=60*il,Tf=24*ol,zh=Tf*31,Hp=Tf*365,Uh=[["HH:mm:ss",yu],["HH:mm:ss",yu*10],["HH:mm:ss",yu*30],["HH:mm",il],["HH:mm",il*10],["HH:mm",il*30],["HH",ol],["HH",ol*6],["HH",ol*12],["YYYY-MM-DD",Tf],["YYYY-MM-DD",Tf*4],["YYYY-WW",Tf*7],["YYYY-MM",zh],["YYYY-MM",zh*4],["YYYY-MM",zh*6],["YYYY",Tf*380]];function $x(i,e,t){var r=(e-i)/t,n=Zx(function(o){return o[1]})(Uh,r)-1,a=Uh[n];return n<0?a=Uh[0]:n>=Uh.length&&(a=(0,d.last)(Uh)),a}var Qx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=bd(t);var r=this.values.indexOf(t);return r===-1&&((0,d.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):jp(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,d.each)(t,function(r,n){t[n]=bd(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Fh),qx=Qx,Jx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,d.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,d.head)(t),n=(0,d.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,d.isNil)(this.minLimit)||(this.min=r),(0,d.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,d.getRange)(this.values),r=t.min,n=t.max;(0,d.isNil)(this.min)&&(this.min=r),(0,d.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,d.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(gv),xd=Jx,tE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(xd),Wh=tE;function Ec(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Hs(i,e){return i===1?1:Math.log(e)/Math.log(i)}function Kp(i,e,t){(0,d.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,d.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Zp(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function I_(i,e){var t=Zp(i),r=Zp(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var eE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Hs(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Hs(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Hs(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Kp(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Hs(a,r)-Hs(a,n)):s=(Hs(a,t)-Hs(a,n))/(Hs(a,r)-Hs(a,n)),s},e}(xd),rE=eE,nE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Ec(n,this.max),o=Ec(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Ec(a,t)-Ec(a,n))/(Ec(a,r)-Ec(a,n));return o},e}(xd),aE=nE,iE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):jp(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,d.isString)(r)||(0,d.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return bd(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,d.isNil)(r)||!(0,d.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,d.isNil)(n)||!(0,d.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,d.each)(t,function(f){var c=bd(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,d.isNil)(r)&&(this.min=o),(0,d.isNil)(n)&&(this.max=u)}},e}(Wh),oE=iE,sE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,d.last)(r);if(o<0)return(0,d.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,d.last)(t)!==this.max&&t.push(this.max),(0,d.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,d.head)(r))return 0;if(t>(0,d.last)(r))return 1;var n=0;return(0,d.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(xd),$p=sE,uE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}($p),fE=uE,Qp={};function cE(i){return Qp[i]}function Ku(i,e){if(cE(i))throw new Error("type '"+i+"' existed.");Qp[i]=e}var lE=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,d.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(gv),hE=lE;function qp(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,d.isNumber)(t)){var a=(0,d.filter)(e,function(C,G){return G%t===0}),o=(0,d.last)(e);return n&&(0,d.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,d.isNil)(u)&&(u=0),(0,d.isNil)(f)&&(f=e.length-1),!(0,d.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],x=u,w=0;w<r&&!(x>=f);w++)x=Math.min(u+w*c,f),w===r-1&&n?l.push(e[f]):l.push(e[x]);return l}function dE(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new vE;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var yv=5,Jp=Math.sqrt(50),t0=Math.sqrt(10),e0=Math.sqrt(2),vE=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=yv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=Ed(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=Ed(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=Ed(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=yv),gE(this._domain[0],this._domain[this._domain.length-1],e||yv)},i}();function gE(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=Ed(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function Ed(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Jp?10:a>=t0?5:a>=e0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Jp?10:a>=t0?5:a>=e0?2:1)}function r0(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function mv(i,e,t){var r=r0(i,t,"floor"),n=r0(e,t,"ceil");r=(0,d.fixedBase)(r,t),n=(0,d.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,d.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function bv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,d.isNil)(n)?(0,d.isNil)(e)?o:e:n,l=(0,d.isNil)(a)?(0,d.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var x=(l-c)/(f-1),w=[],C=0;C<f;C++)w.push(c+x*C);return w}function pE(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=dE(i);return!(0,d.isNil)(n)||!(0,d.isNil)(a)?bv(i,(0,d.head)(o),(0,d.last)(o)):r?mv(e,t,r).ticks:o}function sl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var yE=[1,5,2,2.5,4,3],O_=null,n0=Number.EPSILON*100;function mE(i,e){return(i%e+e)%e}function bE(i){return Math.round(i*1e12)/1e12}function xE(i,e,t,r,n,a){var o=(0,d.size)(e),s=(0,d.indexOf)(e,i),u=0,f=mE(r,a);return(f<n0||a-f<n0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function EE(i,e,t){var r=(0,d.size)(e),n=(0,d.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function wE(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function _E(i,e){return i>=e?2-(i-1)/(e-1):1}function SE(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function ME(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function AE(){return 1}function CE(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=yE),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(Kr,Zr){return sl(i+u*Zr)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var x=n[l],w=EE(x,n,c);if(a[0]*w+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var C=2;C<1/0;){var G=_E(C,o);if(a[0]*w+a[1]+a[2]*G+a[3]<f.score)break;for(var j=(e-i)/(C+1)/c/x,et=Math.ceil(Math.log10(j));et<1/0;){var rt=c*x*Math.pow(10,et),ot=ME(i,e,rt*(C-1));if(a[0]*w+a[1]*ot+a[2]*G+a[3]<f.score)break;var lt=Math.floor(e/rt)*c-(C-1)*c,wt=Math.ceil(i/rt)*c;if(lt<=wt)for(var s=wt-lt,Nt=0;Nt<=s;Nt+=1){var Dt=lt+Nt,qt=Dt*(rt/c),ve=qt+rt*(C-1),ae=rt,Me=xE(x,n,c,qt,ve,ae),Fe=SE(i,e,qt,ve),wr=wE(C,o,i,e,qt,ve),Yr=AE(),Dr=a[0]*Me+a[1]*Fe+a[2]*wr+a[3]*Yr;Dr>f.score&&(!r||qt<=i&&ve>=e)&&(f.lmin=qt,f.lmax=ve,f.lstep=ae,f.score=Dr)}et+=1}C+=1}}c+=1}var pr=sl(f.lmax),an=sl(f.lmin),en=sl(f.lstep),yr=Math.floor(bE((pr-an)/en))+1,Or=new Array(yr);Or[0]=sl(an);for(var l=1;l<yr;l++)Or[l]=sl(Or[l-1]+en);return{min:Math.min(i,(0,d.head)(Or)),max:Math.max(e,(0,d.last)(Or)),ticks:Or}}function TE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=CE(e,t,r,n).ticks;return!(0,d.isNil)(o)||!(0,d.isNil)(s)?bv(i,(0,d.head)(u),(0,d.last)(u)):a?mv(e,t,a).ticks:u}function IE(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Hs(e,n);if(r>0)o=Math.floor(Hs(e,r));else{var u=Kp(a,e,n);o=Math.floor(Hs(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],x=o;x<s+c;x=x+c)l.push(Math.pow(e,x));return r<=0&&l.unshift(0),l}function a0(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),x=Math.max(c*f,e),w=Math.min(l*f,i),C=Math.floor((x-w)/f)+1,G=new Array(C),j=0;j<C;j++)G[j]=sl(w+j*f);return{min:w,max:x,ticks:G}}function OE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Ec(e,i.max)),n=Math.floor(Ec(e,i.min)),a=a0(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function LE(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function DE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(LE(r,o))}return n}function NE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=a0(e,t,r).ticks;return!(0,d.isNil)(a)||!(0,d.isNil)(o)?bv(i,(0,d.head)(s),(0,d.last)(s)):n?mv(e,t,n).ticks:s}function PE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=$x(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function kE(i){var e=qp((0,y.__assign)({showLast:!0},i));return e}function wd(i){return new Date(i).getFullYear()}function RE(i){return new Date(i,0,1).getTime()}function xv(i){return new Date(i).getMonth()}function BE(i,e){var t=wd(i),r=wd(e),n=xv(i),a=xv(e);return(r-t)*12+(a-n)%12}function FE(i,e){return new Date(i,e,1).getTime()}function GE(i,e){return Math.ceil((e-i)/Tf)}function zE(i,e){return Math.ceil((e-i)/ol)}function UE(i,e){return Math.ceil((e-i)/(60*1e3))}function WE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=wd(e);if(a>Hp)for(var u=wd(t),f=Math.ceil(a/Hp),c=s;c<=u+f;c=c+f)o.push(RE(c));else if(a>zh)for(var l=Math.ceil(a/zh),x=xv(e),w=BE(e,t),c=0;c<=w+l;c=c+l)o.push(FE(s,c+x));else if(a>Tf)for(var C=new Date(e),G=C.getFullYear(),j=C.getMonth(),et=C.getDate(),rt=Math.ceil(a/Tf),ot=GE(e,t),c=0;c<ot+rt;c=c+rt)o.push(new Date(G,j,et+c).getTime());else if(a>ol)for(var C=new Date(e),G=C.getFullYear(),j=C.getMonth(),rt=C.getDate(),lt=C.getHours(),wt=Math.ceil(a/ol),Nt=zE(e,t),c=0;c<=Nt+wt;c=c+wt)o.push(new Date(G,j,rt,lt+c).getTime());else if(a>il)for(var Dt=UE(e,t),qt=Math.ceil(a/il),c=0;c<=Dt+qt;c=c+qt)o.push(e+c*il);else{var ve=a;ve<yu&&(ve=yu);for(var ae=Math.floor(e/yu)*yu,Me=Math.ceil((t-e)/yu),Fe=Math.ceil(ve/yu),c=0;c<Me+Fe;c=c+Fe)o.push(ae+c*yu)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Hu("cat",qp),Hu("time-cat",kE),Hu("wilkinson-extended",TE),Hu("r-pretty",NE),Hu("time",PE),Hu("time-pretty",WE),Hu("log",IE),Hu("pow",OE),Hu("quantile",DE),Hu("d3-linear",pE),Ku("cat",Fh),Ku("category",Fh),Ku("identity",hE),Ku("linear",Wh),Ku("log",rE),Ku("pow",aE),Ku("time",oE),Ku("timeCat",qx),Ku("quantize",$p),Ku("quantile",fE);var XE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function YE(i){return(0,d.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function i0(i){return YE(i)}function VE(i){if(i.length<=2)return i0(i);var e=[];(0,d.each)(i,function(o){(0,d.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Xn(e,!1),r=(0,d.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function jE(i,e,t,r){r===void 0&&(r=!0);var n=new Wh({values:i}),a=new Fh({values:(0,d.map)(i,function(s,u){return u})}),o=(0,d.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?VE(o):i0(o)}function HE(i,e,t,r){r===void 0&&(r=5);for(var n=new Wh({values:i}),a=new Fh({values:(0,d.map)(i,function(x,w){return w})}),o=(0,d.map)(i,function(x,w){return[a.scale(w)*e,t-n.scale(x)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=$E(c);s.push.apply(s,l)}return QE(s)}function KE(i,e){var t=new Wh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function ZE(i,e,t,r){var n=XE([],i,!0),a=KE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function $E(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,d.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,d.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function QE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Xh=function(){return Xh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Xh.apply(this,arguments)},qE={stroke:"#C5C5C5",strokeOpacity:.85},JE={fill:"#CACED4",opacity:.85},tw=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,x=e.isArea,w=x===void 0?!1:x,C=e.data,G=C===void 0?[]:C,j=e.lineStyle,et=e.areaStyle,rt=e.group,ot=e.interval,lt=ot===void 0?null:ot;this.group=rt,this.x=r,this.y=a,this.width=s,this.height=f,this.data=G,this.smooth=l,this.isArea=w,this.lineStyle=Object.assign({},qE,j),this.areaStyle=Object.assign({},JE,et),this.intervalConfig=lt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,x=this.group.addGroup({name:"trend-group"});if(s){var w=jE(s,n,a,u);if(x.addShape("path",{attrs:Xh({path:w},c),name:"trend-line"}),f){var C=ZE(w,n,a,s);x.addShape("path",{attrs:Xh({path:C},l),name:"trend-area"})}}this.intervalConfig&&x.addShape("path",{attrs:Xh({path:HE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),x.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),ew=tw,ah=function(){return ah=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ah.apply(this,arguments)},rw={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},nw={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},aw=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,x=l===void 0?24:l,w=e.style,C=w===void 0?{}:w;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=x,n==="trend"?this.style=ah(ah({},rw),C):n==="simple"&&(this.style=ah(ah({},nw),C)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,d.isNumber)(e)&&(this.x=e),(0,d.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),o0=aw,di=function(){return di=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},di.apply(this,arguments)},iw=St,ow={fill:"#416180",opacity:.05},sw={fill:"#416180",opacity:.15,radius:5},uw={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Ev=2,fw={width:Ev,height:24},cw={textBaseline:"middle",fill:"#000",opacity:.45},lw={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},hw={lineWidth:1,stroke:"#ccc"},dw=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(Kr){return function(Zr){t.currentHandler=Kr;var fn=Zr.originalEvent;fn.stopPropagation(),fn.preventDefault(),t.prevX=(0,d.get)(fn,"touches.0.pageX",fn.pageX);var bn=t.canvas.get("container");bn.addEventListener("mousemove",t.onMouseMove),bn.addEventListener("mouseup",t.onMouseUp),bn.addEventListener("mouseleave",t.onMouseUp),bn.addEventListener("touchmove",t.onMouseMove),bn.addEventListener("touchend",t.onMouseUp),bn.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Kr){Kr.stopPropagation(),Kr.preventDefault();var Zr=(0,d.get)(Kr,"touches.0.pageX",Kr.pageX),fn=Zr-t.prevX,bn=t.adjustOffsetRange(fn/t.width);t.updateStartEnd(bn),t.updateUI(),t.prevX=Zr},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Kr=t.canvas.get("container");Kr&&(Kr.removeEventListener("mousemove",t.onMouseMove),Kr.removeEventListener("mouseup",t.onMouseUp),Kr.removeEventListener("mouseleave",t.onMouseUp),Kr.removeEventListener("touchmove",t.onMouseMove),Kr.removeEventListener("touchend",t.onMouseUp),Kr.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,x=e.trendCfg,w=e.controllerCfg,C=w===void 0?{speed:1}:w,G=e.backgroundStyle,j=G===void 0?{}:G,et=e.foregroundStyle,rt=et===void 0?{}:et,ot=e.handlerStyle,lt=ot===void 0?{}:ot,wt=e.textStyle,Nt=wt===void 0?{}:wt,Dt=e.start,qt=Dt===void 0?0:Dt,ve=e.end,ae=ve===void 0?1:ve,Me=e.minText,Fe=Me===void 0?"":Me,wr=e.maxText,Yr=wr===void 0?"":wr,Dr=e.group,pr=e.graph,an=e.canvas,en=e.tick,yr=en===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Zr){return Zr},ticks:[]}:en,Or=e.type;this.graph=pr,this.canvas=an,this.group=Dr,this.timeBarType=Or,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=yr.ticks,this.trendCfg=x,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.tickLabelFormatter=yr.tickLabelFormatter,Or==="trend"?this.backgroundStyle=di(di({},ow),j):Or==="simple"&&(this.backgroundStyle=di(di({},sw),j)),this.foregroundStyle=di(di({},uw),rt),this.handlerStyle=di(di({},fw),lt),this.textStyle=di(di({},cw),Nt),this.tickLabelStyle=di(di({},lw),yr.tickLabelStyle),this.tickLineStyle=di(di({},hw),yr.tickLineStyle),this.currentMode=C.defaultTimeType||ju.RANGE,this.start=qt,this.end=ae,this.minText=Fe,this.maxText=Yr,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,d.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,d.size)((0,d.get)(this.trendCfg,"data"))){var o=new ew(di(di({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:di({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:di({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:di({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:di({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:di({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:di({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(et){et.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(et){et.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,d.get)(this.handlerStyle,"width",2),c=(0,d.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new o0({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var x=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new o0({name:"maxHandlerShape",group:x,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var w=this.ticks,C=r/(w.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(et){et.destroy()});var G=-1/0,j=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=w.map(function(et,rt){e.tickPosList.push(e.x+rt*C);var ot;e.tickLabelFormatter?(ot=e.tickLabelFormatter(et),!(0,d.isString)(ot)&&ot&&(ot=et.date)):ot=et.date;var lt=e.x+rt*C,wt=e.y+n+5,Nt=e.group.addShape("text",{attrs:di({x:lt,y:wt,text:ot,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,d.isNumber)(j)&&rt!==w.length-1){var Dt=iw([1,0,0,0,1,0,0,0,1],[["t",-lt,-wt],["r",j],["t",lt-5,wt+2]]);Nt.attr({textAlign:"left",matrix:Dt})}rt===0?Nt.attr({textAlign:"left"}):rt!==w.length-1&&Nt.attr({textAlign:"right"});var qt=e.group.addShape("line",{attrs:di({x1:e.x+rt*C,y1:e.y+n+2,x2:e.x+rt*C,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});qt.toBack();var ve=Nt.getBBox();return ve.minX>G?(Nt.show(),qt.show(),G=ve.minX+ve.width+10):(Nt.hide(),qt.hide()),Nt}),this.controllerBtnGroup=new Ap(di({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===ju.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(pc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Ph,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(kh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(al,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===ju.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===ju.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,d.get)(this.handlerStyle,"width",Ev);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,d.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,d.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===ju.RANGE?this.graph.emit(Vu,{value:[this.start,this.end].sort()}):this.currentMode===ju.SINGLE&&this.graph.emit(Vu,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,d.get)(this.handlerStyle,"width",Ev),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),x=s.getBBox(),w=null,C=null;return this.timeBarType==="trend"?(w=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},C=f+x.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(w=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},C=s.attr("x")>this.width-x.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[C,w]:[w,C]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(wp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(_p,null))},i.prototype.destory=function(){this.graph.off(Vu,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(pc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(al),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),vw=dw,gw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),If=function(){return If=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},If.apply(this,arguments)},pw=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},yw=4,mw=26,bw=function(i){gw(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,d.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,d.isString)(u)&&(u=document.getElementById(u)),f=u):(f=yi("<div class='".concat(s,"'></div>")),ma(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,x=t.get("renderer");x==="SVG"?l=new Oh({container:f,width:n,height:a}):l=new Mf({container:f,width:n,height:a}),this.get("containerCSS")&&ma(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,x=r.textStyle,w=r.tick,C=r.backgroundStyle,G=r.foregroundStyle,j=f.data,et=pw(f,["data"]),rt=n-2*s,ot=u==="trend"?mw:yw,lt=this.get("graph"),wt=this.get("timeBarGroup"),Nt=this.get("canvas"),Dt=null;if(u==="trend"||u==="simple"){var qt=this.get("getValue");Dt=new vw(If(If({graph:lt,canvas:Nt,group:wt,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:rt,height:ot,padding:s,backgroundStyle:C,foregroundStyle:G,trendCfg:If(If({},et),{data:j.map(function(ae){return(qt==null?void 0:qt(ae))||ae.value})})},c),{tick:{ticks:j,tickLabelFormatter:w.tickLabelFormatter,tickLabelStyle:w.tickLabelStyle,tickLineStyle:w.tickLineStyle},handlerStyle:If(If({},c.handlerStyle),{height:c.height||ot}),controllerCfg:l,textStyle:x}))}else u==="tick"&&(Dt=new Fx(If({graph:lt,canvas:Nt,group:wt,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},w)));var ve=function ae(){var Me=t.get("timebar");Me.draggingHandler=!1,Me.isPlay&&(Me.isPlay=!1,Me.currentHandler=Me.maxHandlerShape,Me.changePlayStatus()),document.removeEventListener("mouseup",ae)};Nt.on("mousedown",function(ae){(ae.target.get("name")==="maxHandlerShape-handler"||ae.target.get("name")==="minHandlerShape-handler"||ae.target===Dt.foregroundShape)&&document.addEventListener("mouseup",ve)}),this.set("timebar",Dt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var x=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,w=x?x(o[c]):o[c].date,C=x?x(o[l]):o[l].date;if(s!=="tick"){var G=this.get("timebar");G.setText(w,C)}if(u)u(f,w,C);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var j=this.get("filterItemTypes"),et=this.get("changeData"),rt=this.get("getDate"),ot=this.get("shouldIgnore"),lt=o[c].date,wt=o[l].date;if(et||et===void 0){var Nt=this.cacheGraphData.nodes,Dt=this.cacheGraphData.edges,qt={},ve={};f.getNodes().forEach(function(ae){return qt[ae.getID()]=!0}),f.getEdges().forEach(function(ae){return ve[ae.getID()]=!0}),j.includes("node")&&(Nt==null||Nt.forEach(function(ae){var Me=+((rt==null?void 0:rt(ae))||ae.date),Fe=Me>=lt&&Me<=wt||(ot==null?void 0:ot("node",ae,{min:lt,max:wt})),wr=qt[ae.id];wr&&!Fe?(f.removeItem(ae.id),qt[ae.id]=!1):!wr&&Fe&&(f.addItem("node",ae),qt[ae.id]=!0)}),Dt==null||Dt.forEach(function(ae){var Me=qt[ae.source]&&qt[ae.target]||(ot==null?void 0:ot("edge",ae,{min:lt,max:wt})),Fe=!!f.findById(ae.id);Fe&&!Me?(f.removeItem(ae.id),ve[ae.id]=!1):!Fe&&Me?(f.addItem("edge",ae),ve[ae.id]=!0):Fe||(ve[ae.id]=!1)})),(this.get("filterEdge")||j.includes("edge"))&&(Dt==null||Dt.filter(function(ae){var Me=+((rt==null?void 0:rt(ae))||ae.date),Fe=Me>=lt&&Me<=wt||(ot==null?void 0:ot("edge",ae,{min:lt,max:wt})),wr=qt[ae.source]&&qt[ae.target],Yr=Fe&&wr,Dr=ve[ae.id];Dr&&!Yr?(ve[ae.id]=!1,f.removeItem(ae.id)):!Dr&&Yr&&(ve[ae.id]=!0,f.addItem("edge",ae))}))}else j.includes("node")&&f.getNodes().forEach(function(ae){var Me=ae.getModel();if(!(ot!=null&&ot("node",Me,{min:lt,max:wt}))){var Fe=+((rt==null?void 0:rt(Me))||Me.date);Fe<lt||Fe>wt?f.hideItem(ae):f.showItem(ae)}}),(this.get("filterEdge")||j.includes("edge"))&&f.getEdges().forEach(function(ae){var Me=ae.getModel();if(!(ot!=null&&ot("edge",Me,{min:o[c].date,max:o[l].date}))){var Fe=+((rt==null?void 0:rt(Me))||Me.date);if(Fe<o[c].date||Fe>o[l].date)f.hideItem(ae);else{var wr=ae.getSource().isVisible(),Yr=ae.getTarget().isVisible();wr&&Yr&&f.showItem(ae)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Vu,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Vu,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(vs),xw=bw,Ew=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ww=Fo.applyMatrix;function _w(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var Sw=function(i){Ew(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,d.isString)(a)&&(a=document.getElementById(a));var o=yi("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,x=0,w=0,C=0,G=0;a.addEventListener("mousedown",function(j){if(r.refresh=!1,j.target===o){var et=o.style;x=parseInt(et.width,10),w=parseInt(et.height,10);var rt=t.get("width"),ot=t.get("height");x>rt||w>ot||(G=n.getZoom(),C=t.get("ratio"),f=!0,s=j.clientX,u=j.clientY)}},!1),a.addEventListener("mousemove",function(j){if(!(!f||(0,d.isNil)(j.clientX)||(0,d.isNil)(j.clientY))){var et=t.get("width"),rt=t.get("height"),ot=o.style;c=parseInt(ot.left,10),l=parseInt(ot.top,10),x=parseInt(ot.width,10),w=parseInt(ot.height,10);var lt=s-j.clientX,wt=u-j.clientY;c-lt<0?lt=c:c-lt+x>=et&&(lt=0),l-wt<0?wt=l:l-wt+w>=rt&&(wt=0),c-=lt,l-=wt,ma(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(lt*G/C,wt*G/C),s=j.clientX,u=j.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],x=[c.maxX-c.minX,c.maxY-c.minY],w={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(w.width=x[0],w.height=w.width/u):(w.height=x[1],w.width=w.height*u),w.minX=l[0]-w.width/2,w.minY=l[1]-w.height/2;var C=f.getMatrix();C||(C=[1,0,0,0,1,0,0,0,1]);var G=tt.invert([1,0,0,0,1,0,0,0,1],C),j=ww({x:w.minX,y:w.minY},G),et=a.getCanvasByPoint(j.x,j.y),rt=this.get("viewport");rt||this.initViewport();var ot=o/w.width,lt=ot*r,wt=ot*n,Nt=r*-et.x/w.width,Dt=n*-et.y/w.height,qt=Nt+lt,ve=Dt+wt;Nt<0&&(lt+=Nt,Nt=0),qt>r&&(lt=lt-(qt-r)),Dt<0&&(wt+=Dt,Dt=0),ve>n&&(wt=wt-(ve-n)),this.set("ratio",t);var ae="".concat(Nt,"px"),Me="".concat(Dt,"px");ma(rt,{left:ae,top:Me,width:"".concat(lt,"px"),height:"".concat(wt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=yi("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,d.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var x=yi('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(x);var w=yi('<span style="display: table-cell; vertical-align: middle; "></span>');x.appendChild(w),t.set("containerDOM",x),t.set("containerSpan",w);var C=yi('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",C),t.updateImgSize(),w.appendChild(C),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=_w(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=yi('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(vs),Mw=Sw,Aw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wv=function(){return wv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},wv.apply(this,arguments)},Cw=Fo.distance,s0=.05,u0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Tw=function(i){Aw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,d.clone)(u0),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-s0:a=1/(1-s0);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(et){et.remove(),et.destroy()}),l=[],a.forEach(function(et){var rt=et.getModel(),ot=rt.x,lt=rt.y;Cw({x:ot,y:lt},f)<s&&(o[rt.id]=et)});var x=n.getEdges(),w=[];x.forEach(function(et){var rt=et.getModel(),ot=rt.source,lt=rt.target;c(rt)&&(u==="only-source"||u==="one"?o[ot]&&!o[lt]&&w.push(et):u==="only-target"||u==="one"?o[lt]&&!o[ot]&&w.push(et):u==="both"&&o[ot]&&o[lt]&&w.push(et))});var C=r.get("showNodeLabel"),G=r.get("showEdgelabel"),j=n.get("group");w.forEach(function(et){var rt=et.get("group").get("children");rt.forEach(function(ot){var lt=ot.get("type"),wt=j.addShape(lt,{attrs:ot.attr()});l.push(wt),C&&lt==="text"&&wt.set("visible",!0)})}),Object.keys(o).forEach(function(et){var rt=o[et],ot=rt.get("group").clone();if(j.add(ot),l.push(ot),G)for(var lt=ot.get("children"),wt=0;wt<lt.length;wt++){var Nt=lt[wt];Nt.get("type")==="text"&&Nt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||u0;o=s.addShape("circle",{attrs:wv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(vs),Iw=Tw,Ow=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lw=Fo.pointLineDistance,Dw={stroke:"#FA8C16",lineWidth:1},Nw=function(i){Ow(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:Dw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,d.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},x={x:n.x+r.width/2,y:n.y+r.height},w={x:n.x,y:n.y+r.height/2},C={x:n.x+r.width,y:n.y+r.height/2},G=[],j=[],et=null;if(this.clearAlignLine(),(0,d.each)(s,function(ot){ot[4].isVisible&&(G.push(a.getLineDisObject(ot,c)),G.push(a.getLineDisObject(ot,l)),G.push(a.getLineDisObject(ot,x)))}),(0,d.each)(u,function(ot){ot[4].isVisible&&(j.push(a.getLineDisObject(ot,w)),j.push(a.getLineDisObject(ot,l)),j.push(a.getLineDisObject(ot,C)))}),G.sort(function(ot,lt){return ot.dis-lt.dis}),j.sort(function(ot,lt){return ot.dis-lt.dis}),G.length!==0&&G[0].dis<f){t.y=G[0].line[1]-G[0].point.y+n.y,et={type:"item",horizontals:[G[0]]};for(var rt=1;rt<3;rt++)G[0].dis===G[rt].dis&&et.horizontals.push(G[rt])}if(j.length!==0&&j[0].dis<f){t.x=j[0].line[0]-j[0].point.x+n.x,et?et.verticals=[j[0]]:et={type:"item",verticals:[j[0]]};for(var rt=1;rt<3;rt++)j[0].dis===j[rt].dis&&et.verticals.push(j[rt])}et&&(et.bbox=r,this.addAlignLine(et))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,d.each)(a,function(x){var w=x.line,C=x.point,G=(w[0]+w[2])/2,j,et;C.x<G?(j=C.x-r.width/2,et=Math.max(w[0],w[2])):(j=C.x+r.width/2,et=Math.min(w[0],w[2]));var rt=(0,d.mix)({x1:j,y1:w[1],x2:et,y2:w[1]},u),ot=l.addShape("line",{attrs:rt,capture:!1});f.push(ot)}),o&&(0,d.each)(o,function(x){var w=x.line,C=x.point,G=(w[1]+w[3])/2,j,et;C.y<G?(j=C.y-r.height/2,et=Math.max(w[1],w[3])):(j=C.y+r.height/2,et=Math.min(w[1],w[3]));var rt=(0,d.mix)({x1:w[0],y1:j,x2:w[0],y2:et},u),ot=l.addShape("line",{attrs:rt,capture:!1});f.push(ot)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:Lw(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,d.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(vs),Pw=Nw,kw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Di=function(){return Di=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Di.apply(this,arguments)},Rw=["click","mouseenter"],Bw=function(i){kw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=yi(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();ma(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,x={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(w){var C=s[f[w]],G=w;switch(w){case"top":C+=l;break;case"left":C+=c;break;case"bottom":C=n.getHeight()-t[1]-C+l,G="top";break;default:C=n.getWidth()-t[0]-C+c,G="left";break}x[G]=C}),x.top+=o+n.getContainer().offsetTop,x.left+=a+n.getContainer().offsetLeft,Object.keys(x).forEach(function(w){x[w]="".concat(x[w],"px")}),x},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";Rw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();ma(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var x=l.get("children"),w=x[0],C=x[1];w.attr(Di(Di({},w.get("oriAttrs")),s)),C.attr(Di(Di({},C.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var x=l.get("children"),w=x[0],C=x[1];w.attr(Di(Di({},w.get("oriAttrs")),f)),C.attr(Di(Di({},C.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(et){return et.get("name")==="root"}),l=c.find(function(et){return et.get("name")==="node-group"}),x=c.find(function(et){return et.get("name")==="edge-group"}),w=l.get("children").filter(function(et){return et.get("active")}),C=x.get("children").filter(function(et){return et.get("active")}),G=0,j=["getNodes","getEdges"];j.forEach(function(et){o[et]().forEach(function(rt){var ot=!1,lt=et==="getNodes"?w:C;lt.forEach(function(wt){var Nt=n[wt.get("id")];ot=ot||Nt(rt.getModel())}),ot?(o.setItemState(rt,u,!1),o.setItemState(rt,s,!0),G++):(o.setItemState(rt,s,!1),o.setItemState(rt,u,!0))})}),G||j.forEach(function(et){o[et]().forEach(function(rt){o.clearItemStates(rt,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new Mf({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(pr,an){s[pr].forEach(function(en){var yr,Or=f[an].addGroup({id:en.id,name:"node-container"}),Kr,Zr=en.type,fn=t.getShapeSize(en),bn=fn.width,Vn=fn.height,sa=fn.r,Ua=t.getStyle(pr.substr(0,4),en);switch(en.type){case"circle":Kr={r:sa,x:0,y:0};break;case"rect":Kr={width:bn,height:Vn,x:-bn/2,y:-Vn/2};break;case"ellipse":Kr={rx:bn,ry:Vn,x:0,y:0},Zr="ellipse";break;case"line":Kr={x1:-bn/2,y1:0,x2:bn/2,y2:0},Zr="line";break;case"quadratic":Kr={path:[["M",-bn/2,0],["Q",0,bn/2,bn/2,0]]},Zr="path";break;case"cubic":Kr={path:[["M",-bn/2,0],["C",-bn/6,bn/2,bn/6,-bn/2,bn/2,0]]},Zr="path";break;case"diamond":Kr={path:[["M",0,-Vn],["L",bn,0],["L",0,Vn],["L",-bn,0],["Z"]]},Zr="path";break;case"triangle":Kr={path:[["M",-bn,Vn],["L",0,-Vn],["L",bn,Vn],["Z"]]},Zr="path";break;case"star":Kr={path:Fo.getStarPath(sa*3,sa*1.2)},Zr="path";break;default:Kr={r:sa,x:0,y:0};break}var La=Or.addShape(Zr,{attrs:Di(Di({},Kr),Ua),name:"".concat(en.type,"-node-keyShape"),oriAttrs:Di({opacity:1},Ua)});if(en.label){var Wa=La.getBBox(),ja=((yr=en.labelCfg)===null||yr===void 0?void 0:yr.style)||{},vi=Di({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},ja);Or.addShape("text",{attrs:Di({x:Wa.maxX+4,y:0,text:en.label},vi),className:"legend-label",name:"".concat(en.type,"-node-text"),oriAttrs:vi})}})});var c=this.get("padding"),l,x=n.find(function(pr){return pr.get("name")==="title-container"}),w={height:0,maxY:0,width:0};if(this.get("title")){x||(x=n.addGroup({name:"title-container"}));var C={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},G=this.get("titleConfig")||{},j=Object.assign(C,G.style||{});l=x.addShape("text",{attrs:Di({text:this.get("title")},j)}),w=x.getCanvasBBox(),x.setMatrix([1,0,0,0,1,0,G.offsetX,G.offsetY,1])}this.layoutItems();var et=n.getCanvasBBox(),rt=a.getCanvasBBox(),ot=rt.minX<0?Math.abs(rt.minX)+c[3]:c[3],lt=w.maxY<rt.minY?Math.abs(w.maxY-rt.minY)+c[0]:w.maxY+c[0],wt=[1,0,0,0,1,0,ot,lt,1];a.setMatrix(wt),et=n.getCanvasBBox();var Nt=[et.minX+et.width+c[1],et.minY+et.height+c[2]];if(l){var G=Di({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));w=x.getCanvasBBox();var Dt=x.getMatrix()||[1,0,0,0,1,0,0,0,1];G.position==="center"?Dt[6]=Nt[0]/2+G.offsetX:G.position==="right"?(Dt[6]=Nt[0]-c[3]+G.offsetX,l.attr({textAlign:"right"})):(Dt[6]=c[3]+G.offsetX,l.attr({textAlign:"left"})),x.setMatrix(Dt),w=x.getCanvasBBox(),ot=rt.minX<0?Math.abs(rt.minX)+c[3]:c[3],lt=rt.minY<w.maxY?Math.abs(w.maxY-rt.minY)+c[0]:w.maxY+c[0],wt=[1,0,0,0,1,0,ot,lt,1],a.setMatrix(wt);var qt=[1,0,0,0,1,0,ot,lt,1];this.get("layout")==="vertical"?qt[6]+=rt.maxX+this.get("horiSep"):qt[7]+=rt.maxY+this.get("vertiSep"),o.setMatrix(qt)}else{rt=a.getCanvasBBox();var ve=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?ve[6]+=wt[6]+rt.maxX+this.get("horiSep"):ve[7]+=wt[7]+rt.maxY+this.get("vertiSep"),o.setMatrix(ve)}et=n.getCanvasBBox(),rt=a.getCanvasBBox(),wt=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var ae=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Me=o.getCanvasBBox();Nt=[Math.max(rt.width+wt[6],Me.width+ae[6])+c[1],Math.max(rt.height+wt[7],Me.height+ae[7])+c[2]],r.changeSize(Nt[0],Nt[1]);var Fe=this.get("containerStyle"),wr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Yr=Fo.invertMatrix({x:0,y:0},wr),Dr=n.addShape("rect",{attrs:Di({x:Yr.x+(Fe.lineWidth||1),y:Yr.y+(Fe.lineWidth||1),width:Nt[0]-2*(Fe.lineWidth||1),height:Nt[1]-2*(Fe.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},Fe),name:"legend-back-rect",capture:!1});return Dr.toBack(),Nt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(lt){return lt.get("name")==="root"}),f=u.find(function(lt){return lt.get("name")==="node-group"}),c=u.find(function(lt){return lt.get("name")==="edge-group"}),l={min:0,max:-1/0},x=-1/0;f.get("children").forEach(function(lt,wt){wt===0&&(l.min=s[0]);var Nt=lt.get("children")[0],Dt=lt.getCanvasBBox(),qt=Nt.getBBox(),ve=qt.width,ae=qt.height,Me=0,Fe=0,wr=0;a==="vertical"?(Fe=s[1],wr=s[0]+ve/2,s[0]=wr+Dt.height+n,Me=Dt.maxX+Fe+ve/2):(Fe=s[0]+ve/2,wr=s[1],s[0]=Fe+Dt.width+r,Me=Dt.maxY+wr+ae/2),s[0]>l.max&&(l.max=s[0]),Me>x&&(x=Me),lt.setMatrix([1,0,0,0,1,0,Fe,wr,1])});var w=l.max-l.min,C={min:0,max:-1/0},G=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?G.maxX+r:G.maxY+n,c.get("children").forEach(function(lt,wt){wt===0&&(C.min=s[0]);var Nt=lt.get("children")[0],Dt=lt.getCanvasBBox(),qt=Nt.getBBox(),ve=qt.width,ae=qt.height,Me=0,Fe=0;a==="vertical"?(Me=s[1],Fe=s[0],s[0]=Fe+Dt.height+n,lt.setMatrix([1,0,0,0,1,0,0,Fe+ae/2,1])):(Me=s[0],Fe=s[1],s[0]=Me+Dt.width+r,lt.setMatrix([1,0,0,0,1,0,Me+ve/2,0,1])),s[0]>C.max&&(C.max=s[0])});var j=C.max-C.min;if(o&&o!==""&&o!=="left"){var et=w-j,rt=o==="center"?Math.abs(et)/2:Math.abs(et),ot=et<0?f:c;ot.get("children").forEach(function(lt){var wt=lt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?wt[7]+=rt:wt[6]+=rt,lt.setMatrix(wt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,d.uniqueId)(),type:n.type||"circle",style:Di({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:Di({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,d.uniqueId)(),type:s,size:f,style:Di({lineWidth:(0,d.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:Di({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,d.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,d.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,d.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,d.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Di(Di({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(vs),Fw=Bw,Gw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ks=function(){return Ks=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ks.apply(this,arguments)},f0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&gd()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var c0="canvas-annotation",zw=function(i){Gw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Ks(Ks({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",x=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),w="<p class='g6-annotation-close'>x</p>",C=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(C,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(w,`
        </div>
        `).concat(x,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new Mf({container:n,width:s.right-s.left,height:s.bottom-s.top});ma(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,d.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var x,w=((x=l==null?void 0:l.getModel)===null||x===void 0?void 0:x.call(l))||{},C=w.label,G=w.id;return C||G||"-"}),t.get("getContent")||t.set("getContent",function(l){var x,w;if(!l)return"-";var C=((x=l.getModel)===null||x===void 0?void 0:x.call(l))||{},G=C.label,j=C.id,et=(w=l.getType)===null||w===void 0?void 0:w.call(l),rt=et?"".concat(et,": "):"";return"".concat(rt).concat(G||j||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,x=u-s,w=r.position,C=w===void 0?"top":w,G=r.offsetX,j=G===void 0?0:G,et=r.offsetY,rt=et===void 0?0:et,ot=f0(r,["position","offsetX","offsetY"]),lt=r.height,wt=lt===void 0?"fit-content":lt,Nt=r.width,Dt=Nt===void 0?n.getWidth():Nt;wt==="100%"&&(wt=l),Dt==="100%"&&(Dt=x);var qt="unset",ve="unset",ae={};switch(C){case"right":qt="".concat(l,"px"),ae={top:0,right:0},ae.right+=s+j,ae.top+=f+rt;break;case"bottom":ve="".concat(x,"px"),ae={bottom:0,left:0},ae.left+=s+j,ae.bottom+=f+rt;break;case"top":ve="".concat(x,"px");case"left":qt="".concat(l,"px");default:ae={top:0,left:0},ae.left+=s+j,ae.top+=f+rt;break}Object.keys(ae).forEach(function(Fe){ae[Fe]="".concat(ae[Fe],"px")});var Me=yi("<div class='".concat(r.className," g6-annotation-container'></div>"));return ma(Me,Ks(Ks({position:"absolute",display:C==="top"||C==="bottom"?"inline-flex":"unset",width:(0,d.isNumber)(Dt)?"".concat(Dt,"px"):Dt,height:(0,d.isNumber)(wt)?"".concat(wt,"px"):wt,maxHeight:qt,maxWidth:ve,overflow:"scroll"},ae),ot)),a.appendChild(Me),Me.addEventListener("scroll",function(Fe){t.updateLinks()}),Me}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),x=l.x,w=l.y;Object.values(n).forEach(function(C){var G=C.card;if(G){var j=G.style,et=ul(j.left),rt=ul(j.top),ot=G.getBoundingClientRect(),lt=ot.width,wt=ot.height,Nt=et,Dt=rt;et+lt>x-f&&(Nt=x-f-lt),et<0&&(Nt=0),rt+wt>w-c&&(Dt=w-c-wt),rt<0&&(Dt=0),ma(G,{left:"".concat(Nt,"px"),top:"".concat(Dt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),x=l.minHeight,w=l.minWidth,C=l.width,G=l.height,j=l.collapsed,et=j===void 0?!1:j,rt=l.x,ot=l.y,lt=l.title,wt=l.content,Nt=l.maxTitleLength,Dt=l.defaultBegin,qt=f0(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),ve=o.get("linkGroup"),ae=this.get("rows")||[[]],Me=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),Fe=Me?c0:t.getID(),wr=s[Fe]||{},Yr=wr.card,Dr=wr.link,pr=wr.x,an=wr.y,en=wr.title,yr=wr.content,Or=this.get("getTitle"),Kr=this.get("getContent"),Zr=this.get("getContentPlaceholder")||function(){return""},fn=this.get("getTitlePlaceHolder")||function(){return""},bn=Zr(t),Vn=fn(t),sa=yi(this.getDOMContent(Ks({itemId:Fe,collapsed:et,title:((a=en||lt||(Or==null?void 0:Or(t)))===null||a===void 0?void 0:a.substr(0,Nt))||Vn,content:yr||wt||(Kr==null?void 0:Kr(t))||bn},qt))),Ua=(0,d.isNumber)(x)?"".concat(x,"px"):x;ma(sa,{minHeight:et?"unset":Ua,minWidth:(0,d.isNumber)(w)?"".concat(w,"px"):w,height:G,width:C});var La=!!Yr;La?(Dr==null||Dr.remove(!0),f.replaceChild(sa,Yr)):f.appendChild(sa);var Wa;if(!c){if(Wa=f.getBoundingClientRect()||{},rt!==void 0&&ot!==void 0)pr=rt,an=ot;else if(!La&&!Me){var ja=Wa.top,vi=Dt||{},ni=vi.left,Zs=vi.right,fo=Zs===void 0?16:Zs,$s=vi.top,co=$s===void 0?8:$s,lo=vi.bottom,Os=fo,Go=co;isNaN(ni)||(Os=f.scrollWidth-ni),isNaN(lo)||(Go=f.scrollHeight-lo);var ns=(0,d.isNumber)(w)?w:100;pr=f.scrollWidth-sa.scrollWidth-(ae.length-1)*ns-Os;var ba=ae[ae.length-1],Ga=(ba[ba.length-1]||{}).bbox;an=(Ga==null?void 0:Ga.bottom)-ja||Go}ma(sa,{position:"absolute",left:"".concat(pr,"px"),top:"".concat(an,"px"),cusor:c?"unset":"move"})}this.bindListener(sa,Fe);var va=sa.getBoundingClientRect();if(!Me){var za=_v(t,va,u,this.get("canvas")),$a=this.get("linkStyle");Dr=ve.addShape("path",{attrs:Ks({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:za},$a)})}if(s[Fe]=Ks(Ks({},s[Fe]||{}),{id:Fe,collapsed:et,card:sa,link:Dr,x:pr,y:an,cardBBox:va,content:yr||wt,title:en||lt,contentPlaceholder:bn,titlePlaceholder:Vn,isCanvas:Me}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Dn=!isNaN(rt)&&!isNaN(ot);if(!La&&!Me&&!Dn){var _a=Wa.bottom,Aa=_a===void 0?0:_a,ja=Wa.top;ae[ae.length-1].push({id:Fe,bbox:va}),va.top>Aa-ja-va.height-16&&ae.push([]),this.set("rows",ae)}}this.updateCardSize(Fe);var Qa=this.get("onAnnotationChange");Qa==null||Qa(s[Fe],La?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=ul(o.paddingLeft)+ul(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":ma(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":ma(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Ks(Ks({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;ma(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var x=n.get("itemHighlightState");c.setItemState(l,x,!0)}var w=f[r].link;if(w){var C=n.get("linkHighlightStyle")||{};w.attr(C)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var x=n.get("itemHighlightState");c.setItemState(l,x,!1)}var w=f[r].link;if(w){var C=n.get("linkHighlightStyle")||{};Object.keys(C).forEach(function(j){w.attr(j,void 0),w.attr(j,void 0)});var G=n.get("linkStyle");w.attr(G)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var x=u.target,w=x.className;if(!(w!=="g6-annotation-title"&&w!=="g6-annotation-content")){var C=w==="g6-annotation-title"?x.getBoundingClientRect():x.parentNode.getBoundingClientRect(),G=C.width,j=C.height,et=getComputedStyle(x),rt=w==="g6-annotation-title"?"input":"textarea",ot=yi("<".concat(rt,' class="').concat(w,'-input" type="textarea" style="width:').concat(G,"px; height: ").concat(j,'px; min-width: 16px;"/>')),lt=yi('<div class="'.concat(w,'-input-wrapper" style="width: ').concat(G,"px; height: ").concat(j,"px; min-width: 16px; margin-right: ").concat(et.marginRight,'" />'));lt.appendChild(ot),x.parentNode.replaceChild(lt,x);var wt=f[r],Nt=wt.contentPlaceholder,Dt=wt.titlePlaceholder,qt=wt.content,ve=wt.title,ae=qt;w==="g6-annotation-title"?(ot.name="title",ot.maxLength=l,ae=ve):ot.name="content",ae?(ot.innerHTML=x.innerHTML,ot.value=x.innerHTML):ot.placeholder=w==="g6-annotation-title"?Dt:Nt,ot.focus(),ot.addEventListener("blur",function(Me){ot.value&&(x.innerHTML=ot.value,wt[ot.name||"title"]=ot.value),lt.parentNode.replaceChild(x,lt),n.updateCardSize(r);var Fe=n.get("onAnnotationChange");Fe==null||Fe(wt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:ul(c.left),top:ul(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,x=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!x)){var w=x.x,C=x.y,G=x.left,j=x.top,et=x.card,rt=c-w,ot=l-C;G+=rt,j+=ot;var lt=n.get("graph"),wt=lt.getPointByCanvas(0,0),Nt=lt.getPointByCanvas(lt.getWidth(),lt.getHeight()),Dt=lt.getClientByPoint(wt.x,wt.y),qt=Dt.x,ve=Dt.y,ae=lt.getClientByPoint(Nt.x,Nt.y),Me=ae.x,Fe=ae.y,wr=et.getBoundingClientRect(),Yr=wr.right-wr.left,Dr=wr.bottom-wr.top;(G>Me-qt-Yr&&rt>0||G<0&&rt<0)&&(G-=rt),(j>Fe-ve-Dr&&ot>0||j<0&&ot<0)&&(j-=ot),ma(et,{left:"".concat(G,"px"),top:"".concat(j,"px"),visibility:"hidden"}),w=c,C=l;var pr=(f[r]||{}).link;if(pr){var an=lt.findById(r);pr.attr("path",_v(an,wr,lt,n.get("canvas")))}n.set("dragging",{x:w,y:C,left:G,top:j,card:et})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var x=l.left,w=l.top,C=l.card;c[r].x=x,c[r].y=w,ma(C,{visibility:"visible"}),n.set("dragging",!1);var G=n.get("rows");G==null||G.forEach(function(et){for(var rt=et.length-1;rt>=0;rt--)et[rt].id===r&&et.splice(rt,1)});var j=n.get("onAnnotationChange");j==null||j(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=ul(s.marginLeft),f=o.getBoundingClientRect().width;ma(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=_v(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,x=u.y,w=u.id,C=u.collapsed,G=u.card;if(!(G&&G.style.display==="none"&&!t)){var j=n.findById(w)||n.get("canvas");s.push({id:w,x:l,y:x,collapsed:C,title:f||(a==null?void 0:a(j)),content:c||(o==null?void 0:o(j)),visible:G&&G.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,x=a.visible,w=n.findById(o);if(!w&&o===c0&&(w=n.get("canvas")),!w){var C=r.get("cardInfoMap")||{};C[o]=a,r.set("cardInfoMap",C);return}r.toggleAnnotation(w,{x:s,y:u,title:f,content:c,collapsed:l}),x||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(vs),Uw=zw,Ww=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var x=t[l],w=c.x-x.x,C=c.y-x.y,G=w*w+C*C;o>G&&(o=G,r=c,n=x,a=[f,l])})});var s=20,u=Fo.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},_v=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,x=u.maxY,w=e.getModel(),C=w.x,G=w.y;f+=C,c+=G,l+=C,x+=G,o={left:{x:f,y:(c+x)/2},right:{x:l,y:(c+x)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:x}}}Object.keys(o).forEach(function(ve){var ae=o[ve],Me=ae.x,Fe=ae.y,wr=r.getClientByPoint(Me,Fe);o[ve]=n.getPointByClient(wr.x,wr.y)});var j=t.top,et=j===void 0?0:j,rt=t.left,ot=rt===void 0?0:rt,lt=t.right,wt=lt===void 0?0:lt,Nt=t.bottom,Dt=Nt===void 0?0:Nt,qt={left:n.getPointByClient(ot,(et+Dt)/2),right:n.getPointByClient(wt,(et+Dt)/2),top:n.getPointByClient((ot+wt)/2,et),bottom:n.getPointByClient((ot+wt)/2,Dt)};return Ww(o,qt)},ul=function(e){return Number(e.replace(/\s+|px/gi,""))||0},Xw={PluginBase:vs,Menu:ex,Grid:Qb,Minimap:ux,Bundling:hx,ToolBar:bx,Tooltip:wx,Fisheye:gx,TimeBar:xw,ImageMinimap:Mw,EdgeFilterLens:Iw,SnapLine:Pw,Legend:Fw,Annotation:Uw},Yw=Xw,uo=Yw;Sf("circle",{options:{size:nn.defaultNode.size,style:{x:0,y:0,stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,x=o.text;if(l){var w="".concat(this.type,"-icon");x?t.shapeMap[w]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:w,name:w,draggable:!0}):t.shapeMap[w]=t.addShape("image",{attrs:(0,y.__assign)({x:-f/2,y:-c/2},o),className:w,name:w,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),w=x[0]/2;if(o){var C="link-point-left";t.shapeMap[C]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-w,y:0,r:f/2||c||5}),className:C,name:C,isAnchorPoint:!0})}if(s){var G="link-point-right";t.shapeMap[G]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:w,y:0,r:f/2||c||5}),className:G,name:G,isAnchorPoint:!0})}if(a){var j="link-point-top";t.shapeMap[j]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-w,r:f/2||c||5}),className:j,name:j,isAnchorPoint:!0})}if(u){var et="link-point-bottom";t.shapeMap[et]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:w,r:f/2||c||5}),className:et,name:et,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,y.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Sf("rect",{options:{size:[100,30],style:{radius:0,stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),w=x[0],C=x[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),Sf("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),w=x[0]/2,C=x[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-w,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:w,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-C,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:C,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,y.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Sf("diamond",{options:{size:[80,80],style:{stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),w=x[0],C=x[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Sf("triangle",{options:{size:40,direction:"up",style:{stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,x=a.show,w=a.offset,C=a.text;if(x)if(C)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var G=-c/2,j=-l/2;(u==="up"||u==="down")&&(j+=w),(u==="left"||u==="right")&&(G+=w),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:G,y:j},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,x=a.size,w=a.r,C=(0,y.__rest)(a,["top","left","right","bottom","size","r"]),G=this.getSize(e),j=G[0];if(f){var et=null,rt=j*Math.sin(1/3*Math.PI),ot=j*Math.sin(1/3*Math.PI);s==="up"?et=[-ot,rt]:s==="down"?et=[-ot,-rt]:s==="left"&&(et=[-ot,ot-rt]),et&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:et[0],y:et[1],r:x/2||w||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var lt=null,rt=j*Math.sin(1/3*Math.PI),ot=j*Math.sin(1/3*Math.PI);s==="up"?lt=[ot,rt]:s==="down"?lt=[ot,-rt]:s==="right"&&(lt=[ot,ot-rt]),lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:lt[0],y:lt[1],r:x/2||w||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var wt=null,rt=j*Math.sin(1/3*Math.PI),ot=j*Math.sin(1/3*Math.PI);s==="up"?wt=[ot-rt,-rt]:s==="left"?wt=[ot,-rt]:s==="right"&&(wt=[-ot,-rt]),wt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:wt[0],y:wt[1],r:x/2||w||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Nt=null,rt=j*Math.sin(1/3*Math.PI),ot=j*Math.sin(1/3*Math.PI);s==="down"?Nt=[-ot+rt,rt]:s==="left"?Nt=[ot,rt]:s==="right"&&(Nt=[-ot,rt]),Nt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:Nt[0],y:Nt[1],r:x/2||w||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(pr){return pr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(pr){return pr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(pr){return pr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(pr){return pr.get("className")==="link-point-bottom"}),l=n,x=s||u||f||c;x&&(l=x.attr());var w=(0,d.mix)({},l,e.linkPoints),C=w.fill,G=w.stroke,j=w.lineWidth,et=w.size/2;et||(et=w.r);var rt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ot=rt.left,lt=rt.right,wt=rt.top,Nt=rt.bottom,Dt=this.getSize(e),qt=Dt[0],ve={r:et,fill:C,stroke:G,lineWidth:j},ae=null,Me=qt*Math.sin(1/3*Math.PI),Fe=qt*Math.sin(1/3*Math.PI);o==="up"?ae=[-Fe,Me]:o==="down"?ae=[-Fe,-Me]:o==="left"&&(ae=[-Fe,Fe-Me]),ae&&(s?!ot&&ot!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,y.__assign)((0,y.__assign)({},ve),{x:ae[0],y:ae[1]})):ot&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ve),{x:ae[0],y:ae[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var wr=null;o==="up"?wr=[Fe,Me]:o==="down"?wr=[Fe,-Me]:o==="right"&&(wr=[Fe,Fe-Me]),wr&&(u?!lt&&lt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,y.__assign)((0,y.__assign)({},ve),{x:wr[0],y:wr[1]})):lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ve),{x:wr[0],y:wr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Yr=null;o==="up"?Yr=[Fe-Me,-Me]:o==="left"?Yr=[Fe,-Me]:o==="right"&&(Yr=[-Fe,-Me]),Yr&&(f?!wt&&wt!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,y.__assign)((0,y.__assign)({},ve),{x:Yr[0],y:Yr[1]})):wt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ve),{x:Yr[0],y:Yr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Dr=null;o==="down"?Dr=[-Fe+Me,Me]:o==="left"?Dr=[Fe,Me]:o==="right"&&(Dr=[-Fe,Me]),Dr&&(c?!Nt&&Nt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,y.__assign)((0,y.__assign)({},ve),{x:Dr[0],y:Dr[1]})):Nt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ve),{x:Dr[0],y:Dr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Sf("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:nn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:nn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:nn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,y.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,y.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,x=n.text,w=(0,y.__rest)(n,["width","height","x","y","offset","text"]);x?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},w),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},w),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,x=n.text,w=(0,y.__rest)(n,["width","height","x","y","offset","text"]);x?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},w),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},w),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),w=x[0],C=x[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],x=null,w=s.show,C=s.width,G=-l/2+a.offset;w&&(G=-l/2+C+a.offset);var j=a.style,et=f.style,rt=f.paddingTop;return(0,d.isString)(e.description)?(x=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},j),{x:G,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=x,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},et),{x:G,y:17+(rt||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(x=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},j),{x:G,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=x),x},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],x=c[1],w=t.get("keyShape");w.attr((0,y.__assign)((0,y.__assign)({},a),{x:-l/2,y:-x/2,width:l,height:x}));var C=t.getContainer(),G=C.shapeMap["rect-logo-icon"]||C.find(function(sa){return sa.get("className")==="rect-logo-icon"}),j=G?G.attr():{},et=(0,d.mix)({},j,e.logoIcon),rt=et.width;rt===void 0&&(rt=this.options.logoIcon.width);var ot=e.logoIcon?e.logoIcon.show:void 0,lt=s.offset,wt=-l/2+rt+lt;!ot&&ot!==void 0&&(wt=-l/2+lt);var Nt=C.shapeMap["node-label"]||C.find(function(sa){return sa.get("className")==="node-label"}),Dt=C.shapeMap["rect-description"]||C.find(function(sa){return sa.get("className")==="rect-description"});if(e.label)if(!Nt)C.shapeMap["node-label"]=C.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},s.style),{x:wt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var qt=e.labelCfg?e.labelCfg.style:{},ve=(0,d.mix)({},Nt.attr(),qt);e.label&&(ve.text=e.label),ve.x=wt,(0,d.isString)(e.description)&&(ve.y=-5),Dt&&(Dt.resetMatrix(),Dt.attr({x:wt})),Nt.resetMatrix(),Nt.attr(ve)}if((0,d.isString)(e.description)){var ae=f.paddingTop;if(!Dt)C.shapeMap["rect-description"]=C.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},f.style),{x:wt,y:17+(ae||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var qt=e.descriptionCfg?e.descriptionCfg.style:{},Me=(0,d.mix)({},Dt.attr(),qt);(0,d.isString)(e.description)&&(Me.text=e.description),Me.x=wt,Dt.resetMatrix(),Dt.attr((0,y.__assign)((0,y.__assign)({},Me),{y:17+(ae||0)}))}}var Fe=C.shapeMap["pre-rect"]||C.find(function(sa){return sa.get("className")==="pre-rect"});if(Fe&&!Fe.destroyed){var wr=(0,d.mix)({},Fe.attr(),e.preRect);Fe.attr((0,y.__assign)((0,y.__assign)({},wr),{x:-l/2,y:-x/2,height:x}))}if(G&&!G.destroyed)if(!ot&&ot!==void 0)G.remove(),delete C.shapeMap["pre-rect"];else{var Yr=et.width,Dr=et.height,pr=et.x,an=et.y,en=et.offset,yr=(0,y.__rest)(et,["width","height","x","y","offset"]);G.attr((0,y.__assign)((0,y.__assign)({},yr),{x:pr||-l/2+Yr+en,y:an||-Dr/2,width:Yr,height:Dr}))}else ot&&this.drawLogoIcon(e,C);var Or=C.shapeMap["rect-state-icon"]||C.find(function(sa){return sa.get("className")==="rect-state-icon"}),Kr=Or?Or.attr():{},Zr=(0,d.mix)({},Kr,e.stateIcon);if(Or){!Zr.show&&Zr.show!==void 0&&(Or.remove(),delete C.shapeMap["rect-state-icon"]);var fn=Zr.width,Dr=Zr.height,pr=Zr.x,an=Zr.y,bn=Zr.offset,Vn=(0,y.__rest)(Zr,["width","height","x","y","offset"]);Or.attr((0,y.__assign)((0,y.__assign)({},Vn),{x:pr||l/2-fn+bn,y:an||-Dr/2,width:fn,height:Dr}))}else Zr.show&&this.drawStateIcon(e,C);this.updateLinkPoints(e,C)},getOptions:function(e,t){return t==="move"?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),Sf("star",{options:{size:60,style:{stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,x=(0,y.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),w=this.getSize(e),C=w[0];if(s){var G=Math.cos(.1*Math.PI)*C,j=Math.sin((18+72*0)/180*Math.PI)*C;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},x),{x:G,y:-j,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var G=Math.cos(.5*Math.PI)*C,j=Math.sin((18+72*1)/180*Math.PI)*C;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},x),{x:G,y:-j,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var G=Math.cos(.9*Math.PI)*C,j=Math.sin((18+72*2)/180*Math.PI)*C;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},x),{x:G,y:-j,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var G=Math.cos(1.3*Math.PI)*C,j=Math.sin((18+72*3)/180*Math.PI)*C;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},x),{x:G,y:-j,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var G=Math.cos(1.7*Math.PI)*C,j=Math.sin((18+72*4)/180*Math.PI)*C;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},x),{x:G,y:-j,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Fo.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Me){return Me.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Me){return Me.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Me){return Me.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Me){return Me.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Me){return Me.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,d.mix)({},f,e.linkPoints),x=l.fill,w=l.stroke,C=l.lineWidth,G=l.size/2;G||(G=l.r);var j=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},et=j.left,rt=j.right,ot=j.top,lt=j.leftBottom,wt=j.rightBottom,Nt=this.getSize(e),Dt=Nt[0],qt={r:G,fill:x,stroke:w,lineWidth:C},ve=Math.cos((18+72*0)/180*Math.PI)*Dt,ae=Math.sin((18+72*0)/180*Math.PI)*Dt;a?!rt&&rt!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae})):rt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),ve=Math.cos((18+72*1)/180*Math.PI)*Dt,ae=Math.sin((18+72*1)/180*Math.PI)*Dt,o?!ot&&ot!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae})):ot&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),ve=Math.cos((18+72*2)/180*Math.PI)*Dt,ae=Math.sin((18+72*2)/180*Math.PI)*Dt,n?!et&&et!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae})):et&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ve=Math.cos((18+72*3)/180*Math.PI)*Dt,ae=Math.sin((18+72*3)/180*Math.PI)*Dt,s?!lt&&lt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae})):lt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),ve=Math.cos((18+72*4)/180*Math.PI)*Dt,ae=Math.sin((18+72*4)/180*Math.PI)*Dt,u?!wt&&wt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae})):wt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},qt),{x:ve,y:-ae}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var l0=Fo.defaultSubjectColors,Yh="fan-shape-";Sf("donut",{options:{size:nn.defaultNode.size,style:{x:0,y:0,stroke:nn.defaultNode.style.stroke,fill:nn.defaultNode.style.fill,lineWidth:nn.defaultNode.style.lineWidth},labelCfg:{style:{fill:nn.nodeLabel.style.fill,fontSize:nn.nodeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:nn.defaultNode.linkPoints.size,lineWidth:nn.defaultNode.linkPoints.lineWidth,fill:nn.defaultNode.linkPoints.fill,stroke:nn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},nn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Vw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.__assign)({},r)),jw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var Vw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=h0(a,s),c=f.configs,l=f.totalValue;if(l){var x=d0(r),w=x.lineWidth,C=x.arcR,G=[C,0],j=0;if(u===1){Sv(t,{arcR:C,arcBegin:G,beginAngle:j,config:c[0],fanIndex:0,lineWidth:w,totalValue:l,drawWhole:!0});return}for(var et=0;et<c.length;et++){var rt=Sv(t,{arcR:C,arcBegin:G,beginAngle:j,config:c[et],fanIndex:et,lineWidth:w,totalValue:l});if(rt.shouldEnd)return;G=rt.arcBegin,j=rt.beginAngle}}}},Sv=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,x=t.updateShape,w=x===void 0?void 0:x,C=o.value/f;if(C<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var G,j,et;if(l||C>.999)G=[r,1e-4],et=1;else{var rt=C*Math.PI*2;j=a+rt,G=[r*Math.cos(j),-r*Math.sin(j)],et=rt>Math.PI?1:0}var ot={path:[["M",n[0],n[1]],["A",r,r,0,et,0,G[0],G[1]]],stroke:o.color||(w==null?void 0:w.attr("stroke"))||l0[s%l0.length],lineWidth:u};return w?w.attr(ot):e.shapeMap["".concat(Yh).concat(s)]=e.addShape("path",{attrs:ot,name:"".concat(Yh).concat(s),draggable:!0}),{beginAngle:j,arcBegin:G,shape:e.shapeMap["".concat(Yh).concat(s)],shouldEnd:l||C>.999}},jw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=h0(n,o),c=f.configs,l=f.totalValue;if(l)for(var x=d0(r),w=x.lineWidth,C=x.arcR,G=[C,0],j=0,et=0;et<c.length;et++){var rt="".concat(Yh).concat(et),ot=Sv(u,{arcR:C,arcBegin:G,beginAngle:j,config:c[et],fanIndex:et,lineWidth:w,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[rt]});if(ot.shape&&(s[rt]=!0),ot.shouldEnd)break;G=ot.arcBegin,j=ot.beginAngle}}var lt=Object.keys(u.shapeMap).filter(function(wt){return wt.includes(Yh)});lt.forEach(function(wt){s[wt]||(u.shapeMap[wt].remove(!0),delete u.shapeMap[wt])})},h0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},d0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},_d=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},Hw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},L_=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Mv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},v0=function(e){return Mv(e)},D_=function(e,t){return[e,{x:e.x,y:t.y},t]},Sd=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},Kw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Av=function(e,t,r){var n=Kw(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},g0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Cv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Md=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},Zw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},$w=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},Qw=function(e,t){return Zw(e,t.x).concat($w(e,t.y))},Vh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},qw=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},p0=function(e,t,r,n,a){return Vh(e,t)+Vh(e,r)+qw(e,[t,r,n,a])},Jw=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},N_=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Ad=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,x=n.y-t.y,w=a*u-o*s,C=f*x-c*l,G=a*c-o*f,j=s*x-u*l;return w*C<=0&&G*j<=0},Tv=function(e,t,r){if(r.width||r.height){var n=Cv(r),a=n[0],o=n[1],s=n[2],u=n[3];return Ad(e,t,a,o)||Ad(e,t,a,u)||Ad(e,t,o,s)||Ad(e,t,s,u)}return!1},t2=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Tv(o,t,r)||Tv(o,t,n))return;a.push(o)}}),Mv(a)},e2=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},x={},w={};x[t.id]=0,w[t.id]=p0(t,r,t);var C=new b0;C.add({id:t.id,value:w[t.id]});var G={};e.forEach(function(wt){G[wt.id]=wt});for(var j;Object.keys(c).length;){var et=C.minId(!1);if(et)j=c[et];else break;if(j===r){var rt=[];return Jw(rt,G,l,r.id),rt}delete c[j.id],C.remove(j.id),f.push(j);var ot=t2(e,j,n,a),lt=function(Nt){Nt.forEach(function(Dt){if(f.indexOf(Dt)===-1){var qt=Dt.id;c[qt]||(c[qt]=Dt);var ve=w[j.id]+Vh(j,Dt);if(x[qt]&&ve>=x[qt]){C.add({id:qt,value:w[qt]});return}l[qt]=j.id,x[qt]=ve,w[qt]=x[qt]+p0(Dt,r,t,o,s),C.add({id:qt,value:w[qt]})}})};lt(ot)}return[t,r]},r2=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},n2=function(e,t,r,n){var a=Vh(e,t),o=Vh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},y0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(r2(a,s,u)){var f=n2(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},m0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=_d(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=_d(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=_d(t);else if(n.getType()==="combo"){var x=n.getKeyShape().getBBox();if(x){var w=n.getModel(),C=w.x,G=w.y;s={x:C,y:G,width:x.width,height:x.height,minX:x.minX+C,maxX:x.maxX+C,minY:x.minY+G,maxY:x.maxY+G},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=_d(t)}else s=n&&n.getBBox();var j=Sd(o,a),et=Sd(s,a),rt=Av(j,e,t),ot=Av(et,t,e),lt=Hw([rt,ot]),wt=g0(j,lt),Nt=g0(et,lt),Dt=[];Dt=Dt.concat(Cv(wt)).concat(Cv(Nt));var qt={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[lt,wt,Nt].forEach(function(ae){Dt=Dt.concat(Qw(ae,qt).filter(function(Me){return Md(Me,j)&&Md(Me,et)}))}),[{x:rt.x,y:ot.y},{x:ot.x,y:rt.y}].forEach(function(ae){Md(ae,j)&&Md(ae,et)&&Dt.push(ae)}),Dt.unshift(rt),Dt.push(ot),Dt=Mv(Dt);var ve=e2(Dt,rt,ot,o,s,e,t);return ve.unshift(e),ve.push(t),v0(ve)},a2=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},b0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),i2=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},o2=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},s2=function(e,t){return[e,t]},u2=function(e,t,r,n,a){return v0(m0(e,t,r,n,a.offset))},f2={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:i2,fallbackRoute:u2},P_={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:o2,fallbackRoute:s2},Of=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},c2=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Sd(a.getBBox(),r),s=Of(o.minX,t);s<=Of(o.maxX,t);s+=1)for(var u=Of(o.minY,t);u<=Of(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Iv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},x0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},E0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},w0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Sd(f,u);for(var x in l)l[x]=Of(l[x],a.gridSize);if(c){for(var w=0,C=s;w<C.length;w++)for(var G=C[w],j=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],x=0;x<4;x++){var et=j[x],rt=Fo.getLineIntersect(e,{x:e.x+G.stepX*l.width,y:e.y+G.stepY*l.height},et[0],et[1]);rt&&!Tv(e,rt,f)&&(rt.id="".concat(rt.x,"|||").concat(rt.y),o.push(rt))}return o}var ot=Av(l,e,n);return ot.id="".concat(ot.x,"|||").concat(ot.y),[ot]},Ov=function(e,t,r,n){var a=Iv(e,t),o=r[e.id];if(!o){var s=Iv(n,e);return x0(s,a)}var u=Iv({x:o.x,y:o.y},e);return x0(u,a)},l2=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,x=e.y,w={x:l,y:x,id:c};Ov(w,o,t,r)&&(f={x:o.x===n.x?n.x:w.x*s,y:o.y===n.y?n.y:w.y*s},u.unshift(f));for(var C=t[c];C&&C.id!==c;){var G={x:l,y:x,id:c},j={x:C.x,y:C.y,id:C.id},et=Ov(j,G,t,r);et&&(f={x:j.x===G.x?f.x:j.x*s,y:j.y===G.y?f.y:j.y*s},u.unshift(f)),c=j.id,l=j.x,x=j.y,C=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=x===r.y?a.y:f.y,u.unshift(a),u},h2=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,d.deepMix)(f2,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=c2(o.obstacles.concat([r,n]),u,o.offset),c={x:Of(e.x,u),y:Of(e.y,u)},l={x:Of(t.x,u),y:Of(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var x=w0(c,e,r,l,o),w=w0(l,t,n,c,o);x.forEach(function(yr){delete f[yr.id]}),w.forEach(function(yr){delete f[yr.id]});for(var C={},G={},j={},et={},rt={},ot=new b0,lt=0;lt<x.length;lt++){var wt=x[lt];C[wt.id]=wt,et[wt.id]=0,rt[wt.id]=E0(wt,w,o.distFunc),ot.add({id:wt.id,value:rt[wt.id]})}var Nt=o.maximumLoops,Dt,qt,ve,ae,Me,Fe,wr=1/0,Yr={};for(w.forEach(function(yr){Yr["".concat(yr.x,"|||").concat(yr.y)]=!0}),Object.keys(C).forEach(function(yr){var Or=C[yr].id;rt[Or]<=wr&&(wr=rt[Or],Dt=C[Or])});Object.keys(C).length>0&&Nt>0;){var Dr=ot.minId((Nt+1)%30===0);if(Dr)Dt=C[Dr];else break;if(Yr["".concat(Dt.x,"|||").concat(Dt.y)])return l2(Dt,j,c,t,e,l,u);delete C[Dt.id],ot.remove(Dt.id),G[Dt.id]=!0;for(var lt=0;lt<o.directions.length;lt++){qt=o.directions[lt];var pr="".concat(Math.round(Dt.x)+qt.stepX,"|||").concat(Math.round(Dt.y)+qt.stepY);if(ve={x:Dt.x+qt.stepX,y:Dt.y+qt.stepY,id:pr},!G[pr]&&(Fe=Ov(Dt,ve,j,c),!(Fe>o.maxAllowedDirectionChange)&&!f[pr])){C[pr]||(C[pr]=ve);var an=s[Fe];ae=o.distFunc(Dt,ve)+(isNaN(an)?u:an),Me=et[Dt.id]+ae;var en=et[pr];en&&Me>=en||(j[pr]=Dt,et[pr]=Me,rt[pr]=Me+E0(ve,w,o.distFunc),ot.add({id:pr,value:rt[pr]}))}}Nt-=1}return o.fallbackRoute(e,t,r,n,o)};vg("polyline",{options:{color:nn.defaultEdge.color,size:nn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:nn.defaultEdge.style.stroke,lineAppendWidth:nn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:nn.edgeLabel.style.fill,fontSize:nn.edgeLabel.style.fontSize,fontFamily:nn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.__assign)({},nn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,x=this.options.routeCfg,w=(0,d.mix)({},x,e.routeCfg);w.offset=n.offset;var C=this.getPath(u,f,c,l,w,!Boolean(s));((0,d.isArray)(C)&&C.length<=1||(0,d.isString)(C)&&C.indexOf("L")===-1)&&(C="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(C="M0 0, L0 0");var G=(0,d.mix)({},nn.defaultEdge.style,n,{lineWidth:e.size,path:C});return G},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(lt){return lt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),x=(0,d.mix)({},n,l,e.style),w=e.sourceNode,C=e.targetNode,G=x.radius,j=this.options.routeCfg,et=(0,d.mix)({},j,e.routeCfg);et.offset=x.offset;var rt=this.getPath(c,w,C,G,et,!Boolean(f));((0,d.isArray)(rt)&&rt.length<=1||(0,d.isString)(rt)&&rt.indexOf("L")===-1)&&(rt="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(rt="M0 0, L0 0"),l.endArrow&&x.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&x.startArrow===!1&&(e.style.startArrow={path:""});var ot=(0,d.mix)(n,a.attr(),{lineWidth:o,path:rt},e.style);a&&a.attr(ot)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return y0(e,n);var c=[];return(0,d.each)(e,function(C,G){G===0?c.push(["M",C.x,C.y]):c.push(["L",C.x,C.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?m0(e[e.length-1],e[0],r,t,s):h2(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var x=y0(l,n);return x}l=a2(l);var w=Fo.pointsToPolygon(l);return w}},"single-edge");var _0=Cf.cloneEvent,S0=Cf.isNaN,M0=Math.abs,d2=10,v2=["shift","ctrl","alt","control"],g2={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(S0(r)||S0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(ot){ot.set("ori-visibility",ot.get("ori-visibility")||ot.get("visible")),ot.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var x=f[c].getContainer(),w=x.get("children"),C=0,G=w;C<G.length;C++){var j=G[C],et=j.get("isKeyShape");et||(j.set("ori-visibility",j.get("ori-visibility")||j.get("visible")),j.hide())}}if(typeof window!="undefined"){var rt=this;this.handleDOMContextMenu=function(ot){return rt.onMouseUp(ot)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=_0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(M0(this.origin.x-e.clientX)+M0(this.origin.y-e.clientY)<d2)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Dt){return Dt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var x=f[c].get("group").get("children");x&&x.forEach(function(Dt){var qt=Dt.get("ori-visibility");Dt.set("ori-visibility",void 0),qt&&Dt.show()})}if(a>u)for(var w=n.getNodes(),C=0,G=w.length;C<G;C++)for(var j=w[C].getContainer(),et=j.get("children"),rt=0,ot=et;rt<ot.length;rt++){var lt=ot[rt],wt=lt.get("isKeyShape");if(!wt){var Nt=lt.get("ori-visibility");lt.set("ori-visibility",void 0),Nt&&lt.show()}}}if(!this.dragging){this.origin=null;return}e=_0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(v2.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},p2={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,y.__assign)((0,y.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,y.__assign)((0,y.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(w){var C=w.get("id");return c===C});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(w){var C=w.hasLocked();C||t.targets.push(w)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var x=[];this.targets.forEach(function(w){var C=w.getModel(),G=C.x,j=C.y,et=C.id;x.push({x:G,y:j,id:et})}),this.set("beforeDragNodes",x)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(w){var C=w.getEdges();C.forEach(function(G){G.isVisible()&&(t.hidenEdge[G.getID()]=!0,G.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,d.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,d.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var x=a.x-n.x+r[l].x,w=a.y-n.y+r[l].y,C={x,y:w};o?t.updateItem(f,C,!1):f.updatePosition(C)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var x=e.x-this.origin.x+this.originPoint.minX,w=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x,y:w})}else{var r=t.get("group"),n=(0,d.deepMix)({},nl.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,y.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,x=f.maxX,w=f.maxY;c<r&&(r=c),l<a&&(a=l),x>n&&(n=x),w>o&&(o=w)}var C=Math.floor(r),G=Math.floor(a),j=Math.ceil(n)-Math.floor(r),et=Math.ceil(o)-Math.floor(a);return{x:C,y:G,width:j,height:et,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},y2={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,d.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,l=s.length,x=u.length,w=f.length,C=e.inactiveItems||{},G=e.activeItems||{},j=0;j<c;j++){var et=o[j],rt=et.getID(),ot=et.hasState("selected");e.resetSelected&&ot&&r.setItemState(et,"selected",!1),G[rt]&&(r.setItemState(et,n,!1),delete G[rt]),a&&!C[rt]&&(r.setItemState(et,a,!0),C[rt]=et)}for(var j=0;j<l;j++){var lt=s[j],wt=lt.getID(),ot=lt.hasState("selected");e.resetSelected&&ot&&r.setItemState(lt,"selected",!1),G[wt]&&(r.setItemState(lt,n,!1),delete G[wt]),a&&!C[wt]&&(r.setItemState(lt,a,!0),C[wt]=lt)}for(var j=0;j<x;j++){var Nt=u[j],Dt=Nt.getID();G[Dt]&&(r.setItemState(Nt,n,!1),delete G[Dt]),a&&!C[Dt]&&(r.setItemState(Nt,a,!0),C[Dt]=Nt)}for(var j=0;j<w;j++){var qt=f[j],ve=qt.getID();G[ve]&&(r.setItemState(qt,n,!1),delete G[ve]),a&&!C[ve]&&(r.setItemState(qt,a,!0),C[ve]=qt)}if(t&&!t.destroyed){a&&(r.setItemState(t,a,!1),delete C[t.getID()]),G[t.getID()]||(r.setItemState(t,n,!0),G[t.getID()]=t);for(var ae=t.getEdges(),Me=ae.length,j=0;j<Me;j++){var Nt=ae[j],Dt=Nt.getID(),Fe=void 0;Nt.getSource()===t?Fe=Nt.getTarget():Fe=Nt.getSource();var wr=Fe.getID();a&&C[wr]&&(r.setItemState(Fe,a,!1),delete C[wr]),G[wr]||(r.setItemState(Fe,n,!0),G[wr]=Fe),C[Dt]&&(r.setItemState(Nt,a,!1),delete C[Dt]),G[Dt]||(r.setItemState(Nt,n,!0),G[Dt]=Nt),Nt.toFront()}}e.activeItems=G,e.inactiveItems=C,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,d.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Cd=Math.min,A0=Math.max,C0=Math.abs,T0="shift",m2=["drag","shift","ctrl","alt","control"],b2={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:T0,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return m2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=T0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Cd(f.x,c.x),x=A0(f.x,c.x),w=Cd(f.y,c.y),C=A0(f.y,c.y),G=[],j=[];n.getNodes().forEach(function(ot){if(ot.isVisible()&&s(ot,l,x,w,C)&&o(ot,"select",t)){G.push(ot);var lt=ot.getModel();j.push(lt.id),n.setItemState(ot,u,!0)}});var et=[];this.includeEdges&&G.forEach(function(ot){var lt=ot.getOutEdges();lt.forEach(function(wt){if(wt.isVisible()){var Nt=wt.getModel(),Dt=Nt.source,qt=Nt.target;j.includes(Dt)&&j.includes(qt)&&o(wt,"select",t)&&(et.push(wt),n.setItemState(wt,t.selectedState,!0))}})});var rt=[];this.includeCombos&&n.getCombos().forEach(function(ot){if(ot.isVisible()&&s(ot,l,x,w,C)&&o(ot,"select",t)){rt.push(ot);var lt=ot.getModel();j.push(lt.id),n.setItemState(ot,u,!0)}}),this.selectedEdges=et,this.selectedNodes=G,this.selectedCombos=rt,this.onSelect&&this.onSelect(G,et,rt),n.emit("nodeselectchange",{selectedItems:{nodes:G,edges:et,combos:rt},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:C0(e.canvasX-t.x),height:C0(e.canvasY-t.y),x:Cd(e.canvasX,t.x),y:Cd(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},I0="shift",x2=["shift","ctrl","alt","control"],E2={getDefaultCfg:function(){return{multiple:!0,trigger:I0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return x2.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=I0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,d.each)(c,function(G){G!==r&&a.setItemState(G,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var x=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:x,edges:w,combos:C},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var x=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:x,edges:w,combos:C},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var x=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:x,edges:w,combos:C},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,d.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,d.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,d.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},w2=St,O0=.05,_2={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(G,j){return Math.hypot(j.x-G.x,j.y-G.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),x=this.graph.get("canvas"),w=x.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:w.x,y:w.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;e.wheelDelta<0?c=1-O0*u:c=1/(1-O0*u),l=f*c;var x=this.get("minZoom")||n.get("minZoom"),w=this.get("maxZoom")||n.get("maxZoom");l>w?l=w:l<x&&(l=x);var C=this.get("enableOptimize");if(C){var G=this.get("optimizeZoom"),j=this.get("optimized"),et=n.getNodes(),rt=n.getEdges(),ot=et.length,lt=rt.length;if(!j){for(var wt=0;wt<ot;wt++){var Nt=et[wt];if(!Nt.destroyed)for(var Dt=Nt.get("group").get("children"),qt=Dt.length,ve=0;ve<qt;ve++){var ae=Dt[ve];!ae.destoryed&&!ae.get("isKeyShape")&&(ae.set("ori-visibility",ae.get("ori-visibility")||ae.get("visible")),ae.hide())}}for(var Me=0;Me<lt;Me++)for(var Fe=rt[Me],Dt=Fe.get("group").get("children"),qt=Dt.length,ve=0;ve<qt;ve++){var ae=Dt[ve];ae.set("ori-visibility",ae.get("ori-visibility")||ae.get("visible")),ae.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var wr=setTimeout(function(){var ba=n.getZoom(),Ga=t.get("optimized");if(Ga){t.set("optimized",!1);for(var va=0;va<ot;va++){var za=et[va],$a=za.get("group").get("children"),Dn=$a.length;if(ba<G){var _a=za.getKeyShape(),Aa=_a.get("ori-visibility");_a.set("ori-visibility",void 0),Aa&&_a.show()}else for(var Qa=0;Qa<Dn;Qa++){var Ia=$a[Qa],Aa=Ia.get("ori-visibility");Ia.set("ori-visibility",void 0),!Ia.get("visible")&&Aa&&Aa&&Ia.show()}}for(var Pa=0;Pa<lt;Pa++){var Ai=rt[Pa],$a=Ai.get("group").get("children"),Dn=$a.length;if(ba<G){var _a=Ai.getKeyShape(),Aa=_a.get("ori-visibility");_a.set("ori-visibility",void 0),Aa&&_a.show()}else for(var Qa=0;Qa<Dn;Qa++){var Ia=$a[Qa];if(!Ia.get("visible")){var Aa=Ia.get("ori-visibility");Ia.set("ori-visibility",void 0),Aa&&Ia.show()}}}}},100);this.set("timeout",wr)}if(f<=1){var Yr=void 0,Dr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Yr=n.findAllByState("node",a.fixState),Dr=n.findAllByState("edge",a.fixState);for(var pr=f/l,an=Yr.length,en=0;en<an;en++){var Nt=Yr[en],yr=Nt.getContainer(),Or=Nt.getModel(),Kr=Nt.getOriginStyle(),Zr=Nt.getStateStyle(a.fixState),fn=Nt.get("shapeFactory").getShape(Or.type).getStateStyle(a.fixState,Nt)[a.fixState];if(a.fixAll){if(l<=1){var bn=(0,d.clone)(yr.getMatrix());bn||(bn=[1,0,0,0,1,0,0,0,1]);var Vn=Nt.getModel(),sa=Vn.x,Ua=Vn.y;bn=w2(bn,[["t",-sa,-Ua],["s",pr,pr],["t",sa,Ua]]),yr.setMatrix(bn)}}else for(var Dt=yr.get("children"),qt=Dt.length,ve=0;ve<qt;ve++){var ae=Dt[ve],La=void 0,Wa=void 0;if(a.fixLabel){var ja=ae.get("type");if(ja==="text"){La=ae.attr("fontSize")||12;var vi=Zr[ae.get("name")],ni=fn[ae.get("name")],Zs=vi?vi.fontSize:12,fo=ni?ni.fontSize:12,$s=Zs||fo||12;if(l<=1&&ae.attr("fontSize",$s/l),Wa)break}}if(a.fixLineWidth&&ae.get("isKeyShape")){Wa=ae.attr("lineWidth")||0;var co=Zr.lineWidth||fn.lineWidth||Kr.lineWidth||0;if(l<=1&&ae.attr("lineWidth",co/l),La)break}}}for(var lo=Dr.length,Os=0;Os<lo;Os++)for(var Fe=Dr[Os],yr=Fe.getContainer(),Dt=yr.get("children"),Or=Fe.getModel(),Zr=Fe.getStateStyle(a.fixState),fn=Fe.get("shapeFactory").getShape(Or.type).getStateStyle(a.fixState,Fe)[a.fixState],qt=Dt.length,ve=0;ve<qt;ve++){var ae=Dt[ve],La=void 0,Wa=void 0;if(a.fixLabel||a.fixAll){var ja=ae.get("type");if(ja==="text"){La=ae.attr("fontSize")||12;var vi=Zr[ae.get("name")],ni=fn[ae.get("name")],Zs=vi?vi.fontSize:12,fo=ni?ni.fontSize:12,$s=Zs||fo||12;if(l<=1&&ae.attr("fontSize",$s/l),Wa)break}}if((a.fixLineWidth||a.fixAll)&&ae.get("isKeyShape")){Wa=ae.attr("lineWidth")||0;var co=Zr.lineWidth||fn.lineWidth||1;if(l<=1&&ae.attr("lineWidth",co/l),La)break}}}}var Go=this.get("animate"),ns=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},Go,ns),n.emit("wheelzoom",e)}}},L0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,ma(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){ma(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){ma(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,x=o.getBoundingClientRect();c>n/2?c-=x.width:c+=this.offset,l>a/2?l-=x.height:l+=this.offset;var w="".concat(c,"px"),C="".concat(l,"px");ma(this.container,{left:w,top:C,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=yi('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),ma(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},S2=(0,y.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},L0),M2=(0,y.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},L0),D0="click",A2=["click","dblclick"],C2={getDefaultCfg:function(){return{trigger:D0,onChange:function(){}}},getEvents:function(){var e,t;return A2.includes(this.trigger)?t=this.trigger:(t=D0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},T2=Cf.calculationItemsBBox,I2=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,d.each)(r,function(n){i(n,t)})}},O2={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,x=c.y,w=c.id;u.push({x:l,y:x,id:w})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],I2(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(x){var w=x.getModel();return a.parentId,w.id!==a.id&&!t.currentItemChildCombos.includes(w.id)});l.map(function(x){var w=x.getBBox(),C=w.centerX,G=w.centerY,j=w.width,et=u-C,rt=f-G,ot=2*Math.sqrt(et*et+rt*rt);c+j-ot>.8*c?r.setItemState(x,t.activeState,!0):r.setItemState(x,t.activeState,!1)})}(0,d.each)(this.targets,function(x){t.updateCombo(x,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,d.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,x=f.id;s.after.combos.push({x:c,y:l,id:x}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,d.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,d.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var x=e.x-this.origin.x+this.originPoint.minX,w=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x,y:w})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=T2(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,y.__assign)((0,y.__assign)({},nl.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,y.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},N0="dblclick",L2=["click","dblclick"],D2={getDefaultCfg:function(){return{trigger:N0,relayout:!0}},getEvents:function(){var e,t;return L2.includes(this.trigger)?t=this.trigger:(t=N0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},N2=Cf.isPolygonsIntersect,P2=Cf.pathToPoints,P0="shift",k2=["drag","shift","ctrl","alt","control"],R2=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=P2(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return N2(t,r)},B2={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:P0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return k2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=P0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&R2(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(x){if(x.isVisible()){var w=x.getModel(),C=w.source,G=w.target;u.includes(C)&&u.includes(G)&&n(x,"select",e)&&(f.push(x),r.setItemState(x,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,y.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},k0="click",F2=["click","drag"],R0=void 0,G2=["shift","ctrl","control","alt","meta",void 0],z2={getDefaultCfg:function(){return{trigger:k0,key:R0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;F2.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=k0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&G2.indexOf(e.key.toLowerCase())===-1&&(e.trigger=R0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,y.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,y.__assign)((0,y.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,y.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},B0="ctrl",U2=["shift","ctrl","alt","control"],W2="1",X2={getDefaultCfg:function(){return{trigger:B0,combinedKey:W2,functionName:"fitView",functionParams:[]}},getEvents:function(){return U2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=B0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},Y2=["shift","ctrl","alt","control","meta"],V2={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||Y2.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Or){return e["".concat(Or,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),x=this.graph.get("height"),w=this.graph.get("canvas").getCanvasBBox(),C=this.scalableRange,G=this.scalableRange;C<1&&C>-1&&(C=l*C,G=x*G);var j=w.minX,et=w.maxX,rt=w.minY,ot=w.maxY;f>0?et<-C?f=0:et-f<-C&&(f=et+C):f<0&&(j>l+C?f=0:j-f>l+C&&(f=j-(l+C))),c>0?ot<-G?c=0:ot-c<-G&&(c=ot+G):c<0&&(rt>x+G?c=0:rt-c>x+G&&(c=rt-(x+G))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var lt=this.get("enableOptimize");if(lt){var wt=this.get("optimizeZoom"),Nt=this.get("optimized"),Dt=r.getNodes(),qt=r.getEdges(),ve=Dt.length,ae=qt.length;if(!Nt){for(var Me=0;Me<ve;Me++){var Fe=Dt[Me];if(!Fe.destroyed)for(var wr=Fe.get("group").get("children"),Yr=wr.length,Dr=0;Dr<Yr;Dr++){var pr=wr[Dr];!pr.destoryed&&!pr.get("isKeyShape")&&(pr.set("ori-visibility",pr.get("ori-visibility")||pr.get("visible")),pr.hide())}}for(var an=0;an<ae;an++)for(var en=qt[an],wr=en.get("group").get("children"),Yr=wr.length,Dr=0;Dr<Yr;Dr++){var pr=wr[Dr];pr.set("ori-visibility",pr.get("ori-visibility")||pr.get("visible")),pr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var yr=setTimeout(function(){var Or=r.getZoom(),Kr=t.get("optimized");if(Kr){t.set("optimized",!1);for(var Zr=0;Zr<ve;Zr++){var fn=Dt[Zr],bn=fn.get("group").get("children"),Vn=bn.length;if(Or<wt){var sa=fn.getKeyShape(),Ua=sa.get("ori-visibility");Ua&&sa.show()}else for(var La=0;La<Vn;La++){var Wa=bn[La],Ua=Wa.get("ori-visibility");!Wa.get("visible")&&Ua&&Ua&&Wa.show()}}for(var ja=0;ja<ae;ja++){var vi=qt[ja],bn=vi.get("group").get("children"),Vn=bn.length;if(Or<wt){var sa=vi.getKeyShape(),Ua=sa.get("ori-visibility");Ua&&sa.show()}else for(var La=0;La<Vn;La++){var Wa=bn[La];if(!Wa.get("visible")){var Ua=Wa.get("ori-visibility");Ua&&Wa.show()}}}}},100);this.set("timeout",yr)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},j2={"drag-canvas":g2,"zoom-canvas":_2,"drag-node":p2,"activate-relations":y2,"brush-select":b2,"click-select":E2,"lasso-select":B2,tooltip:S2,"edge-tooltip":M2,"collapse-expand":C2,"drag-combo":O2,"collapse-expand-combo":D2,"create-edge":z2,"shortcuts-call":X2,"scroll-canvas":V2};(0,d.each)(j2,function(i,e){gg(e,i)});var H2=(0,y.__assign)((0,y.__assign)({},P),Uy),k_=uo.Grid,R_=uo.Minimap,B_=uo.Bundling,F_=uo.Menu,K2=uo.Fisheye,G_=uo.ToolBar,z_=uo.Tooltip,Z2=uo.TimeBar,$2=uo.ImageMinimap,Q2=uo.EdgeFilterLens,q2=uo.SnapLine,U_=uo.Legend,J2=uo.Annotation,F0={version:nl.version,Graph:gp,TreeGraph:Hb,Util:Cf,Layout:Ma.Layouts,TreeLayout:Tb,registerLayout:Ib,Global:nl,registerBehavior:gg,registerCombo:zy,registerEdge:vg,registerNode:Sf,Minimap:uo.Minimap,Grid:uo.Grid,Bundling:uo.Bundling,Menu:uo.Menu,ToolBar:uo.ToolBar,Tooltip:uo.Tooltip,Legend:uo.Legend,TimeBar:Z2,SnapLine:q2,Fisheye:K2,ImageMinimap:$2,EdgeFilterLens:Q2,Annotation:J2,Algorithm:H2,Arrow:fg,Marker:cg,Shape:vc};F0.version="4.8.13";var t_=F0,W_="4.8.13"},99905:function(Le,F,B){"use strict";B.r(F),B.d(F,{Graph:function(){return J},GraphWithEvent:function(){return Bt},algorithm:function(){return P},comparision:function(){return R},essence:function(){return W},generate:function(){return L}});var P={};B.r(P),B.d(P,{components:function(){return we},dfs:function(){return ee},dijkstra:function(){return rn},dijkstraAll:function(){return Sn},findCycles:function(){return ra},floydWarshall:function(){return jr},isAcyclic:function(){return Re},postorder:function(){return Ke},preorder:function(){return Cr},prim:function(){return zt},tarjan:function(){return Kn},topsort:function(){return aa}});var W={};B.r(W),B.d(W,{hasSelfLoop:function(){return ur},isGraph:function(){return Hr},isNullGraph:function(){return ze},isSimpleGraph:function(){return xn}});var R={};B.r(R),B.d(R,{containAllSameEdges:function(){return bt},containAllSameNodes:function(){return Q},containSameEdges:function(){return pt},containSameNodes:function(){return dt},getSameEdges:function(){return I},getSameNodes:function(){return U},isGraphComplement:function(){return Sr},isGraphContainsAnother:function(){return It},isGraphOptionSame:function(){return T},isGraphSame:function(){return kt}});var L={};B.r(L),B.d(L,{getGraphComplement:function(){return Nr}});var k;(function($t){$t.DEFAULT_EDGE_NAME="\0",$t.GRAPH_NODE="\0",$t.EDGE_KEY_DELIM=""})(k||(k={}));function N($t,Ct){var te=$t.get(Ct)||0;$t.set(Ct,te+1)}function E($t,Ct){var te=$t.get(Ct);te!==void 0&&(te=te-1,te>0?$t.set(Ct,te):$t.delete(Ct))}function b($t,Ct,te,ge){var ie=String(Ct),Te=String(te);if(!$t&&ie>Te){var Je=ie;ie=Te,Te=Je}return ie+k.EDGE_KEY_DELIM+Te+k.EDGE_KEY_DELIM+(ge===void 0?k.DEFAULT_EDGE_NAME:ge)}function p($t,Ct,te,ge){var ie=String(Ct),Te=String(te),Je={v:Ct,w:te};if(!$t&&ie>Te){var tr=Je.v;Je.v=Je.w,Je.w=tr}return ge!==void 0&&(Je.name=ge),Je}function m($t,Ct){return b($t,Ct.v,Ct.w,Ct.name)}function g($t){return typeof $t=="function"}var M=function(Ct){return Ct.nodes().map(function(te){var ge=Ct.node(te),ie=Ct.parent(te),Te={id:te,value:ge,parent:ie};return Te.value===void 0&&delete Te.value,Te.parent===void 0&&delete Te.parent,Te})},_=function(Ct){return Ct.edges().map(function(te){var ge=Ct.edge(te),ie={v:te.v,w:te.w,value:ge,name:te.name};return ie.name===void 0&&delete ie.name,ie.value===void 0&&delete ie.value,ie})},S=function(Ct){var te={options:{directed:Ct.isDirected(),multigraph:Ct.isMultigraph(),compound:Ct.isCompound()},nodes:M(Ct),edges:_(Ct),value:Ct.graph()};return te.value===void 0&&delete te.value,te},O=function(Ct){var te=new J(Ct.options);return Ct.value!==void 0&&te.setGraph(Ct.value),Ct.nodes.forEach(function(ge){te.setNode(ge.id,ge.value),ge.parent&&te.setParent(ge.id,ge.parent)}),Ct.edges.forEach(function(ge){te.setEdge(ge.v,ge.w,ge.value,ge.name)}),te};function y($t,Ct){var te=Object.keys($t);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols($t);Ct&&(ge=ge.filter(function(ie){return Object.getOwnPropertyDescriptor($t,ie).enumerable})),te.push.apply(te,ge)}return te}function d($t){for(var Ct=1;Ct<arguments.length;Ct++){var te=arguments[Ct]!=null?arguments[Ct]:{};Ct%2?y(Object(te),!0).forEach(function(ge){V($t,ge,te[ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties($t,Object.getOwnPropertyDescriptors(te)):y(Object(te)).forEach(function(ge){Object.defineProperty($t,ge,Object.getOwnPropertyDescriptor(te,ge))})}return $t}function V($t,Ct,te){return Ct in $t?Object.defineProperty($t,Ct,{value:te,enumerable:!0,configurable:!0,writable:!0}):$t[Ct]=te,$t}function q($t,Ct){if(!($t instanceof Ct))throw new TypeError("Cannot call a class as a function")}function Y($t,Ct){for(var te=0;te<Ct.length;te++){var ge=Ct[te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty($t,ge.key,ge)}}function X($t,Ct,te){return Ct&&Y($t.prototype,Ct),te&&Y($t,te),Object.defineProperty($t,"prototype",{writable:!1}),$t}var H={compound:!1,multigraph:!1,directed:!0},J=function(){function $t(){var Ct=this,te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};q(this,$t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=k.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Ct.directed},this.isMultigraph=function(){return Ct.multigraph},this.isCompound=function(){return Ct.compound},this.setGraph=function(ie){return Ct.label=ie,Ct},this.graph=function(){return Ct.label},this.setDefaultNodeLabel=function(ie){return g(ie)?Ct.defaultNodeLabelFn=ie:Ct.defaultNodeLabelFn=function(){return ie},Ct},this.nodeCount=function(){return Ct.nodeCountNum},this.node=function(ie){return Ct.nodesLabelMap.get(ie)},this.nodes=function(){return Array.from(Ct.nodesLabelMap.keys())},this.sources=function(){return Ct.nodes().filter(function(ie){var Te;return!(!((Te=Ct.inEdgesMap.get(ie))===null||Te===void 0)&&Te.size)})},this.sinks=function(){return Ct.nodes().filter(function(ie){var Te;return!(!((Te=Ct.outEdgesMap.get(ie))===null||Te===void 0)&&Te.size)})},this.setNodes=function(ie,Te){return ie.map(function(Je){return Ct.setNode(Je,Te)}),Ct},this.hasNode=function(ie){return Ct.nodesLabelMap.has(ie)},this.checkCompound=function(){if(!Ct.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(ie){if(Ct.isCompound()){var Te,Je=(Te=Ct.parentMap)===null||Te===void 0?void 0:Te.get(ie);if(Je!==Ct.GRAPH_NODE)return Je}},this.removeFromParentsChildList=function(ie){var Te=Ct.parentMap.get(ie);Ct.childrenMap.get(Te).delete(ie)},this.setParent=function(ie,Te){var Je,tr;Ct.checkCompound();for(var Gr=Te===void 0?Ct.GRAPH_NODE:Te,cn=Ct.parent(Gr);cn;){if(ie===cn)throw new Error("Setting "+Te+" as parent of "+ie+" would create a cycle");cn=Ct.parent(cn)}Te&&Ct.setNode(Te),Ct.setNode(ie),Ct.removeFromParentsChildList(ie),(Je=Ct.parentMap)===null||Je===void 0||Je.set(ie,Gr);var qr=Ct.childrenMap.get(Gr);return qr.set(ie,!0),(tr=Ct.childrenMap)===null||tr===void 0||tr.set(Gr,qr),Ct},this.children=function(ie){var Te=ie===void 0?Ct.GRAPH_NODE:ie;if(Ct.isCompound()){var Je,tr=(Je=Ct.childrenMap)===null||Je===void 0?void 0:Je.get(Te);return tr?Array.from(tr.keys()):void 0}if(Te===Ct.GRAPH_NODE)return Ct.nodes();if(ie&&Ct.hasNode(ie))return[]},this.predecessors=function(ie){var Te=Ct.predecessorsMap.get(ie);return Te?Array.from(Te.keys()):void 0},this.successors=function(ie){var Te=Ct.successorsMap.get(ie);return Te?Array.from(Te.keys()):void 0},this.neighbors=function(ie){var Te;if(Ct.hasNode(ie))return Array.from(new Set((Te=Ct.predecessors(ie))===null||Te===void 0?void 0:Te.concat(Ct.successors(ie))))},this.isLeaf=function(ie){var Te;if(Ct.isDirected()){var Je;return!(!((Je=Ct.successors(ie))===null||Je===void 0)&&Je.length)}return!(!((Te=Ct.neighbors(ie))===null||Te===void 0)&&Te.length)},this.filterNodes=function(ie){var Te=Ct.directed,Je=Ct.multigraph,tr=Ct.compound,Gr=new $t({directed:Te,multigraph:Je,compound:tr});if(Gr.setGraph(Ct.graph()),Ct.nodes().forEach(function(qr){ie(qr)&&Gr.setNode(qr,Ct.node(qr))}),Ct.edges().forEach(function(qr){Gr.hasNode(qr.v)&&Gr.hasNode(qr.w)&&Gr.setEdgeObj(qr,Ct.edge(qr))}),tr){var cn=function(Fn){for(var Mn=Ct.parent(Fn);Mn!==void 0&&!Gr.hasNode(Mn);)Mn=Ct.parent(Mn);return Mn};Gr.nodes().forEach(function(qr){Gr.setParent(qr,cn(qr))})}return Gr},this.setDefaultEdgeLabel=function(ie){return g(ie)?Ct.defaultEdgeLabelFn=ie:Ct.defaultEdgeLabelFn=function(){return ie},Ct},this.edgeCount=function(){return Ct.edgeCountNum},this.setEdgeObj=function(ie,Te){return Ct.setEdge(ie.v,ie.w,Te,ie.name)},this.setPath=function(ie,Te){return ie.reduce(function(Je,tr){return Ct.setEdge(Je,tr,Te),tr}),Ct},this.edgeFromArgs=function(ie,Te,Je){return Ct.edge({v:ie,w:Te,name:Je})},this.edge=function(ie){return Ct.edgesLabelsMap.get(m(Ct.isDirected(),ie))},this.hasEdge=function(ie,Te,Je){return Ct.edgesLabelsMap.has(m(Ct.isDirected(),{v:ie,w:Te,name:Je}))},this.removeEdgeObj=function(ie){var Te=ie.v,Je=ie.w,tr=ie.name;return Ct.removeEdge(Te,Je,tr)},this.edges=function(){return Array.from(Ct.edgesMap.values())},this.inEdges=function(ie,Te){var Je=Ct.inEdgesMap.get(ie);if(Je)return Array.from(Je.values()).filter(function(tr){return!Te||tr.v===Te})},this.outEdges=function(ie,Te){var Je=Ct.outEdgesMap.get(ie);if(Je)return Array.from(Je.values()).filter(function(tr){return!Te||tr.w===Te})},this.nodeEdges=function(ie,Te){var Je;if(Ct.hasNode(ie))return(Je=Ct.inEdges(ie,Te))===null||Je===void 0?void 0:Je.concat(Ct.outEdges(ie,Te))},this.toJSON=function(){return S(Ct)},this.nodeInDegree=function(ie){var Te=Ct.inEdgesMap.get(ie);return Te?Te.size:0},this.nodeOutDegree=function(ie){var Te=Ct.outEdgesMap.get(ie);return Te?Te.size:0},this.nodeDegree=function(ie){return Ct.nodeInDegree(ie)+Ct.nodeOutDegree(ie)},this.source=function(ie){return ie.v},this.target=function(ie){return ie.w};var ge=d(d({},H),te);this.compound=ge.compound,this.directed=ge.directed,this.multigraph=ge.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return X($t,[{key:"setNode",value:function(te,ge){var ie=this.nodesLabelMap,Te=this.defaultNodeLabelFn,Je=this.isCompound,tr=this.parentMap,Gr=this.childrenMap,cn=this.inEdgesMap,qr=this.outEdgesMap,Fn=this.predecessorsMap,Mn=this.successorsMap;if(ie.has(te))return ge!==void 0&&ie.set(te,ge),this;if(ie.set(te,ge||Te(te)),Je()){var ia;tr==null||tr.set(te,this.GRAPH_NODE),Gr==null||Gr.set(te,new Map),Gr!=null&&Gr.has(this.GRAPH_NODE)||Gr==null||Gr.set(this.GRAPH_NODE,new Map),Gr==null||(ia=Gr.get(this.GRAPH_NODE))===null||ia===void 0||ia.set(te,!0)}return[cn,qr,Fn,Mn].forEach(function(Sa){return Sa.set(te,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(te){var ge=this;if(this.hasNode(te)){var ie=function(ca){ge.removeEdge(ca.v,ca.w,ca.name)},Te=this.inEdgesMap,Je=this.outEdgesMap,tr=this.predecessorsMap,Gr=this.successorsMap,cn=this.nodesLabelMap;if(this.isCompound()){var qr,Fn,Mn;this.removeFromParentsChildList(te),(qr=this.parentMap)===null||qr===void 0||qr.delete(te),(Fn=this.children(te))===null||Fn===void 0||Fn.forEach(function(Ca){return ge.setParent(Ca)}),(Mn=this.childrenMap)===null||Mn===void 0||Mn.delete(te)}var ia=Te.get(te),Sa=Je.get(te);Array.from(ia.values()).forEach(function(Ca){return ie(Ca)}),Array.from(Sa.values()).forEach(function(Ca){return ie(Ca)}),cn.delete(te),Te.delete(te),Je.delete(te),tr.delete(te),Gr.delete(te),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(te,ge,ie,Te){var Je,tr,Gr=p(this.isDirected(),te,ge,Te),cn=m(this.isDirected(),Gr),qr=Gr.v,Fn=Gr.w;if(this.edgesLabelsMap.has(cn))return this.edgesLabelsMap.set(cn,ie),this;if(Te!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(qr),this.setNode(Fn),this.edgesLabelsMap.set(cn,ie||this.defaultEdgeLabelFn(qr,Fn,Te)),Object.freeze(Gr),this.edgesMap.set(cn,Gr);var Mn=this.predecessorsMap.get(Fn),ia=this.successorsMap.get(qr);return N(Mn,qr),N(ia,Fn),(Je=this.inEdgesMap.get(Fn))===null||Je===void 0||Je.set(cn,Gr),(tr=this.outEdgesMap.get(qr))===null||tr===void 0||tr.set(cn,Gr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(te,ge,ie){var Te=b(this.isDirected(),te,ge,ie),Je=this.edgesMap.get(Te);if(Je){var tr=p(this.isDirected(),te,ge,ie),Gr=tr.v,cn=tr.w;this.edgesLabelsMap.delete(Te),this.edgesMap.delete(Te);var qr=this.predecessorsMap.get(cn),Fn=this.successorsMap.get(Gr);E(qr,Gr),E(Fn,cn),this.inEdgesMap.get(cn).delete(Te),this.outEdgesMap.get(Gr).delete(Te),this.edgeCountNum-=1}return this}}]),$t}();J.fromJSON=O;function nt($t){return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},nt($t)}function tt($t,Ct){if(!($t instanceof Ct))throw new TypeError("Cannot call a class as a function")}function at($t,Ct){for(var te=0;te<Ct.length;te++){var ge=Ct[te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty($t,ge.key,ge)}}function ct($t,Ct,te){return Ct&&at($t.prototype,Ct),te&&at($t,te),Object.defineProperty($t,"prototype",{writable:!1}),$t}function ht(){return typeof Reflect!="undefined"&&Reflect.get?ht=Reflect.get:ht=function(Ct,te,ge){var ie=Lt(Ct,te);if(ie){var Te=Object.getOwnPropertyDescriptor(ie,te);return Te.get?Te.get.call(arguments.length<3?Ct:ge):Te.value}},ht.apply(this,arguments)}function Lt($t,Ct){for(;!Object.prototype.hasOwnProperty.call($t,Ct)&&($t=Et($t),$t!==null););return $t}function St($t,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),Ct&&Zt($t,Ct)}function Zt($t,Ct){return Zt=Object.setPrototypeOf||function(ge,ie){return ge.__proto__=ie,ge},Zt($t,Ct)}function Ut($t){var Ct=st();return function(){var ge=Et($t),ie;if(Ct){var Te=Et(this).constructor;ie=Reflect.construct(ge,arguments,Te)}else ie=ge.apply(this,arguments);return Ot(this,ie)}}function Ot($t,Ct){if(Ct&&(nt(Ct)==="object"||typeof Ct=="function"))return Ct;if(Ct!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z($t)}function Z($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function st(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($t){return!1}}function Et($t){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(te){return te.__proto__||Object.getPrototypeOf(te)},Et($t)}var Bt=function($t){St(te,$t);var Ct=Ut(te);function te(){var ge;tt(this,te);for(var ie=arguments.length,Te=new Array(ie),Je=0;Je<ie;Je++)Te[Je]=arguments[Je];return ge=Ct.call.apply(Ct,[this].concat(Te)),ge.eventPool={},ge}return ct(te,[{key:"appendEvent",value:function(ie,Te){this.eventPool[ie]||(this.eventPool[ie]=[]),this.eventPool[ie].push(Te)}},{key:"removeEvent",value:function(ie,Te){if(this.eventPool[ie]){var Je=this.eventPool[ie].indexOf(Te);Je>-1&&this.eventPool[ie].splice(Je,1)}}},{key:"emitEvent",value:function(ie){for(var Te=arguments.length,Je=new Array(Te>1?Te-1:0),tr=1;tr<Te;tr++)Je[tr-1]=arguments[tr];this.eventPool[ie]&&this.eventPool[ie].forEach(function(Gr){Gr.apply(void 0,Je)})}},{key:"setNode",value:function(ie,Te){return ht(Et(te.prototype),"setNode",this).call(this,ie,Te),this.emitEvent("nodeAdd",ie,Te),this}},{key:"removeNode",value:function(ie){return ht(Et(te.prototype),"removeNode",this).call(this,ie),this.emitEvent("nodeRemove",ie),this}},{key:"setEdge",value:function(ie,Te,Je,tr){return ht(Et(te.prototype),"setEdge",this).call(this,ie,Te,Je,tr),this.emitEvent("edgeAdd",ie,Te,Je,tr),this}},{key:"removeEdge",value:function(ie,Te,Je){return ht(Et(te.prototype),"removeEdge",this).call(this,ie,Te,Je),this.emitEvent("edgeRemove",ie,Te,Je),this}}]),te}(J);function Pt($t,Ct){for(var te=0;te<Ct.length;te++){var ge=Ct[te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty($t,ge.key,ge)}}function Ht($t,Ct,te){return Ct&&Pt($t.prototype,Ct),te&&Pt($t,te),Object.defineProperty($t,"prototype",{writable:!1}),$t}function le($t,Ct){if(!($t instanceof Ct))throw new TypeError("Cannot call a class as a function")}var ye=Ht(function $t(){var Ct=this;le(this,$t),this.arr=[],this.keyIndice=new Map,this.size=function(){return Ct.arr.length},this.keys=function(){return Ct.arr.map(function(te){return te.key})},this.has=function(te){return Ct.keyIndice.has(te)},this.priority=function(te){var ge=Ct.keyIndice.get(te);if(ge!==void 0)return Ct.arr[ge].priority},this.swap=function(te,ge){var ie=Ct.arr,Te=Ct.keyIndice,Je=[ie[te],ie[ge]],tr=Je[0],Gr=Je[1];ie[te]=Gr,ie[ge]=tr,Te.set(tr.key,ge),Te.set(Gr.key,te)},this.innerDecrease=function(te){for(var ge=Ct.arr,ie=ge[te].priority,Te,Je=te;Je!==0;){var tr;if(Te=Je>>1,((tr=ge[Te])===null||tr===void 0?void 0:tr.priority)<ie)break;Ct.swap(Je,Te),Je=Te}},this.heapify=function(te){var ge=Ct.arr,ie=te<<1,Te=ie+1,Je=te;ie<ge.length&&(Je=ge[ie].priority<ge[Je].priority?ie:Je,Te<ge.length&&(Je=ge[Te].priority<ge[Je].priority?Te:Je),Je!==te&&(Ct.swap(te,Je),Ct.heapify(Je)))},this.min=function(){if(Ct.size()===0)throw new Error("Queue underflow");return Ct.arr[0].key},this.add=function(te,ge){var ie=Ct.keyIndice,Te=Ct.arr;if(!ie.has(te)){var Je=Te.length;return ie.set(te,Je),Te.push({key:te,priority:ge}),Ct.innerDecrease(Je),!0}return!1},this.removeMin=function(){Ct.swap(0,Ct.arr.length-1);var te=Ct.arr.pop();return Ct.keyIndice.delete(te.key),Ct.heapify(0),te.key},this.decrease=function(te,ge){if(!Ct.has(te))throw new Error("There's no key named ".concat(te));var ie=Ct.keyIndice.get(te);if(ge>Ct.arr[ie].priority)throw new Error("New priority is greater than current priority.Key: ".concat(te," Old: + ").concat(Ct.arr[ie].priority," New: ").concat(ge));Ct.arr[ie].priority=ge,Ct.innerDecrease(ie)}}),Gt=function(Ct,te){var ge=new J,ie=new Map,Te=new ye,Je;function tr(qr){var Fn=qr.v===Je?qr.w:qr.v,Mn=Te.priority(Fn);if(Mn!==void 0){var ia=te(qr);ia<Mn&&(ie.set(Fn,Je),Te.decrease(Fn,ia))}}if(Ct.nodeCount()===0)return ge;Ct.nodes().forEach(function(qr){Te.add(qr,Number.POSITIVE_INFINITY),ge.setNode(qr)}),Te.decrease(Ct.nodes()[0],0);for(var Gr=!1;Te.size()>0;){var cn;if(Je=Te.removeMin(),ie.has(Je))ge.setEdge(Je,ie.get(Je));else{if(Gr)throw new Error("Input graph is not connected: "+Ct.graph());Gr=!0}(cn=Ct.nodeEdges(Je))===null||cn===void 0||cn.forEach(tr)}return ge},zt=Gt,ue=function(Ct){var te=new Set,ge=[],ie=Ct.nodes();return ie.forEach(function(Te){for(var Je=[],tr=[Te];tr.length>0;){var Gr=tr.pop();if(!te.has(Gr)){var cn,qr;te.add(Gr),Je.push(Gr),(cn=Ct.successors(Gr))===null||cn===void 0||cn.forEach(function(Fn){return tr.push(Fn)}),(qr=Ct.predecessors(Gr))===null||qr===void 0||qr.forEach(function(Fn){return tr.push(Fn)})}}Je.length&&ge.push(Je)}),ge},we=ue,de=function $t(Ct,te,ge,ie,Te,Je){ie.includes(te)||(ie.push(te),ge||Je.push(te),Te(te).forEach(function(tr){return $t(Ct,tr,ge,ie,Te,Je)}),ge&&Je.push(te))},Mt=function(Ct,te,ge){var ie=Array.isArray(te)?te:[te],Te=function(cn){return Ct.isDirected()?Ct.successors(cn):Ct.neighbors(cn)},Je=[],tr=[];return ie.forEach(function(Gr){if(Ct.hasNode(Gr))de(Ct,Gr,ge==="post",tr,Te,Je);else throw new Error("Graph does not have node: "+Gr)}),Je},ee=Mt;function ce($t,Ct){return Be($t)||Ge($t,Ct)||Wt($t,Ct)||At()}function At(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wt($t,Ct){if($t){if(typeof $t=="string")return fe($t,Ct);var te=Object.prototype.toString.call($t).slice(8,-1);if(te==="Object"&&$t.constructor&&(te=$t.constructor.name),te==="Map"||te==="Set")return Array.from($t);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return fe($t,Ct)}}function fe($t,Ct){(Ct==null||Ct>$t.length)&&(Ct=$t.length);for(var te=0,ge=new Array(Ct);te<Ct;te++)ge[te]=$t[te];return ge}function Ge($t,Ct){var te=$t==null?null:typeof Symbol!="undefined"&&$t[Symbol.iterator]||$t["@@iterator"];if(te!=null){var ge=[],ie=!0,Te=!1,Je,tr;try{for(te=te.call($t);!(ie=(Je=te.next()).done)&&(ge.push(Je.value),!(Ct&&ge.length===Ct));ie=!0);}catch(Gr){Te=!0,tr=Gr}finally{try{!ie&&te.return!=null&&te.return()}finally{if(Te)throw tr}}return ge}}function Be($t){if(Array.isArray($t))return $t}var _r=function(){return 1},Ft=function(Ct,te,ge,ie){return hr(Ct,te,ge||_r,ie||function(Te){return Ct.outEdges(Te)})},hr=function(Ct,te,ge,ie){var Te=new Map,Je=new ye,tr,Gr,cn=function(Mn){var ia=Mn.v!==tr?Mn.v:Mn.w,Sa=Te.get(ia),Ca=ge(Mn),ca=Gr.distance+Ca;if(Ca<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Mn+" Weight: "+Ca);ca<Sa.distance&&(Sa.distance=ca,Sa.predecessor=tr,Je.decrease(ia,ca))};for(Ct.nodes().forEach(function(Fn){var Mn=Fn===te?0:Number.POSITIVE_INFINITY;Te.set(Fn,{distance:Mn}),Je.add(Fn,Mn)});Je.size()>0&&(tr=Je.removeMin(),Gr=Te.get(tr),!(Gr&&Gr.distance===Number.POSITIVE_INFINITY));)ie(tr).forEach(cn);var qr={};return Array.from(Te.entries()).forEach(function(Fn){var Mn=ce(Fn,2),ia=Mn[0],Sa=Mn[1];return qr[String(ia)]=Sa,qr}),qr},rn=Ft,pn=function(Ct,te,ge){var ie={};return Ct.nodes().forEach(function(Te){return ie[String(Te)]=rn(Ct,Te,te,ge),ie}),ie},Sn=pn,Bn=function(Ct){var te=0,ge=[],ie=new Map,Te=[];function Je(tr){var Gr,cn={onStack:!0,lowlink:te,index:te};if(ie.set(tr,cn),te+=1,ge.push(tr),(Gr=Ct.successors(tr))===null||Gr===void 0||Gr.forEach(function(ia){var Sa;if(ie.has(ia)){if(!((Sa=ie.get(ia))===null||Sa===void 0)&&Sa.onStack){var ca=ie.get(ia);cn.lowlink=Math.min(cn.lowlink,ca.index)}}else{Je(ia);var Ca=ie.get(ia);cn.lowlink=Math.min(cn.lowlink,Ca.lowlink)}}),cn.lowlink===cn.index){var qr=[],Fn;do{Fn=ge.pop();var Mn=ie.get(Fn);Mn.onStack=!1,qr.push(Fn)}while(tr!==Fn);Te.push(qr)}}return Ct.nodes().forEach(function(tr){ie.has(tr)||Je(tr)}),Te},Kn=Bn,Nn=function(Ct){return Kn(Ct).filter(function(te){return te.length>1||te.length===1&&Ct.hasEdge(te[0],te[0])})},ra=Nn;function Ea($t){return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},Ea($t)}function na($t,Ct){for(var te=0;te<Ct.length;te++){var ge=Ct[te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty($t,ge.key,ge)}}function ir($t,Ct,te){return Ct&&na($t.prototype,Ct),te&&na($t,te),Object.defineProperty($t,"prototype",{writable:!1}),$t}function Tr($t,Ct){if(!($t instanceof Ct))throw new TypeError("Cannot call a class as a function")}function Jr($t,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),Ct&&gn($t,Ct)}function vn($t){var Ct=Yn();return function(){var ge=zn($t),ie;if(Ct){var Te=zn(this).constructor;ie=Reflect.construct(ge,arguments,Te)}else ie=ge.apply(this,arguments);return Tn(this,ie)}}function Tn($t,Ct){if(Ct&&(Ea(Ct)==="object"||typeof Ct=="function"))return Ct;if(Ct!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return In($t)}function In($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function kn($t){var Ct=typeof Map=="function"?new Map:void 0;return kn=function(ge){if(ge===null||!Ra(ge))return ge;if(typeof ge!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ct!="undefined"){if(Ct.has(ge))return Ct.get(ge);Ct.set(ge,ie)}function ie(){return Zn(ge,arguments,zn(this).constructor)}return ie.prototype=Object.create(ge.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),gn(ie,ge)},kn($t)}function Zn($t,Ct,te){return Yn()?Zn=Reflect.construct:Zn=function(ie,Te,Je){var tr=[null];tr.push.apply(tr,Te);var Gr=Function.bind.apply(ie,tr),cn=new Gr;return Je&&gn(cn,Je.prototype),cn},Zn.apply(null,arguments)}function Yn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($t){return!1}}function Ra($t){return Function.toString.call($t).indexOf("[native code]")!==-1}function gn($t,Ct){return gn=Object.setPrototypeOf||function(ge,ie){return ge.__proto__=ie,ge},gn($t,Ct)}function zn($t){return zn=Object.setPrototypeOf?Object.getPrototypeOf:function(te){return te.__proto__||Object.getPrototypeOf(te)},zn($t)}var Un=function($t){Jr(te,$t);var Ct=vn(te);function te(){return Tr(this,te),Ct.apply(this,arguments)}return ir(te)}(kn(Error));function _n($t){var Ct=new Set,te=new Set,ge=[];function ie(Te){if(te.has(Te))throw new Un;if(!Ct.has(Te)){var Je;te.add(Te),Ct.add(Te),(Je=$t.predecessors(Te))===null||Je===void 0||Je.forEach(ie),te.delete(Te),ge.push(Te)}}if($t.sinks().forEach(ie),Ct.size!==$t.nodeCount())throw new Un;return ge}var aa=_n,$=function(Ct){try{aa(Ct)}catch(te){if(te instanceof Un)return!1;throw te}return!0},Re=$,be=function(Ct,te){return ee(Ct,te,"post")},Ke=be,Ze=function(Ct,te){return ee(Ct,te,"pre")},Cr=Ze,Mr=function(){return 1};function Vr($t,Ct,te){return tn($t,Ct||Mr,te||function(ge){return $t.outEdges(ge)})}function tn($t,Ct,te){var ge={},ie=$t.nodes();return ie.forEach(function(Te){var Je=String(Te);ge[Je]={},ge[Je][Je]={distance:0},ie.forEach(function(tr){Te!==tr&&(ge[Je][String(tr)]={distance:Number.POSITIVE_INFINITY})}),te(Te).forEach(function(tr){var Gr=tr.v===Te?tr.w:tr.v,cn=Ct(tr);ge[Je][String(Gr)]={distance:cn,predecessor:Te}})}),ie.forEach(function(Te){var Je=String(Te),tr=ge[Je];ie.forEach(function(Gr){var cn=String(Gr),qr=ge[cn];ie.forEach(function(Fn){var Mn=String(Fn),ia=qr[Je],Sa=tr[Mn],Ca=qr[Mn],ca=ia.distance+Sa.distance;ca<Ca.distance&&(Ca.distance=ca,Ca.predecessor=Sa.predecessor)})})}),ge}var jr=Vr,dt=function(Ct,te){for(var ge=Ct.nodes(),ie=0;ie<ge.length;ie++){var Te=ge[ie];if(te.hasNode(Te))return!0}return!1},pt=function(Ct,te){for(var ge=Ct.edges(),ie=0;ie<ge.length;ie++){var Te=ge[ie];if(te.hasEdge(Te.v,Te.w,Te.name))return!0}return!1},U=function(Ct,te){var ge=Ct.nodes(),ie=ge.filter(function(Te){return te.hasNode(Te)});return ie},I=function(Ct,te){var ge=Ct.edges(),ie=ge.filter(function(Te){return te.hasEdge(Te.v,Te.w,Te.name)});return ie},T=function(Ct,te){return Ct.isCompound()===te.isCompound()&&Ct.isDirected()===te.isDirected()&&Ct.isMultigraph()===te.isMultigraph()},Q=function(Ct,te){var ge=U(Ct,te);return ge.length===Ct.nodes().length},bt=function(Ct,te){var ge=I(Ct,te);return ge.length===Ct.edges().length},kt=function(Ct,te){return T(Ct,te)&&Ct.nodeCount()===te.nodeCount()&&Q(Ct,te)&&Ct.edgeCount()===te.edgeCount()&&bt(Ct,te)},It=function(Ct,te){return Q(Ct,te)&&bt(Ct,te)};function Kt($t,Ct){return sr($t)||Ir($t,Ct)||_e($t,Ct)||Pe()}function Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _e($t,Ct){if($t){if(typeof $t=="string")return Qe($t,Ct);var te=Object.prototype.toString.call($t).slice(8,-1);if(te==="Object"&&$t.constructor&&(te=$t.constructor.name),te==="Map"||te==="Set")return Array.from($t);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return Qe($t,Ct)}}function Qe($t,Ct){(Ct==null||Ct>$t.length)&&(Ct=$t.length);for(var te=0,ge=new Array(Ct);te<Ct;te++)ge[te]=$t[te];return ge}function Ir($t,Ct){var te=$t==null?null:typeof Symbol!="undefined"&&$t[Symbol.iterator]||$t["@@iterator"];if(te!=null){var ge=[],ie=!0,Te=!1,Je,tr;try{for(te=te.call($t);!(ie=(Je=te.next()).done)&&(ge.push(Je.value),!(Ct&&ge.length===Ct));ie=!0);}catch(Gr){Te=!0,tr=Gr}finally{try{!ie&&te.return!=null&&te.return()}finally{if(Te)throw tr}}return ge}}function sr($t){if(Array.isArray($t))return $t}function Hr($t){return $t instanceof J}function xn($t){if($t.isMultigraph())return!1;for(var Ct=$t.edges(),te=new Map,ge=0;ge<Ct.length;ge++){var ie=Ct[ge];if(ie.v===ie.w)return!1;var Te=[ie.v,ie.w].sort(),Je=Kt(Te,2),tr=Je[0],Gr=Je[1],cn="".concat(tr,"-").concat(Gr);if(te.has(cn))return!1;te.set(cn,!0)}return!0}function ze($t){return $t.nodes().length===0}function ur($t){for(var Ct=$t.edges(),te=0;te<Ct.length;te++){var ge=Ct[te];if(ge.v===ge.w)return!0}return!1}var Sr=function(Ct,te){if(!xn(Ct)||!xn(te)||!Q(Ct,te)||pt(Ct,te))return!1;var ge=Ct.nodeCount();return Ct.edgeCount()+te.edgeCount()===ge*(ge-1)/2},Nr=function(Ct){if(!xn(Ct))return null;for(var te=Ct.nodeCount(),ge=new J({compound:Ct.isCompound(),directed:Ct.isDirected(),multigraph:Ct.isMultigraph()}),ie=Ct.nodes(),Te=0;Te<te;Te++){var Je=ie[Te];ge.setNode(Je,Ct.node(Je));for(var tr=Te+1;tr<te;tr++){var Gr=ie[tr];Ct.hasEdge(Je,Gr)||ge.setEdge(Je,Gr)}}return ge}},81746:function(Le){(function(B,P){Le.exports=P()})(typeof self!="undefined"?self:this,function(){return function(F){var B={};function P(W){if(B[W])return B[W].exports;var R=B[W]={i:W,l:!1,exports:{}};return F[W].call(R.exports,R,R.exports,P),R.l=!0,R.exports}return P.m=F,P.c=B,P.d=function(W,R,L){P.o(W,R)||Object.defineProperty(W,R,{configurable:!1,enumerable:!0,get:L})},P.n=function(W){var R=W&&W.__esModule?function(){return W.default}:function(){return W};return P.d(R,"a",R),R},P.o=function(W,R){return Object.prototype.hasOwnProperty.call(W,R)},P.p="",P(P.s=36)}([function(F,B,P){"use strict";var W=P(3);B.a=function(R){return Array.isArray?Array.isArray(R):Object(W.a)(R,"Array")}},function(F,B,P){"use strict";var W=function(R){return R!==null&&typeof R!="function"&&isFinite(R.length)};B.a=W},function(F,B,P){"use strict";var W=P(3);B.a=function(R){return Object(W.a)(R,"Function")}},function(F,B,P){"use strict";var W={}.toString,R=function(L,k){return W.call(L)==="[object "+k+"]"};B.a=R},function(F,B,P){"use strict";var W=P(3);B.a=function(R){return Object(W.a)(R,"String")}},function(F,B,P){"use strict";var W=P(3),R=function(L){return Object(W.a)(L,"Number")};B.a=R},function(F,B,P){var W=P(38),R=W.mix;function L(k,N,E,b){return b===void 0&&(b="height"),E==="center"?(k[b]+N[b])/2:k.height}F.exports={assign:R,getHeight:L}},function(F,B,P){"use strict";var W=function(R){return R==null};B.a=W},function(F,B,P){"use strict";var W=P(0),R=P(12);function L(k,N){if(k){var E;if(Object(W.a)(k))for(var b=0,p=k.length;b<p&&(E=N(k[b],b),E!==!1);b++);else if(Object(R.a)(k)){for(var m in k)if(k.hasOwnProperty(m)&&(E=N(k[m],m),E===!1))break}}}B.a=L},function(F,B,P){"use strict";var W=P(7);B.a=function(R){return Object(W.a)(R)?"":R.toString()}},function(F,B,P){"use strict";var W=P(14),R=P(3),L=function(k){if(!Object(W.a)(k)||!Object(R.a)(k,"Object"))return!1;if(Object.getPrototypeOf(k)===null)return!0;for(var N=k;Object.getPrototypeOf(N)!==null;)N=Object.getPrototypeOf(N);return Object.getPrototypeOf(k)===N};B.a=L},function(F,B,P){var W=P(18),R=function(){function L(N,E){E===void 0&&(E={});var b=this;b.options=E,b.rootNode=W(N,E)}var k=L.prototype;return k.execute=function(){throw new Error("please override this method")},L}();F.exports=R},function(F,B,P){"use strict";B.a=function(W){var R=typeof W;return W!==null&&R==="object"||R==="function"}},function(F,B,P){"use strict";var W=P(1),R=function(L,k){return Object(W.a)(L)?L.indexOf(k)>-1:!1};B.a=R},function(F,B,P){"use strict";var W=function(R){return typeof R=="object"&&R!==null};B.a=W},function(F,B,P){"use strict";var W=P(8),R=P(2),L=Object.values?function(k){return Object.values(k)}:function(k){var N=[];return Object(W.a)(k,function(E,b){Object(R.a)(k)&&b==="prototype"||N.push(E)}),N};B.a=L},function(F,B,P){"use strict";B.a=R;function W(L,k){for(var N in k)k.hasOwnProperty(N)&&N!=="constructor"&&k[N]!==void 0&&(L[N]=k[N])}function R(L,k,N,E){return k&&W(L,k),N&&W(L,N),E&&W(L,E),L}},function(F,B,P){var W=P(35),R=["LR","RL","TB","BT","H","V"],L=["LR","RL","H"],k=function(b){return L.indexOf(b)>-1},N=R[0];F.exports=function(E,b,p){var m=b.direction||N;if(b.isHorizontal=k(m),m&&R.indexOf(m)===-1)throw new TypeError("Invalid direction: "+m);if(m===R[0])p(E,b);else if(m===R[1])p(E,b),E.right2left();else if(m===R[2])p(E,b);else if(m===R[3])p(E,b),E.bottom2top();else if(m===R[4]||m===R[5]){var g=W(E,b),M=g.left,_=g.right;p(M,b),p(_,b),b.isHorizontal?M.right2left():M.bottom2top(),_.translate(M.x-_.x,M.y-_.y),E.x=M.x,E.y=_.y;var S=E.getBoundingBox();b.isHorizontal?S.top<0&&E.translate(0,-S.top):S.left<0&&E.translate(-S.left,0)}var O=b.fixedRoot;return O===void 0&&(O=!0),O&&E.translate(-(E.x+E.width/2+E.hgap),-(E.y+E.height/2+E.vgap)),E}},function(F,B,P){var W=P(6),R=18,L=R*2,k=R,N={getId:function(m){return m.id||m.name},getPreH:function(m){return m.preH||0},getPreV:function(m){return m.preV||0},getHGap:function(m){return m.hgap||k},getVGap:function(m){return m.vgap||k},getChildren:function(m){return m.children},getHeight:function(m){return m.height||L},getWidth:function(m){var g=m.label||" ";return m.width||g.split("").length*R}};function E(p,m){var g=this;if(g.vgap=g.hgap=0,p instanceof E)return p;g.data=p;var M=m.getHGap(p),_=m.getVGap(p);return g.preH=m.getPreH(p),g.preV=m.getPreV(p),g.width=m.getWidth(p),g.height=m.getHeight(p),g.width+=g.preH,g.height+=g.preV,g.id=m.getId(p),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(M,_),g}W.assign(E.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(m,g){var M=this;M.hgap+=m,M.vgap+=g,M.width+=2*m,M.height+=2*g},eachNode:function(m){for(var g=this,M=[g],_;_=M.shift();)m(_),M=_.children.concat(M)},DFTraverse:function(m){this.eachNode(m)},BFTraverse:function(m){for(var g=this,M=[g],_;_=M.shift();)m(_),M=M.concat(_.children)},getBoundingBox:function(){var m={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){m.left=Math.min(m.left,g.x),m.top=Math.min(m.top,g.y),m.width=Math.max(m.width,g.x+g.width),m.height=Math.max(m.height,g.y+g.height)}),m},translate:function(m,g){m===void 0&&(m=0),g===void 0&&(g=0),this.eachNode(function(M){M.x+=m,M.y+=g,M.x+=M.preH,M.y+=M.preV})},right2left:function(){var m=this,g=m.getBoundingBox();m.eachNode(function(M){M.x=M.x-(M.x-g.left)*2-M.width}),m.translate(g.width,0)},bottom2top:function(){var m=this,g=m.getBoundingBox();m.eachNode(function(M){M.y=M.y-(M.y-g.top)*2-M.height}),m.translate(0,g.height)}});function b(p,m,g){m===void 0&&(m={}),m=W.assign({},N,m);var M=new E(p,m),_=[M],S;if(!g&&!p.collapsed){for(;S=_.shift();)if(!S.data.collapsed){var O=m.getChildren(S.data),y=O?O.length:0;if(S.children=new Array(y),O&&y)for(var d=0;d<y;d++){var V=new E(O[d],m);S.children[d]=V,_.push(V),V.parent=S,V.depth=S.depth+1}}}return M}F.exports=b},function(F,B,P){"use strict";var W=P(1),R=function(L,k){if(!Object(W.a)(L))return L;for(var N=[],E=0;E<L.length;E++){var b=L[E];k(b,E)&&N.push(b)}return N};B.a=R},function(F,B,P){"use strict";var W=P(7),R=P(21);function L(k,N){var E=Object(R.a)(N),b=E.length;if(Object(W.a)(k))return!b;for(var p=0;p<b;p+=1){var m=E[p];if(N[m]!==k[m]||!(m in k))return!1}return!0}B.a=L},function(F,B,P){"use strict";var W=P(8),R=P(2),L=Object.keys?function(k){return Object.keys(k)}:function(k){var N=[];return Object(W.a)(k,function(E,b){Object(R.a)(k)&&b==="prototype"||N.push(b)}),N};B.a=L},function(F,B,P){"use strict";var W=P(0);B.a=function(R){if(Object(W.a)(R))return R.reduce(function(L,k){return Math.max(L,k)},R[0])}},function(F,B,P){"use strict";var W=P(0);B.a=function(R){if(Object(W.a)(R))return R.reduce(function(L,k){return Math.min(L,k)},R[0])}},function(F,B,P){"use strict";var W=P(1),R=Array.prototype.splice,L=function(N,E){if(!Object(W.a)(N))return[];for(var b=N?E.length:0,p=b-1;b--;){var m=void 0,g=E[b];(b===p||g!==m)&&(m=g,R.call(N,g,1))}return N};B.a=L},function(F,B,P){"use strict";var W=P(8),R=P(0),L=P(10),k=function(N,E,b){if(!Object(R.a)(N)&&!Object(L.a)(N))return N;var p=b;return Object(W.a)(N,function(m,g){p=E(p,m,g)}),p};B.a=k},function(F,B,P){"use strict";B.a=W;function W(R,L){L===void 0&&(L=new Map);var k=[];if(Array.isArray(R))for(var N=0,E=R.length;N<E;N++){var b=R[N];L.has(b)||(k.push(b),L.set(b,!0))}return k}},function(F,B,P){"use strict";B.a=k;var W=P(0),R=P(2),L=P(28);function k(N,E){if(!E)return{0:N};if(!Object(R.a)(E)){var b=Object(W.a)(E)?E:E.replace(/\s+/g,"").split("*");E=function(p){for(var m="_",g=0,M=b.length;g<M;g++)m+=p[b[g]]&&p[b[g]].toString();return m}}return Object(L.a)(N,E)}},function(F,B,P){"use strict";var W=P(0),R=P(2),L=Object.prototype.hasOwnProperty;function k(N,E){if(!E||!Object(W.a)(N))return{};for(var b={},p=Object(R.a)(E)?E:function(_){return _[E]},m,g=0;g<N.length;g++){var M=N[g];m=p(M),L.call(b,m)?b[m].push(M):b[m]=[M]}return b}B.a=k},function(F,B,P){"use strict";B.a=function(W,R){return W.hasOwnProperty(R)}},function(F,B,P){"use strict";var W={}.toString,R=function(L){return W.call(L).replace(/^\[object /,"").replace(/]$/,"")};B.a=R},function(F,B,P){"use strict";var W=Object.prototype,R=function(L){var k=L&&L.constructor,N=typeof k=="function"&&k.prototype||W;return L===N};B.a=R},function(F,B,P){"use strict";var W=P(2);B.a=function(R,L){if(!Object(W.a)(R))throw new TypeError("Expected a function");var k=function(){for(var N=[],E=0;E<arguments.length;E++)N[E]=arguments[E];var b=L?L.apply(this,N):N[0],p=k.cache;if(p.has(b))return p.get(b);var m=R.apply(this,N);return p.set(b,m),m};return k.cache=new Map,k}},function(F,B,P){"use strict";var W=P(14),R=P(1),L=P(4),k=function(N,E){if(N===E)return!0;if(!N||!E||Object(L.a)(N)||Object(L.a)(E))return!1;if(Object(R.a)(N)||Object(R.a)(E)){if(N.length!==E.length)return!1;for(var b=!0,p=0;p<N.length&&(b=k(N[p],E[p]),!!b);p++);return b}if(Object(W.a)(N)||Object(W.a)(E)){var m=Object.keys(N),g=Object.keys(E);if(m.length!==g.length)return!1;for(var b=!0,p=0;p<m.length&&(b=k(N[m[p]],E[m[p]]),!!b);p++);return b}return!1};B.a=k},function(F,B,P){"use strict";var W=P(116),R=P(15),L=P(32),k=P(4),N;B.a=Object(L.a)(function(E,b){b===void 0&&(b={});var p=b.fontSize,m=b.fontFamily,g=b.fontWeight,M=b.fontStyle,_=b.fontVariant;return N||(N=document.createElement("canvas").getContext("2d")),N.font=[M,_,g,p+"px",m].join(" "),N.measureText(Object(k.a)(E)?E:"").width},function(E,b){return b===void 0&&(b={}),Object(W.a)([E],Object(R.a)(b)).join("")})},function(F,B,P){var W=P(18);F.exports=function(R,L){for(var k=W(R.data,L,!0),N=W(R.data,L,!0),E=R.children.length,b=Math.round(E/2),p=L.getSide||function(_,S){return S<b?"right":"left"},m=0;m<E;m++){var g=R.children[m],M=p(g,m);M==="right"?N.children.push(g):k.children.push(g)}return k.eachNode(function(_){_.isRoot()||(_.side="left")}),N.eachNode(function(_){_.isRoot()||(_.side="right")}),{left:k,right:N}}},function(F,B,P){var W={compactBox:P(37),dendrogram:P(120),indented:P(122),mindmap:P(124)};F.exports=W},function(F,B,P){function W(g,M){g.prototype=Object.create(M.prototype),g.prototype.constructor=g,R(g,M)}function R(g,M){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},R(g,M)}var L=P(11),k=P(119),N=P(17),E=P(6),b=function(g){W(M,g);function M(){return g.apply(this,arguments)||this}var _=M.prototype;return _.execute=function(){var O=this;return N(O.rootNode,O.options,k)},M}(L),p={};function m(g,M){return M=E.assign({},p,M),new b(g,M).execute()}F.exports=m},function(F,B,P){"use strict";Object.defineProperty(B,"__esModule",{value:!0});var W=P(13);P.d(B,"contains",function(){return W.a}),P.d(B,"includes",function(){return W.a});var R=P(39);P.d(B,"difference",function(){return R.a});var L=P(40);P.d(B,"find",function(){return L.a});var k=P(41);P.d(B,"findIndex",function(){return k.a});var N=P(42);P.d(B,"firstValue",function(){return N.a});var E=P(43);P.d(B,"flatten",function(){return E.a});var b=P(44);P.d(B,"flattenDeep",function(){return b.a});var p=P(45);P.d(B,"getRange",function(){return p.a});var m=P(46);P.d(B,"pull",function(){return m.a});var g=P(24);P.d(B,"pullAt",function(){return g.a});var M=P(25);P.d(B,"reduce",function(){return M.a});var _=P(47);P.d(B,"remove",function(){return _.a});var S=P(48);P.d(B,"sortBy",function(){return S.a});var O=P(49);P.d(B,"union",function(){return O.a});var y=P(26);P.d(B,"uniq",function(){return y.a});var d=P(50);P.d(B,"valuesOfKey",function(){return d.a});var V=P(51);P.d(B,"head",function(){return V.a});var q=P(52);P.d(B,"last",function(){return q.a});var Y=P(53);P.d(B,"startsWith",function(){return Y.a});var X=P(54);P.d(B,"endsWith",function(){return X.a});var H=P(19);P.d(B,"filter",function(){return H.a});var J=P(55);P.d(B,"every",function(){return J.a});var nt=P(56);P.d(B,"some",function(){return nt.a});var tt=P(57);P.d(B,"group",function(){return tt.a});var at=P(28);P.d(B,"groupBy",function(){return at.a});var ct=P(27);P.d(B,"groupToMap",function(){return ct.a});var ht=P(58);P.d(B,"getWrapBehavior",function(){return ht.a});var Lt=P(59);P.d(B,"wrapBehavior",function(){return Lt.a});var St=P(60);P.d(B,"number2color",function(){return St.a});var Zt=P(61);P.d(B,"parseRadius",function(){return Zt.a});var Ut=P(62);P.d(B,"clamp",function(){return Ut.a});var Ot=P(63);P.d(B,"fixedBase",function(){return Ot.a});var Z=P(64);P.d(B,"isDecimal",function(){return Z.a});var st=P(65);P.d(B,"isEven",function(){return st.a});var Et=P(66);P.d(B,"isInteger",function(){return Et.a});var Bt=P(67);P.d(B,"isNegative",function(){return Bt.a});var Pt=P(68);P.d(B,"isNumberEqual",function(){return Pt.a});var Ht=P(69);P.d(B,"isOdd",function(){return Ht.a});var le=P(70);P.d(B,"isPositive",function(){return le.a});var ye=P(22);P.d(B,"max",function(){return ye.a});var Gt=P(71);P.d(B,"maxBy",function(){return Gt.a});var zt=P(23);P.d(B,"min",function(){return zt.a});var ue=P(72);P.d(B,"minBy",function(){return ue.a});var we=P(73);P.d(B,"mod",function(){return we.a});var de=P(74);P.d(B,"toDegree",function(){return de.a});var Mt=P(75);P.d(B,"toInteger",function(){return Mt.a});var ee=P(76);P.d(B,"toRadian",function(){return ee.a});var ce=P(77);P.d(B,"forIn",function(){return ce.a});var At=P(29);P.d(B,"has",function(){return At.a});var Wt=P(78);P.d(B,"hasKey",function(){return Wt.a});var fe=P(79);P.d(B,"hasValue",function(){return fe.a});var Ge=P(21);P.d(B,"keys",function(){return Ge.a});var Be=P(20);P.d(B,"isMatch",function(){return Be.a});var _r=P(15);P.d(B,"values",function(){return _r.a});var Ft=P(80);P.d(B,"lowerCase",function(){return Ft.a});var hr=P(81);P.d(B,"lowerFirst",function(){return hr.a});var rn=P(82);P.d(B,"substitute",function(){return rn.a});var pn=P(83);P.d(B,"upperCase",function(){return pn.a});var Sn=P(84);P.d(B,"upperFirst",function(){return Sn.a});var Bn=P(30);P.d(B,"getType",function(){return Bn.a});var Kn=P(85);P.d(B,"isArguments",function(){return Kn.a});var Nn=P(0);P.d(B,"isArray",function(){return Nn.a});var ra=P(1);P.d(B,"isArrayLike",function(){return ra.a});var Ea=P(86);P.d(B,"isBoolean",function(){return Ea.a});var na=P(87);P.d(B,"isDate",function(){return na.a});var ir=P(88);P.d(B,"isError",function(){return ir.a});var Tr=P(2);P.d(B,"isFunction",function(){return Tr.a});var Jr=P(89);P.d(B,"isFinite",function(){return Jr.a});var vn=P(7);P.d(B,"isNil",function(){return vn.a});var Tn=P(90);P.d(B,"isNull",function(){return Tn.a});var In=P(5);P.d(B,"isNumber",function(){return In.a});var kn=P(12);P.d(B,"isObject",function(){return kn.a});var Zn=P(14);P.d(B,"isObjectLike",function(){return Zn.a});var Yn=P(10);P.d(B,"isPlainObject",function(){return Yn.a});var Ra=P(31);P.d(B,"isPrototype",function(){return Ra.a});var gn=P(91);P.d(B,"isRegExp",function(){return gn.a});var zn=P(4);P.d(B,"isString",function(){return zn.a});var Un=P(3);P.d(B,"isType",function(){return Un.a});var _n=P(92);P.d(B,"isUndefined",function(){return _n.a});var aa=P(93);P.d(B,"isElement",function(){return aa.a});var $=P(94);P.d(B,"requestAnimationFrame",function(){return $.a});var Re=P(95);P.d(B,"clearAnimationFrame",function(){return Re.a});var be=P(96);P.d(B,"augment",function(){return be.a});var Ke=P(97);P.d(B,"clone",function(){return Ke.a});var Ze=P(98);P.d(B,"debounce",function(){return Ze.a});var Cr=P(32);P.d(B,"memoize",function(){return Cr.a});var Mr=P(99);P.d(B,"deepMix",function(){return Mr.a});var Vr=P(8);P.d(B,"each",function(){return Vr.a});var tn=P(100);P.d(B,"extend",function(){return tn.a});var jr=P(101);P.d(B,"indexOf",function(){return jr.a});var dt=P(102);P.d(B,"isEmpty",function(){return dt.a});var pt=P(33);P.d(B,"isEqual",function(){return pt.a});var U=P(103);P.d(B,"isEqualWith",function(){return U.a});var I=P(104);P.d(B,"map",function(){return I.a});var T=P(105);P.d(B,"mapValues",function(){return T.a});var Q=P(16);P.d(B,"mix",function(){return Q.a}),P.d(B,"assign",function(){return Q.a});var bt=P(106);P.d(B,"get",function(){return bt.a});var kt=P(107);P.d(B,"set",function(){return kt.a});var It=P(108);P.d(B,"pick",function(){return It.a});var Kt=P(109);P.d(B,"omit",function(){return Kt.a});var Pe=P(110);P.d(B,"throttle",function(){return Pe.a});var _e=P(111);P.d(B,"toArray",function(){return _e.a});var Qe=P(9);P.d(B,"toString",function(){return Qe.a});var Ir=P(112);P.d(B,"uniqueId",function(){return Ir.a});var sr=P(113);P.d(B,"noop",function(){return sr.a});var Hr=P(114);P.d(B,"identity",function(){return Hr.a});var xn=P(115);P.d(B,"size",function(){return xn.a});var ze=P(34);P.d(B,"measureTextWidth",function(){return ze.a});var ur=P(117);P.d(B,"getEllipsisText",function(){return ur.a});var Sr=P(118);P.d(B,"Cache",function(){return Sr.a})},function(F,B,P){"use strict";var W=P(19),R=P(13),L=function(k,N){return N===void 0&&(N=[]),Object(W.a)(k,function(E){return!Object(R.a)(N,E)})};B.a=L},function(F,B,P){"use strict";var W=P(2),R=P(20),L=P(0),k=P(10);function N(E,b){if(!Object(L.a)(E))return null;var p;if(Object(W.a)(b)&&(p=b),Object(k.a)(b)&&(p=function(g){return Object(R.a)(g,b)}),p){for(var m=0;m<E.length;m+=1)if(p(E[m]))return E[m]}return null}B.a=N},function(F,B,P){"use strict";function W(R,L,k){k===void 0&&(k=0);for(var N=k;N<R.length;N++)if(L(R[N],N))return N;return-1}B.a=W},function(F,B,P){"use strict";var W=P(7),R=P(0),L=function(k,N){for(var E=null,b=0;b<k.length;b++){var p=k[b],m=p[N];if(!Object(W.a)(m)){Object(R.a)(m)?E=m[0]:E=m;break}}return E};B.a=L},function(F,B,P){"use strict";var W=P(0),R=function(L){if(!Object(W.a)(L))return[];for(var k=[],N=0;N<L.length;N++)k=k.concat(L[N]);return k};B.a=R},function(F,B,P){"use strict";var W=P(0),R=function(L,k){if(k===void 0&&(k=[]),!Object(W.a)(L))k.push(L);else for(var N=0;N<L.length;N+=1)R(L[N],k);return k};B.a=R},function(F,B,P){"use strict";var W=P(0),R=P(22),L=P(23),k=function(N){var E=N.filter(function(M){return!isNaN(M)});if(!E.length)return{min:0,max:0};if(Object(W.a)(N[0])){for(var b=[],p=0;p<N.length;p++)b=b.concat(N[p]);E=b}var m=Object(R.a)(E),g=Object(L.a)(E);return{min:g,max:m}};B.a=k},function(F,B,P){"use strict";var W=Array.prototype,R=W.splice,L=W.indexOf,k=function(N){for(var E=[],b=1;b<arguments.length;b++)E[b-1]=arguments[b];for(var p=0;p<E.length;p++)for(var m=E[p],g=-1;(g=L.call(N,m))>-1;)R.call(N,g,1);return N};B.a=k},function(F,B,P){"use strict";var W=P(1),R=P(24),L=function(k,N){var E=[];if(!Object(W.a)(k))return E;for(var b=-1,p=[],m=k.length;++b<m;){var g=k[b];N(g,b,k)&&(E.push(g),p.push(b))}return Object(R.a)(k,p),E};B.a=L},function(F,B,P){"use strict";var W=P(0),R=P(4),L=P(2);function k(N,E){var b;if(Object(L.a)(E))b=function(m,g){return E(m)-E(g)};else{var p=[];Object(R.a)(E)?p.push(E):Object(W.a)(E)&&(p=E),b=function(m,g){for(var M=0;M<p.length;M+=1){var _=p[M];if(m[_]>g[_])return 1;if(m[_]<g[_])return-1}return 0}}return N.sort(b),N}B.a=k},function(F,B,P){"use strict";var W=P(26),R=function(){for(var L=[],k=0;k<arguments.length;k++)L[k]=arguments[k];return Object(W.a)([].concat.apply([],L))};B.a=R},function(F,B,P){"use strict";var W=P(0),R=P(7);B.a=function(L,k){for(var N=[],E={},b=0;b<L.length;b++){var p=L[b],m=p[k];if(!Object(R.a)(m)){Object(W.a)(m)||(m=[m]);for(var g=0;g<m.length;g++){var M=m[g];E[M]||(N.push(M),E[M]=!0)}}}return N}},function(F,B,P){"use strict";B.a=R;var W=P(1);function R(L){if(Object(W.a)(L))return L[0]}},function(F,B,P){"use strict";B.a=R;var W=P(1);function R(L){if(Object(W.a)(L)){var k=L;return k[k.length-1]}}},function(F,B,P){"use strict";var W=P(0),R=P(4);function L(k,N){return Object(W.a)(k)||Object(R.a)(k)?k[0]===N:!1}B.a=L},function(F,B,P){"use strict";var W=P(0),R=P(4);function L(k,N){return Object(W.a)(k)||Object(R.a)(k)?k[k.length-1]===N:!1}B.a=L},function(F,B,P){"use strict";var W=function(R,L){for(var k=0;k<R.length;k++)if(!L(R[k],k))return!1;return!0};B.a=W},function(F,B,P){"use strict";var W=function(R,L){for(var k=0;k<R.length;k++)if(L(R[k],k))return!0;return!1};B.a=W},function(F,B,P){"use strict";var W=P(27);B.a=function(R,L){if(!L)return[R];var k=Object(W.a)(R,L),N=[];for(var E in k)N.push(k[E]);return N}},function(F,B,P){"use strict";function W(R,L){return R["_wrap_"+L]}B.a=W},function(F,B,P){"use strict";function W(R,L){if(R["_wrap_"+L])return R["_wrap_"+L];var k=function(N){R[L](N)};return R["_wrap_"+L]=k,k}B.a=W},function(F,B,P){"use strict";var W={};function R(L){var k=W[L];if(!k){for(var N=L.toString(16),E=N.length;E<6;E++)N="0"+N;k="#"+N,W[L]=k}return k}B.a=R},function(F,B,P){"use strict";var W=P(0);function R(L){var k=0,N=0,E=0,b=0;return Object(W.a)(L)?L.length===1?k=N=E=b=L[0]:L.length===2?(k=E=L[0],N=b=L[1]):L.length===3?(k=L[0],N=b=L[1],E=L[2]):(k=L[0],N=L[1],E=L[2],b=L[3]):k=N=E=b=L,{r1:k,r2:N,r3:E,r4:b}}B.a=R},function(F,B,P){"use strict";var W=function(R,L,k){return R<L?L:R>k?k:R};B.a=W},function(F,B,P){"use strict";var W=function(R,L){var k=L.toString(),N=k.indexOf(".");if(N===-1)return Math.round(R);var E=k.substr(N+1).length;return E>20&&(E=20),parseFloat(R.toFixed(E))};B.a=W},function(F,B,P){"use strict";var W=P(5),R=function(L){return Object(W.a)(L)&&L%1!==0};B.a=R},function(F,B,P){"use strict";var W=P(5),R=function(L){return Object(W.a)(L)&&L%2===0};B.a=R},function(F,B,P){"use strict";var W=P(5),R=Number.isInteger?Number.isInteger:function(L){return Object(W.a)(L)&&L%1===0};B.a=R},function(F,B,P){"use strict";var W=P(5),R=function(L){return Object(W.a)(L)&&L<0};B.a=R},function(F,B,P){"use strict";B.a=R;var W=1e-5;function R(L,k,N){return N===void 0&&(N=W),Math.abs(L-k)<N}},function(F,B,P){"use strict";var W=P(5),R=function(L){return Object(W.a)(L)&&L%2!==0};B.a=R},function(F,B,P){"use strict";var W=P(5),R=function(L){return Object(W.a)(L)&&L>0};B.a=R},function(F,B,P){"use strict";var W=P(0),R=P(2);B.a=function(L,k){if(Object(W.a)(L)){for(var N,E=-1/0,b=0;b<L.length;b++){var p=L[b],m=Object(R.a)(k)?k(p):p[k];m>E&&(N=p,E=m)}return N}}},function(F,B,P){"use strict";var W=P(0),R=P(2);B.a=function(L,k){if(Object(W.a)(L)){for(var N,E=1/0,b=0;b<L.length;b++){var p=L[b],m=Object(R.a)(k)?k(p):p[k];m<E&&(N=p,E=m)}return N}}},function(F,B,P){"use strict";var W=function(R,L){return(R%L+L)%L};B.a=W},function(F,B,P){"use strict";var W=180/Math.PI,R=function(L){return W*L};B.a=R},function(F,B,P){"use strict";B.a=parseInt},function(F,B,P){"use strict";var W=Math.PI/180,R=function(L){return W*L};B.a=R},function(F,B,P){"use strict";var W=P(8);B.a=W.a},function(F,B,P){"use strict";var W=P(29);B.a=W.a},function(F,B,P){"use strict";var W=P(13),R=P(15);B.a=function(L,k){return Object(W.a)(Object(R.a)(L),k)}},function(F,B,P){"use strict";var W=P(9),R=function(L){return Object(W.a)(L).toLowerCase()};B.a=R},function(F,B,P){"use strict";var W=P(9),R=function(L){var k=Object(W.a)(L);return k.charAt(0).toLowerCase()+k.substring(1)};B.a=R},function(F,B,P){"use strict";function W(R,L){return!R||!L?R:R.replace(/\\?\{([^{}]+)\}/g,function(k,N){return k.charAt(0)==="\\"?k.slice(1):L[N]===void 0?"":L[N]})}B.a=W},function(F,B,P){"use strict";var W=P(9),R=function(L){return Object(W.a)(L).toUpperCase()};B.a=R},function(F,B,P){"use strict";var W=P(9),R=function(L){var k=Object(W.a)(L);return k.charAt(0).toUpperCase()+k.substring(1)};B.a=R},function(F,B,P){"use strict";var W=P(3),R=function(L){return Object(W.a)(L,"Arguments")};B.a=R},function(F,B,P){"use strict";var W=P(3),R=function(L){return Object(W.a)(L,"Boolean")};B.a=R},function(F,B,P){"use strict";var W=P(3),R=function(L){return Object(W.a)(L,"Date")};B.a=R},function(F,B,P){"use strict";var W=P(3),R=function(L){return Object(W.a)(L,"Error")};B.a=R},function(F,B,P){"use strict";var W=P(5);B.a=function(R){return Object(W.a)(R)&&isFinite(R)}},function(F,B,P){"use strict";var W=function(R){return R===null};B.a=W},function(F,B,P){"use strict";var W=P(3),R=function(L){return Object(W.a)(L,"RegExp")};B.a=R},function(F,B,P){"use strict";var W=function(R){return R===void 0};B.a=W},function(F,B,P){"use strict";var W=function(R){return R instanceof Element||R instanceof HTMLDocument};B.a=W},function(F,B,P){"use strict";B.a=W;function W(R){var L=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(k){return setTimeout(k,16)};return L(R)}},function(F,B,P){"use strict";B.a=W;function W(R){var L=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;L(R)}},function(F,B,P){"use strict";var W=P(16),R=P(2),L=function(){for(var k=[],N=0;N<arguments.length;N++)k[N]=arguments[N];for(var E=k[0],b=1;b<k.length;b++){var p=k[b];Object(R.a)(p)&&(p=p.prototype),Object(W.a)(E.prototype,p)}};B.a=L},function(F,B,P){"use strict";var W=P(0),R=function(L){if(typeof L!="object"||L===null)return L;var k;if(Object(W.a)(L)){k=[];for(var N=0,E=L.length;N<E;N++)typeof L[N]=="object"&&L[N]!=null?k[N]=R(L[N]):k[N]=L[N]}else{k={};for(var b in L)typeof L[b]=="object"&&L[b]!=null?k[b]=R(L[b]):k[b]=L[b]}return k};B.a=R},function(F,B,P){"use strict";function W(R,L,k){var N;return function(){var E=this,b=arguments,p=function(){N=null,k||R.apply(E,b)},m=k&&!N;clearTimeout(N),N=setTimeout(p,L),m&&R.apply(E,b)}}B.a=W},function(F,B,P){"use strict";var W=P(0),R=P(10),L=5;function k(E,b,p,m){p=p||0,m=m||L;for(var g in b)if(b.hasOwnProperty(g)){var M=b[g];M!==null&&Object(R.a)(M)?(Object(R.a)(E[g])||(E[g]={}),p<m?k(E[g],M,p+1,m):E[g]=b[g]):Object(W.a)(M)?(E[g]=[],E[g]=E[g].concat(M)):M!==void 0&&(E[g]=M)}}var N=function(E){for(var b=[],p=1;p<arguments.length;p++)b[p-1]=arguments[p];for(var m=0;m<b.length;m+=1)k(E,b[m]);return E};B.a=N},function(F,B,P){"use strict";var W=P(16),R=P(2),L=function(k,N,E,b){Object(R.a)(N)||(E=N,N=k,k=function(){});var p=Object.create?function(g,M){return Object.create(g,{constructor:{value:M}})}:function(g,M){function _(){}_.prototype=g;var S=new _;return S.constructor=M,S},m=p(N.prototype,k);return k.prototype=Object(W.a)(m,k.prototype),k.superclass=p(N.prototype,N),Object(W.a)(m,E),Object(W.a)(k,b),k};B.a=L},function(F,B,P){"use strict";var W=P(1),R=function(L,k){if(!Object(W.a)(L))return-1;var N=Array.prototype.indexOf;if(N)return N.call(L,k);for(var E=-1,b=0;b<L.length;b++)if(L[b]===k){E=b;break}return E};B.a=R},function(F,B,P){"use strict";var W=P(7),R=P(1),L=P(30),k=P(31),N=Object.prototype.hasOwnProperty;function E(b){if(Object(W.a)(b))return!0;if(Object(R.a)(b))return!b.length;var p=Object(L.a)(b);if(p==="Map"||p==="Set")return!b.size;if(Object(k.a)(b))return!Object.keys(b).length;for(var m in b)if(N.call(b,m))return!1;return!0}B.a=E},function(F,B,P){"use strict";var W=P(2),R=P(33);B.a=function(L,k,N){return Object(W.a)(N)?!!N(L,k):Object(R.a)(L,k)}},function(F,B,P){"use strict";var W=P(1),R=function(L,k){if(!Object(W.a)(L))return L;for(var N=[],E=0;E<L.length;E++){var b=L[E];N.push(k(b,E))}return N};B.a=R},function(F,B,P){"use strict";var W=P(7),R=P(12),L=function(k){return k};B.a=function(k,N){N===void 0&&(N=L);var E={};return Object(R.a)(k)&&!Object(W.a)(k)&&Object.keys(k).forEach(function(b){E[b]=N(k[b],b)}),E}},function(F,B,P){"use strict";var W=P(4);B.a=function(R,L,k){for(var N=0,E=Object(W.a)(L)?L.split("."):L;R&&N<E.length;)R=R[E[N++]];return R===void 0||N<E.length?k:R}},function(F,B,P){"use strict";var W=P(12),R=P(4),L=P(5);B.a=function(k,N,E){var b=k,p=Object(R.a)(N)?N.split("."):N;return p.forEach(function(m,g){g<p.length-1?(Object(W.a)(b[m])||(b[m]=Object(L.a)(p[g+1])?[]:{}),b=b[m]):b[m]=E}),k}},function(F,B,P){"use strict";var W=P(8),R=P(10),L=Object.prototype.hasOwnProperty;B.a=function(k,N){if(k===null||!Object(R.a)(k))return{};var E={};return Object(W.a)(N,function(b){L.call(k,b)&&(E[b]=k[b])}),E}},function(F,B,P){"use strict";var W=P(25);B.a=function(R,L){return Object(W.a)(R,function(k,N,E){return L.includes(E)||(k[E]=N),k},{})}},function(F,B,P){"use strict";B.a=function(W,R,L){var k,N,E,b,p=0;L||(L={});var m=function(){p=L.leading===!1?0:Date.now(),k=null,b=W.apply(N,E),k||(N=E=null)},g=function(){var M=Date.now();!p&&L.leading===!1&&(p=M);var _=R-(M-p);return N=this,E=arguments,_<=0||_>R?(k&&(clearTimeout(k),k=null),p=M,b=W.apply(N,E),k||(N=E=null)):!k&&L.trailing!==!1&&(k=setTimeout(m,_)),b};return g.cancel=function(){clearTimeout(k),p=0,k=N=E=null},g}},function(F,B,P){"use strict";var W=P(1);B.a=function(R){return Object(W.a)(R)?Array.prototype.slice.call(R):[]}},function(F,B,P){"use strict";var W={};B.a=function(R){return R=R||"g",W[R]?W[R]+=1:W[R]=1,R+W[R]}},function(F,B,P){"use strict";B.a=function(){}},function(F,B,P){"use strict";B.a=function(W){return W}},function(F,B,P){"use strict";B.a=L;var W=P(7),R=P(1);function L(k){return Object(W.a)(k)?0:Object(R.a)(k)?k.length:Object.keys(k).length}},function(F,B,P){"use strict";B.a=Y;var W=function(Ot,Z){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,Et){st.__proto__=Et}||function(st,Et){for(var Bt in Et)Object.prototype.hasOwnProperty.call(Et,Bt)&&(st[Bt]=Et[Bt])},W(Ot,Z)};function R(Ot,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");W(Ot,Z);function st(){this.constructor=Ot}Ot.prototype=Z===null?Object.create(Z):(st.prototype=Z.prototype,new st)}var L=function(){return L=Object.assign||function(Z){for(var st,Et=1,Bt=arguments.length;Et<Bt;Et++){st=arguments[Et];for(var Pt in st)Object.prototype.hasOwnProperty.call(st,Pt)&&(Z[Pt]=st[Pt])}return Z},L.apply(this,arguments)};function k(Ot,Z){var st={};for(var Et in Ot)Object.prototype.hasOwnProperty.call(Ot,Et)&&Z.indexOf(Et)<0&&(st[Et]=Ot[Et]);if(Ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,Et=Object.getOwnPropertySymbols(Ot);Bt<Et.length;Bt++)Z.indexOf(Et[Bt])<0&&Object.prototype.propertyIsEnumerable.call(Ot,Et[Bt])&&(st[Et[Bt]]=Ot[Et[Bt]]);return st}function N(Ot,Z,st,Et){var Bt=arguments.length,Pt=Bt<3?Z:Et===null?Et=Object.getOwnPropertyDescriptor(Z,st):Et,Ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pt=Reflect.decorate(Ot,Z,st,Et);else for(var le=Ot.length-1;le>=0;le--)(Ht=Ot[le])&&(Pt=(Bt<3?Ht(Pt):Bt>3?Ht(Z,st,Pt):Ht(Z,st))||Pt);return Bt>3&&Pt&&Object.defineProperty(Z,st,Pt),Pt}function E(Ot,Z){return function(st,Et){Z(st,Et,Ot)}}function b(Ot,Z,st,Et,Bt,Pt){function Ht(At){if(At!==void 0&&typeof At!="function")throw new TypeError("Function expected");return At}for(var le=Et.kind,ye=le==="getter"?"get":le==="setter"?"set":"value",Gt=!Z&&Ot?Et.static?Ot:Ot.prototype:null,zt=Z||(Gt?Object.getOwnPropertyDescriptor(Gt,Et.name):{}),ue,we=!1,de=st.length-1;de>=0;de--){var Mt={};for(var ee in Et)Mt[ee]=ee==="access"?{}:Et[ee];for(var ee in Et.access)Mt.access[ee]=Et.access[ee];Mt.addInitializer=function(At){if(we)throw new TypeError("Cannot add initializers after decoration has completed");Pt.push(Ht(At||null))};var ce=(0,st[de])(le==="accessor"?{get:zt.get,set:zt.set}:zt[ye],Mt);if(le==="accessor"){if(ce===void 0)continue;if(ce===null||typeof ce!="object")throw new TypeError("Object expected");(ue=Ht(ce.get))&&(zt.get=ue),(ue=Ht(ce.set))&&(zt.set=ue),(ue=Ht(ce.init))&&Bt.push(ue)}else(ue=Ht(ce))&&(le==="field"?Bt.push(ue):zt[ye]=ue)}Gt&&Object.defineProperty(Gt,Et.name,zt),we=!0}function p(Ot,Z,st){for(var Et=arguments.length>2,Bt=0;Bt<Z.length;Bt++)st=Et?Z[Bt].call(Ot,st):Z[Bt].call(Ot);return Et?st:void 0}function m(Ot){return typeof Ot=="symbol"?Ot:"".concat(Ot)}function g(Ot,Z,st){return typeof Z=="symbol"&&(Z=Z.description?"[".concat(Z.description,"]"):""),Object.defineProperty(Ot,"name",{configurable:!0,value:st?"".concat(st," ",Z):Z})}function M(Ot,Z){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ot,Z)}function _(Ot,Z,st,Et){function Bt(Pt){return Pt instanceof st?Pt:new st(function(Ht){Ht(Pt)})}return new(st||(st=Promise))(function(Pt,Ht){function le(zt){try{Gt(Et.next(zt))}catch(ue){Ht(ue)}}function ye(zt){try{Gt(Et.throw(zt))}catch(ue){Ht(ue)}}function Gt(zt){zt.done?Pt(zt.value):Bt(zt.value).then(le,ye)}Gt((Et=Et.apply(Ot,Z||[])).next())})}function S(Ot,Z){var st={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Et,Bt,Pt,Ht;return Ht={next:le(0),throw:le(1),return:le(2)},typeof Symbol=="function"&&(Ht[Symbol.iterator]=function(){return this}),Ht;function le(Gt){return function(zt){return ye([Gt,zt])}}function ye(Gt){if(Et)throw new TypeError("Generator is already executing.");for(;Ht&&(Ht=0,Gt[0]&&(st=0)),st;)try{if(Et=1,Bt&&(Pt=Gt[0]&2?Bt.return:Gt[0]?Bt.throw||((Pt=Bt.return)&&Pt.call(Bt),0):Bt.next)&&!(Pt=Pt.call(Bt,Gt[1])).done)return Pt;switch(Bt=0,Pt&&(Gt=[Gt[0]&2,Pt.value]),Gt[0]){case 0:case 1:Pt=Gt;break;case 4:return st.label++,{value:Gt[1],done:!1};case 5:st.label++,Bt=Gt[1],Gt=[0];continue;case 7:Gt=st.ops.pop(),st.trys.pop();continue;default:if(Pt=st.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(Gt[0]===6||Gt[0]===2)){st=0;continue}if(Gt[0]===3&&(!Pt||Gt[1]>Pt[0]&&Gt[1]<Pt[3])){st.label=Gt[1];break}if(Gt[0]===6&&st.label<Pt[1]){st.label=Pt[1],Pt=Gt;break}if(Pt&&st.label<Pt[2]){st.label=Pt[2],st.ops.push(Gt);break}Pt[2]&&st.ops.pop(),st.trys.pop();continue}Gt=Z.call(Ot,st)}catch(zt){Gt=[6,zt],Bt=0}finally{Et=Pt=0}if(Gt[0]&5)throw Gt[1];return{value:Gt[0]?Gt[1]:void 0,done:!0}}}var O=Object.create?function(Ot,Z,st,Et){Et===void 0&&(Et=st);var Bt=Object.getOwnPropertyDescriptor(Z,st);(!Bt||("get"in Bt?!Z.__esModule:Bt.writable||Bt.configurable))&&(Bt={enumerable:!0,get:function(){return Z[st]}}),Object.defineProperty(Ot,Et,Bt)}:function(Ot,Z,st,Et){Et===void 0&&(Et=st),Ot[Et]=Z[st]};function y(Ot,Z){for(var st in Ot)st!=="default"&&!Object.prototype.hasOwnProperty.call(Z,st)&&O(Z,Ot,st)}function d(Ot){var Z=typeof Symbol=="function"&&Symbol.iterator,st=Z&&Ot[Z],Et=0;if(st)return st.call(Ot);if(Ot&&typeof Ot.length=="number")return{next:function(){return Ot&&Et>=Ot.length&&(Ot=void 0),{value:Ot&&Ot[Et++],done:!Ot}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(Ot,Z){var st=typeof Symbol=="function"&&Ot[Symbol.iterator];if(!st)return Ot;var Et=st.call(Ot),Bt,Pt=[],Ht;try{for(;(Z===void 0||Z-- >0)&&!(Bt=Et.next()).done;)Pt.push(Bt.value)}catch(le){Ht={error:le}}finally{try{Bt&&!Bt.done&&(st=Et.return)&&st.call(Et)}finally{if(Ht)throw Ht.error}}return Pt}function q(){for(var Ot=[],Z=0;Z<arguments.length;Z++)Ot=Ot.concat(V(arguments[Z]));return Ot}function Y(){for(var Ot=0,Z=0,st=arguments.length;Z<st;Z++)Ot+=arguments[Z].length;for(var Et=Array(Ot),Bt=0,Z=0;Z<st;Z++)for(var Pt=arguments[Z],Ht=0,le=Pt.length;Ht<le;Ht++,Bt++)Et[Bt]=Pt[Ht];return Et}function X(Ot,Z,st){if(st||arguments.length===2)for(var Et=0,Bt=Z.length,Pt;Et<Bt;Et++)(Pt||!(Et in Z))&&(Pt||(Pt=Array.prototype.slice.call(Z,0,Et)),Pt[Et]=Z[Et]);return Ot.concat(Pt||Array.prototype.slice.call(Z))}function H(Ot){return this instanceof H?(this.v=Ot,this):new H(Ot)}function J(Ot,Z,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et=st.apply(Ot,Z||[]),Bt,Pt=[];return Bt={},Ht("next"),Ht("throw"),Ht("return"),Bt[Symbol.asyncIterator]=function(){return this},Bt;function Ht(we){Et[we]&&(Bt[we]=function(de){return new Promise(function(Mt,ee){Pt.push([we,de,Mt,ee])>1||le(we,de)})})}function le(we,de){try{ye(Et[we](de))}catch(Mt){ue(Pt[0][3],Mt)}}function ye(we){we.value instanceof H?Promise.resolve(we.value.v).then(Gt,zt):ue(Pt[0][2],we)}function Gt(we){le("next",we)}function zt(we){le("throw",we)}function ue(we,de){we(de),Pt.shift(),Pt.length&&le(Pt[0][0],Pt[0][1])}}function nt(Ot){var Z,st;return Z={},Et("next"),Et("throw",function(Bt){throw Bt}),Et("return"),Z[Symbol.iterator]=function(){return this},Z;function Et(Bt,Pt){Z[Bt]=Ot[Bt]?function(Ht){return(st=!st)?{value:H(Ot[Bt](Ht)),done:!1}:Pt?Pt(Ht):Ht}:Pt}}function tt(Ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=Ot[Symbol.asyncIterator],st;return Z?Z.call(Ot):(Ot=typeof d=="function"?d(Ot):Ot[Symbol.iterator](),st={},Et("next"),Et("throw"),Et("return"),st[Symbol.asyncIterator]=function(){return this},st);function Et(Pt){st[Pt]=Ot[Pt]&&function(Ht){return new Promise(function(le,ye){Ht=Ot[Pt](Ht),Bt(le,ye,Ht.done,Ht.value)})}}function Bt(Pt,Ht,le,ye){Promise.resolve(ye).then(function(Gt){Pt({value:Gt,done:le})},Ht)}}function at(Ot,Z){return Object.defineProperty?Object.defineProperty(Ot,"raw",{value:Z}):Ot.raw=Z,Ot}var ct=Object.create?function(Ot,Z){Object.defineProperty(Ot,"default",{enumerable:!0,value:Z})}:function(Ot,Z){Ot.default=Z};function ht(Ot){if(Ot&&Ot.__esModule)return Ot;var Z={};if(Ot!=null)for(var st in Ot)st!=="default"&&Object.prototype.hasOwnProperty.call(Ot,st)&&O(Z,Ot,st);return ct(Z,Ot),Z}function Lt(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function St(Ot,Z,st,Et){if(st==="a"&&!Et)throw new TypeError("Private accessor was defined without a getter");if(typeof Z=="function"?Ot!==Z||!Et:!Z.has(Ot))throw new TypeError("Cannot read private member from an object whose class did not declare it");return st==="m"?Et:st==="a"?Et.call(Ot):Et?Et.value:Z.get(Ot)}function Zt(Ot,Z,st,Et,Bt){if(Et==="m")throw new TypeError("Private method is not writable");if(Et==="a"&&!Bt)throw new TypeError("Private accessor was defined without a setter");if(typeof Z=="function"?Ot!==Z||!Bt:!Z.has(Ot))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Et==="a"?Bt.call(Ot,st):Bt?Bt.value=st:Z.set(Ot,st),st}function Ut(Ot,Z){if(Z===null||typeof Z!="object"&&typeof Z!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Ot=="function"?Z===Ot:Ot.has(Z)}},function(F,B,P){"use strict";var W=P(4),R=P(9),L=P(34);B.a=function(k,N,E,b){b===void 0&&(b="...");var p=16,m=Object(L.a)(b,E),g=Object(W.a)(k)?k:Object(R.a)(k),M=N,_=[],S,O;if(Object(L.a)(k,E)<=N)return k;for(;S=g.substr(0,p),O=Object(L.a)(S,E),!(O+m>M&&O>M);)if(_.push(S),M-=O,g=g.substr(p),!g)return _.join("");for(;S=g.substr(0,1),O=Object(L.a)(S,E),!(O+m>M);)if(_.push(S),M-=O,g=g.substr(1),!g)return _.join("");return""+_.join("")+b}},function(F,B,P){"use strict";var W=function(){function R(){this.map={}}return R.prototype.has=function(L){return this.map[L]!==void 0},R.prototype.get=function(L,k){var N=this.map[L];return N===void 0?k:N},R.prototype.set=function(L,k){this.map[L]=k},R.prototype.clear=function(){this.map={}},R.prototype.delete=function(L){delete this.map[L]},R.prototype.size=function(){return Object.keys(this.map).length},R}();B.a=W},function(F,B){function P(E,b,p,m){m===void 0&&(m=[]);var g=this;g.w=E||0,g.h=b||0,g.y=p||0,g.x=0,g.c=m||[],g.cs=m.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}P.fromNode=function(E,b){if(!E)return null;var p=[];return E.children.forEach(function(m){p.push(P.fromNode(m,b))}),b?new P(E.height,E.width,E.x,p):new P(E.width,E.height,E.y,p)};function W(E,b,p){p?E.y+=b:E.x+=b,E.children.forEach(function(m){W(m,b,p)})}function R(E,b){var p=b?E.y:E.x;return E.children.forEach(function(m){p=Math.min(R(m,b),p)}),p}function L(E,b){var p=R(E,b);W(E,-p,b)}function k(E,b,p){p?b.y=E.x:b.x=E.x,E.c.forEach(function(m,g){k(m,b.children[g],p)})}function N(E,b,p){p===void 0&&(p=0),b?(E.x=p,p+=E.width):(E.y=p,p+=E.height),E.children.forEach(function(m){N(m,b,p)})}F.exports=function(E,b){b===void 0&&(b={});var p=b.isHorizontal;function m(tt){if(tt.cs===0){g(tt);return}m(tt.c[0]);for(var at=J(y(tt.c[0].el),0,null),ct=1;ct<tt.cs;++ct){m(tt.c[ct]);var ht=y(tt.c[ct].er);M(tt,ct,at),at=J(ht,ct,at)}q(tt),g(tt)}function g(tt){tt.cs===0?(tt.el=tt,tt.er=tt,tt.msel=tt.mser=0):(tt.el=tt.c[0].el,tt.msel=tt.c[0].msel,tt.er=tt.c[tt.cs-1].er,tt.mser=tt.c[tt.cs-1].mser)}function M(tt,at,ct){for(var ht=tt.c[at-1],Lt=ht.mod,St=tt.c[at],Zt=St.mod;ht!==null&&St!==null;){y(ht)>ct.low&&(ct=ct.nxt);var Ut=Lt+ht.prelim+ht.w-(Zt+St.prelim);Ut>0&&(Zt+=Ut,_(tt,at,ct.index,Ut));var Ot=y(ht),Z=y(St);Ot<=Z&&(ht=O(ht),ht!==null&&(Lt+=ht.mod)),Ot>=Z&&(St=S(St),St!==null&&(Zt+=St.mod))}!ht&&St?d(tt,at,St,Zt):ht&&!St&&V(tt,at,ht,Lt)}function _(tt,at,ct,ht){tt.c[at].mod+=ht,tt.c[at].msel+=ht,tt.c[at].mser+=ht,X(tt,at,ct,ht)}function S(tt){return tt.cs===0?tt.tl:tt.c[0]}function O(tt){return tt.cs===0?tt.tr:tt.c[tt.cs-1]}function y(tt){return tt.y+tt.h}function d(tt,at,ct,ht){var Lt=tt.c[0].el;Lt.tl=ct;var St=ht-ct.mod-tt.c[0].msel;Lt.mod+=St,Lt.prelim-=St,tt.c[0].el=tt.c[at].el,tt.c[0].msel=tt.c[at].msel}function V(tt,at,ct,ht){var Lt=tt.c[at].er;Lt.tr=ct;var St=ht-ct.mod-tt.c[at].mser;Lt.mod+=St,Lt.prelim-=St,tt.c[at].er=tt.c[at-1].er,tt.c[at].mser=tt.c[at-1].mser}function q(tt){tt.prelim=(tt.c[0].prelim+tt.c[0].mod+tt.c[tt.cs-1].mod+tt.c[tt.cs-1].prelim+tt.c[tt.cs-1].w)/2-tt.w/2}function Y(tt,at){at+=tt.mod,tt.x=tt.prelim+at,H(tt);for(var ct=0;ct<tt.cs;ct++)Y(tt.c[ct],at)}function X(tt,at,ct,ht){if(ct!==at-1){var Lt=at-ct;tt.c[ct+1].shift+=ht/Lt,tt.c[at].shift-=ht/Lt,tt.c[at].change-=ht-ht/Lt}}function H(tt){for(var at=0,ct=0,ht=0;ht<tt.cs;ht++)at+=tt.c[ht].shift,ct+=at+tt.c[ht].change,tt.c[ht].mod+=ct}function J(tt,at,ct){for(;ct!==null&&tt>=ct.low;)ct=ct.nxt;return{low:tt,index:at,nxt:ct}}N(E,p);var nt=P.fromNode(E,p);return m(nt),Y(nt,0),k(nt,E,p),L(E,p),E}},function(F,B,P){function W(g,M){g.prototype=Object.create(M.prototype),g.prototype.constructor=g,R(g,M)}function R(g,M){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},R(g,M)}var L=P(11),k=P(121),N=P(17),E=P(6),b=function(g){W(M,g);function M(){return g.apply(this,arguments)||this}var _=M.prototype;return _.execute=function(){var O=this;return O.rootNode.width=0,N(O.rootNode,O.options,k)},M}(L),p={};function m(g,M){return M=E.assign({},p,M),new b(g,M).execute()}F.exports=m},function(F,B,P){var W=P(6);function R(N,E){N===void 0&&(N=0),E===void 0&&(E=[]);var b=this;b.x=b.y=0,b.leftChild=b.rightChild=null,b.height=0,b.children=E}var L={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function k(N,E,b){b?(E.x=N.x,E.y=N.y):(E.x=N.y,E.y=N.x),N.children.forEach(function(p,m){k(p,E.children[m],b)})}F.exports=function(N,E){E===void 0&&(E={}),E=W.assign({},L,E);var b=0;function p(S){if(!S)return null;S.width=0,S.depth&&S.depth>b&&(b=S.depth);var O=S.children,y=O.length,d=new R(S.height,[]);return O.forEach(function(V,q){var Y=p(V);d.children.push(Y),q===0&&(d.leftChild=Y),q===y-1&&(d.rightChild=Y)}),d.originNode=S,d.isLeaf=S.isLeaf(),d}function m(S){if(S.isLeaf||S.children.length===0)S.drawingDepth=b;else{var O=S.children.map(function(d){return m(d)}),y=Math.min.apply(null,O);S.drawingDepth=y-1}return S.drawingDepth}var g;function M(S){S.x=S.drawingDepth*E.rankSep,S.isLeaf?(S.y=0,g&&(S.y=g.y+g.height+E.nodeSep,S.originNode.parent!==g.originNode.parent&&(S.y+=E.subTreeSep)),g=S):(S.children.forEach(function(O){M(O)}),S.y=(S.leftChild.y+S.rightChild.y)/2)}var _=p(N);return m(_),M(_),k(_,N,E.isHorizontal),N}},function(F,B,P){function W(_,S){_.prototype=Object.create(S.prototype),_.prototype.constructor=_,R(_,S)}function R(_,S){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,d){return y.__proto__=d,y},R(_,S)}var L=P(11),k=P(123),N=P(35),E=P(6),b=["LR","RL","H"],p=b[0],m=function(_){W(S,_);function S(){return _.apply(this,arguments)||this}var O=S.prototype;return O.execute=function(){var d=this,V=d.options,q=d.rootNode;V.isHorizontal=!0;var Y=V.indent,X=Y===void 0?20:Y,H=V.dropCap,J=H===void 0?!0:H,nt=V.direction,tt=nt===void 0?p:nt,at=V.align;if(tt&&b.indexOf(tt)===-1)throw new TypeError("Invalid direction: "+tt);if(tt===b[0])k(q,X,J,at);else if(tt===b[1])k(q,X,J,at),q.right2left();else if(tt===b[2]){var ct=N(q,V),ht=ct.left,Lt=ct.right;k(ht,X,J,at),ht.right2left(),k(Lt,X,J,at);var St=ht.getBoundingBox();Lt.translate(St.width,0),q.x=Lt.x-q.width/2}return q},S}(L),g={};function M(_,S){return S=E.assign({},g,S),new m(_,S).execute()}F.exports=M},function(F,B,P){var W=P(6);function R(L,k,N,E,b){var p=typeof N=="function"?N(L):N*L.depth;if(!E)try{if(L.id===L.parent.children[0].id){L.x+=p,L.y=k?k.y:0;return}}catch(M){}if(L.x+=p,k){if(L.y=k.y+W.getHeight(k,L,b),k.parent&&L.parent.id!==k.parent.id){var m=k.parent,g=m.y+W.getHeight(m,L,b);L.y=g>L.y?g:L.y}}else L.y=0}F.exports=function(L,k,N,E){var b=null;L.eachNode(function(p){R(p,b,k,N,E),b=p})}},function(F,B,P){function W(g,M){g.prototype=Object.create(M.prototype),g.prototype.constructor=g,R(g,M)}function R(g,M){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},R(g,M)}var L=P(11),k=P(125),N=P(17),E=P(6),b=function(g){W(M,g);function M(){return g.apply(this,arguments)||this}var _=M.prototype;return _.execute=function(){var O=this;return N(O.rootNode,O.options,k)},M}(L),p={};function m(g,M){return M=E.assign({},p,M),new b(g,M).execute()}F.exports=m},function(F,B,P){var W=P(6);function R(N,E){var b=0;return N.children.length?N.children.forEach(function(p){b+=R(p,E)}):b=N.height,N._subTreeSep=E.getSubTreeSep(N.data),N.totalHeight=Math.max(N.height,b)+2*N._subTreeSep,N.totalHeight}function L(N){var E=N.children,b=E.length;if(b){E.forEach(function(S){L(S)});var p=E[0],m=E[b-1],g=m.y-p.y+m.height,M=0;if(E.forEach(function(S){M+=S.totalHeight}),g>N.height)N.y=p.y+g/2-N.height/2;else if(E.length!==1||N.height>M){var _=N.y+(N.height-g)/2-p.y;E.forEach(function(S){S.translate(0,_)})}else N.y=(p.y+p.height/2+m.y+m.height/2)/2-N.height/2}}var k={getSubTreeSep:function(){return 0}};F.exports=function(N,E){E===void 0&&(E={}),E=W.assign({},k,E),N.parent={x:0,width:0,height:0,y:0},N.BFTraverse(function(b){b.x=b.parent.x+b.parent.width}),N.parent=null,R(N,E),N.startY=0,N.y=N.totalHeight/2-N.height/2,N.eachNode(function(b){var p=b.children,m=p.length;if(m){var g=p[0];if(g.startY=b.startY+b._subTreeSep,m===1)g.y=b.y+b.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var M=1;M<m;M++){var _=p[M];_.startY=p[M-1].startY+p[M-1].totalHeight,_.y=_.startY+_.totalHeight/2-_.height/2}}}}),L(N)}}])})},83360:function(Le,F,B){"use strict";var P=this&&this.__createBinding||(Object.create?function(L,k,N,E){E===void 0&&(E=N);var b=Object.getOwnPropertyDescriptor(k,N);(!b||("get"in b?!k.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return k[N]}}),Object.defineProperty(L,E,b)}:function(L,k,N,E){E===void 0&&(E=N),L[E]=k[N]}),W=this&&this.__exportStar||function(L,k){for(var N in L)N!=="default"&&!Object.prototype.hasOwnProperty.call(k,N)&&P(k,L,N)};Object.defineProperty(F,"__esModule",{value:!0}),F.getLayoutByName=F.unRegisterLayout=F.registerLayout=void 0;var R=B(95326);Object.defineProperty(F,"registerLayout",{enumerable:!0,get:function(){return R.registerLayout}}),Object.defineProperty(F,"unRegisterLayout",{enumerable:!0,get:function(){return R.unRegisterLayout}}),Object.defineProperty(F,"getLayoutByName",{enumerable:!0,get:function(){return R.getLayoutByName}}),W(B(2584),F)},62329:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Base=void 0;var B=function(){function P(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return P.prototype.layout=function(W){return this.init(W),this.execute(!0)},P.prototype.init=function(W){this.nodes=W.nodes||[],this.edges=W.edges||[],this.combos=W.combos||[],this.comboEdges=W.comboEdges||[],this.hiddenNodes=W.hiddenNodes||[],this.hiddenEdges=W.hiddenEdges||[],this.hiddenCombos=W.hiddenCombos||[],this.vedges=W.vedges||[]},P.prototype.execute=function(W){},P.prototype.executeWithWorker=function(){},P.prototype.getDefaultCfg=function(){return{}},P.prototype.updateCfg=function(W){W&&Object.assign(this,W)},P.prototype.getType=function(){return"base"},P.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},P}();F.Base=B},64885:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var b=function(p,m){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,M){g.__proto__=M}||function(g,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(g[_]=M[_])},b(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.CircularLayout=void 0;var W=B(62329),R=B(49784);function L(b,p,m,g){b.forEach(function(M,_){b[_].children=[],b[_].parent=[]}),g?p.forEach(function(M){var _=(0,R.getEdgeTerminal)(M,"source"),S=(0,R.getEdgeTerminal)(M,"target"),O=0;_&&(O=m[_]);var y=0;S&&(y=m[S]);var d=b[O].children,V=b[y].parent;d.push(b[y].id),V.push(b[O].id)}):p.forEach(function(M){var _=(0,R.getEdgeTerminal)(M,"source"),S=(0,R.getEdgeTerminal)(M,"target"),O=0;_&&(O=m[_]);var y=0;S&&(y=m[S]);var d=b[O].children,V=b[y].children;d.push(b[y].id),V.push(b[O].id)})}function k(b,p,m){for(var g=m.length,M=0;M<g;M++){var _=(0,R.getEdgeTerminal)(m[M],"source"),S=(0,R.getEdgeTerminal)(m[M],"target");if(b.id===_&&p.id===S||p.id===_&&b.id===S)return!0}return!1}function N(b,p){var m=b.degree,g=p.degree;return m<g?-1:m>g?1:0}var E=function(b){P(p,b);function p(m){var g=b.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(m),g}return p.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},p.prototype.execute=function(){var m,g=this,M=g.nodes,_=g.edges,S=M.length;if(S===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var O=g.center;if(S===1){M[0].x=O[0],M[0].y=O[1],g.onLayoutEnd&&g.onLayoutEnd();return}var y=g.radius,d=g.startRadius,V=g.endRadius,q=g.divisions,Y=g.startAngle,X=g.endAngle,H=g.angleRatio,J=g.ordering,nt=g.clockwise,tt=g.nodeSpacing,at=g.nodeSize,ct=(X-Y)/S,ht={};M.forEach(function(le,ye){ht[le.id]=ye}),g.nodeMap=ht;var Lt=(0,R.getDegree)(M.length,ht,_);if(g.degrees=Lt,tt){var St=(0,R.getFuncByUnknownType)(10,tt),Zt=(0,R.getFuncByUnknownType)(10,at),Ut=-1/0;M.forEach(function(le){var ye=Zt(le);Ut<ye&&(Ut=ye)});var Ot=0;M.forEach(function(le,ye){ye===0?Ot+=Ut||10:Ot+=(St(le)||0)+(Ut||10)}),y=Ot/(2*Math.PI)}else!y&&!d&&!V?y=g.height>g.width?g.width/2:g.height/2:!d&&V?d=V:d&&!V&&(V=d);var Z=ct*H,st=[];J==="topology"?st=g.topologyOrdering():J==="topology-directed"?st=g.topologyOrdering(!0):J==="degree"?st=g.degreeOrdering():st=M;for(var Et=Math.ceil(S/q),Bt=0;Bt<S;++Bt){var Pt=y;!Pt&&d!==null&&V!==null&&(Pt=d+Bt*(V-d)/(S-1)),Pt||(Pt=10+Bt*100/(S-1));var Ht=Y+Bt%Et*Z+2*Math.PI/q*Math.floor(Bt/Et);nt||(Ht=X-Bt%Et*Z-2*Math.PI/q*Math.floor(Bt/Et)),st[Bt].x=O[0]+Math.cos(Ht)*Pt,st[Bt].y=O[1]+Math.sin(Ht)*Pt,st[Bt].weight=Lt[Bt].all}return(m=g.onLayoutEnd)===null||m===void 0||m.call(g),{nodes:st,edges:this.edges}},p.prototype.topologyOrdering=function(m){m===void 0&&(m=!1);var g=this,M=g.degrees,_=g.edges,S=g.nodes,O=(0,R.clone)(S),y=g.nodeMap,d=[O[0]],V=[S[0]],q=[],Y=S.length;q[0]=!0,L(O,_,y,m);var X=0;return O.forEach(function(H,J){if(J!==0)if((J===Y-1||M[J].all!==M[J+1].all||k(d[X],H,_))&&!q[J])d.push(H),V.push(S[y[H.id]]),q[J]=!0,X++;else{for(var nt=d[X].children,tt=!1,at=0;at<nt.length;at++){var ct=y[nt[at]];if(M[ct].all===M[J].all&&!q[ct]){d.push(O[ct]),V.push(S[y[O[ct].id]]),q[ct]=!0,tt=!0;break}}for(var ht=0;!tt&&(q[ht]||(d.push(O[ht]),V.push(S[y[O[ht].id]]),q[ht]=!0,tt=!0),ht++,ht!==Y););}}),V},p.prototype.degreeOrdering=function(){var m=this,g=m.nodes,M=[],_=m.degrees;return g.forEach(function(S,O){S.degree=_[O].all,M.push(S)}),M.sort(N),M},p.prototype.getType=function(){return"circular"},p}(W.Base);F.CircularLayout=E},63861:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var b=function(p,m){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,M){g.__proto__=M}||function(g,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(g[_]=M[_])},b(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),W=this&&this.__assign||function(){return W=Object.assign||function(b){for(var p,m=1,g=arguments.length;m<g;m++){p=arguments[m];for(var M in p)Object.prototype.hasOwnProperty.call(p,M)&&(b[M]=p[M])}return b},W.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0}),F.ComboCombinedLayout=void 0;var R=B(16470),L=B(62329),k=B(49784),N=B(2584),E=function(b){P(p,b);function p(m){var g=b.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(m),g}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.execute=function(){var m=this,g=m.nodes,M=m.center;if(!g||g.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(g.length===1){g[0].x=M[0],g[0].y=M[1],m.onLayoutEnd&&m.onLayoutEnd();return}m.initVals(),m.run(),m.onLayoutEnd&&m.onLayoutEnd()},p.prototype.run=function(){var m,g=this,M=g.nodes,_=g.edges,S=g.combos,O=g.comboEdges,y=g.center,d={};M.forEach(function(Ut){d[Ut.id]=Ut});var V={};S.forEach(function(Ut){V[Ut.id]=Ut});var q=g.getInnerGraphs(d),Y=[],X=[],H={},J=!0;this.comboTrees.forEach(function(Ut){var Ot=q[Ut.id],Z=W(W({},Ut),{x:Ot.x||V[Ut.id].x,y:Ot.y||V[Ut.id].y,fx:Ot.fx||V[Ut.id].fx,fy:Ot.fy||V[Ut.id].fy,mass:Ot.mass||V[Ut.id].mass,size:Ot.size});X.push(Z),!isNaN(Z.x)&&Z.x!==0&&!isNaN(Z.y)&&Z.y!==0?J=!1:(Z.x=Math.random()*100,Z.y=Math.random()*100),Y.push(Ut.id),(0,k.traverseTreeUp)(Ut,function(st){return st.id!==Ut.id&&(H[st.id]=Ut.id),!0})}),M.forEach(function(Ut){if(!(Ut.comboId&&V[Ut.comboId])){var Ot=W({},Ut);X.push(Ot),!isNaN(Ot.x)&&Ot.x!==0&&!isNaN(Ot.y)&&Ot.y!==0?J=!1:(Ot.x=Math.random()*100,Ot.y=Math.random()*100),Y.push(Ut.id)}});var nt=[];if(_.concat(O).forEach(function(Ut){var Ot=H[Ut.source]||Ut.source,Z=H[Ut.target]||Ut.target;Ot!==Z&&Y.includes(Ot)&&Y.includes(Z)&&nt.push({source:Ot,target:Z})}),X!=null&&X.length){if(X.length===1)X[0].x=y[0],X[0].y=y[1];else{var tt={nodes:X,edges:nt},at=this.outerLayout||new N.GForceLayout({gravity:1,factor:4,linkDistance:function(Ut,Ot,Z){var st,Et,Bt=((((st=Ot.size)===null||st===void 0?void 0:st[0])||30)+(((Et=Z.size)===null||Et===void 0?void 0:Et[0])||30))/2;return Math.min(Bt*1.5,700)}}),ct=(m=at.getType)===null||m===void 0?void 0:m.call(at);if(at.updateCfg({center:y,kg:5,preventOverlap:!0,animate:!1}),J&&R.FORCE_LAYOUT_TYPE_MAP[ct]){var ht=X.length<100?new N.MDSLayout:new N.GridLayout;ht.layout(tt)}at.layout(tt)}X.forEach(function(Ut){var Ot=q[Ut.id];if(!Ot){var Z=d[Ut.id];Z&&(Z.x=Ut.x,Z.y=Ut.y);return}Ot.visited=!0,Ot.x=Ut.x,Ot.y=Ut.y,Ot.nodes.forEach(function(st){st.x+=Ut.x,st.y+=Ut.y})})}for(var Lt=Object.keys(q),St=function(Ut){var Ot=Lt[Ut],Z=q[Ot];if(!Z)return"continue";Z.nodes.forEach(function(st){Z.visited||(st.x+=Z.x||0,st.y+=Z.y||0),d[st.id]&&(d[st.id].x=st.x,d[st.id].y=st.y)}),V[Ot]&&(V[Ot].x=Z.x,V[Ot].y=Z.y)},Zt=Lt.length-1;Zt>=0;Zt--)St(Zt);return{nodes:M,edges:_,combos:S,comboEdges:O}},p.prototype.getInnerGraphs=function(m){var g=this,M=g.comboTrees,_=g.nodeSize,S=g.edges,O=g.comboPadding,y=g.spacing,d={},V=this.innerLayout||new N.ConcentricLayout({sortBy:"id"});return V.center=[0,0],V.preventOverlap=!0,V.nodeSpacing=y,(M||[]).forEach(function(q){(0,k.traverseTreeUp)(q,function(Y){var X,H=(O==null?void 0:O(Y))||10;if((0,k.isArray)(H)&&(H=Math.max.apply(Math,H)),!((X=Y.children)===null||X===void 0)&&X.length){var nt=Y.children.map(function(st){if(st.itemType==="combo")return d[st.id];var Et=m[st.id]||{};return W(W({},Et),st)}),tt=nt.map(function(st){return st.id}),at={nodes:nt,edges:S.filter(function(st){return tt.includes(st.source)&&tt.includes(st.target)})},ct=1/0;nt.forEach(function(st){var Et;st.size||(st.size=((Et=d[st.id])===null||Et===void 0?void 0:Et.size)||(_==null?void 0:_(st))||[30,30]),(0,k.isNumber)(st.size)&&(st.size=[st.size,st.size]),ct>st.size[0]&&(ct=st.size[0]),ct>st.size[1]&&(ct=st.size[1])}),V.layout(at);var ht=(0,k.getLayoutBBox)(nt),Lt=ht.minX,St=ht.minY,Zt=ht.maxX,Ut=ht.maxY,Ot={x:(Zt+Lt)/2,y:(Ut+St)/2};at.nodes.forEach(function(st){st.x-=Ot.x,st.y-=Ot.y});var Z=Math.max(Zt-Lt,Ut-St,ct)+H*2;d[Y.id]={id:Y.id,nodes:nt,size:[Z,Z]}}else if(Y.itemType==="combo"){var J=H?[H*2,H*2]:[30,30];d[Y.id]={id:Y.id,nodes:[],size:J}}return!0})}),d},p.prototype.initVals=function(){var m=this,g=m.nodeSize,M=m.spacing,_,S;if((0,k.isNumber)(M)?S=function(){return M}:(0,k.isFunction)(M)?S=M:S=function(){return 0},this.spacing=S,!g)_=function(Y){var X=S(Y);if(Y.size){if((0,k.isArray)(Y.size)){var H=Y.size[0]>Y.size[1]?Y.size[0]:Y.size[1];return(H+X)/2}if((0,k.isObject)(Y.size)){var H=Y.size.width>Y.size.height?Y.size.width:Y.size.height;return(H+X)/2}return(Y.size+X)/2}return 10+X/2};else if((0,k.isFunction)(g))_=function(Y){var X=g(Y),H=S(Y);if((0,k.isArray)(Y.size)){var J=Y.size[0]>Y.size[1]?Y.size[0]:Y.size[1];return(J+H)/2}return((X||10)+H)/2};else if((0,k.isArray)(g)){var O=g[0]>g[1]?g[0]:g[1],y=O/2;_=function(Y){return y+S(Y)/2}}else{var d=g/2;_=function(Y){return d+S(Y)/2}}this.nodeSize=_;var V=m.comboPadding,q;(0,k.isNumber)(V)?q=function(){return V}:(0,k.isArray)(V)?q=function(){return Math.max.apply(null,V)}:(0,k.isFunction)(V)?q=V:q=function(){return 0},this.comboPadding=q},p.prototype.getType=function(){return"comboCombined"},p}(L.Base);F.ComboCombinedLayout=E},66590:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var k=function(N,E){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(b[m]=p[m])},k(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");k(N,E);function b(){this.constructor=N}N.prototype=E===null?Object.create(E):(b.prototype=E.prototype,new b)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.ComboForceLayout=void 0;var W=B(62329),R=B(49784),L=function(k){P(N,k);function N(E){var b=k.call(this)||this;return b.center=[0,0],b.maxIteration=100,b.gravity=10,b.comboGravity=10,b.linkDistance=10,b.alpha=1,b.alphaMin=.001,b.alphaDecay=1-Math.pow(b.alphaMin,1/300),b.alphaTarget=0,b.velocityDecay=.6,b.edgeStrength=.6,b.nodeStrength=30,b.preventOverlap=!1,b.preventNodeOverlap=!1,b.preventComboOverlap=!1,b.collideStrength=void 0,b.nodeCollideStrength=.5,b.comboCollideStrength=.5,b.comboSpacing=20,b.comboPadding=10,b.optimizeRangeFactor=1,b.onTick=function(){},b.onLayoutEnd=function(){},b.depthAttractiveForceScale=1,b.depthRepulsiveForceScale=2,b.nodes=[],b.edges=[],b.combos=[],b.comboTrees=[],b.width=300,b.height=300,b.bias=[],b.nodeMap={},b.oriComboMap={},b.indexMap={},b.comboMap={},b.previousLayouted=!1,b.updateCfg(E),b}return N.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},N.prototype.execute=function(){var E=this,b=E.nodes,p=E.center;if(E.comboTree={id:"comboTreeRoot",depth:-1,children:E.comboTrees},!b||b.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}if(b.length===1){b[0].x=p[0],b[0].y=p[1],E.onLayoutEnd&&E.onLayoutEnd();return}E.initVals(),E.run(),E.onLayoutEnd&&E.onLayoutEnd()},N.prototype.run=function(){var E=this,b=E.nodes,p=E.previousLayouted?E.maxIteration/5:E.maxIteration;!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight);var m=E.center,g=E.velocityDecay,M=E.comboMap;E.previousLayouted||E.initPos(M);for(var _=function(d){var V=[];b.forEach(function(q,Y){V[Y]={x:0,y:0}}),E.applyCalculate(V),E.applyComboCenterForce(V),b.forEach(function(q,Y){!(0,R.isNumber)(q.x)||!(0,R.isNumber)(q.y)||(q.x+=V[Y].x*g,q.y+=V[Y].y*g)}),E.alpha+=(E.alphaTarget-E.alpha)*E.alphaDecay,E.onTick()},S=0;S<p;S++)_(S);var O=[0,0];b.forEach(function(d){!(0,R.isNumber)(d.x)||!(0,R.isNumber)(d.y)||(O[0]+=d.x,O[1]+=d.y)}),O[0]/=b.length,O[1]/=b.length;var y=[m[0]-O[0],m[1]-O[1]];b.forEach(function(d,V){!(0,R.isNumber)(d.x)||!(0,R.isNumber)(d.y)||(d.x+=y[0],d.y+=y[1])}),E.combos.forEach(function(d){var V=M[d.id];V&&V.empty&&(d.x=V.cx||d.x,d.y=V.cy||d.y)}),E.previousLayouted=!0},N.prototype.initVals=function(){var E=this,b=E.edges,p=E.nodes,m=E.combos,g={},M={},_={};p.forEach(function(Pt,Ht){M[Pt.id]=Pt,_[Pt.id]=Ht}),E.nodeMap=M,E.indexMap=_;var S={};m.forEach(function(Pt){S[Pt.id]=Pt}),E.oriComboMap=S,E.comboMap=E.getComboMap();var O=E.preventOverlap;E.preventComboOverlap=E.preventComboOverlap||O,E.preventNodeOverlap=E.preventNodeOverlap||O;var y=E.collideStrength;y&&(E.comboCollideStrength=y,E.nodeCollideStrength=y),E.comboCollideStrength=E.comboCollideStrength?E.comboCollideStrength:0,E.nodeCollideStrength=E.nodeCollideStrength?E.nodeCollideStrength:0;for(var d=0;d<b.length;++d){var V=(0,R.getEdgeTerminal)(b[d],"source"),q=(0,R.getEdgeTerminal)(b[d],"target");g[V]?g[V]++:g[V]=1,g[q]?g[q]++:g[q]=1}for(var Y=[],d=0;d<b.length;++d){var V=(0,R.getEdgeTerminal)(b[d],"source"),q=(0,R.getEdgeTerminal)(b[d],"target");Y[d]=g[V]/(g[V]+g[q])}this.bias=Y;var X=E.nodeSize,H=E.nodeSpacing,J,nt;if((0,R.isNumber)(H)?nt=function(){return H}:(0,R.isFunction)(H)?nt=H:nt=function(){return 0},this.nodeSpacing=nt,!X)J=function(Pt){if(Pt.size){if((0,R.isArray)(Pt.size)){var Ht=Pt.size[0]>Pt.size[1]?Pt.size[0]:Pt.size[1];return Ht/2}if((0,R.isObject)(Pt.size)){var Ht=Pt.size.width>Pt.size.height?Pt.size.width:Pt.size.height;return Ht/2}return Pt.size/2}return 10};else if((0,R.isFunction)(X))J=function(Pt){return X(Pt)};else if((0,R.isArray)(X)){var tt=X[0]>X[1]?X[0]:X[1],at=tt/2;J=function(Pt){return at}}else{var ct=X/2;J=function(Pt){return ct}}this.nodeSize=J;var ht=E.comboSpacing,Lt;(0,R.isNumber)(ht)?Lt=function(){return ht}:(0,R.isFunction)(ht)?Lt=ht:Lt=function(){return 0},this.comboSpacing=Lt;var St=E.comboPadding,Zt;(0,R.isNumber)(St)?Zt=function(){return St}:(0,R.isArray)(St)?Zt=function(){return Math.max.apply(null,St)}:(0,R.isFunction)(St)?Zt=St:Zt=function(){return 0},this.comboPadding=Zt;var Ut=this.linkDistance,Ot;Ut||(Ut=10),(0,R.isNumber)(Ut)?Ot=function(Pt){return Ut}:Ot=Ut,this.linkDistance=Ot;var Z=this.edgeStrength,st;Z||(Z=1),(0,R.isNumber)(Z)?st=function(Pt){return Z}:st=Z,this.edgeStrength=st;var Et=this.nodeStrength,Bt;Et||(Et=30),(0,R.isNumber)(Et)?Bt=function(Pt){return Et}:Bt=Et,this.nodeStrength=Bt},N.prototype.initPos=function(E){var b=this,p=b.nodes;p.forEach(function(m,g){var M=m.comboId,_=E[M];M&&_?(m.x=_.cx+100/(g+1),m.y=_.cy+100/(g+1)):(m.x=100/(g+1),m.y=100/(g+1))})},N.prototype.getComboMap=function(){var E=this,b=E.nodeMap,p=E.comboTrees,m=E.oriComboMap,g={};return(p||[]).forEach(function(M){var _=[];(0,R.traverseTreeUp)(M,function(S){if(S.itemType==="node"||!m[S.id])return!0;if(g[S.id]===void 0){var O={id:S.id,name:S.id,cx:0,cy:0,count:0,depth:E.oriComboMap[S.id].depth||0,children:[]};g[S.id]=O}var y=S.children;y&&y.forEach(function(q){if(!g[q.id]&&!b[q.id])return!0;_.push(q)});var d=g[S.id];if(d.cx=0,d.cy=0,_.length===0){d.empty=!0;var V=m[S.id];d.cx=V.x,d.cy=V.y}return _.forEach(function(q){if(d.count++,q.itemType!=="node"){var Y=g[q.id];(0,R.isNumber)(Y.cx)&&(d.cx+=Y.cx),(0,R.isNumber)(Y.cy)&&(d.cy+=Y.cy);return}var X=b[q.id];X&&((0,R.isNumber)(X.x)&&(d.cx+=X.x),(0,R.isNumber)(X.y)&&(d.cy+=X.y))}),d.cx/=d.count||1,d.cy/=d.count||1,d.children=_,!0})}),g},N.prototype.applyComboCenterForce=function(E){var b=this,p=b.gravity,m=b.comboGravity||p,g=this.alpha,M=b.comboTrees,_=b.indexMap,S=b.nodeMap,O=b.comboMap;(M||[]).forEach(function(y){(0,R.traverseTreeUp)(y,function(d){if(d.itemType==="node")return!0;var V=O[d.id];if(!V)return!0;var q=O[d.id],Y=(q.depth+1)/10*.5,X=q.cx,H=q.cy;return q.cx=0,q.cy=0,q.children.forEach(function(J){if(J.itemType!=="node"){var nt=O[J.id];nt&&(0,R.isNumber)(nt.cx)&&(q.cx+=nt.cx),nt&&(0,R.isNumber)(nt.cy)&&(q.cy+=nt.cy);return}var tt=S[J.id],at=tt.x-X||.005,ct=tt.y-H||.005,ht=Math.sqrt(at*at+ct*ct),Lt=_[tt.id],St=m*g/ht*Y;E[Lt].x-=at*St,E[Lt].y-=ct*St,(0,R.isNumber)(tt.x)&&(q.cx+=tt.x),(0,R.isNumber)(tt.y)&&(q.cy+=tt.y)}),q.cx/=q.count||1,q.cy/=q.count||1,!0})})},N.prototype.applyCalculate=function(E){var b=this,p=b.comboMap,m=b.nodes,g={};m.forEach(function(_,S){m.forEach(function(O,y){if(!(S<y)){var d=_.x-O.x||.005,V=_.y-O.y||.005,q=d*d+V*V,Y=Math.sqrt(q);q<1&&(q=Y),g["".concat(_.id,"-").concat(O.id)]={vx:d,vy:V,vl2:q,vl:Y},g["".concat(O.id,"-").concat(_.id)]={vl2:q,vl:Y,vx:-d,vy:-V}}})}),b.updateComboSizes(p),b.calRepulsive(E,g),b.calAttractive(E,g);var M=b.preventComboOverlap;M&&b.comboNonOverlapping(E,p)},N.prototype.updateComboSizes=function(E){var b=this,p=b.comboTrees,m=b.nodeMap,g=b.nodeSize,M=b.comboSpacing,_=b.comboPadding;(p||[]).forEach(function(S){var O=[];(0,R.traverseTreeUp)(S,function(y){if(y.itemType==="node")return!0;var d=E[y.id];if(!d)return!1;var V=y.children;V&&V.forEach(function(X){!E[X.id]&&!m[X.id]||O.push(X)}),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0,O.forEach(function(X){if(X.itemType!=="node")return!0;var H=m[X.id];if(!H)return!0;var J=g(H),nt=H.x-J,tt=H.y-J,at=H.x+J,ct=H.y+J;d.minX>nt&&(d.minX=nt),d.minY>tt&&(d.minY=tt),d.maxX<at&&(d.maxX=at),d.maxY<ct&&(d.maxY=ct)});var q=b.oriComboMap[y.id].size||10;(0,R.isArray)(q)&&(q=q[0]);var Y=Math.max(d.maxX-d.minX,d.maxY-d.minY,q);return d.r=Y/2+M(d)/2+_(d),!0})})},N.prototype.comboNonOverlapping=function(E,b){var p=this,m=p.comboTree,g=p.comboCollideStrength,M=p.indexMap,_=p.nodeMap;(0,R.traverseTreeUp)(m,function(S){if(!b[S.id]&&!_[S.id]&&S.id!=="comboTreeRoot")return!1;var O=S.children;return O&&O.length>1&&O.forEach(function(y,d){if(y.itemType==="node")return!1;var V=b[y.id];V&&O.forEach(function(q,Y){if(d<=Y||q.itemType==="node")return!1;var X=b[q.id];if(!X)return!1;var H=V.cx-X.cx||.005,J=V.cy-X.cy||.005,nt=H*H+J*J,tt=V.r||1,at=X.r||1,ct=tt+at,ht=at*at,Lt=tt*tt;if(nt<ct*ct){var St=y.children;if(!St||St.length===0)return!1;var Zt=q.children;if(!Zt||Zt.length===0)return!1;var Ut=Math.sqrt(nt),Ot=(ct-Ut)/Ut*g,Z=H*Ot,st=J*Ot,Et=ht/(Lt+ht),Bt=1-Et;St.forEach(function(Pt){if(Pt.itemType!=="node")return!1;if(_[Pt.id]){var Ht=M[Pt.id];Zt.forEach(function(le){if(le.itemType!=="node"||!_[le.id])return!1;var ye=M[le.id];E[Ht].x+=Z*Et,E[Ht].y+=st*Et,E[ye].x-=Z*Bt,E[ye].y-=st*Bt})}})}})}),!0})},N.prototype.calRepulsive=function(E,b){var p=this,m=p.nodes,g=p.width*p.optimizeRangeFactor,M=p.nodeStrength,_=p.alpha,S=p.nodeCollideStrength,O=p.preventNodeOverlap,y=p.nodeSize,d=p.nodeSpacing,V=p.depthRepulsiveForceScale,q=p.center;m.forEach(function(Y,X){if(!(!Y.x||!Y.y)){if(q){var H=p.gravity,J=Y.x-q[0]||.005,nt=Y.y-q[1]||.005,tt=Math.sqrt(J*J+nt*nt);E[X].x-=J*H*_/tt,E[X].y-=nt*H*_/tt}m.forEach(function(at,ct){if(X!==ct&&!(!at.x||!at.y)){var ht=b["".concat(Y.id,"-").concat(at.id)],Lt=ht.vl2,St=ht.vl;if(!(St>g)){var Zt=b["".concat(Y.id,"-").concat(at.id)],Ut=Zt.vx,Ot=Zt.vy,Z=Math.log(Math.abs(at.depth-Y.depth)/10)+1||1;Z=Z<1?1:Z,at.comboId!==Y.comboId&&(Z+=1);var st=Z?Math.pow(V,Z):1,Et=M(at)*_/Lt*st;if(E[X].x+=Ut*Et,E[X].y+=Ot*Et,X<ct&&O){var Bt=y(Y)+d(Y)||1,Pt=y(at)+d(at)||1,Ht=Bt+Pt;if(Lt<Ht*Ht){var le=(Ht-St)/St*S,ye=Pt*Pt,Gt=ye/(Bt*Bt+ye),zt=Ut*le,ue=Ot*le;E[X].x+=zt*Gt,E[X].y+=ue*Gt,Gt=1-Gt,E[ct].x-=zt*Gt,E[ct].y-=ue*Gt}}}}})}})},N.prototype.calAttractive=function(E,b){var p=this,m=p.edges,g=p.linkDistance,M=p.alpha,_=p.edgeStrength,S=p.bias,O=p.depthAttractiveForceScale;m.forEach(function(y,d){var V=(0,R.getEdgeTerminal)(y,"source"),q=(0,R.getEdgeTerminal)(y,"target");if(!(!V||!q||V===q)){var Y=p.indexMap[V],X=p.indexMap[q],H=p.nodeMap[V],J=p.nodeMap[q];if(!(!H||!J)){var nt=H.depth===J.depth?0:Math.log(Math.abs(H.depth-J.depth)/10);H.comboId===J.comboId&&(nt=nt/2);var tt=nt?Math.pow(O,nt):1;if(H.comboId!==J.comboId&&tt===1?tt=O/2:H.comboId===J.comboId&&(tt=2),!(!(0,R.isNumber)(J.x)||!(0,R.isNumber)(H.x)||!(0,R.isNumber)(J.y)||!(0,R.isNumber)(H.y))){var at=b["".concat(q,"-").concat(V)],ct=at.vl,ht=at.vx,Lt=at.vy,St=(ct-g(y))/ct*M*_(y)*tt,Zt=ht*St,Ut=Lt*St,Ot=S[d];E[X].x-=Zt*Ot,E[X].y-=Ut*Ot,E[Y].x+=Zt*(1-Ot),E[Y].y+=Ut*(1-Ot)}}}})},N.prototype.getType=function(){return"comboForce"},N}(W.Base);F.ComboForceLayout=L},43281:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var k=function(N,E){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(b[m]=p[m])},k(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");k(N,E);function b(){this.constructor=N}N.prototype=E===null?Object.create(E):(b.prototype=E.prototype,new b)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.ConcentricLayout=void 0;var W=B(49784),R=B(62329),L=function(k){P(N,k);function N(E){var b=k.call(this)||this;return b.nodeSize=30,b.minNodeSpacing=10,b.nodeSpacing=10,b.preventOverlap=!1,b.equidistant=!1,b.startAngle=3/2*Math.PI,b.clockwise=!0,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.onLayoutEnd=function(){},b.updateCfg(E),b}return N.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},N.prototype.execute=function(){var E,b,p=this,m=p.nodes,g=p.edges,M=m.length;if(M===0){(E=p.onLayoutEnd)===null||E===void 0||E.call(p);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var _=p.center;if(M===1){m[0].x=_[0],m[0].y=_[1],(b=p.onLayoutEnd)===null||b===void 0||b.call(p);return}var S=p.nodeSize,O=p.nodeSpacing,y=[],d,V=0;(0,W.isArray)(S)?d=Math.max(S[0],S[1]):d=S,(0,W.isArray)(O)?V=Math.max(O[0],O[1]):(0,W.isNumber)(O)&&(V=O),m.forEach(function(Z){y.push(Z);var st=d;(0,W.isArray)(Z.size)?st=Math.max(Z.size[0],Z.size[1]):(0,W.isNumber)(Z.size)?st=Z.size:(0,W.isObject)(Z.size)&&(st=Math.max(Z.size.width,Z.size.height)),d=Math.max(d,st),(0,W.isFunction)(O)&&(V=Math.max(O(Z),V))}),p.clockwise=p.counterclockwise!==void 0?!p.counterclockwise:p.clockwise;var q={},Y={};if(y.forEach(function(Z,st){q[Z.id]=Z,Y[Z.id]=st}),(p.sortBy==="degree"||!(0,W.isString)(p.sortBy)||y[0][p.sortBy]===void 0)&&(p.sortBy="degree",!(0,W.isNumber)(m[0].degree))){var X=(0,W.getDegree)(m.length,Y,g);y.forEach(function(Z,st){Z.degree=X[st].all})}y.sort(function(Z,st){return st[p.sortBy]-Z[p.sortBy]}),p.maxValueNode=y[0],p.maxLevelDiff=p.maxLevelDiff||p.maxValueNode[p.sortBy]/4;var H=[[]],J=H[0];y.forEach(function(Z){if(J.length>0){var st=Math.abs(J[0][p.sortBy]-Z[p.sortBy]);p.maxLevelDiff&&st>=p.maxLevelDiff&&(J=[],H.push(J))}J.push(Z)});var nt=d+(V||p.minNodeSpacing);if(!p.preventOverlap){var tt=H.length>0&&H[0].length>1,at=Math.min(p.width,p.height)/2-nt,ct=at/(H.length+(tt?1:0));nt=Math.min(nt,ct)}var ht=0;if(H.forEach(function(Z){var st=p.sweep;st===void 0&&(st=2*Math.PI-2*Math.PI/Z.length);var Et=Z.dTheta=st/Math.max(1,Z.length-1);if(Z.length>1&&p.preventOverlap){var Bt=Math.cos(Et)-Math.cos(0),Pt=Math.sin(Et)-Math.sin(0),Ht=Math.sqrt(nt*nt/(Bt*Bt+Pt*Pt));ht=Math.max(Ht,ht)}Z.r=ht,ht+=nt}),p.equidistant){for(var Lt=0,St=0,Zt=0;Zt<H.length;Zt++){var Ut=H[Zt],Ot=Ut.r-St;Lt=Math.max(Lt,Ot)}St=0,H.forEach(function(Z,st){st===0&&(St=Z.r),Z.r=St,St+=Lt})}return H.forEach(function(Z){var st=Z.dTheta,Et=Z.r;Z.forEach(function(Bt,Pt){var Ht=p.startAngle+(p.clockwise?1:-1)*st*Pt;Bt.x=_[0]+Et*Math.cos(Ht),Bt.y=_[1]+Et*Math.sin(Ht)})}),p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:g}},N.prototype.getType=function(){return"concentric"},N}(R.Base);F.ConcentricLayout=L},16470:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.FORCE_LAYOUT_TYPE_MAP=F.LAYOUT_MESSAGE=void 0,F.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},F.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},20171:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,_){M.__proto__=_}||function(M,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(M[S]=_[S])},p(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(m,g);function M(){this.constructor=m}m.prototype=g===null?Object.create(g):(M.prototype=g.prototype,new M)}}(),W=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(F,"__esModule",{value:!0}),F.DagreLayout=void 0;var R=W(B(41106)),L=B(49784),k=B(62329),N=B(27652),E=function(p){P(m,p);function m(g){var M=p.call(this)||this;return M.rankdir="TB",M.nodesep=50,M.ranksep=50,M.controlPoints=!1,M.sortByCombo=!1,M.edgeLabelSpace=!0,M.radial=!1,M.nodes=[],M.edges=[],M.onLayoutEnd=function(){},M.layoutNode=function(_){var S=M,O=S.nodes,y=O.find(function(V){return V.id===_});if(y){var d=y.layout!==!1;return d}return!0},M.updateCfg(g),M}return m.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},m.prototype.execute=function(){var g=this,M,_,S,O,y=this,d=y.nodes,V=y.nodeSize,q=y.rankdir,Y=y.combos,X=y.begin,H=y.radial,J=y.comboEdges,nt=J===void 0?[]:J,tt=y.vedges,at=tt===void 0?[]:tt;if(d){var ct=y.edges||[],ht=new N.Graph({multigraph:!0,compound:!0});y.nodeMap={};var Lt={};d.forEach(function(ir){y.nodeMap[ir.id]=ir,ir.comboId&&(Lt[ir.comboId]=Lt[ir.comboId]||[],Lt[ir.comboId].push(ir.id))});var St=[],Zt={};!((M=y.nodeOrder)===null||M===void 0)&&M.length?(y.nodeOrder.forEach(function(ir){Zt[ir]=!0,St.push(y.nodeMap[ir])}),d.forEach(function(ir){Zt[ir.id]||St.push(ir)})):St=d;var Ut;V?(0,L.isArray)(V)?Ut=function(){return V}:Ut=function(){return[V,V]}:Ut=function(ir){return ir.size?(0,L.isArray)(ir.size)?ir.size:(0,L.isObject)(ir.size)?[ir.size.width||40,ir.size.height||40]:[ir.size,ir.size]:[40,40]};var Ot=(0,L.getFunc)(y.ranksep,50,y.ranksepFunc),Z=(0,L.getFunc)(y.nodesep,50,y.nodesepFunc),st=Z,Et=Ot;(q==="LR"||q==="RL")&&(st=Ot,Et=Z),ht.setDefaultEdgeLabel(function(){return{}}),ht.setGraph(y);var Bt={};this.sortByCombo&&Y&&Y.forEach(function(ir){if(Bt[ir.id]=ir,ir.collapsed){var Tr=Ut(ir),Jr=Et(ir),vn=st(ir),Tn=Tr[0]+2*vn,In=Tr[1]+2*Jr;ht.setNode(ir.id,{width:Tn,height:In})}ir.parentId&&(Bt[ir.parentId]||ht.setNode(ir.parentId,{}),ht.setParent(ir.id,ir.parentId))}),St.filter(function(ir){return ir.layout!==!1}).forEach(function(ir){var Tr=Ut(ir),Jr=Et(ir),vn=st(ir),Tn=Tr[0]+2*vn,In=Tr[1]+2*Jr,kn=ir.layer;(0,L.isNumber)(kn)?ht.setNode(ir.id,{width:Tn,height:In,layer:kn}):ht.setNode(ir.id,{width:Tn,height:In}),g.sortByCombo&&ir.comboId&&(Bt[ir.comboId]||(Bt[ir.comboId]={id:ir.comboId},ht.setNode(ir.comboId,{})),ht.setParent(ir.id,ir.comboId))}),ct.forEach(function(ir){var Tr=(0,L.getEdgeTerminal)(ir,"source"),Jr=(0,L.getEdgeTerminal)(ir,"target");g.layoutNode(Tr)&&g.layoutNode(Jr)&&ht.setEdge(Tr,Jr,{weight:ir.weight||1})}),(_=nt==null?void 0:nt.concat(at||[]))===null||_===void 0||_.forEach(function(ir){var Tr,Jr,vn=ir.source,Tn=ir.target,In=!((Tr=Bt[vn])===null||Tr===void 0)&&Tr.collapsed?[vn]:Lt[vn]||[vn],kn=!((Jr=Bt[Tn])===null||Jr===void 0)&&Jr.collapsed?[Tn]:Lt[Tn]||[Tn];In.forEach(function(Zn){kn.forEach(function(Yn){ht.setEdge(Zn,Yn,{weight:ir.weight||1})})})});var Pt=void 0;!((S=y.preset)===null||S===void 0)&&S.nodes&&(Pt=new N.Graph({multigraph:!0,compound:!0}),y.preset.nodes.forEach(function(ir){Pt==null||Pt.setNode(ir.id,ir)})),R.default.layout(ht,{prevGraph:Pt,edgeLabelSpace:y.edgeLabelSpace,keepNodeOrder:Boolean(!!y.nodeOrder),nodeOrder:y.nodeOrder});var Ht=[0,0];if(X){var le=1/0,ye=1/0;ht.nodes().forEach(function(ir){var Tr=ht.node(ir);le>Tr.x&&(le=Tr.x),ye>Tr.y&&(ye=Tr.y)}),ht.edges().forEach(function(ir){var Tr,Jr=ht.edge(ir);(Tr=Jr.points)===null||Tr===void 0||Tr.forEach(function(vn){le>vn.x&&(le=vn.x),ye>vn.y&&(ye=vn.y)})}),Ht[0]=X[0]-le,Ht[1]=X[1]-ye}var Gt=q==="LR"||q==="RL";if(H){var zt=this,ue=zt.focusNode,we=zt.ranksep,de=zt.getRadialPos,Mt=(0,L.isString)(ue)?ue:ue==null?void 0:ue.id,ee=Mt?(O=ht.node(Mt))===null||O===void 0?void 0:O._rank:0,ce=[],At=Gt?"y":"x",Wt=Gt?"height":"width",fe=1/0,Ge=-1/0;ht.nodes().forEach(function(ir){var Tr=ht.node(ir);if(y.nodeMap[ir]){var Jr=Z(y.nodeMap[ir]);if(ee===0)ce[Tr._rank]||(ce[Tr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ce[Tr._rank].nodes.push(ir),ce[Tr._rank].totalWidth+=Jr*2+Tr[Wt],ce[Tr._rank].maxSize<Math.max(Tr.width,Tr.height)&&(ce[Tr._rank].maxSize=Math.max(Tr.width,Tr.height));else{var vn=Tr._rank-ee;if(vn===0)ce[vn]||(ce[vn]={nodes:[],totalWidth:0,maxSize:-1/0}),ce[vn].nodes.push(ir),ce[vn].totalWidth+=Jr*2+Tr[Wt],ce[vn].maxSize<Math.max(Tr.width,Tr.height)&&(ce[vn].maxSize=Math.max(Tr.width,Tr.height));else{var Tn=Math.abs(vn);ce[Tn]||(ce[Tn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ce[Tn].totalWidth+=Jr*2+Tr[Wt],ce[Tn].maxSize<Math.max(Tr.width,Tr.height)&&(ce[Tn].maxSize=Math.max(Tr.width,Tr.height)),vn<0?ce[Tn].left.push(ir):ce[Tn].right.push(ir)}}var In=Tr[At]-Tr[Wt]/2-Jr,kn=Tr[At]+Tr[Wt]/2+Jr;In<fe&&(fe=In),kn>Ge&&(Ge=kn)}});var Be=we||50,_r={},Ft=(Ge-fe)/.9,hr=[(fe+Ge-Ft)*.5,(fe+Ge+Ft)*.5],rn=function(ir,Tr,Jr,vn){Jr===void 0&&(Jr=-1/0),vn===void 0&&(vn=[0,1]);var Tn=Jr;return ir.forEach(function(In){var kn=ht.node(In);_r[In]=Tr;var Zn=de(kn[At],hr,Ft,Tr,vn),Yn=Zn.x,Ra=Zn.y;if(y.nodeMap[In]){y.nodeMap[In].x=Yn+Ht[0],y.nodeMap[In].y=Ra+Ht[1],y.nodeMap[In]._order=kn._order;var gn=Ot(y.nodeMap[In]);Tn<gn&&(Tn=gn)}}),Tn},pn=!0,Sn=0;ce.forEach(function(ir){var Tr,Jr,vn,Tn,In,kn,Zn;if(!(!(!((Tr=ir==null?void 0:ir.nodes)===null||Tr===void 0)&&Tr.length)&&!(!((Jr=ir==null?void 0:ir.left)===null||Jr===void 0)&&Jr.length)&&!(!((vn=ir==null?void 0:ir.right)===null||vn===void 0)&&vn.length))){if(pn&&ir.nodes.length===1){var Yn=ir.nodes[0];if(!y.nodeMap[Yn])return;y.nodeMap[Yn].x=Ht[0],y.nodeMap[Yn].y=Ht[1],_r[ir.nodes[0]]=0,Be=Ot(y.nodeMap[Yn]),pn=!1;return}Be=Math.max(Be,ir.totalWidth/(2*Math.PI));var Ra=-1/0;if(ee===0||!((Tn=ir.nodes)===null||Tn===void 0)&&Tn.length)Ra=rn(ir.nodes,Be,Ra,[0,1]);else{var gn=((In=ir.left)===null||In===void 0?void 0:In.length)/(((kn=ir.left)===null||kn===void 0?void 0:kn.length)+((Zn=ir.right)===null||Zn===void 0?void 0:Zn.length));Ra=rn(ir.left,Be,Ra,[0,gn]),Ra=rn(ir.right,Be,Ra,[gn+.05,1])}Be+=Ra,pn=!1,Sn-ir.maxSize}}),ht.edges().forEach(function(ir){var Tr,Jr,vn,Tn=ht.edge(ir),In=ct.findIndex(function(_n){var aa=(0,L.getEdgeTerminal)(_n,"source"),$=(0,L.getEdgeTerminal)(_n,"target");return aa===ir.v&&$===ir.w});if(!(In<=-1)&&y.edgeLabelSpace&&y.controlPoints&&ct[In].type!=="loop"){var kn=At==="x"?"y":"x",Zn=(Tr=Tn==null?void 0:Tn.points)===null||Tr===void 0?void 0:Tr.slice(1,Tn.points.length-1),Yn=[],Ra=(Jr=ht.node(ir.v))===null||Jr===void 0?void 0:Jr[kn],gn=Ra-((vn=ht.node(ir.w))===null||vn===void 0?void 0:vn[kn]),zn=_r[ir.v],Un=zn-_r[ir.w];Zn==null||Zn.forEach(function(_n){var aa=(_n[kn]-Ra)/gn*Un+zn,$=de(_n[At],hr,Ft,aa);Yn.push({x:$.x+Ht[0],y:$.y+Ht[1]})}),ct[In].controlPoints=Yn}})}else{var Bn=new Set,Kn=q==="BT"||q==="RL",Nn=Kn?function(ir,Tr){return Tr-ir}:function(ir,Tr){return ir-Tr};ht.nodes().forEach(function(ir){var Tr=ht.node(ir);if(Tr){var Jr=g.nodeMap[ir];Jr||(Jr=Y==null?void 0:Y.find(function(vn){return vn.id===ir})),Jr&&(Jr.x=Tr.x+Ht[0],Jr.y=Tr.y+Ht[1],Jr._order=Tr._order,Bn.add(Gt?Jr.x:Jr.y))}});var ra=Array.from(Bn).sort(Nn),Ea=Gt?function(ir,Tr){return ir.x!==Tr.x}:function(ir,Tr){return ir.y!==Tr.y},na=Gt?function(ir,Tr,Jr){var vn=Math.max(Tr.y,Jr.y),Tn=Math.min(Tr.y,Jr.y);return ir.filter(function(In){return In.y<=vn&&In.y>=Tn})}:function(ir,Tr,Jr){var vn=Math.max(Tr.x,Jr.x),Tn=Math.min(Tr.x,Jr.x);return ir.filter(function(In){return In.x<=vn&&In.x>=Tn})};ht.edges().forEach(function(ir){var Tr,Jr=ht.edge(ir),vn=ct.findIndex(function(kn){var Zn=(0,L.getEdgeTerminal)(kn,"source"),Yn=(0,L.getEdgeTerminal)(kn,"target");return Zn===ir.v&&Yn===ir.w});if(!(vn<=-1)&&y.edgeLabelSpace&&y.controlPoints&&ct[vn].type!=="loop"){(Tr=Jr==null?void 0:Jr.points)===null||Tr===void 0||Tr.forEach(function(kn){kn.x+=Ht[0],kn.y+=Ht[1]});var Tn=y.nodeMap[ir.v],In=y.nodeMap[ir.w];ct[vn].controlPoints=b(Jr==null?void 0:Jr.points,Tn,In,ra,Gt,Ea,na)}})}return y.onLayoutEnd&&y.onLayoutEnd(),{nodes:d,edges:ct}}},m.prototype.getRadialPos=function(g,M,_,S,O){O===void 0&&(O=[0,1]);var y=(g-M[0])/_;y=y*(O[1]-O[0])+O[0];var d=y*2*Math.PI;return{x:Math.cos(d)*S,y:Math.sin(d)*S}},m.prototype.getType=function(){return"dagre"},m}(k.Base);F.DagreLayout=E;var b=function(p,m,g,M,_,S,O){var y=(p==null?void 0:p.slice(1,p.length-1))||[];if(m&&g){var d=m.x,V=m.y,q=g.x,Y=g.y;if(_&&(d=m.y,V=m.x,q=g.y,Y=g.x),Y!==V&&d!==q){var X=M.indexOf(V),H=M[X+1];if(H){var J=y[0],nt=_?{x:(V+H)/2,y:(J==null?void 0:J.y)||q}:{x:(J==null?void 0:J.x)||q,y:(V+H)/2};(!J||S(J,nt))&&y.unshift(nt)}var tt=M.indexOf(Y),at=Math.abs(tt-X);if(at===1)y=O(y,m,g),y.length||y.push(_?{x:(V+Y)/2,y:d}:{x:d,y:(V+Y)/2});else if(at>1){var ct=M[tt-1];if(ct){var ht=y[y.length-1],Lt=_?{x:(Y+ct)/2,y:(ht==null?void 0:ht.y)||q}:{x:(ht==null?void 0:ht.x)||d,y:(Y+ct)/2};(!ht||S(ht,Lt))&&y.push(Lt)}}}}return y}},27652:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var L=function(k,N){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(E[p]=b[p])},L(k,N)};return function(k,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");L(k,N);function E(){this.constructor=k}k.prototype=N===null?Object.create(N):(E.prototype=N.prototype,new E)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.Graph=void 0;var W=B(99905),R=function(L){P(k,L);function k(){return L!==null&&L.apply(this,arguments)||this}return k}(W.Graph);F.Graph=R},41106:function(Le,F,B){"use strict";var P=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(F,"__esModule",{value:!0});var W=P(B(65236)),R=B(69209);F.default={layout:W.default,util:{time:R.time,notime:R.notime}}},78029:function(Le,F,B){"use strict";var P=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(F,"__esModule",{value:!0});var W=P(B(40773)),R=function(N){var E=function(p){return function(m){var g;return((g=p.edge(m))===null||g===void 0?void 0:g.weight)||1}},b=N.graph().acyclicer==="greedy"?(0,W.default)(N,E(N)):L(N);b==null||b.forEach(function(p){var m=N.edge(p);N.removeEdgeObj(p),m.forwardName=p.name,m.reversed=!0,N.setEdge(p.w,p.v,m,"rev-".concat(Math.random()))})},L=function(N){var E=[],b={},p={},m=function(g){var M;p[g]||(p[g]=!0,b[g]=!0,(M=N.outEdges(g))===null||M===void 0||M.forEach(function(_){b[_.w]?E.push(_):m(_.w)}),delete b[g])};return N.nodes().forEach(m),E},k=function(N){N.edges().forEach(function(E){var b=N.edge(E);if(b.reversed){N.removeEdgeObj(E);var p=b.forwardName;delete b.reversed,delete b.forwardName,N.setEdge(E.w,E.v,b,p)}})};F.default={run:R,undo:k}},11500:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(69209),W=function(L){var k,N=function(E){var b=L.children(E),p=L.node(E);if(b!=null&&b.length&&b.forEach(function(M){return N(M)}),p.hasOwnProperty("minRank")){p.borderLeft=[],p.borderRight=[];for(var m=p.minRank,g=p.maxRank+1;m<g;m+=1)R(L,"borderLeft","_bl",E,p,m),R(L,"borderRight","_br",E,p,m)}};(k=L.children())===null||k===void 0||k.forEach(function(E){return N(E)})},R=function(L,k,N,E,b,p){var m={rank:p,borderType:k,width:0,height:0},g=b[k][p-1],M=(0,P.addDummyNode)(L,"border",m,N);b[k][p]=M,L.setParent(M,E),g&&L.setEdge(g,M,{weight:1})};F.default=W},35279:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(b){var p,m=(p=b.graph().rankdir)===null||p===void 0?void 0:p.toLowerCase();(m==="lr"||m==="rl")&&W(b)},P=function(b){var p,m=(p=b.graph().rankdir)===null||p===void 0?void 0:p.toLowerCase();(m==="bt"||m==="rl")&&L(b),(m==="lr"||m==="rl")&&(N(b),W(b))},W=function(b){b.nodes().forEach(function(p){R(b.node(p))}),b.edges().forEach(function(p){R(b.edge(p))})},R=function(b){var p=b.width;b.width=b.height,b.height=p},L=function(b){b.nodes().forEach(function(p){k(b.node(p))}),b.edges().forEach(function(p){var m,g=b.edge(p);(m=g.points)===null||m===void 0||m.forEach(function(M){return k(M)}),g.hasOwnProperty("y")&&k(g)})},k=function(b){b!=null&&b.y&&(b.y=-b.y)},N=function(b){b.nodes().forEach(function(p){E(b.node(p))}),b.edges().forEach(function(p){var m,g=b.edge(p);(m=g.points)===null||m===void 0||m.forEach(function(M){return E(M)}),g.hasOwnProperty("x")&&E(g)})},E=function(b){var p=b.x;b.x=b.y,b.y=p};F.default={adjust:B,undo:P}},55532:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(R,L){if(R!=="next"&&R!=="prev")return L},P=function(R){R.prev.next=R.next,R.next.prev=R.prev,delete R.next,delete R.prev},W=function(){function R(){var L={};L.prev=L,L.next=L.prev,this.shortcut=L}return R.prototype.dequeue=function(){var L=this.shortcut,k=L.prev;if(k&&k!==L)return P(k),k},R.prototype.enqueue=function(L){var k=this.shortcut;L.prev&&L.next&&P(L),L.next=k.next,k.next.prev=L,k.next=L,L.prev=k},R.prototype.toString=function(){for(var L=[],k=this.shortcut,N=k.prev;N!==k;)L.push(JSON.stringify(N,B)),N=N==null?void 0:N.prev;return"[".concat(L.join(", "),"]")},R}();F.default=W},40773:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var _=function(S,O){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,d){y.__proto__=d}||function(y,d){for(var V in d)Object.prototype.hasOwnProperty.call(d,V)&&(y[V]=d[V])},_(S,O)};return function(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");_(S,O);function y(){this.constructor=S}S.prototype=O===null?Object.create(O):(y.prototype=O.prototype,new y)}}(),W=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(F,"__esModule",{value:!0});var R=W(B(55532)),L=B(99905),k=function(_){P(S,_);function S(){return _!==null&&_.apply(this,arguments)||this}return S}(R.default),N=function(_){P(S,_);function S(){return _!==null&&_.apply(this,arguments)||this}return S}(L.Graph),E=function(){return 1},b=function(_,S){var O;if(_.nodeCount()<=1)return[];var y=g(_,S||E),d=p(y.graph,y.buckets,y.zeroIdx);return(O=d.map(function(V){return _.outEdges(V.v,V.w)}))===null||O===void 0?void 0:O.flat()},p=function(_,S,O){for(var y=[],d=S[S.length-1],V=S[0],q;_.nodeCount();){for(;q=V.dequeue();)m(_,S,O,q);for(;q=d.dequeue();)m(_,S,O,q);if(_.nodeCount()){for(var Y=S.length-2;Y>0;--Y)if(q=S[Y].dequeue(),q){y=y.concat(m(_,S,O,q,!0));break}}}return y},m=function(_,S,O,y,d){var V,q,Y=[];return(V=_.inEdges(y.v))===null||V===void 0||V.forEach(function(X){var H=_.edge(X),J=_.node(X.v);d&&Y.push({v:X.v,w:X.w,in:0,out:0}),J.out===void 0&&(J.out=0),J.out-=H,M(S,O,J)}),(q=_.outEdges(y.v))===null||q===void 0||q.forEach(function(X){var H=_.edge(X),J=X.w,nt=_.node(J);nt.in===void 0&&(nt.in=0),nt.in-=H,M(S,O,nt)}),_.removeNode(y.v),d?Y:void 0},g=function(_,S){var O=new N,y=0,d=0;_.nodes().forEach(function(H){O.setNode(H,{v:H,in:0,out:0})}),_.edges().forEach(function(H){var J=O.edge(H)||0,nt=(S==null?void 0:S(H))||1,tt=J+nt;O.setEdge(H.v,H.w,tt),d=Math.max(d,O.node(H.v).out+=nt),y=Math.max(y,O.node(H.w).in+=nt)});for(var V=[],q=d+y+3,Y=0;Y<q;Y++)V.push(new k);var X=y+1;return O.nodes().forEach(function(H){M(V,X,O.node(H))}),{buckets:V,zeroIdx:X,graph:O}},M=function(_,S,O){O.out?O.in?_[O.out-O.in+S].enqueue(O):_[_.length-1].enqueue(O):_[0].enqueue(O)};F.default=b},65236:function(Le,F,B){"use strict";var P=this&&this.__assign||function(){return P=Object.assign||function(Gt){for(var zt,ue=1,we=arguments.length;ue<we;ue++){zt=arguments[ue];for(var de in zt)Object.prototype.hasOwnProperty.call(zt,de)&&(Gt[de]=zt[de])}return Gt},P.apply(this,arguments)},W=this&&this.__importDefault||function(Gt){return Gt&&Gt.__esModule?Gt:{default:Gt}};Object.defineProperty(F,"__esModule",{value:!0});var R=W(B(78029)),L=W(B(46171)),k=W(B(76827)),N=B(69209),E=W(B(33562)),b=W(B(59596)),p=W(B(11500)),m=W(B(35279)),g=W(B(19597)),M=W(B(95)),_=W(B(24956)),S=B(27652),O=function(Gt,zt){var ue=zt&&zt.debugTiming?N.time:N.notime;ue("layout",function(){zt&&!zt.keepNodeOrder&&zt.prevGraph&&ue("  inheritOrder",function(){d(Gt,zt.prevGraph)});var we=ue("  buildLayoutGraph",function(){return ct(Gt)});zt&&zt.edgeLabelSpace===!1||ue("  makeSpaceForEdgeLabels",function(){ht(we)});try{ue("  runLayout",function(){y(we,ue,zt)})}catch(de){if(de.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,de);return}throw de}ue("  updateInputGraph",function(){V(Gt,we)})})},y=function(Gt,zt,ue){zt("    removeSelfEdges",function(){Bt(Gt)}),zt("    acyclic",function(){R.default.run(Gt)}),zt("    nestingGraph.run",function(){b.default.run(Gt)}),zt("    rank",function(){(0,k.default)((0,N.asNonCompoundGraph)(Gt))}),zt("    injectEdgeLabelProxies",function(){Lt(Gt)}),zt("    removeEmptyRanks",function(){(0,N.removeEmptyRanks)(Gt)}),zt("    nestingGraph.cleanup",function(){b.default.cleanup(Gt)}),zt("    normalizeRanks",function(){(0,N.normalizeRanks)(Gt)}),zt("    assignRankMinMax",function(){St(Gt)}),zt("    removeEdgeLabelProxies",function(){Zt(Gt)}),zt("    normalize.run",function(){L.default.run(Gt)}),zt("    parentDummyChains",function(){(0,E.default)(Gt)}),zt("    addBorderSegments",function(){(0,p.default)(Gt)}),ue&&ue.keepNodeOrder&&zt("    initDataOrder",function(){(0,_.default)(Gt,ue.nodeOrder)}),zt("    order",function(){(0,g.default)(Gt,ue==null?void 0:ue.keepNodeOrder)}),zt("    insertSelfEdges",function(){Pt(Gt)}),zt("    adjustCoordinateSystem",function(){m.default.adjust(Gt)}),zt("    position",function(){(0,M.default)(Gt)}),zt("    positionSelfEdges",function(){Ht(Gt)}),zt("    removeBorderNodes",function(){Et(Gt)}),zt("    normalize.undo",function(){L.default.undo(Gt)}),zt("    fixupEdgeLabelCoords",function(){Z(Gt)}),zt("    undoCoordinateSystem",function(){m.default.undo(Gt)}),zt("    translateGraph",function(){Ut(Gt)}),zt("    assignNodeIntersects",function(){Ot(Gt)}),zt("    reversePoints",function(){st(Gt)}),zt("    acyclic.undo",function(){R.default.undo(Gt)})},d=function(Gt,zt){Gt.nodes().forEach(function(ue){var we=Gt.node(ue),de=zt.node(ue);de!==void 0?(we.fixorder=de._order,delete de._order):delete we.fixorder})},V=function(Gt,zt){Gt.nodes().forEach(function(ue){var we,de=Gt.node(ue);if(de){var Mt=zt.node(ue);de.x=Mt.x,de.y=Mt.y,de._order=Mt.order,de._rank=Mt.rank,!((we=zt.children(ue))===null||we===void 0)&&we.length&&(de.width=Mt.width,de.height=Mt.height)}}),Gt.edges().forEach(function(ue){var we=Gt.edge(ue),de=zt.edge(ue);we.points=de?de.points:[],de&&de.hasOwnProperty("x")&&(we.x=de.x,we.y=de.y)}),Gt.graph().width=zt.graph().width,Gt.graph().height=zt.graph().height},q=["nodesep","edgesep","ranksep","marginx","marginy"],Y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X=["acyclicer","ranker","rankdir","align"],H=["width","height","layer","fixorder"],J={width:0,height:0},nt=["minlen","weight","width","height","labeloffset"],tt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},at=["labelpos"],ct=function(Gt){var zt=new S.Graph({multigraph:!0,compound:!0}),ue=ye(Gt.graph()),we={};return X==null||X.forEach(function(de){ue[de]!==void 0&&(we[de]=ue[de])}),zt.setGraph(Object.assign({},Y,le(ue,q),we)),Gt.nodes().forEach(function(de){var Mt=ye(Gt.node(de)),ee=P(P({},J),Mt),ce=le(ee,H);zt.setNode(de,ce),zt.setParent(de,Gt.parent(de))}),Gt.edges().forEach(function(de){var Mt=ye(Gt.edge(de)),ee={};at==null||at.forEach(function(ce){Mt[ce]!==void 0&&(ee[ce]=Mt[ce])}),zt.setEdgeObj(de,Object.assign({},tt,le(Mt,nt),ee))}),zt},ht=function(Gt){var zt=Gt.graph();zt.ranksep||(zt.ranksep=0),zt.ranksep/=2,Gt.nodes().forEach(function(ue){var we=Gt.node(ue);isNaN(we.layer)||we.layer||(we.layer=0)}),Gt.edges().forEach(function(ue){var we,de=Gt.edge(ue);de.minlen*=2,((we=de.labelpos)===null||we===void 0?void 0:we.toLowerCase())!=="c"&&(zt.rankdir==="TB"||zt.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})},Lt=function(Gt){Gt.edges().forEach(function(zt){var ue=Gt.edge(zt);if(ue.width&&ue.height){var we=Gt.node(zt.v),de=Gt.node(zt.w),Mt={e:zt,rank:(de.rank-we.rank)/2+we.rank};(0,N.addDummyNode)(Gt,"edge-proxy",Mt,"_ep")}})},St=function(Gt){var zt=0;Gt.nodes().forEach(function(ue){var we,de,Mt=Gt.node(ue);Mt.borderTop&&(Mt.minRank=(we=Gt.node(Mt.borderTop))===null||we===void 0?void 0:we.rank,Mt.maxRank=(de=Gt.node(Mt.borderBottom))===null||de===void 0?void 0:de.rank,zt=Math.max(zt,Mt.maxRank||-1/0))}),Gt.graph().maxRank=zt},Zt=function(Gt){Gt.nodes().forEach(function(zt){var ue=Gt.node(zt);ue.dummy==="edge-proxy"&&(Gt.edge(ue.e).labelRank=ue.rank,Gt.removeNode(zt))})},Ut=function(Gt){var zt,ue=0,we,de=0,Mt=Gt.graph(),ee=Mt.marginx||0,ce=Mt.marginy||0,At=function(Wt){if(Wt){var fe=Wt.x,Ge=Wt.y,Be=Wt.width,_r=Wt.height;!isNaN(fe)&&!isNaN(Be)&&(zt===void 0&&(zt=fe-Be/2),zt=Math.min(zt,fe-Be/2),ue=Math.max(ue,fe+Be/2)),!isNaN(Ge)&&!isNaN(_r)&&(we===void 0&&(we=Ge-_r/2),we=Math.min(we,Ge-_r/2),de=Math.max(de,Ge+_r/2))}};Gt.nodes().forEach(function(Wt){At(Gt.node(Wt))}),Gt.edges().forEach(function(Wt){var fe=Gt.edge(Wt);fe!=null&&fe.hasOwnProperty("x")&&At(fe)}),zt-=ee,we-=ce,Gt.nodes().forEach(function(Wt){var fe=Gt.node(Wt);fe&&(fe.x-=zt,fe.y-=we)}),Gt.edges().forEach(function(Wt){var fe,Ge=Gt.edge(Wt);(fe=Ge.points)===null||fe===void 0||fe.forEach(function(Be){Be.x-=zt,Be.y-=we}),Ge.hasOwnProperty("x")&&(Ge.x-=zt),Ge.hasOwnProperty("y")&&(Ge.y-=we)}),Mt.width=ue-zt+ee,Mt.height=de-we+ce},Ot=function(Gt){Gt.edges().forEach(function(zt){var ue=Gt.edge(zt),we=Gt.node(zt.v),de=Gt.node(zt.w),Mt,ee;ue.points?(Mt=ue.points[0],ee=ue.points[ue.points.length-1]):(ue.points=[],Mt=de,ee=we),ue.points.unshift((0,N.intersectRect)(we,Mt)),ue.points.push((0,N.intersectRect)(de,ee))})},Z=function(Gt){Gt.edges().forEach(function(zt){var ue=Gt.edge(zt);if(ue!=null&&ue.hasOwnProperty("x"))switch((ue.labelpos==="l"||ue.labelpos==="r")&&(ue.width-=ue.labeloffset),ue.labelpos){case"l":ue.x-=ue.width/2+ue.labeloffset;break;case"r":ue.x+=ue.width/2+ue.labeloffset;break}})},st=function(Gt){Gt.edges().forEach(function(zt){var ue,we=Gt.edge(zt);we.reversed&&((ue=we.points)===null||ue===void 0||ue.reverse())})},Et=function(Gt){Gt.nodes().forEach(function(zt){var ue,we,de;if(!((ue=Gt.children(zt))===null||ue===void 0)&&ue.length){var Mt=Gt.node(zt),ee=Gt.node(Mt.borderTop),ce=Gt.node(Mt.borderBottom),At=Gt.node(Mt.borderLeft[((we=Mt.borderLeft)===null||we===void 0?void 0:we.length)-1]),Wt=Gt.node(Mt.borderRight[((de=Mt.borderRight)===null||de===void 0?void 0:de.length)-1]);Mt.width=Math.abs((Wt==null?void 0:Wt.x)-(At==null?void 0:At.x))||10,Mt.height=Math.abs((ce==null?void 0:ce.y)-(ee==null?void 0:ee.y))||10,Mt.x=((At==null?void 0:At.x)||0)+Mt.width/2,Mt.y=((ee==null?void 0:ee.y)||0)+Mt.height/2}}),Gt.nodes().forEach(function(zt){var ue;((ue=Gt.node(zt))===null||ue===void 0?void 0:ue.dummy)==="border"&&Gt.removeNode(zt)})},Bt=function(Gt){Gt.edges().forEach(function(zt){if(zt.v===zt.w){var ue=Gt.node(zt.v);ue.selfEdges||(ue.selfEdges=[]),ue.selfEdges.push({e:zt,label:Gt.edge(zt)}),Gt.removeEdgeObj(zt)}})},Pt=function(Gt){var zt=(0,N.buildLayerMatrix)(Gt);zt==null||zt.forEach(function(ue){var we=0;ue==null||ue.forEach(function(de,Mt){var ee,ce=Gt.node(de);ce.order=Mt+we,(ee=ce.selfEdges)===null||ee===void 0||ee.forEach(function(At){(0,N.addDummyNode)(Gt,"selfedge",{width:At.label.width,height:At.label.height,rank:ce.rank,order:Mt+ ++we,e:At.e,label:At.label},"_se")}),delete ce.selfEdges})})},Ht=function(Gt){Gt.nodes().forEach(function(zt){var ue=Gt.node(zt);if(ue.dummy==="selfedge"){var we=Gt.node(ue.e.v),de=we.x+we.width/2,Mt=we.y,ee=ue.x-de,ce=we.height/2;Gt.setEdgeObj(ue.e,ue.label),Gt.removeNode(zt),ue.label.points=[{x:de+2*ee/3,y:Mt-ce},{x:de+5*ee/6,y:Mt-ce},{y:Mt,x:de+ee},{x:de+5*ee/6,y:Mt+ce},{x:de+2*ee/3,y:Mt+ce}],ue.label.x=ue.x,ue.label.y=ue.y}})},le=function(Gt,zt){var ue={};return zt==null||zt.forEach(function(we){Gt[we]!==void 0&&(ue[we]=+Gt[we])}),ue},ye=function(Gt){Gt===void 0&&(Gt={});var zt={};return Object.keys(Gt).forEach(function(ue){zt[ue.toLowerCase()]=Gt[ue]}),zt};F.default=O},59596:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(69209),W=function(E){var b,p=(0,P.addDummyNode)(E,"root",{},"_root"),m=L(E),g=Math.max.apply(Math,Object.values(m));Math.abs(g)===1/0&&(g=1);var M=g-1,_=2*M+1;E.graph().nestingRoot=p,E.edges().forEach(function(O){E.edge(O).minlen*=_});var S=k(E)+1;(b=E.children())===null||b===void 0||b.forEach(function(O){R(E,p,_,S,M,m,O)}),E.graph().nodeRankFactor=_},R=function(E,b,p,m,g,M,_){var S=E.children(_);if(!(S!=null&&S.length)){_!==b&&E.setEdge(b,_,{weight:0,minlen:p});return}var O=(0,P.addBorderNode)(E,"_bt"),y=(0,P.addBorderNode)(E,"_bb"),d=E.node(_);E.setParent(O,_),d.borderTop=O,E.setParent(y,_),d.borderBottom=y,S==null||S.forEach(function(V){R(E,b,p,m,g,M,V);var q=E.node(V),Y=q.borderTop?q.borderTop:V,X=q.borderBottom?q.borderBottom:V,H=q.borderTop?m:2*m,J=Y!==X?1:g-M[_]+1;E.setEdge(O,Y,{minlen:J,weight:H,nestingEdge:!0}),E.setEdge(X,y,{minlen:J,weight:H,nestingEdge:!0})}),E.parent(_)||E.setEdge(b,O,{weight:0,minlen:g+M[_]})},L=function(E){var b,p={},m=function(g,M){var _=E.children(g);_==null||_.forEach(function(S){return m(S,M+1)}),p[g]=M};return(b=E.children())===null||b===void 0||b.forEach(function(g){return m(g,1)}),p},k=function(E){var b=0;return E.edges().forEach(function(p){b+=E.edge(p).weight}),b},N=function(E){var b=E.graph();b.nestingRoot&&E.removeNode(b.nestingRoot),delete b.nestingRoot,E.edges().forEach(function(p){var m=E.edge(p);m.nestingEdge&&E.removeEdgeObj(p)})};F.default={run:W,cleanup:N}},46171:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(69209),W=function(k){k.graph().dummyChains=[],k.edges().forEach(function(N){return R(k,N)})},R=function(k,N){var E=N.v,b=k.node(E).rank,p=N.w,m=k.node(p).rank,g=N.name,M=k.edge(N),_=M.labelRank;if(m!==b+1){k.removeEdgeObj(N);var S=k.graph(),O,y,d;for(d=0,++b;b<m;++d,++b)M.points=[],y={edgeLabel:M,width:0,height:0,edgeObj:N,rank:b},O=(0,P.addDummyNode)(k,"edge",y,"_d"),b===_&&(y.width=M.width,y.height=M.height,y.dummy="edge-label",y.labelpos=M.labelpos),k.setEdge(E,O,{weight:M.weight},g),d===0&&(S.dummyChains||(S.dummyChains=[]),S.dummyChains.push(O)),E=O;k.setEdge(E,p,{weight:M.weight},g)}},L=function(k){var N;(N=k.graph().dummyChains)===null||N===void 0||N.forEach(function(E){var b=k.node(E),p=b.edgeLabel,m;b.edgeObj&&k.setEdgeObj(b.edgeObj,p);for(var g=E;b.dummy;)m=k.successors(g)[0],k.removeNode(g),p.points.push({x:b.x,y:b.y}),b.dummy==="edge-label"&&(p.x=b.x,p.y=b.y,p.width=b.width,p.height=b.height),g=m,b=k.node(g)})};F.default={run:W,undo:L}},80314:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(P,W,R){var L={},k;R==null||R.forEach(function(N){for(var E=P.parent(N),b,p;E;){if(b=P.parent(E),b?(p=L[b],L[b]=E):(p=k,k=E),p&&p!==E){W.setEdge(p,E);return}E=b}})};F.default=B},89921:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(P,W){return W.map(function(R){var L=P.inEdges(R);if(!(L!=null&&L.length))return{v:R};{var k={sum:0,weight:0};return L==null||L.forEach(function(N){var E=P.edge(N),b=P.node(N.v);k.sum+=E.weight*b.order,k.weight+=E.weight}),{v:R,barycenter:k.sum/k.weight,weight:k.weight}}})};F.default=B},77006:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(27652),W=function(L,k,N){var E=R(L),b=new P.Graph({compound:!0}).setGraph({root:E}).setDefaultNodeLabel(function(p){return L.node(p)});return L.nodes().forEach(function(p){var m,g=L.node(p),M=L.parent(p);(g.rank===k||g.minRank<=k&&k<=g.maxRank)&&(b.setNode(p),b.setParent(p,M||E),(m=L[N](p))===null||m===void 0||m.forEach(function(_){var S=_.v===p?_.w:_.v,O=b.edgeFromArgs(S,p),y=O!==void 0?O.weight:0;b.setEdge(S,p,{weight:L.edge(_).weight+y})}),g.hasOwnProperty("minRank")&&b.setNode(p,{borderLeft:g.borderLeft[k],borderRight:g.borderRight[k]}))}),b},R=function(L){for(var k;L.hasNode(k="_root".concat(Math.random())););return k};F.default=W},32957:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(69209),W=function(L,k,N){for(var E=(0,P.zipObject)(N,N.map(function(S,O){return O})),b=k.map(function(S){var O,y=(O=L.outEdges(S))===null||O===void 0?void 0:O.map(function(d){return{pos:E[d.w]||0,weight:L.edge(d).weight}});return y==null?void 0:y.sort(function(d,V){return d.pos-V.pos})}),p=b.flat().filter(function(S){return S!==void 0}),m=1;m<N.length;)m<<=1;var g=2*m-1;m-=1;var M=Array(g).fill(0,0,g),_=0;return p==null||p.forEach(function(S){if(S){var O=S.pos+m;M[O]+=S.weight;for(var y=0;O>0;)O%2&&(y+=M[O+1]),O=O-1>>1,M[O]+=S.weight;_+=S.weight*y}}),_},R=function(L,k){for(var N=0,E=1;E<(k==null?void 0:k.length);E+=1)N+=W(L,k[E-1],k[E]);return N};F.default=R},19597:function(Le,F,B){"use strict";var P=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(F,"__esModule",{value:!0});var W=P(B(15697)),R=P(B(32957)),L=P(B(77006)),k=P(B(80314)),N=P(B(99455)),E=B(49784),b=B(27652),p=B(69209),m=function(S,O){for(var y=(0,p.maxRank)(S),d=[],V=[],q=1;q<y+1;q++)d.push(q);for(var q=y-1;q>-1;q--)V.push(q);var Y=g(S,d,"inEdges"),X=g(S,V,"outEdges"),H=(0,W.default)(S);_(S,H);for(var J=Number.POSITIVE_INFINITY,nt,q=0,tt=0;tt<4;++q,++tt){M(q%2?Y:X,q%4>=2,!1,O),H=(0,p.buildLayerMatrix)(S);var at=(0,R.default)(S,H);at<J&&(tt=0,nt=(0,E.clone)(H),J=at)}H=(0,W.default)(S),_(S,H);for(var q=0,tt=0;tt<4;++q,++tt){M(q%2?Y:X,q%4>=2,!0,O),H=(0,p.buildLayerMatrix)(S);var at=(0,R.default)(S,H);at<J&&(tt=0,nt=(0,E.clone)(H),J=at)}_(S,nt)},g=function(S,O,y){return O.map(function(d){return(0,L.default)(S,d,y)})},M=function(S,O,y,d){var V=new b.Graph;S==null||S.forEach(function(q){for(var Y,X=q.graph().root,H=(0,N.default)(q,X,V,O,y,d),J=0;J<((Y=H.vs)===null||Y===void 0?void 0:Y.length);J++){var nt=q.node(H.vs[J]);nt&&(nt.order=J)}(0,k.default)(q,V,H.vs)})},_=function(S,O){O==null||O.forEach(function(y){y==null||y.forEach(function(d,V){S.node(d).order=V})})};F.default=m},24956:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(P,W){for(var R=P.nodes().filter(function(b){var p;return!(!((p=P.children(b))===null||p===void 0)&&p.length)}),L=R.map(function(b){return P.node(b).rank}),k=Math.max.apply(Math,L),N=[],E=0;E<k+1;E++)N[E]=[];W==null||W.forEach(function(b){var p=P.node(b);!p||p!=null&&p.dummy||isNaN(p.rank)||(p.fixorder=N[p.rank].length,N[p.rank].push(b))})};F.default=B},15697:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(P){for(var W={},R=P.nodes().filter(function(M){var _;return!(!((_=P.children(M))===null||_===void 0)&&_.length)}),L=R.map(function(M){return P.node(M).rank}),k=Math.max.apply(Math,L),N=[],E=0;E<k+1;E++)N.push([]);var b=function(M){var _;if(!W.hasOwnProperty(M)){W[M]=!0;var S=P.node(M);isNaN(S.rank)||N[S.rank].push(M),(_=P.successors(M))===null||_===void 0||_.forEach(function(O){return b(O)})}},p=R.sort(function(M,_){return P.node(M).rank-P.node(_).rank}),m=p.filter(function(M){return P.node(M).fixorder!==void 0}),g=m.sort(function(M,_){return P.node(M).fixorder-P.node(_).fixorder});return g==null||g.forEach(function(M){isNaN(P.node(M).rank)||N[P.node(M).rank].push(M),W[M]=!0}),p==null||p.forEach(b),N};F.default=B},7043:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(R,L){var k,N,E,b={};R==null||R.forEach(function(m,g){b[m.v]={i:g,indegree:0,in:[],out:[],vs:[m.v]};var M=b[m.v];m.barycenter!==void 0&&(M.barycenter=m.barycenter,M.weight=m.weight)}),(k=L.edges())===null||k===void 0||k.forEach(function(m){var g=b[m.v],M=b[m.w];g!==void 0&&M!==void 0&&(M.indegree++,g.out.push(b[m.w]))});var p=(E=(N=Object.values(b)).filter)===null||E===void 0?void 0:E.call(N,function(m){return!m.indegree});return P(p)},P=function(R){for(var L,k,N=[],E=function(M){return function(_){_.merged||(_.barycenter===void 0||M.barycenter===void 0||_.barycenter>=M.barycenter)&&W(M,_)}},b=function(M){return function(_){_.in.push(M),--_.indegree===0&&R.push(_)}},p=function(){var M=R.pop();N.push(M),(L=M.in.reverse())===null||L===void 0||L.forEach(function(_){return E(M)(_)}),(k=M.out)===null||k===void 0||k.forEach(function(_){return b(M)(_)})};R!=null&&R.length;)p();var m=N.filter(function(M){return!M.merged}),g=["vs","i","barycenter","weight"];return m.map(function(M){var _={};return g==null||g.forEach(function(S){M[S]!==void 0&&(_[S]=M[S])}),_})},W=function(R,L){var k,N=0,E=0;R.weight&&(N+=R.barycenter*R.weight,E+=R.weight),L.weight&&(N+=L.barycenter*L.weight,E+=L.weight),R.vs=(k=L.vs)===null||k===void 0?void 0:k.concat(R.vs),R.barycenter=N/E,R.weight=E,R.i=Math.min(L.i,R.i),L.merged=!0};F.default=B},99455:function(Le,F,B){"use strict";var P=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(F,"__esModule",{value:!0});var W=P(B(89921)),R=P(B(7043)),L=P(B(21498)),k=function(b,p,m,g,M,_){var S,O,y,d,V=b.children(p),q=b.node(p),Y=q?q.borderLeft:void 0,X=q?q.borderRight:void 0,H={};Y&&(V=V==null?void 0:V.filter(function(ht){return ht!==Y&&ht!==X}));var J=(0,W.default)(b,V||[]);J==null||J.forEach(function(ht){var Lt;if(!((Lt=b.children(ht.v))===null||Lt===void 0)&&Lt.length){var St=k(b,ht.v,m,g,_);H[ht.v]=St,St.hasOwnProperty("barycenter")&&E(ht,St)}});var nt=(0,R.default)(J,m);N(nt,H),(S=nt.filter(function(ht){return ht.vs.length>0}))===null||S===void 0||S.forEach(function(ht){var Lt=b.node(ht.vs[0]);Lt&&(ht.fixorder=Lt.fixorder,ht.order=Lt.order)});var tt=(0,L.default)(nt,g,M,_);if(Y&&(tt.vs=[Y,tt.vs,X].flat(),!((O=b.predecessors(Y))===null||O===void 0)&&O.length)){var at=b.node(((y=b.predecessors(Y))===null||y===void 0?void 0:y[0])||""),ct=b.node(((d=b.predecessors(X))===null||d===void 0?void 0:d[0])||"");tt.hasOwnProperty("barycenter")||(tt.barycenter=0,tt.weight=0),tt.barycenter=(tt.barycenter*tt.weight+at.order+ct.order)/(tt.weight+2),tt.weight+=2}return tt},N=function(b,p){b==null||b.forEach(function(m){var g,M=(g=m.vs)===null||g===void 0?void 0:g.map(function(_){return p[_]?p[_].vs:_});m.vs=M.flat()})},E=function(b,p){b.barycenter!==void 0?(b.barycenter=(b.barycenter*b.weight+p.barycenter*p.weight)/(b.weight+p.weight),b.weight+=p.weight):(b.barycenter=p.barycenter,b.weight=p.weight)};F.default=k},21498:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(69209),W=function(k,N,E,b){var p=(0,P.partition)(k,function(d){var V=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return b?!V&&d.hasOwnProperty("barycenter"):V||d.hasOwnProperty("barycenter")}),m=p.lhs,g=p.rhs.sort(function(d,V){return-d.i- -V.i}),M=[],_=0,S=0,O=0;m==null||m.sort(L(!!N,!!E)),O=R(M,g,O),m==null||m.forEach(function(d){var V;O+=(V=d.vs)===null||V===void 0?void 0:V.length,M.push(d.vs),_+=d.barycenter*d.weight,S+=d.weight,O=R(M,g,O)});var y={vs:M.flat()};return S&&(y.barycenter=_/S,y.weight=S),y},R=function(k,N,E){for(var b=E,p;N.length&&(p=N[N.length-1]).i<=b;)N.pop(),k==null||k.push(p.vs),b++;return b},L=function(k,N){return function(E,b){if(E.fixorder!==void 0&&b.fixorder!==void 0)return E.fixorder-b.fixorder;if(E.barycenter<b.barycenter)return-1;if(E.barycenter>b.barycenter)return 1;if(N&&E.order!==void 0&&b.order!==void 0){if(E.order<b.order)return-1;if(E.order>b.order)return 1}return k?b.i-E.i:E.i-b.i}};F.default=W},33562:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(R){var L,k={},N=0,E=function(b){var p,m=N;(p=R.children(b))===null||p===void 0||p.forEach(E),k[b]={low:m,lim:N++}};return(L=R.children())===null||L===void 0||L.forEach(E),k},P=function(R,L,k,N){var E=[],b=[],p=Math.min(L[k].low,L[N].low),m=Math.max(L[k].lim,L[N].lim),g,M;g=k;do g=R.parent(g),E.push(g);while(g&&(L[g].low>p||m>L[g].lim));for(M=g,g=N;g&&g!==M;)b.push(g),g=R.parent(g);return{lca:M,path:E.concat(b.reverse())}},W=function(R){var L,k=B(R);(L=R.graph().dummyChains)===null||L===void 0||L.forEach(function(N){var E,b,p=N,m=R.node(p),g=m.edgeObj;if(g)for(var M=P(R,k,g.v,g.w),_=M.path,S=M.lca,O=0,y=_[O],d=!0;p!==g.w;){if(m=R.node(p),d){for(;y!==S&&((E=R.node(y))===null||E===void 0?void 0:E.maxRank)<m.rank;)O++,y=_[O];y===S&&(d=!1)}if(!d){for(;O<_.length-1&&((b=R.node(_[O+1]))===null||b===void 0?void 0:b.minRank)<=m.rank;)O++;y=_[O]}R.setParent(p,y),p=R.successors(p)[0]}})};F.default=W},71963:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var q=function(Y,X){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,J){H.__proto__=J}||function(H,J){for(var nt in J)Object.prototype.hasOwnProperty.call(J,nt)&&(H[nt]=J[nt])},q(Y,X)};return function(Y,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");q(Y,X);function H(){this.constructor=Y}Y.prototype=X===null?Object.create(X):(H.prototype=X.prototype,new H)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.width=F.sep=F.positionX=F.balance=F.alignCoordinates=F.findSmallestWidthAlignment=F.buildBlockGraph=F.horizontalCompaction=F.verticalAlignment=F.hasConflict=F.addConflict=F.findOtherInnerSegmentNode=F.findType2Conflicts=F.findType1Conflicts=void 0;var W=B(99905),R=B(69209),L=function(q){P(Y,q);function Y(){return q!==null&&q.apply(this,arguments)||this}return Y}(W.Graph),k=function(q,Y){var X={},H=function(J,nt){var tt=0,at=0,ct=J.length,ht=nt==null?void 0:nt[(nt==null?void 0:nt.length)-1];return nt==null||nt.forEach(function(Lt,St){var Zt,Ut=(0,F.findOtherInnerSegmentNode)(q,Lt),Ot=Ut?q.node(Ut).order:ct;(Ut||Lt===ht)&&((Zt=nt.slice(at,St+1))===null||Zt===void 0||Zt.forEach(function(Z){var st;(st=q.predecessors(Z))===null||st===void 0||st.forEach(function(Et){var Bt,Pt=q.node(Et),Ht=Pt.order;(Ht<tt||Ot<Ht)&&!(Pt.dummy&&(!((Bt=q.node(Z))===null||Bt===void 0)&&Bt.dummy))&&(0,F.addConflict)(X,Et,Z)})}),at=St+1,tt=Ot)}),nt};return Y!=null&&Y.length&&Y.reduce(H),X};F.findType1Conflicts=k;var N=function(q,Y){var X={};function H(at,ct,ht,Lt,St){for(var Zt,Ut,Ot,Z=ct;Z<ht;Z++)Ot=at[Z],!((Zt=q.node(Ot))===null||Zt===void 0)&&Zt.dummy&&((Ut=q.predecessors(Ot))===null||Ut===void 0||Ut.forEach(function(st){var Et=q.node(st);Et.dummy&&(Et.order<Lt||Et.order>St)&&(0,F.addConflict)(X,st,Ot)}))}function J(at){return JSON.stringify(at.slice(1))}function nt(at,ct){var ht=J(at);ct.get(ht)||(H.apply(void 0,at),ct.set(ht,!0))}var tt=function(at,ct){var ht=-1,Lt,St=0,Zt=new Map;return ct==null||ct.forEach(function(Ut,Ot){var Z;if(((Z=q.node(Ut))===null||Z===void 0?void 0:Z.dummy)==="border"){var st=q.predecessors(Ut)||[];st.length&&(Lt=q.node(st[0]).order,nt([ct,St,Ot,ht,Lt],Zt),St=Ot,ht=Lt)}nt([ct,St,ct.length,Lt,at.length],Zt)}),ct};return Y!=null&&Y.length&&Y.reduce(tt),X};F.findType2Conflicts=N;var E=function(q,Y){var X,H;if(!((X=q.node(Y))===null||X===void 0)&&X.dummy)return(H=q.predecessors(Y))===null||H===void 0?void 0:H.find(function(J){return q.node(J).dummy})};F.findOtherInnerSegmentNode=E;var b=function(q,Y,X){var H=Y,J=X;if(H>J){var nt=H;H=J,J=nt}var tt=q[H];tt||(q[H]=tt={}),tt[J]=!0};F.addConflict=b;var p=function(q,Y,X){var H=Y,J=X;if(H>J){var nt=Y;H=J,J=nt}return!!q[H]};F.hasConflict=p;var m=function(q,Y,X,H){var J={},nt={},tt={};return Y==null||Y.forEach(function(at){at==null||at.forEach(function(ct,ht){J[ct]=ct,nt[ct]=ct,tt[ct]=ht})}),Y==null||Y.forEach(function(at){var ct=-1;at==null||at.forEach(function(ht){var Lt=H(ht);if(Lt.length){Lt=Lt.sort(function(Z,st){return tt[Z]-tt[st]});for(var St=(Lt.length-1)/2,Zt=Math.floor(St),Ut=Math.ceil(St);Zt<=Ut;++Zt){var Ot=Lt[Zt];nt[ht]===ht&&ct<tt[Ot]&&!(0,F.hasConflict)(X,ht,Ot)&&(nt[Ot]=ht,nt[ht]=J[ht]=J[Ot],ct=tt[Ot])}}})}),{root:J,align:nt}};F.verticalAlignment=m;var g=function(q,Y,X,H,J){var nt,tt={},at=(0,F.buildBlockGraph)(q,Y,X,J),ct=J?"borderLeft":"borderRight",ht=function(Zt,Ut){for(var Ot=at.nodes(),Z=Ot.pop(),st={};Z;)st[Z]?Zt(Z):(st[Z]=!0,Ot.push(Z),Ot=Ot.concat(Ut(Z))),Z=Ot.pop()},Lt=function(Zt){tt[Zt]=(at.inEdges(Zt)||[]).reduce(function(Ut,Ot){return Math.max(Ut,(tt[Ot.v]||0)+at.edge(Ot))},0)},St=function(Zt){var Ut=(at.outEdges(Zt)||[]).reduce(function(Z,st){return Math.min(Z,(tt[st.w]||0)-at.edge(st))},Number.POSITIVE_INFINITY),Ot=q.node(Zt);Ut!==Number.POSITIVE_INFINITY&&Ot.borderType!==ct&&(tt[Zt]=Math.max(tt[Zt],Ut))};return ht(Lt,at.predecessors.bind(at)),ht(St,at.successors.bind(at)),(nt=Object.values(H))===null||nt===void 0||nt.forEach(function(Zt){tt[Zt]=tt[X[Zt]]}),tt};F.horizontalCompaction=g;var M=function(q,Y,X,H){var J=new L,nt=q.graph(),tt=(0,F.sep)(nt.nodesep,nt.edgesep,H);return Y==null||Y.forEach(function(at){var ct;at==null||at.forEach(function(ht){var Lt=X[ht];if(J.setNode(Lt),ct){var St=X[ct],Zt=J.edgeFromArgs(St,Lt);J.setEdge(St,Lt,Math.max(tt(q,ht,ct),Zt||0))}ct=ht})}),J};F.buildBlockGraph=M;var _=function(q,Y){return(0,R.minBy)(Object.values(Y),function(X){var H,J=Number.NEGATIVE_INFINITY,nt=Number.POSITIVE_INFINITY;return(H=Object.keys(X))===null||H===void 0||H.forEach(function(tt){var at=X[tt],ct=(0,F.width)(q,tt)/2;J=Math.max(at+ct,J),nt=Math.min(at-ct,nt)}),J-nt})};F.findSmallestWidthAlignment=_;function S(q,Y){var X=Object.values(Y),H=Math.min.apply(Math,X),J=Math.max.apply(Math,X);["u","d"].forEach(function(nt){["l","r"].forEach(function(tt){var at=nt+tt,ct=q[at],ht;if(ct!==Y){var Lt=Object.values(ct);ht=tt==="l"?H-Math.min.apply(Math,Lt):J-Math.max.apply(Math,Lt),ht&&(q[at]={},Object.keys(ct).forEach(function(St){q[at][St]=ct[St]+ht}))}})})}F.alignCoordinates=S;var O=function(q,Y){var X={};return Object.keys(q.ul).forEach(function(H){if(Y)X[H]=q[Y.toLowerCase()][H];else{var J=Object.values(q).map(function(nt){return nt[H]});X[H]=(J[0]+J[1])/2}}),X};F.balance=O;var y=function(q){var Y=(0,R.buildLayerMatrix)(q),X=Object.assign((0,F.findType1Conflicts)(q,Y),(0,F.findType2Conflicts)(q,Y)),H={},J;["u","d"].forEach(function(tt){J=tt==="u"?Y:Object.values(Y).reverse(),["l","r"].forEach(function(at){at==="r"&&(J=J.map(function(St){return Object.values(St).reverse()}));var ct=(tt==="u"?q.predecessors:q.successors).bind(q),ht=(0,F.verticalAlignment)(q,J,X,ct),Lt=(0,F.horizontalCompaction)(q,J,ht.root,ht.align,at==="r");at==="r"&&Object.keys(Lt).forEach(function(St){Lt[St]=-Lt[St]}),H[tt+at]=Lt})});var nt=(0,F.findSmallestWidthAlignment)(q,H);return S(H,nt),(0,F.balance)(H,q.graph().align)};F.positionX=y;var d=function(q,Y,X){return function(H,J,nt){var tt=H.node(J),at=H.node(nt),ct=0,ht;if(ct+=tt.width/2,tt.hasOwnProperty("labelpos"))switch((tt.labelpos||"").toLowerCase()){case"l":ht=-tt.width/2;break;case"r":ht=tt.width/2;break}if(ht&&(ct+=X?ht:-ht),ht=0,ct+=(tt.dummy?Y:q)/2,ct+=(at.dummy?Y:q)/2,ct+=at.width/2,at.labelpos)switch((at.labelpos||"").toLowerCase()){case"l":ht=at.width/2;break;case"r":ht=-at.width/2;break}return ht&&(ct+=X?ht:-ht),ht=0,ct}};F.sep=d;var V=function(q,Y){return q.node(Y).width||0};F.width=V},95:function(Le,F,B){"use strict";var P=this&&this.__spreadArray||function(E,b,p){if(p||arguments.length===2)for(var m=0,g=b.length,M;m<g;m++)(M||!(m in b))&&(M||(M=Array.prototype.slice.call(b,0,m)),M[m]=b[m]);return E.concat(M||Array.prototype.slice.call(b))};Object.defineProperty(F,"__esModule",{value:!0});var W=B(69209),R=B(71963),L=function(E){var b=(0,W.buildLayerMatrix)(E),p=E.graph().ranksep,m=0;b==null||b.forEach(function(g){var M=g.map(function(S){return E.node(S).height}),_=Math.max.apply(Math,P(P([],M,!1),[0],!1));g==null||g.forEach(function(S){E.node(S).y=m+_/2}),m+=_+p})},k=function(E){var b=(0,W.buildLayerMatrix)(E),p=Object.assign((0,R.findType1Conflicts)(E,b),(0,R.findType2Conflicts)(E,b)),m={},g=[];["u","d"].forEach(function(_){g=_==="u"?b:Object.values(b).reverse(),["l","r"].forEach(function(S){S==="r"&&(g=g.map(function(V){return Object.values(V).reverse()}));var O=(_==="u"?E.predecessors:E.successors).bind(E),y=(0,R.verticalAlignment)(E,g,p,O),d=(0,R.horizontalCompaction)(E,g,y.root,y.align,S==="r");S==="r"&&Object.keys(d).forEach(function(V){return d[V]=-d[V]}),m[_+S]=d})});var M=(0,R.findSmallestWidthAlignment)(E,m);return M&&(0,R.alignCoordinates)(m,M),(0,R.balance)(m,E.graph().align)},N=function(E){var b,p=(0,W.asNonCompoundGraph)(E);L(p);var m=k(p);(b=Object.keys(m))===null||b===void 0||b.forEach(function(g){p.node(g).x=m[g]})};F.default=N},13614:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.feasibleTreeWithLayer=F.feasibleTree=void 0;var P=B(37323),W=B(69209),R=B(27652),L=function(m){var g=new R.Graph({directed:!1}),M=m.nodes()[0],_=m.nodeCount();g.setNode(M,{});for(var S,O;k(g,m)<_;)S=b(g,m),O=g.hasNode(S.v)?(0,P.slack)(m,S):-(0,P.slack)(m,S),p(g,m,O);return g};F.feasibleTree=L;var k=function(m,g){var M=function(_){g.nodeEdges(_).forEach(function(S){var O=S.v,y=_===O?S.w:O;!m.hasNode(y)&&!(0,P.slack)(g,S)&&(m.setNode(y,{}),m.setEdge(_,y,{}),M(y))})};return m.nodes().forEach(M),m.nodeCount()},N=function(m){var g=new R.Graph({directed:!1}),M=m.nodes()[0],_=m.nodes().filter(function(y){return!!m.node(y)}).length;g.setNode(M,{});for(var S,O;E(g,m)<_;)S=b(g,m),O=g.hasNode(S.v)?(0,P.slack)(m,S):-(0,P.slack)(m,S),p(g,m,O);return g};F.feasibleTreeWithLayer=N;var E=function(m,g){var M=function(_){var S;(S=g.nodeEdges(_))===null||S===void 0||S.forEach(function(O){var y=O.v,d=_===y?O.w:y;!m.hasNode(d)&&(g.node(d).layer!==void 0||!(0,P.slack)(g,O))&&(m.setNode(d,{}),m.setEdge(_,d,{}),M(d))})};return m.nodes().forEach(M),m.nodeCount()},b=function(m,g){return(0,W.minBy)(g.edges(),function(M){return m.hasNode(M.v)!==m.hasNode(M.w)?(0,P.slack)(g,M):1/0})},p=function(m,g,M){m.nodes().forEach(function(_){g.node(_).rank||(g.node(_).rank=0),g.node(_).rank+=M})};F.default={feasibleTree:L,feasibleTreeWithLayer:N}},76827:function(Le,F,B){"use strict";var P=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(F,"__esModule",{value:!0});var W=B(37323),R=B(13614),L=P(B(32253)),k=function(p){switch(p.graph().ranker){case"network-simplex":b(p);break;case"tight-tree":E(p);break;case"longest-path":N(p);break;default:E(p)}},N=W.longestPath,E=function(p){(0,W.longestPathWithLayer)(p),(0,R.feasibleTreeWithLayer)(p)},b=function(p){(0,L.default)(p)};F.default=k},32253:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.exchangeEdges=F.enterEdge=F.leaveEdge=F.initLowLimValues=F.calcCutValue=F.initCutValues=void 0;var P=B(13614),W=B(37323),R=B(69209),L=B(99905),k=L.algorithm.preorder,N=L.algorithm.postorder,E=function(q){var Y=(0,R.simplify)(q);(0,W.longestPath)(Y);var X=(0,P.feasibleTree)(Y);(0,F.initLowLimValues)(X),(0,F.initCutValues)(X,Y);for(var H,J;H=(0,F.leaveEdge)(X);)J=(0,F.enterEdge)(X,Y,H),(0,F.exchangeEdges)(X,Y,H,J)},b=function(q,Y){var X=N(q,q.nodes());X=X==null?void 0:X.slice(0,(X==null?void 0:X.length)-1),X==null||X.forEach(function(H){p(q,Y,H)})};F.initCutValues=b;var p=function(q,Y,X){var H=q.node(X),J=H.parent;q.edgeFromArgs(X,J).cutvalue=(0,F.calcCutValue)(q,Y,X)},m=function(q,Y,X){var H,J=q.node(X),nt=J.parent,tt=!0,at=Y.edgeFromArgs(X,nt),ct=0;return at||(tt=!1,at=Y.edgeFromArgs(nt,X)),ct=at.weight,(H=Y.nodeEdges(X))===null||H===void 0||H.forEach(function(ht){var Lt=ht.v===X,St=Lt?ht.w:ht.v;if(St!==nt){var Zt=Lt===tt,Ut=Y.edge(ht).weight;if(ct+=Zt?Ut:-Ut,d(q,X,St)){var Ot=q.edgeFromArgs(X,St).cutvalue;ct+=Zt?-Ot:Ot}}}),ct};F.calcCutValue=m;var g=function(q,Y){Y===void 0&&(Y=q.nodes()[0]),M(q,{},1,Y)};F.initLowLimValues=g;var M=function(q,Y,X,H,J){var nt,tt=X,at=X,ct=q.node(H);return Y[H]=!0,(nt=q.neighbors(H))===null||nt===void 0||nt.forEach(function(ht){Y[ht]||(at=M(q,Y,at,ht,H))}),ct.low=tt,ct.lim=at++,J?ct.parent=J:delete ct.parent,at},_=function(q){return q.edges().find(function(Y){return q.edge(Y).cutvalue<0})};F.leaveEdge=_;var S=function(q,Y,X){var H=X.v,J=X.w;Y.hasEdge(H,J)||(H=X.w,J=X.v);var nt=q.node(H),tt=q.node(J),at=nt,ct=!1;nt.lim>tt.lim&&(at=tt,ct=!0);var ht=Y.edges().filter(function(Lt){return ct===V(q,q.node(Lt.v),at)&&ct!==V(q,q.node(Lt.w),at)});return(0,R.minBy)(ht,function(Lt){return(0,W.slack)(Y,Lt)})};F.enterEdge=S;var O=function(q,Y,X,H){var J=X.v,nt=X.w;q.removeEdge(J,nt),q.setEdge(H.v,H.w,{}),(0,F.initLowLimValues)(q),(0,F.initCutValues)(q,Y),y(q,Y)};F.exchangeEdges=O;var y=function(q,Y){var X=q.nodes().find(function(J){var nt;return!(!((nt=Y.node(J))===null||nt===void 0)&&nt.parent)}),H=k(q,X);H=H==null?void 0:H.slice(1),H==null||H.forEach(function(J){var nt=q.node(J).parent,tt=Y.edgeFromArgs(J,nt),at=!1;tt||(tt=Y.edgeFromArgs(nt,J),at=!0),Y.node(J).rank=Y.node(nt).rank+(at?tt.minlen:-tt.minlen)})},d=function(q,Y,X){return q.hasEdge(Y,X)},V=function(q,Y,X){return X.low<=Y.lim&&Y.lim<=X.lim};F.default=E},37323:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.slack=F.longestPathWithLayer=F.longestPath=void 0;var B=function(R){var L,k={},N=function(E){var b,p=R.node(E);if(!p)return 0;if(k[E])return p.rank;k[E]=!0;var m;return(b=R.outEdges(E))===null||b===void 0||b.forEach(function(g){var M=N(g.w),_=R.edge(g).minlen,S=M-_;S&&(m===void 0||S<m)&&(m=S)}),m||(m=0),p.rank=m,m};(L=R.sources())===null||L===void 0||L.forEach(function(E){return N(E)})};F.longestPath=B;var P=function(R){var L,k={},N,E=function(m){var g,M=R.node(m);if(!M)return 0;if(k[m])return M.rank;k[m]=!0;var _;return(g=R.outEdges(m))===null||g===void 0||g.forEach(function(S){var O=E(S.w),y=R.edge(S).minlen,d=O-y;d&&(_===void 0||d<_)&&(_=d)}),_||(_=0),(N===void 0||_<N)&&(N=_),M.rank=_,_};(L=R.sources())===null||L===void 0||L.forEach(function(m){R.node(m)&&E(m)}),N===void 0&&(N=0);var b={},p=function(m,g){var M,_=R.node(m),S=isNaN(_.layer)?g:_.layer;(_.rank===void 0||_.rank<S)&&(_.rank=S),!b[m]&&(b[m]=!0,(M=R.outEdges(m))===null||M===void 0||M.map(function(O){p(O.w,S+R.edge(O).minlen)}))};R.nodes().forEach(function(m){var g=R.node(m);g&&(isNaN(g.layer)?g.rank-=N:p(m,g.layer))})};F.longestPathWithLayer=P;var W=function(R,L){return R.node(L.w).rank-R.node(L.v).rank-R.edge(L).minlen};F.slack=W,F.default={longestPath:B,longestPathWithLayer:P,slack:W}},69209:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.minBy=F.notime=F.time=F.partition=F.maxRank=F.addBorderNode=F.removeEmptyRanks=F.normalizeRanks=F.buildLayerMatrix=F.intersectRect=F.predecessorWeights=F.successorWeights=F.zipObject=F.asNonCompoundGraph=F.simplify=F.addDummyNode=void 0;var P=B(49784),W=B(27652),R=function(Y,X){return Number(Y)-Number(X)},L=function(Y,X,H,J){var nt;do nt="".concat(J).concat(Math.random());while(Y.hasNode(nt));return H.dummy=X,Y.setNode(nt,H),nt};F.addDummyNode=L;var k=function(Y){var X=new W.Graph().setGraph(Y.graph());return Y.nodes().forEach(function(H){X.setNode(H,Y.node(H))}),Y.edges().forEach(function(H){var J=X.edgeFromArgs(H.v,H.w)||{weight:0,minlen:1},nt=Y.edge(H);X.setEdge(H.v,H.w,{weight:J.weight+nt.weight,minlen:Math.max(J.minlen,nt.minlen)})}),X};F.simplify=k;var N=function(Y){var X=new W.Graph({multigraph:Y.isMultigraph()}).setGraph(Y.graph());return Y.nodes().forEach(function(H){var J;!((J=Y.children(H))===null||J===void 0)&&J.length||X.setNode(H,Y.node(H))}),Y.edges().forEach(function(H){X.setEdgeObj(H,Y.edge(H))}),X};F.asNonCompoundGraph=N;var E=function(Y,X){return Y==null?void 0:Y.reduce(function(H,J,nt){return H[J]=X[nt],H},{})};F.zipObject=E;var b=function(Y){var X={};return Y.nodes().forEach(function(H){var J,nt={};(J=Y.outEdges(H))===null||J===void 0||J.forEach(function(tt){var at;nt[tt.w]=(nt[tt.w]||0)+(((at=Y.edge(tt))===null||at===void 0?void 0:at.weight)||0)}),X[H]=nt}),X};F.successorWeights=b;var p=function(Y){var X=Y.nodes(),H=X.map(function(J){var nt,tt={};return(nt=Y.inEdges(J))===null||nt===void 0||nt.forEach(function(at){tt[at.v]=(tt[at.v]||0)+Y.edge(at).weight}),tt});return(0,F.zipObject)(X,H)};F.predecessorWeights=p;var m=function(Y,X){var H=Number(Y.x),J=Number(Y.y),nt=Number(X.x)-H,tt=Number(X.y)-J,at=Number(Y.width)/2,ct=Number(Y.height)/2;if(!nt&&!tt)return{x:0,y:0};var ht,Lt;return Math.abs(tt)*at>Math.abs(nt)*ct?(tt<0&&(ct=-ct),ht=ct*nt/tt,Lt=ct):(nt<0&&(at=-at),ht=at,Lt=at*tt/nt),{x:H+ht,y:J+Lt}};F.intersectRect=m;var g=function(Y){for(var X=[],H=(0,F.maxRank)(Y)+1,J=0;J<H;J++)X.push([]);Y.nodes().forEach(function(nt){var tt=Y.node(nt);if(tt){var at=tt.rank;at!==void 0&&X[at]&&X[at].push(nt)}});for(var J=0;J<H;J++)X[J]=X[J].sort(function(tt,at){var ct,ht;return R((ct=Y.node(tt))===null||ct===void 0?void 0:ct.order,(ht=Y.node(at))===null||ht===void 0?void 0:ht.order)});return X};F.buildLayerMatrix=g;var M=function(Y){var X=Y.nodes().filter(function(J){var nt;return((nt=Y.node(J))===null||nt===void 0?void 0:nt.rank)!==void 0}).map(function(J){return Y.node(J).rank}),H=Math.min.apply(Math,X);Y.nodes().forEach(function(J){var nt=Y.node(J);nt.hasOwnProperty("rank")&&H!==1/0&&(nt.rank-=H)})};F.normalizeRanks=M;var _=function(Y){var X=Y.nodes(),H=X.filter(function(Lt){var St;return((St=Y.node(Lt))===null||St===void 0?void 0:St.rank)!==void 0}).map(function(Lt){return Y.node(Lt).rank}),J=Math.min.apply(Math,H),nt=[];X.forEach(function(Lt){var St,Zt=(((St=Y.node(Lt))===null||St===void 0?void 0:St.rank)||0)-J;nt[Zt]||(nt[Zt]=[]),nt[Zt].push(Lt)});for(var tt=0,at=Y.graph().nodeRankFactor||0,ct=0;ct<nt.length;ct++){var ht=nt[ct];ht===void 0?ct%at!==0&&(tt-=1):tt&&(ht==null||ht.forEach(function(Lt){var St=Y.node(Lt);St&&(St.rank=St.rank||0,St.rank+=tt)}))}};F.removeEmptyRanks=_;var S=function(Y,X,H,J){var nt={width:0,height:0};return(0,P.isNumber)(H)&&(0,P.isNumber)(J)&&(nt.rank=H,nt.order=J),(0,F.addDummyNode)(Y,"border",nt,X)};F.addBorderNode=S;var O=function(Y){var X;return Y.nodes().forEach(function(H){var J,nt=(J=Y.node(H))===null||J===void 0?void 0:J.rank;nt!==void 0&&(X===void 0||nt>X)&&(X=nt)}),X||(X=0),X};F.maxRank=O;var y=function(Y,X){var H={lhs:[],rhs:[]};return Y==null||Y.forEach(function(J){X(J)?H.lhs.push(J):H.rhs.push(J)}),H};F.partition=y;var d=function(Y,X){var H=Date.now();try{return X()}finally{console.log("".concat(Y," time: ").concat(Date.now()-H,"ms"))}};F.time=d;var V=function(Y,X){return X()};F.notime=V;var q=function(Y,X){return Y.reduce(function(H,J){var nt=X(H),tt=X(J);return nt>tt?J:H})};F.minBy=q},77057:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var b=function(p,m){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,M){g.__proto__=M}||function(g,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(g[_]=M[_])},b(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),W=this&&this.__assign||function(){return W=Object.assign||function(b){for(var p,m=1,g=arguments.length;m<g;m++){p=arguments[m];for(var M in p)Object.prototype.hasOwnProperty.call(p,M)&&(b[M]=p[M])}return b},W.apply(this,arguments)},R=this&&this.__spreadArray||function(b,p,m){if(m||arguments.length===2)for(var g=0,M=p.length,_;g<M;g++)(_||!(g in p))&&(_||(_=Array.prototype.slice.call(p,0,g)),_[g]=p[g]);return b.concat(_||Array.prototype.slice.call(p))};Object.defineProperty(F,"__esModule",{value:!0}),F.DagreCompoundLayout=void 0;var L=B(62329),k=B(31969),N=B(49784),E=function(b){P(p,b);function p(m){var g=b.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(m),g}return p.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},p.prototype.init=function(m){var g=m.hiddenNodes||[],M=m.hiddenEdges||[],_=m.hiddenCombos||[];this.nodes=this.getDataByOrder((m.nodes||[]).concat(g)),this.edges=this.getDataByOrder((m.edges||[]).concat(M)),this.combos=(m.combos||[]).concat(_.map(function(S){return W(W({},S),{collapsed:!0})}))},p.prototype.execute=function(){var m=this,g=m.nodes,M=m.edges;if(g){var _=m.getLayoutConfig(),S=_.graphDef,O=_.graphOption,y=_.graphSettings,d=(0,k.buildGraph)(S,O,y),V=(0,k.flatGraph)(d,!0);return this.updatePosition(V),m.onLayoutEnd&&m.onLayoutEnd(),{nodes:g,edges:M}}},p.prototype.getNodePath=function(m){var g=this,M=g.nodes,_=g.combos,S=M.find(function(y){return y.id===m}),O=function(y,d){d===void 0&&(d=[]);var V=_.find(function(q){return q.id===y});return V?(d.unshift(y),V.parentId?O(V.parentId,d):d):d};return S&&S.comboId?O(S.comboId,[m]):[m]},p.prototype.getLayoutConfig=function(){var m,g,M,_=this,S=_.nodes,O=_.edges,y=_.combos,d=_.nodeSize,V=_.rankdir,q=_.align,Y=_.edgesep,X=_.nodesep,H=_.ranksep,J=_.settings,nt=(y||[]).reduce(function(le,ye){var Gt=S.filter(function(ue){return ue.comboId===ye.id}).map(function(ue){return ue.id}),zt=(y||[]).filter(function(ue){return ue.parentId===ye.id}).map(function(ue){return ue.id});return(Gt.length||zt.length)&&(le[ye.id]=R(R([],Gt,!0),zt,!0)),le},{}),tt;d?(0,N.isArray)(d)?tt=function(){return d}:tt=function(){return[d,d]}:tt=function(le){return le&&le.size?(0,N.isArray)(le.size)?le.size:(0,N.isObject)(le.size)?[le.size.width||40,le.size.height||40]:[le.size,le.size]:[40,40]};var at=function(le){return le&&le.size?(0,N.isArray)(le.size)?le.size:[le.size,le.size]:[80,40]},ct=at(y==null?void 0:y[0]),ht=ct[0],Lt=ct[1],St=(g=(m=_.graphSettings)===null||m===void 0?void 0:m.subScene)===null||g===void 0?void 0:g.meta,Zt=((M=y.find(function(le){return!le.collapsed}))===null||M===void 0?void 0:M.padding)||[20,20,20,20],Ut=Zt[0],Ot=Zt[1],Z=Zt[2],st=Zt[3],Et={compound:nt,nodes:R([],(S||[]).map(function(le){var ye=tt(le),Gt=ye[0],zt=ye[1];return W(W({},le),{width:Gt,height:zt})}),!0),edges:R([],(O||[]).map(function(le){return W(W({},le),{v:le.source,w:le.target})}),!0)},Bt={expanded:(y||[]).filter(function(le){return!le.collapsed}).map(function(le){return le.id})},Pt={graph:{meta:{align:q,rankDir:V,nodeSep:X,edgeSep:Y,rankSep:H}},subScene:{meta:{paddingTop:Ut||(St==null?void 0:St.paddingTop)||20,paddingRight:Ot||(St==null?void 0:St.paddingRight)||20,paddingBottom:Z||(St==null?void 0:St.paddingBottom)||20,paddingLeft:st||(St==null?void 0:St.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:ht,height:Lt}}},Ht=(0,k.mergeConfig)(J,W({},(0,k.mergeConfig)(Pt,k.LAYOUT_CONFIG)));return _.graphSettings=Ht,{graphDef:Et,graphOption:Bt,graphSettings:Ht}},p.prototype.updatePosition=function(m){var g=m.nodes,M=m.edges;this.updateNodePosition(g,M),this.updateEdgePosition(g,M)},p.prototype.getBegin=function(m,g){var M=this,_=M.begin,S=[0,0];if(_){var O=1/0,y=1/0;m.forEach(function(d){O>d.x&&(O=d.x),y>d.y&&(y=d.y)}),g.forEach(function(d){d.points.forEach(function(V){O>V.x&&(O=V.x),y>V.y&&(y=V.y)})}),S[0]=_[0]-O,S[1]=_[1]-y}return S},p.prototype.updateNodePosition=function(m,g){var M=this,_=M.combos,S=M.nodes,O=M.edges,y=M.anchorPoint,d=M.graphSettings,V=this.getBegin(m,g);m.forEach(function(q){var Y,X=q.x,H=q.y,J=q.id,nt=q.type,tt=q.coreBox;if(nt===k.HierarchyNodeType.META&&J!==k.ROOT_NAME){var at=_.findIndex(function(Zt){return Zt.id===J}),ct=(Y=d==null?void 0:d.subScene)===null||Y===void 0?void 0:Y.meta;_[at].offsetX=X+V[0],_[at].offsetY=H+V[1],_[at].fixSize=[tt.width,tt.height],_[at].fixCollapseSize=[tt.width,tt.height],q.expanded?_[at].padding=[ct==null?void 0:ct.paddingTop,ct==null?void 0:ct.paddingRight,ct==null?void 0:ct.paddingBottom,ct==null?void 0:ct.paddingLeft]:_[at].padding=[0,0,0,0]}else if(nt===k.HierarchyNodeType.OP){var at=S.findIndex(function(Ut){return Ut.id===J});if(S[at].x=X+V[0],S[at].y=H+V[1],y){var ht=[],Lt=g.filter(function(Ut){return Ut.v===J}),St=g.filter(function(Ut){return Ut.w===J});Lt.length>0&&Lt.forEach(function(Ut){var Ot=Ut.points[0],Z=(Ot.x-X)/q.width+.5,st=(Ot.y-H)/q.height+.5;ht.push([Z,st]),Ut.baseEdgeList.forEach(function(Et){var Bt=O.find(function(Pt){return Pt.source===Et.v&&Pt.target===Et.w});Bt&&(Bt.sourceAnchor=ht.length-1)})}),St.length>0&&St.forEach(function(Ut){var Ot=Ut.points[Ut.points.length-1],Z=(Ot.x-X)/q.width+.5,st=(Ot.y-H)/q.height+.5;ht.push([Z,st]),Ut.baseEdgeList.forEach(function(Et){var Bt=O.find(function(Pt){return Pt.source===Et.v&&Pt.target===Et.w});Bt&&(Bt.targetAnchor=ht.length-1)})}),S[at].anchorPoints=ht.length>0?ht:S[at].anchorPoints||[]}}})},p.prototype.updateEdgePosition=function(m,g){var M=this,_=M.combos,S=M.edges,O=M.controlPoints,y=this.getBegin(m,g);O&&(_.forEach(function(d){d.inEdges=[],d.outEdges=[]}),S.forEach(function(d){var V,q,Y,X,H=m.find(function(Zt){return Zt.id===d.source}),J=m.find(function(Zt){return Zt.id===d.target}),nt=[],tt=[];if(H&&J)tt=(0,k.getEdges)(H==null?void 0:H.id,J==null?void 0:J.id,m);else if(!H||!J){var at=M.getNodePath(d.source),ct=M.getNodePath(d.target),ht=at.reverse().slice(H?0:1).find(function(Zt){return m.find(function(Ut){return Ut.id===Zt})}),Lt=ct.reverse().slice(J?0:1).find(function(Zt){return m.find(function(Ut){return Ut.id===Zt})});H=m.find(function(Zt){return Zt.id===ht}),J=m.find(function(Zt){return Zt.id===Lt}),tt=(0,k.getEdges)(H==null?void 0:H.id,J==null?void 0:J.id,m,{v:d.source,w:d.target})}if(nt=tt.reduce(function(Zt,Ut){return R(R([],Zt,!0),Ut.points.map(function(Ot){return W(W({},Ot),{x:Ot.x+y[0],y:Ot.y+y[1]})}),!0)},[]),nt=nt.slice(1,-1),d.controlPoints=nt,(J==null?void 0:J.type)===k.NodeType.META){var St=_.findIndex(function(Zt){return Zt.id===(J==null?void 0:J.id)});if(!_[St]||!((V=_[St].inEdges)===null||V===void 0)&&V.some(function(Zt){return Zt.source===H.id&&Zt.target===J.id}))return;(q=_[St].inEdges)===null||q===void 0||q.push({source:H.id,target:J.id,controlPoints:nt})}if((H==null?void 0:H.type)===k.NodeType.META){var St=_.findIndex(function(Ut){return Ut.id===(H==null?void 0:H.id)});if(!_[St]||!((Y=_[St].outEdges)===null||Y===void 0)&&Y.some(function(Ut){return Ut.source===H.id&&Ut.target===J.id}))return;(X=_[St].outEdges)===null||X===void 0||X.push({source:H.id,target:J.id,controlPoints:nt})}}))},p.prototype.getType=function(){return"dagreCompound"},p.prototype.getDataByOrder=function(m){return m.every(function(g){return g.layoutOrder!==void 0})||m.forEach(function(g,M){g.layoutOrder=M}),m.sort(function(g,M){return g.layoutOrder-M.layoutOrder})},p}(L.Base);F.DagreCompoundLayout=E},34015:function(Le,F,B){"use strict";var P=this&&this.__assign||function(){return P=Object.assign||function(g){for(var M,_=1,S=arguments.length;_<S;_++){M=arguments[_];for(var O in M)Object.prototype.hasOwnProperty.call(M,O)&&(g[O]=M[O])}return g},P.apply(this,arguments)},W=this&&this.__createBinding||(Object.create?function(g,M,_,S){S===void 0&&(S=_);var O=Object.getOwnPropertyDescriptor(M,_);(!O||("get"in O?!M.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return M[_]}}),Object.defineProperty(g,S,O)}:function(g,M,_,S){S===void 0&&(S=_),g[S]=M[_]}),R=this&&this.__setModuleDefault||(Object.create?function(g,M){Object.defineProperty(g,"default",{enumerable:!0,value:M})}:function(g,M){g.default=M}),L=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var M={};if(g!=null)for(var _ in g)_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)&&W(M,g,_);return R(M,g),M},k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(F,"__esModule",{value:!0});var N=L(B(71497)),E=k(B(88221)),b=k(B(87064)),p=B(20171);function m(g,M){var _=g.nodes,S=g.edges,O=M.width,y=M.height;if(!(_!=null&&_.length))return Promise.resolve();var d=[];_.forEach(function(tt){var at=S.filter(function(ht){return ht.source===tt.id||ht.target===tt.id});if(at.length>1){var ct=P({},tt);delete ct.size,d.push(ct)}});var V=[];S.forEach(function(tt){var at=d.find(function(ht){return ht.id===tt.source}),ct=d.find(function(ht){return ht.id===tt.target});at&&ct&&V.push(tt)});var q=new p.DagreLayout({type:"dagre",ranksep:M.nodeMinGap,nodesep:M.nodeMinGap}),Y=q.layout({nodes:d,edges:V}).nodes;_.forEach(function(tt){var at=(Y||[]).find(function(ct){return ct.id===tt.id});tt.x=(at==null?void 0:at.x)||O/2,tt.y=(at==null?void 0:at.y)||y/2});var X=JSON.parse(JSON.stringify(_)),H=JSON.parse(JSON.stringify(S)),J=N.forceSimulation().nodes(X).force("link",N.forceLink(H).id(function(tt){return tt.id}).distance(function(tt){var at=V.find(function(ct){return ct.source===tt.source&&ct.target===tt.target});return at?30:20})).force("charge",N.forceManyBody()).force("center",N.forceCenter(O/2,y/2)).force("x",N.forceX(O/2)).force("y",N.forceY(y/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),nt=new Promise(function(tt){J.on("end",function(){_.forEach(function(Ut){var Ot=X.find(function(Z){return Z.id===Ut.id});Ot&&(Ut.x=Ot.x,Ut.y=Ot.y)});var at=Math.min.apply(Math,_.map(function(Ut){return Ut.x})),ct=Math.max.apply(Math,_.map(function(Ut){return Ut.x})),ht=Math.min.apply(Math,_.map(function(Ut){return Ut.y})),Lt=Math.max.apply(Math,_.map(function(Ut){return Ut.y})),St=O/(ct-at),Zt=y/(Lt-ht);_.forEach(function(Ut){Ut.x!==void 0&&St<1&&(Ut.x=(Ut.x-at)*St),Ut.y!==void 0&&Zt<1&&(Ut.y=(Ut.y-ht)*Zt)}),_.forEach(function(Ut){Ut.sizeTemp=Ut.size,Ut.size=[10,10]}),(0,b.default)(_,S),_.forEach(function(Ut){Ut.size=Ut.sizeTemp||[],delete Ut.sizeTemp}),(0,E.default)({nodes:_,edges:S},M),tt()})});return nt}F.default=m},88221:function(Le,F,B){"use strict";var P=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(F,"__esModule",{value:!0});var W=P(B(28611));function R(L,k){if(!L.nodes||L.nodes.length===0)return L;var N=k.width,E=k.height,b=k.nodeMinGap,p=1e4,m=1e4;L.nodes.forEach(function(H){var J=H.size[0]||50,nt=H.size[1]||50;p=Math.min(J,p),m=Math.min(nt,m)});var g=new W.default;g.init(N,E,{CELL_H:m,CELL_W:p}),L.nodes.forEach(function(H){var J=g.occupyNearest(H);J&&(J.node={id:H.id,size:H.size},H.x=J.x,H.y=J.y,H.dx=J.dx,H.dy=J.dy)});for(var M=0;M<L.nodes.length;M++){var _=L.nodes[M],S=g.findGridByNodeId(_.id);if(!S)throw new Error("can not find node cell");var O=S.column,y=S.row;if(_.size[0]+b>p){for(var d=Math.ceil((_.size[0]+b)/p)-1,V=d,q=0;q<d;q++){var Y=g.additionColumn.indexOf(O+q+1)>-1;if(Y&&!g.cells[O+q+1][y].node)V--;else break}g.insertColumn(O,V)}if(_.size[1]+b>m){for(var d=Math.ceil((_.size[1]+b)/m)-1,V=d,q=0;q<d;q++){var Y=g.additionRow.indexOf(y+q+1)>-1;if(Y&&!g.cells[O][y+q+1].node)V--;else break}g.insertRow(y,V)}}for(var M=0;M<g.columnNum;M++)for(var X=function(J){var nt=g.cells[M][J];if(nt.node){var tt=L.nodes.find(function(at){var ct;return at.id===((ct=nt==null?void 0:nt.node)===null||ct===void 0?void 0:ct.id)});tt&&(tt.x=nt.x+tt.size[0]/2,tt.y=nt.y+tt.size[1]/2)}},q=0;q<g.rowNum;q++)X(q)}F.default=R},28611:function(Le,F){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(W){for(var R,L=1,k=arguments.length;L<k;L++){R=arguments[L];for(var N in R)Object.prototype.hasOwnProperty.call(R,N)&&(W[N]=R[N])}return W},B.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0});var P=function(){function W(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return W.prototype.init=function(R,L,k){this.cells=[],this.CELL_W=k.CELL_W||W.DEFAULT_CELL_W,this.CELL_H=k.CELL_H||W.DEFAULT_CELL_H,this.columnNum=Math.ceil(R/this.CELL_W),this.rowNum=Math.ceil(L/this.CELL_H),W.MIN_DIST=Math.pow(R,2)+Math.pow(L,2);for(var N=0;N<this.columnNum;N++){for(var E=[],b=0;b<this.rowNum;b++){var p={dx:N,dy:b,x:N*this.CELL_W,y:b*this.CELL_H,occupied:!1};E.push(p)}this.cells.push(E)}},W.prototype.findGridByNodeId=function(R){for(var L,k,N=0;N<this.columnNum;N++)for(var E=0;E<this.rowNum;E++)if(this.cells[N][E].node&&((k=(L=this.cells[N][E])===null||L===void 0?void 0:L.node)===null||k===void 0?void 0:k.id)===R)return{column:N,row:E};return null},W.prototype.sqdist=function(R,L){return Math.pow(R.x-L.x,2)+Math.pow(R.y-L.y,2)},W.prototype.occupyNearest=function(R){for(var L=W.MIN_DIST,k,N=null,E=0;E<this.columnNum;E++)for(var b=0;b<this.rowNum;b++)!this.cells[E][b].occupied&&(k=this.sqdist(R,this.cells[E][b]))<L&&(L=k,N=this.cells[E][b]);return N&&(N.occupied=!0),N},W.prototype.insertColumn=function(R,L){if(!(L<=0)){for(var k=0;k<L;k++){this.cells[k+this.columnNum]=[];for(var N=0;N<this.rowNum;N++)this.cells[k+this.columnNum][N]={dx:k,dy:N,x:k*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null}}for(var k=this.columnNum-1;k>R;k--)for(var N=0;N<this.rowNum;N++)this.cells[k+L][N]=B(B({},this.cells[k][N]),{x:(k+L)*this.CELL_W,y:N*this.CELL_H}),this.cells[k][N]={x:k*this.CELL_W,y:N*this.CELL_H,occupied:!0,node:null};for(var N=0;N<this.additionColumn.length;N++)this.additionColumn[N]>=R&&(this.additionColumn[N]+=L);for(var k=0;k<L;k++)this.additionColumn.push(R+k+1);this.columnNum+=L}},W.prototype.insertRow=function(R,L){if(!(L<=0)){for(var k=0;k<L;k++)for(var N=0;N<this.columnNum;N++)this.cells[N][k+this.rowNum]={dx:N,dy:k,x:N*this.CELL_W,y:k*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.columnNum;N++)for(var k=this.rowNum-1;k>R;k--)this.cells[N][k+L]=B(B({},this.cells[N][k]),{dx:N,dy:k+L,x:N*this.CELL_W,y:(k+L)*this.CELL_H}),this.cells[N][k]={dx:N,dy:k,x:N*this.CELL_W,y:k*this.CELL_H,occupied:!1,node:null};for(var k=0;k<this.additionRow.length;k++)this.additionRow[k]>=R&&(this.additionRow[k]+=L);for(var N=0;N<L;N++)this.additionRow.push(R+N+1);this.rowNum+=L}},W.prototype.getNodes=function(){for(var R=[],L=0;L<this.columnNum;L++)for(var k=0;k<this.rowNum;k++)this.cells[L][k].node&&R.push(this.cells[L][k]);return R},W.MIN_DIST=50,W.DEFAULT_CELL_W=80,W.DEFAULT_CELL_H=80,W}();F.default=P},90441:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var N=function(E,b){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g])},N(E,b)};return function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");N(E,b);function p(){this.constructor=E}E.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}}(),W=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(F,"__esModule",{value:!0}),F.ERLayout=void 0;var R=B(62329),L=W(B(34015)),k=function(N){P(E,N);function E(b){var p=N.call(this)||this;return p.width=300,p.height=300,p.nodeMinGap=50,p.onLayoutEnd=function(){},b&&p.updateCfg(b),p}return E.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},E.prototype.execute=function(){var b=this,p=b.nodes,m=b.edges;return p==null||p.forEach(function(g){g.size||(g.size=[50,50])}),(0,L.default)({nodes:p,edges:m},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){b.onLayoutEnd&&b.onLayoutEnd()})},E.prototype.getType=function(){return"er"},E}(R.Base);F.ERLayout=k},87064:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=1200,P=800,W=1e7,R=10,L=3.141592653589793,k=1.5707963267948966,N=L*.375,E=L*.625,b=new Map,p=10,m=10,g=.8,M=.1,_=.5;function S(X,H,J){var nt=X.x-X.size[0]/2,tt=X.y-X.size[1]/2,at=X.x+X.size[0]/2,ct=X.y+X.size[1]/2,ht=H.x-H.size[0]/2,Lt=H.y-H.size[1]/2,St=H.x+H.size[0]/2,Zt=H.y+H.size[1]/2,Ut=X.x,Ot=X.y,Z=H.x,st=H.y,Et=Z-Ut,Bt=Math.atan2(Et,st-Ot),Pt=0,Ht=0,le=0,ye=0;Bt>k?(Ht=tt-Zt,Pt=ht-at,le=parseFloat(Ht?(Ht/Math.cos(Bt)).toFixed(2):Pt.toFixed(2)),ye=parseFloat(Pt?(Pt/Math.sin(Bt)).toFixed(2):Ht.toFixed(2))):0<Bt&&Bt<=k?(Ht=Lt-ct,Pt=ht-at,Ht>Pt?le=ye=parseFloat(Ht?(Ht/Math.cos(Bt)).toFixed(2):Pt.toFixed(2)):le=ye=parseFloat(Pt?(Pt/Math.sin(Bt)).toFixed(2):Ht.toFixed(2))):Bt<-k?(Ht=tt-Zt,Pt=-(St-nt),Ht>Pt?le=ye=parseFloat(Ht?(Ht/Math.cos(Bt)).toFixed(2):Pt.toFixed(2)):le=ye=parseFloat(Pt?(Pt/Math.sin(Bt)).toFixed(2):Ht.toFixed(2))):(Ht=Lt-ct,Math.abs(Et)>(at-nt)/2?Pt=nt-St:Pt=Et,Ht>Pt?le=ye=parseFloat(Ht?(Ht/Math.cos(Bt)).toFixed(2):Pt.toFixed(2)):le=ye=parseFloat(Pt&&Bt!==0?(Pt/Math.sin(Bt)).toFixed(2):Ht.toFixed(2)));var Gt=parseFloat(Bt.toFixed(2)),zt=J;return J&&(zt=N<Gt&&Gt<E),{distance:Math.abs(le<ye?le:ye),isHoriz:zt}}function O(X,H){var J=b.get(X.id)||[],nt=J.find(function(Ge){return Ge.source===H.id||Ge.target===H.id}),tt=X.size[0]*X.size[1],at=H.size[0]*H.size[1],ct=tt>at?H:X,ht=tt>at?X:H,Lt=ct.x-ct.size[0]/2,St=ct.y-ct.size[1]/2,Zt=ct.x+ct.size[0]/2,Ut=ct.y+ct.size[1]/2,Ot=ht.x-ht.size[0]/2,Z=ht.y-ht.size[1]/2,st=ht.x+ht.size[0]/2,Et=ht.y+ht.size[1]/2,Bt=ct.x,Pt=ct.y,Ht=ht.x,le=ht.y,ye=Zt>=Ot&&st>=Lt&&Ut>=Z&&Et>=St,Gt=0,zt=0;if(ye){zt=Math.sqrt(Math.pow(Ht-Bt,2)+Math.pow(le-Pt,2));var ue=Lt>Ot?Lt:Ot,we=St>Z?St:Z,de=Zt<st?Zt:st,Mt=Ut<Et?Ut:Et,ee=de-ue,ce=Mt-we,At=ee*ce;zt===0&&(zt=1e-7),Gt=R*1/zt*100+At,Gt*=W}else{var Wt=!1,fe=S(ct,ht,Wt);zt=fe.distance,Wt=fe.isHoriz,zt<=R?zt!==0?nt?Gt+=R+W*1/zt:Gt+=R+W*R/zt:Gt+=W:(Gt+=zt,nt&&(Gt+=zt*zt))}return Gt}function y(X){for(var H=0,J=0;J<X.length;J++){var nt=X[J];(nt.x<0||nt.y<0||nt.x>B||nt.y>P)&&(H+=1e12);for(var tt=J+1;tt<X.length;tt++)H+=O(nt,X[tt])}return H}function d(X,H,J,nt){var tt=new Map;J.forEach(function(Bt,Pt){tt.set(Bt.id,Bt)});var at=nt.filter(function(Bt){return Bt.source===X.id||Bt.target===X.id})||[],ct=[];at.forEach(function(Bt){var Pt=Bt.source===X.id?Bt.target:Bt.source,Ht=tt.get(Pt);Ht&&ct.push(Ht)});for(var ht=!0,Lt=0;Lt<ct.length;Lt++){var St=ct[Lt],Zt=Math.atan((X.y-St.y)/(St.x-X.y))*180,Ut=Math.atan((H.y-St.y)/(St.x-H.y))*180,Ot=Zt<30||Zt>150,Z=Ut<30||Ut>150,st=Zt>70&&Zt<110,Et=Ut>70&&Ut<110;if(Ot&&!Z||Zt*Ut<0){ht=!1;break}else if(st&&!Et||Zt*Ut<0){ht=!1;break}else if((St.x-X.x)*(St.x-H.x)<0){ht=!1;break}else if((St.y-X.y)*(St.y-H.y)<0){ht=!1;break}}return ht}function V(X,H){for(var J=!1,nt=1,tt=p*nt,at=m*nt,ct=[tt,-tt,0,0],ht=[0,0,at,-at],Lt=0;Lt<X.length;++Lt)for(var St=X[Lt],Zt=q(St,X),Ut=0;Ut<ct.length;Ut++){var Ot=d(St,{x:St.x+ct[Ut],y:St.y+ht[Ut]},X,H);if(Ot){St.x+=ct[Ut],St.y+=ht[Ut];var Z=q(St,X),st=Math.random();Z<Zt||st<g&&st>M?(Zt=Z,J=!0):(St.x-=ct[Ut],St.y-=ht[Ut])}}return g>M&&(g*=_),J?y(X):0}function q(X,H){var J=0;(X.x<0||X.y<0||X.x+X.size[0]+20>B||X.y+X.size[1]+20>P)&&(J+=1e12);for(var nt=0;nt<H.length;++nt)X.id!==H[nt].id&&(J+=O(X,H[nt]));return J}function Y(X,H){if(X.length===0)return{nodes:X,edges:H};X.forEach(function(St){var Zt=H.filter(function(Ut){return Ut.source===St.id||Ut.target===St.id});b.set(St,Zt)}),X.sort(function(St,Zt){var Ut,Ot;return((Ut=b.get(St.id))===null||Ut===void 0?void 0:Ut.length)-((Ot=b.get(Zt.id))===null||Ot===void 0?void 0:Ot.length)});for(var J=y(X),nt=20,tt=1,at=0,ct=50,ht=0;nt>0&&(ht++,!(ht>=ct));){var Lt=V(X,H);Lt!==0&&(at=Lt),tt=at-J,J=at,tt===0?--nt:nt=20}return X.forEach(function(St){St.x=St.x-St.size[0]/2,St.y=St.y-St.size[1]/2}),{nodes:X,edges:H}}F.default=Y},89806:function(Le,F,B){"use strict";var P=this&&this.__createBinding||(Object.create?function(E,b,p,m){m===void 0&&(m=p);var g=Object.getOwnPropertyDescriptor(b,p);(!g||("get"in g?!b.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return b[p]}}),Object.defineProperty(E,m,g)}:function(E,b,p,m){m===void 0&&(m=p),E[m]=b[p]}),W=this&&this.__setModuleDefault||(Object.create?function(E,b){Object.defineProperty(E,"default",{enumerable:!0,value:b})}:function(E,b){E.default=b}),R=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var b={};if(E!=null)for(var p in E)p!=="default"&&Object.prototype.hasOwnProperty.call(E,p)&&P(b,E,p);return W(b,E),b};Object.defineProperty(F,"__esModule",{value:!0});var L=R(B(71497)),k=B(49784);function N(){function E(Mt){return function(){return Mt}}var b=function(Mt){return Mt.cluster},p=E(1),m=E(-1),g=E(100),M=E(.1),_=[0,0],S=[],O={},y=[],d=100,V=100,q={none:{x:0,y:0}},Y=[],X,H="force",J=!0,nt=.1;function tt(Mt){if(!J)return tt;X.tick(),Zt();for(var ee=0,ce=S.length,At=void 0,Wt=Mt*nt;ee<ce;++ee)At=S[ee],At.vx+=(q[b(At)].x-At.x)*Wt,At.vy+=(q[b(At)].y-At.y)*Wt}function at(){S&&ct()}function ct(){if(!(!S||!S.length)){if(b(S[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Mt=ht();X=L.forceSimulation(Mt.nodes).force("x",L.forceX(d).strength(.1)).force("y",L.forceY(V).strength(.1)).force("collide",L.forceCollide(function(ee){return ee.r}).iterations(4)).force("charge",L.forceManyBody().strength(m)).force("links",L.forceLink(Mt.nodes.length?Mt.links:[]).distance(g).strength(M)),Y=X.nodes(),Zt()}}function ht(){var Mt=[],ee=[],ce={},At=[],Wt={},fe=[];return Wt=Lt(S),fe=St(y),At=Object.keys(Wt),At.forEach(function(Ge,Be){var _r=Wt[Ge];Mt.push({id:Ge,size:_r.count,r:Math.sqrt(_r.sumforceNodeSize/Math.PI)}),ce[Ge]=Be}),fe.forEach(function(Ge){var Be=(0,k.getEdgeTerminal)(Ge,"source"),_r=(0,k.getEdgeTerminal)(Ge,"target"),Ft=ce[Be],hr=ce[_r];Ft!==void 0&&hr!==void 0&&ee.push({source:Ft,target:hr,count:Ge.count})}),{nodes:Mt,links:ee}}function Lt(Mt){var ee={};return Mt.forEach(function(ce){var At=b(ce);ee[At]||(ee[At]={count:0,sumforceNodeSize:0})}),Mt.forEach(function(ce){var At=b(ce),Wt=p(ce),fe=ee[At];fe.count=fe.count+1,fe.sumforceNodeSize=fe.sumforceNodeSize+Math.PI*(Wt*Wt)*1.3,ee[At]=fe}),ee}function St(Mt){var ee={},ce=[];Mt.forEach(function(Wt){var fe=Ut(Wt),Ge=0;ee[fe]!==void 0&&(Ge=ee[fe]),Ge+=1,ee[fe]=Ge});var At=Object.entries(ee);return At.forEach(function(Wt){var fe=Wt[0],Ge=Wt[1],Be=fe.split("~")[0],_r=fe.split("~")[1];Be!==void 0&&_r!==void 0&&ce.push({source:Be,target:_r,count:Ge})}),ce}function Zt(){return q={none:{x:0,y:0}},Y.forEach(function(Mt){q[Mt.id]={x:Mt.x-_[0],y:Mt.y-_[1]}}),q}function Ut(Mt){var ee=(0,k.getEdgeTerminal)(Mt,"source"),ce=(0,k.getEdgeTerminal)(Mt,"target"),At=b(O[ee]),Wt=b(O[ce]);return At<=Wt?"".concat(At,"~").concat(Wt):"".concat(Wt,"~").concat(At)}function Ot(Mt){O={},Mt.forEach(function(ee){O[ee.id]=ee})}function Z(Mt){return arguments.length?(H=Mt,at(),tt):H}function st(Mt){return arguments.length?typeof Mt=="string"?(b=function(ee){return ee[Mt]},tt):(b=Mt,tt):b}function Et(Mt){return arguments.length?(J=Mt,tt):J}function Bt(Mt){return arguments.length?(nt=Mt,tt):nt}function Pt(Mt){return arguments.length?(d=Mt,tt):d}function Ht(Mt){return arguments.length?(V=Mt,tt):V}function le(Mt){return arguments.length?(Ot(Mt||[]),S=Mt||[],tt):S}function ye(Mt){return arguments.length?(y=Mt||[],at(),tt):y}function Gt(Mt){return arguments.length?(typeof Mt=="function"?p=Mt:p=E(+Mt),at(),tt):p}function zt(Mt){return arguments.length?(typeof Mt=="function"?m=Mt:m=E(+Mt),at(),tt):m}function ue(Mt){return arguments.length?(typeof Mt=="function"?g=Mt:g=E(+Mt),at(),tt):g}function we(Mt){return arguments.length?(typeof Mt=="function"?M=Mt:M=E(+Mt),at(),tt):M}function de(Mt){return arguments.length?(_=Mt,tt):_}return tt.initialize=function(Mt){S=Mt,at()},tt.template=Z,tt.groupBy=st,tt.enableGrouping=Et,tt.strength=Bt,tt.centerX=Pt,tt.centerY=Ht,tt.nodes=le,tt.links=ye,tt.forceNodeSize=Gt,tt.nodeSize=tt.forceNodeSize,tt.forceCharge=zt,tt.forceLinkDistance=ue,tt.forceLinkStrength=we,tt.offset=de,tt.getFocis=Zt,tt}F.default=N},8810:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var S=function(O,y){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,V){d.__proto__=V}||function(d,V){for(var q in V)Object.prototype.hasOwnProperty.call(V,q)&&(d[q]=V[q])},S(O,y)};return function(O,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");S(O,y);function d(){this.constructor=O}O.prototype=y===null?Object.create(y):(d.prototype=y.prototype,new d)}}(),W=this&&this.__createBinding||(Object.create?function(S,O,y,d){d===void 0&&(d=y);var V=Object.getOwnPropertyDescriptor(O,y);(!V||("get"in V?!O.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return O[y]}}),Object.defineProperty(S,d,V)}:function(S,O,y,d){d===void 0&&(d=y),S[d]=O[y]}),R=this&&this.__setModuleDefault||(Object.create?function(S,O){Object.defineProperty(S,"default",{enumerable:!0,value:O})}:function(S,O){S.default=O}),L=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var O={};if(S!=null)for(var y in S)y!=="default"&&Object.prototype.hasOwnProperty.call(S,y)&&W(O,S,y);return R(O,S),O},k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(F,"__esModule",{value:!0}),F.ForceLayout=void 0;var N=L(B(71497)),E=k(B(89806)),b=B(49784),p=B(62329),m=B(16470),g=function(S){P(O,S);function O(y){var d=S.call(this)||this;return d.center=[0,0],d.nodeStrength=null,d.edgeStrength=null,d.preventOverlap=!1,d.clusterNodeStrength=null,d.clusterEdgeStrength=null,d.clusterEdgeDistance=null,d.clusterNodeSize=null,d.clusterFociStrength=null,d.linkDistance=50,d.alphaDecay=.028,d.alphaMin=.001,d.alpha=.3,d.collideStrength=1,d.workerEnabled=!1,d.tick=function(){},d.onLayoutEnd=function(){},d.ticking=void 0,y&&d.updateCfg(y),d}return O.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},O.prototype.init=function(y){var d=this;d.nodes=y.nodes||[];var V=y.edges||[];d.edges=V.map(function(q){var Y={},X=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(q).forEach(function(H){X.indexOf(H)>-1||(Y[H]=q[H])}),Y}),d.ticking=!1},O.prototype.execute=function(y){var d=this,V=d.nodes,q=d.edges;if(!d.ticking){var Y=d.forceSimulation,X=d.alphaMin,H=d.alphaDecay,J=d.alpha;if(Y){if(y){if(d.clustering&&d.clusterForce&&(d.clusterForce.nodes(V),d.clusterForce.links(q)),Y.nodes(V),q&&d.edgeForce)d.edgeForce.links(q);else if(q&&!d.edgeForce){var at=N.forceLink().id(function(St){return St.id}).links(q);d.edgeStrength&&at.strength(d.edgeStrength),d.linkDistance&&at.distance(d.linkDistance),d.edgeForce=at,Y.force("link",at)}}d.preventOverlap&&d.overlapProcess(Y),Y.alpha(J).restart(),this.ticking=!0}else try{var nt=N.forceManyBody();if(d.nodeStrength&&nt.strength(d.nodeStrength),Y=N.forceSimulation().nodes(V),d.clustering){var tt=(0,E.default)();tt.centerX(d.center[0]).centerY(d.center[1]).template("force").strength(d.clusterFociStrength),q&&tt.links(q),V&&tt.nodes(V),tt.forceLinkDistance(d.clusterEdgeDistance).forceLinkStrength(d.clusterEdgeStrength).forceCharge(d.clusterNodeStrength).forceNodeSize(d.clusterNodeSize),d.clusterForce=tt,Y.force("group",tt)}if(Y.force("center",N.forceCenter(d.center[0],d.center[1])).force("charge",nt).alpha(J).alphaDecay(H).alphaMin(X),d.preventOverlap&&d.overlapProcess(Y),q){var at=N.forceLink().id(function(Lt){return Lt.id}).links(q);d.edgeStrength&&at.strength(d.edgeStrength),d.linkDistance&&at.distance(d.linkDistance),d.edgeForce=at,Y.force("link",at)}if(d.workerEnabled&&!_()&&(d.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!d.workerEnabled)Y.on("tick",function(){d.tick()}).on("end",function(){d.ticking=!1,d.onLayoutEnd&&d.onLayoutEnd()}),d.ticking=!0;else{Y.stop();for(var ct=M(Y),ht=1;ht<=ct;ht++)Y.tick(),postMessage({nodes:V,currentTick:ht,totalTicks:ct,type:m.LAYOUT_MESSAGE.TICK},void 0);d.ticking=!1}d.forceSimulation=Y,d.ticking=!0}catch(Lt){d.ticking=!1,console.warn(Lt)}}},O.prototype.overlapProcess=function(y){var d=this,V=d.nodeSize,q=d.nodeSpacing,Y,X,H=d.collideStrength;if((0,b.isNumber)(q)?X=function(){return q}:(0,b.isFunction)(q)?X=q:X=function(){return 0},!V)Y=function(at){if(at.size){if((0,b.isArray)(at.size)){var ct=at.size[0]>at.size[1]?at.size[0]:at.size[1];return ct/2+X(at)}if((0,b.isObject)(at.size)){var ct=at.size.width>at.size.height?at.size.width:at.size.height;return ct/2+X(at)}return at.size/2+X(at)}return 10+X(at)};else if((0,b.isFunction)(V))Y=function(at){var ct=V(at);return ct+X(at)};else if((0,b.isArray)(V)){var J=V[0]>V[1]?V[0]:V[1],nt=J/2;Y=function(at){return nt+X(at)}}else if((0,b.isNumber)(V)){var tt=V/2;Y=function(at){return tt+X(at)}}else Y=function(){return 10};y.force("collisionForce",N.forceCollide(Y).strength(H))},O.prototype.updateCfg=function(y){var d=this;d.ticking&&(d.forceSimulation.stop(),d.ticking=!1),d.forceSimulation=null,Object.assign(d,y)},O.prototype.destroy=function(){var y=this;y.ticking&&(y.forceSimulation.stop(),y.ticking=!1),y.nodes=null,y.edges=null,y.destroyed=!0},O}(p.Base);F.ForceLayout=g;function M(S){var O=S.alphaMin(),y=S.alphaTarget(),d=S.alpha(),V=Math.log((O-y)/(d-y))/Math.log(1-S.alphaDecay()),q=Math.ceil(V);return q}function _(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},85717:function(Le,F,B){"use strict";var P=this&&this.__createBinding||(Object.create?function(R,L,k,N){N===void 0&&(N=k);var E=Object.getOwnPropertyDescriptor(L,k);(!E||("get"in E?!L.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return L[k]}}),Object.defineProperty(R,N,E)}:function(R,L,k,N){N===void 0&&(N=k),R[N]=L[k]}),W=this&&this.__exportStar||function(R,L){for(var k in R)k!=="default"&&!Object.prototype.hasOwnProperty.call(L,k)&&P(L,R,k)};Object.defineProperty(F,"__esModule",{value:!0}),W(B(8810),F)},91019:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.forceNBody=void 0;var P=B(71829),W=.81,R=.1;function L(b,p,m,g,M){var _=m/g,S=b.map(function(y,d){var V=p[y.id],q=V.data,Y=V.x,X=V.y,H=V.size,J=q.layout.force.nodeStrength;return{x:Y,y:X,size:H,index:d,vx:0,vy:0,weight:_*J}}),O=(0,P.quadtree)(S,function(y){return y.x},function(y){return y.y}).visitAfter(k);return S.forEach(function(y){E(y,O)}),S.map(function(y,d){var V=p[b[d].id],q=V.data.layout.force.mass,Y=q===void 0?1:q;M[2*d]=y.vx/Y,M[2*d+1]=y.vy/Y}),M}F.forceNBody=L;function k(b){var p=0,m=0,g=0;if(b.length){for(var M=0;M<4;M++){var _=b[M];_&&_.weight&&(p+=_.weight,m+=_.x*_.weight,g+=_.y*_.weight)}b.x=m/p,b.y=g/p,b.weight=p}else{var _=b;b.x=_.data.x,b.y=_.data.y,b.weight=_.data.weight}}var N=function(b,p,m,g,M,_){var S=_.x-b.x||R,O=_.y-b.y||R,y=g-p,d=S*S+O*O,V=Math.sqrt(d)*d;if(y*y*W<d){var q=b.weight/V;return _.vx+=S*q,_.vy+=O*q,!0}if(b.length)return!1;if(b.data!==_){var q=b.data.weight/V;_.vx+=S*q,_.vy+=O*q}};function E(b,p){p.visit(function(m,g,M,_,S){return N(m,g,M,_,S,b)})}},6740:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var b=function(p,m){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,M){g.__proto__=M}||function(g,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(g[_]=M[_])},b(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),W=this&&this.__assign||function(){return W=Object.assign||function(b){for(var p,m=1,g=arguments.length;m<g;m++){p=arguments[m];for(var M in p)Object.prototype.hasOwnProperty.call(p,M)&&(b[M]=p[M])}return b},W.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0}),F.Force2Layout=void 0;var R=B(62329),L=B(49784),k=B(91019),N=function(b,p){var m;return b?(0,L.isNumber)(b)?m=function(g){return b}:m=b:m=function(g){return p||1},m},E=function(b){P(p,b);function p(m){var g=b.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(_){return{x:g.width/2,y:g.height/2}}};var M=m.getMass;return g.propsGetMass=M,g.updateCfg(m),g}return p.prototype.getCentripetalOptions=function(){var m=this,g=m.leafCluster,M=m.clustering,_=m.nodeClusterBy,S=m.nodes,O=m.nodeMap,y=m.clusterNodeStrength,d=function(ct){return typeof y=="function"?y(ct):y},V={},q;if(g){q=this.getSameTypeLeafMap()||{};var Y=Array.from(new Set(S==null?void 0:S.map(function(ct){return ct[_]})))||[];V={single:100,leaf:function(ct,ht,Lt){var St=q[ct.id]||{},Zt=St.relativeLeafNodes,Ut=St.sameTypeLeafNodes;return(Ut==null?void 0:Ut.length)===(Zt==null?void 0:Zt.length)||(Y==null?void 0:Y.length)===1?1:d(ct)},others:1,center:function(ct,ht,Lt){var St,Zt=(((St=ct.data)===null||St===void 0?void 0:St.layout)||{}).degree;if(!Zt)return{x:100,y:100};var Ut;if(Zt===1){var Ot=(q[ct.id]||{}).sameTypeLeafNodes,Z=Ot===void 0?[]:Ot;Z.length===1?Ut=void 0:Z.length>1&&(Ut=(0,L.getAvgNodePosition)(Z))}else Ut=void 0;return{x:Ut==null?void 0:Ut.x,y:Ut==null?void 0:Ut.y}}}}if(M){q||(q=this.getSameTypeLeafMap());var X=Array.from(new Set(S.map(function(ct,ht){return ct[_]}))).filter(function(ct){return ct!==void 0}),H={};X.forEach(function(ct){var ht=S.filter(function(Lt){return Lt[_]===ct}).map(function(Lt){return O[Lt.id]});H[ct]=(0,L.getAvgNodePosition)(ht)}),V={single:function(ct){return d(ct)},leaf:function(ct){return d(ct)},others:function(ct){return d(ct)},center:function(ct,ht,Lt){var St=H[ct[_]];return{x:St==null?void 0:St.x,y:St==null?void 0:St.y}}}}this.centripetalOptions=W(W({},this.centripetalOptions),V);var J=this.centripetalOptions,nt=J.leaf,tt=J.single,at=J.others;nt&&typeof nt!="function"&&(this.centripetalOptions.leaf=function(){return nt}),tt&&typeof tt!="function"&&(this.centripetalOptions.single=function(){return tt}),at&&typeof at!="function"&&(this.centripetalOptions.others=function(){return at})},p.prototype.updateCfg=function(m){m&&Object.assign(this,m)},p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var m=this;m.stop();var g=m.nodes,M=m.edges,_=m.defSpringLen;if(m.judgingDistance=0,!g||g.length===0){m.onLayoutEnd([]);return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var S=m.center;if(g.length===1){g[0].x=S[0],g[0].y=S[1],m.onLayoutEnd([W({},g[0])]);return}m.degreesMap=(0,L.getDegreeMap)(g,M),m.propsGetMass?m.getMass=m.propsGetMass:m.getMass=function(X){var H=1;(0,L.isNumber)(X.mass)&&(H=X.mass);var J=m.degreesMap[X.id].all;return!J||J<5?H:J*5*H};var O=m.nodeSize,y;if(m.preventOverlap){var d=m.nodeSpacing,V;(0,L.isNumber)(d)?V=function(){return d}:(0,L.isFunction)(d)?V=d:V=function(){return 0},O?(0,L.isArray)(O)?y=function(X){return Math.max(O[0],O[1])+V(X)}:y=function(X){return O+V(X)}:y=function(X){return X.size?(0,L.isArray)(X.size)?Math.max(X.size[0],X.size[1])+V(X):(0,L.isObject)(X.size)?Math.max(X.size.width,X.size.height)+V(X):X.size+V(X):10+V(X)}}m.nodeSize=y,m.linkDistance=N(m.linkDistance,1),m.nodeStrength=N(m.nodeStrength,1),m.edgeStrength=N(m.edgeStrength,1);var q={},Y={};g.forEach(function(X,H){(0,L.isNumber)(X.x)||(X.x=Math.random()*m.width),(0,L.isNumber)(X.y)||(X.y=Math.random()*m.height);var J=m.degreesMap[X.id];q[X.id]=W(W({},X),{data:W(W({},X.data),{size:m.nodeSize(X)||30,layout:{inDegree:J.in,outDegree:J.out,degree:J.all,tDegree:J.in,sDegree:J.out,force:{mass:m.getMass(X),nodeStrength:m.nodeStrength(X)}}})}),Y[X.id]=H}),m.nodeMap=q,m.nodeIdxMap=Y,m.edgeInfos=[],M==null||M.forEach(function(X){var H=q[X.source],J=q[X.target];!H||!J?elf.edgeInfos.push({}):m.edgeInfos.push({edgeStrength:m.edgeStrength(X),linkDistance:_?_(W(W({},X),{source:H,target:J}),H,J):m.linkDistance(X,H,J)||1+(O(H)+O(H)||0)/2})}),this.getCentripetalOptions(),m.onLayoutEnd=m.onLayoutEnd||function(){},m.run()},p.prototype.run=function(){var m=this,g=m.maxIteration,M=m.nodes,_=m.workerEnabled,S=m.minMovement,O=m.animate,y=m.nodeMap;if(M){var d=[];M.forEach(function(J,nt){d[2*nt]=0,d[2*nt+1]=0});var V=g,q=!O;if(_||q){for(var Y=0,X=0;(m.judgingDistance>S||X<1)&&X<V;X++)Y=X,m.runOneStep(X,d);m.onLayoutEnd(Object.values(y))}else{if(typeof window=="undefined")return;var H=0;this.timeInterval=window.setInterval(function(){M&&(m.runOneStep(H,d),H++,(H>=V||m.judgingDistance<S)&&(m.onLayoutEnd(Object.values(y)),window.clearInterval(m.timeInterval)))},0)}}},p.prototype.runOneStep=function(m,g){var M,_=this,S=_.nodes,O=_.edges,y=_.nodeMap,d=_.monitor,V=[];if(S!=null&&S.length){_.calRepulsive(V),O&&_.calAttractive(V),_.calGravity(V);var q=_.interval;if(_.updateVelocity(V,g,q),_.updatePosition(g,q),(M=_.tick)===null||M===void 0||M.call(_),d){var Y=this.calTotalEnergy(V);d({energy:Y,nodes:S,edges:O,iterations:m})}}},p.prototype.calTotalEnergy=function(m){var g=this,M=g.nodes,_=g.nodeMap;if(!(M!=null&&M.length))return 0;var S=0;return M.forEach(function(O,y){var d=m[2*y],V=m[2*y+1],q=d*d+V*V,Y=_[O.id].data.layout.force.mass,X=Y===void 0?1:Y;S+=X*q*.5}),S},p.prototype.calRepulsive=function(m){var g=this,M=g.nodes,_=g.nodeMap,S=g.factor,O=g.coulombDisScale,y=g.nodeSize;(0,k.forceNBody)(M,_,S,O*O,m)},p.prototype.calAttractive=function(m){var g=this,M=g.edges,_=g.nodeMap,S=g.nodeIdxMap,O=g.edgeInfos,y=g.nodeSize;M.forEach(function(d,V){var q=(0,L.getEdgeTerminal)(d,"source"),Y=(0,L.getEdgeTerminal)(d,"target"),X=_[q],H=_[Y];if(!(!X||!H)){var J=H.x-X.x,nt=H.y-X.y;!J&&!nt&&(J=Math.random()*.01,nt=Math.random()*.01);var tt=Math.sqrt(J*J+nt*nt),at=J/tt,ct=nt/tt,ht=O[V]||{},Lt=ht.linkDistance,St=Lt===void 0?200:Lt,Zt=ht.edgeStrength,Ut=Zt===void 0?200:Zt,Ot=St-tt,Z=Ot*Ut,st=X.data.layout.force.mass||1,Et=H.data.layout.force.mass||1,Bt=1/st,Pt=1/Et,Ht=at*Z,le=ct*Z,ye=2*S[q],Gt=2*S[Y];m[ye]-=Ht*Bt,m[ye+1]-=le*Bt,m[Gt]+=Ht*Pt,m[Gt+1]+=le*Pt}})},p.prototype.calGravity=function(m){var g,M=this,_=M.nodes,S=M.edges,O=S===void 0?[]:S,y=M.nodeMap,d=M.width,V=M.height,q=M.center,Y=M.gravity,X=M.degreesMap,H=M.centripetalOptions;if(_)for(var J=_.length,nt=0;nt<J;nt++){var tt=2*nt,at=y[_[nt].id],ct=at.data.layout.force.mass,ht=ct===void 0?1:ct,Lt=0,St=0,Zt=Y,Ut=X[at.id],Ot=Ut.in,Z=Ut.out,st=Ut.all,Et=(g=M.getCenter)===null||g===void 0?void 0:g.call(M,at,st);if(Et){var Bt=Et[0],Pt=Et[1],Ht=Et[2];Lt=at.x-Bt,St=at.y-Pt,Zt=Ht}else Lt=at.x-q[0],St=at.y-q[1];if(Zt&&(m[tt]-=Zt*Lt/ht,m[tt+1]-=Zt*St/ht),H){var le=H.leaf,ye=H.single,Gt=H.others,zt=H.center,ue=(zt==null?void 0:zt(at,_,O,d,V))||{x:0,y:0,centerStrength:0},we=ue.x,de=ue.y,Mt=ue.centerStrength;if(!(0,L.isNumber)(we)||!(0,L.isNumber)(de))continue;var ee=(at.x-we)/ht,ce=(at.y-de)/ht;if(Mt&&(m[tt]-=Mt*ee,m[tt+1]-=Mt*ce),st===0){var At=ye(at);if(!At)continue;m[tt]-=At*ee,m[tt+1]-=At*ce;continue}if(Ot===0||Z===0){var Wt=le(at,_,O);if(!Wt)continue;m[tt]-=Wt*ee,m[tt+1]-=Wt*ce;continue}var fe=Gt(at);if(!fe)continue;m[tt]-=fe*ee,m[tt+1]-=fe*ce}}},p.prototype.updateVelocity=function(m,g,M){var _=this,S=_.nodes,O=_.damping,y=_.maxSpeed;S!=null&&S.length&&S.forEach(function(d,V){var q=(g[2*V]+m[2*V]*M)*O||.01,Y=(g[2*V+1]+m[2*V+1]*M)*O||.01,X=Math.sqrt(q*q+Y*Y);if(X>y){var H=y/X;q=H*q,Y=H*Y}g[2*V]=q,g[2*V+1]=Y})},p.prototype.updatePosition=function(m,g){var M=this,_=M.nodes,S=M.distanceThresholdMode,O=M.nodeMap;if(!(_!=null&&_.length)){this.judgingDistance=0;return}var y=0;S==="max"?M.judgingDistance=-1/0:S==="min"&&(M.judgingDistance=1/0),_.forEach(function(d,V){var q=O[d.id];if((0,L.isNumber)(d.fx)&&(0,L.isNumber)(d.fy)){d.x=d.fx,d.y=d.fy,q.x=d.x,q.y=d.y;return}var Y=m[2*V]*g,X=m[2*V+1]*g;d.x+=Y,d.y+=X,q.x=d.x,q.y=d.y;var H=Math.sqrt(Y*Y+X*X);switch(S){case"max":M.judgingDistance<H&&(M.judgingDistance=H);break;case"min":M.judgingDistance>H&&(M.judgingDistance=H);break;default:y=y+H;break}}),(!S||S==="mean")&&(M.judgingDistance=y/_.length)},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"force2"},p.prototype.getSameTypeLeafMap=function(){var m=this,g=m.nodeClusterBy,M=m.nodes,_=m.edges,S=m.nodeMap,O=m.degreesMap;if(M!=null&&M.length){var y={};return M.forEach(function(d,V){var q=O[d.id].all;q===1&&(y[d.id]=(0,L.getCoreNodeAndRelativeLeafNodes)("leaf",d,_,g,O,S))}),y}},p}(R.Base);F.Force2Layout=E},19712:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(){function P(W){this.id=W.id||0,this.rx=W.rx,this.ry=W.ry,this.fx=0,this.fy=0,this.mass=W.mass,this.degree=W.degree,this.g=W.g||0}return P.prototype.distanceTo=function(W){var R=this.rx-W.rx,L=this.ry-W.ry;return Math.hypot(R,L)},P.prototype.setPos=function(W,R){this.rx=W,this.ry=R},P.prototype.resetForce=function(){this.fx=0,this.fy=0},P.prototype.addForce=function(W){var R=W.rx-this.rx,L=W.ry-this.ry,k=Math.hypot(R,L);k=k<1e-4?1e-4:k;var N=this.g*(this.degree+1)*(W.degree+1)/k;this.fx+=N*R/k,this.fy+=N*L/k},P.prototype.in=function(W){return W.contains(this.rx,this.ry)},P.prototype.add=function(W){var R=this.mass+W.mass,L=(this.rx*this.mass+W.rx*W.mass)/R,k=(this.ry*this.mass+W.ry*W.mass)/R,N=this.degree+W.degree,E={rx:L,ry:k,mass:R,degree:N};return new P(E)},P}();F.default=B},48564:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,_){M.__proto__=_}||function(M,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(M[S]=_[S])},p(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(m,g);function M(){this.constructor=m}m.prototype=g===null?Object.create(g):(M.prototype=g.prototype,new M)}}(),W=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(F,"__esModule",{value:!0}),F.ForceAtlas2Layout=void 0;var R=B(62329),L=B(49784),k=W(B(19712)),N=W(B(94350)),E=W(B(62732)),b=function(p){P(m,p);function m(g){var M=p.call(this)||this;return M.center=[0,0],M.width=300,M.height=300,M.nodes=[],M.edges=[],M.kr=5,M.kg=1,M.mode="normal",M.preventOverlap=!1,M.dissuadeHubs=!1,M.barnesHut=void 0,M.maxIteration=0,M.ks=.1,M.ksmax=10,M.tao=.1,M.onLayoutEnd=function(){},M.prune=void 0,M.updateCfg(g),M}return m.prototype.getDefaultCfg=function(){return{}},m.prototype.execute=function(){var g=this,M=g.nodes,_=g.onLayoutEnd,S=g.prune,O=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var y=[],d=M.length,V=0;V<d;V+=1){var q=M[V],Y=10,X=10;(0,L.isNumber)(q.size)&&(Y=q.size,X=q.size),(0,L.isArray)(q.size)?(isNaN(q.size[0])||(Y=q.size[0]),isNaN(q.size[1])||(X=q.size[1])):(0,L.isObject)(q.size)&&(Y=q.size.width,X=q.size.height),g.getWidth&&!isNaN(g.getWidth(q))&&(X=g.getWidth(q)),g.getHeight&&!isNaN(g.getHeight(q))&&(Y=g.getHeight(q));var H=Math.max(Y,X);y.push(H)}g.barnesHut===void 0&&d>250&&(g.barnesHut=!0),g.prune===void 0&&d>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(O=250,d<=200&&d>100?O=1e3:d>200&&(O=1200),this.maxIteration=O):this.maxIteration===0&&S&&(O=100,d<=200&&d>100?O=500:d>200&&(O=950),this.maxIteration=O),g.kr||(g.kr=50,d>100&&d<=500?g.kr=20:d>500&&(g.kr=1)),g.kg||(g.kg=20,d>100&&d<=500?g.kg=10:d>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(y),_()},m.prototype.updateNodesByForces=function(g){for(var M=this,_=M.edges,S=M.maxIteration,O=M.nodes,y=_.filter(function(Ut){var Ot=(0,L.getEdgeTerminal)(Ut,"source"),Z=(0,L.getEdgeTerminal)(Ut,"target");return Ot!==Z}),d=O.length,V=y.length,q=[],Y={},X={},H=[],J=0;J<d;J+=1)Y[O[J].id]=J,q[J]=0,(O[J].x===void 0||isNaN(O[J].x))&&(O[J].x=Math.random()*1e3),(O[J].y===void 0||isNaN(O[J].y))&&(O[J].y=Math.random()*1e3),H.push({x:O[J].x,y:O[J].y});for(var J=0;J<V;J+=1){for(var nt=void 0,tt=void 0,at=0,ct=0,ht=0;ht<d;ht+=1){var Lt=(0,L.getEdgeTerminal)(y[J],"source"),St=(0,L.getEdgeTerminal)(y[J],"target");O[ht].id===Lt?(nt=O[ht],at=ht):O[ht].id===St&&(tt=O[ht],ct=ht),X[J]={sourceIdx:at,targetIdx:ct}}nt&&(q[Y[nt.id]]+=1),tt&&(q[Y[tt.id]]+=1)}var Zt=S;if(O=this.iterate(Zt,Y,X,V,q,g),M.prune){for(var ht=0;ht<V;ht+=1)q[X[ht].sourceIdx]<=1?(O[X[ht].sourceIdx].x=O[X[ht].targetIdx].x,O[X[ht].sourceIdx].y=O[X[ht].targetIdx].y):q[X[ht].targetIdx]<=1&&(O[X[ht].targetIdx].x=O[X[ht].sourceIdx].x,O[X[ht].targetIdx].y=O[X[ht].sourceIdx].y);M.prune=!1,M.barnesHut=!1,Zt=100,O=this.iterate(Zt,Y,X,V,q,g)}return O},m.prototype.iterate=function(g,M,_,S,O,y){for(var d=this,V=d.nodes,q=d.kr,Y=d.preventOverlap,X=d.barnesHut,H=V.length,J=0,nt=100,tt=g,at=50,ct=[],ht=[],Lt=[],St=0;St<H;St+=1)if(ct[2*St]=0,ct[2*St+1]=0,X){var Zt={id:St,rx:V[St].x,ry:V[St].y,mass:1,g:q,degree:O[St]};Lt[St]=new k.default(Zt)}for(;tt>0;){for(var St=0;St<H;St+=1)ht[2*St]=ct[2*St],ht[2*St+1]=ct[2*St+1],ct[2*St]=0,ct[2*St+1]=0;ct=this.getAttrForces(tt,at,S,M,_,O,y,ct),X&&(Y&&tt>at||!Y)?ct=this.getOptRepGraForces(ct,Lt,O):ct=this.getRepGraForces(tt,at,ct,nt,y,O);var Ut=this.updatePos(ct,ht,J,O);V=Ut.nodes,J=Ut.sg,tt--,d.tick&&d.tick()}return V},m.prototype.getAttrForces=function(g,M,_,S,O,y,d,V){for(var q=this,Y=q.nodes,X=q.preventOverlap,H=q.dissuadeHubs,J=q.mode,nt=q.prune,tt=0;tt<_;tt+=1){var at=Y[O[tt].sourceIdx],ct=O[tt].sourceIdx,ht=Y[O[tt].targetIdx],Lt=O[tt].targetIdx;if(!(nt&&(y[ct]<=1||y[Lt]<=1))){var St=[ht.x-at.x,ht.y-at.y],Zt=Math.hypot(St[0],St[1]);Zt=Zt<1e-4?1e-4:Zt,St[0]=St[0]/Zt,St[1]=St[1]/Zt,X&&g<M&&(Zt=Zt-d[ct]-d[Lt]);var Ut=Zt,Ot=Ut;J==="linlog"&&(Ut=Math.log(1+Zt),Ot=Ut),H&&(Ut=Zt/y[ct],Ot=Zt/y[Lt]),X&&g<M&&Zt<=0?(Ut=0,Ot=0):X&&g<M&&Zt>0&&(Ut=Zt,Ot=Zt),V[2*S[at.id]]+=Ut*St[0],V[2*S[ht.id]]-=Ot*St[0],V[2*S[at.id]+1]+=Ut*St[1],V[2*S[ht.id]+1]-=Ot*St[1]}}return V},m.prototype.getRepGraForces=function(g,M,_,S,O,y){for(var d=this,V=d.nodes,q=d.preventOverlap,Y=d.kr,X=d.kg,H=d.center,J=d.prune,nt=V.length,tt=0;tt<nt;tt+=1){for(var at=tt+1;at<nt;at+=1)if(!(J&&(y[tt]<=1||y[at]<=1))){var ct=[V[at].x-V[tt].x,V[at].y-V[tt].y],ht=Math.hypot(ct[0],ct[1]);ht=ht<1e-4?1e-4:ht,ct[0]=ct[0]/ht,ct[1]=ct[1]/ht,q&&g<M&&(ht=ht-O[tt]-O[at]);var Lt=Y*(y[tt]+1)*(y[at]+1)/ht;q&&g<M&&ht<0?Lt=S*(y[tt]+1)*(y[at]+1):q&&g<M&&ht===0?Lt=0:q&&g<M&&ht>0&&(Lt=Y*(y[tt]+1)*(y[at]+1)/ht),_[2*tt]-=Lt*ct[0],_[2*at]+=Lt*ct[0],_[2*tt+1]-=Lt*ct[1],_[2*at+1]+=Lt*ct[1]}var St=[V[tt].x-H[0],V[tt].y-H[1]],Zt=Math.hypot(St[0],St[1]);St[0]=St[0]/Zt,St[1]=St[1]/Zt;var Ut=X*(y[tt]+1);_[2*tt]-=Ut*St[0],_[2*tt+1]-=Ut*St[1]}return _},m.prototype.getOptRepGraForces=function(g,M,_){for(var S=this,O=S.nodes,y=S.kg,d=S.center,V=S.prune,q=O.length,Y=9e10,X=-9e10,H=9e10,J=-9e10,nt=0;nt<q;nt+=1)V&&_[nt]<=1||(M[nt].setPos(O[nt].x,O[nt].y),O[nt].x>=X&&(X=O[nt].x),O[nt].x<=Y&&(Y=O[nt].x),O[nt].y>=J&&(J=O[nt].y),O[nt].y<=H&&(H=O[nt].y));for(var tt=Math.max(X-Y,J-H),at={xmid:(X+Y)/2,ymid:(J+H)/2,length:tt,massCenter:d,mass:q},ct=new N.default(at),ht=new E.default(ct),nt=0;nt<q;nt+=1)V&&_[nt]<=1||M[nt].in(ct)&&ht.insert(M[nt]);for(var nt=0;nt<q;nt+=1)if(!(V&&_[nt]<=1)){M[nt].resetForce(),ht.updateForce(M[nt]),g[2*nt]-=M[nt].fx,g[2*nt+1]-=M[nt].fy;var Lt=[O[nt].x-d[0],O[nt].y-d[1]],St=Math.hypot(Lt[0],Lt[1]);St=St<1e-4?1e-4:St,Lt[0]=Lt[0]/St,Lt[1]=Lt[1]/St;var Zt=y*(_[nt]+1);g[2*nt]-=Zt*Lt[0],g[2*nt+1]-=Zt*Lt[1]}return g},m.prototype.updatePos=function(g,M,_,S){for(var O=this,y=O.nodes,d=O.ks,V=O.tao,q=O.prune,Y=O.ksmax,X=y.length,H=[],J=[],nt=0,tt=0,at=0;at<X;at+=1)if(!(q&&S[at]<=1)){var ct=[g[2*at]-M[2*at],g[2*at+1]-M[2*at+1]],ht=Math.hypot(ct[0],ct[1]),Lt=[g[2*at]+M[2*at],g[2*at+1]+M[2*at+1]],St=Math.hypot(Lt[0],Lt[1]);H[at]=ht,J[at]=St/2,nt+=(S[at]+1)*H[at],tt+=(S[at]+1)*J[at]}var Zt=_;_=V*tt/nt,Zt!==0&&(_=_>1.5*Zt?1.5*Zt:_);for(var at=0;at<X;at+=1)if(!(q&&S[at]<=1)&&!((0,L.isNumber)(y[at].fx)&&(0,L.isNumber)(y[at].fy))){var Ut=d*_/(1+_*Math.sqrt(H[at])),Ot=Math.hypot(g[2*at],g[2*at+1]);Ot=Ot<1e-4?1e-4:Ot;var Z=Y/Ot;Ut=Ut>Z?Z:Ut;var st=Ut*g[2*at],Et=Ut*g[2*at+1];y[at].x+=st,y[at].y+=Et}return{nodes:y,sg:_}},m}(R.Base);F.ForceAtlas2Layout=b},94350:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(){function P(W){this.xmid=W.xmid,this.ymid=W.ymid,this.length=W.length,this.massCenter=W.massCenter||[0,0],this.mass=W.mass||1}return P.prototype.getLength=function(){return this.length},P.prototype.contains=function(W,R){var L=this.length/2;return W<=this.xmid+L&&W>=this.xmid-L&&R<=this.ymid+L&&R>=this.ymid-L},P.prototype.NW=function(){var W=this.xmid-this.length/4,R=this.ymid+this.length/4,L=this.length/2,k={xmid:W,ymid:R,length:L},N=new P(k);return N},P.prototype.NE=function(){var W=this.xmid+this.length/4,R=this.ymid+this.length/4,L=this.length/2,k={xmid:W,ymid:R,length:L},N=new P(k);return N},P.prototype.SW=function(){var W=this.xmid-this.length/4,R=this.ymid-this.length/4,L=this.length/2,k={xmid:W,ymid:R,length:L},N=new P(k);return N},P.prototype.SE=function(){var W=this.xmid+this.length/4,R=this.ymid-this.length/4,L=this.length/2,k={xmid:W,ymid:R,length:L},N=new P(k);return N},P}();F.default=B},62732:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=function(){function P(W){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,W!=null&&(this.quad=W)}return P.prototype.insert=function(W){if(this.body==null){this.body=W;return}this._isExternal()?(this.quad&&(this.NW=new P(this.quad.NW()),this.NE=new P(this.quad.NE()),this.SW=new P(this.quad.SW()),this.SE=new P(this.quad.SE())),this._putBody(this.body),this._putBody(W),this.body=this.body.add(W)):(this.body=this.body.add(W),this._putBody(W))},P.prototype._putBody=function(W){this.quad&&(W.in(this.quad.NW())&&this.NW?this.NW.insert(W):W.in(this.quad.NE())&&this.NE?this.NE.insert(W):W.in(this.quad.SW())&&this.SW?this.SW.insert(W):W.in(this.quad.SE())&&this.SE&&this.SE.insert(W))},P.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},P.prototype.updateForce=function(W){if(!(this.body==null||W===this.body))if(this._isExternal())W.addForce(this.body);else{var R=this.quad?this.quad.getLength():0,L=this.body.distanceTo(W);R/L<this.theta?W.addForce(this.body):(this.NW&&this.NW.updateForce(W),this.NE&&this.NE.updateForce(W),this.SW&&this.SW.updateForce(W),this.SE&&this.SE.updateForce(W))}},P}();F.default=B},80374:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var N=function(E,b){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g])},N(E,b)};return function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");N(E,b);function p(){this.constructor=E}E.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.FruchtermanLayout=void 0;var W=B(62329),R=B(49784),L=800,k=function(N){P(E,N);function E(b){var p=N.call(this)||this;return p.maxIteration=1e3,p.workerEnabled=!1,p.gravity=10,p.speed=5,p.clustering=!1,p.clusterGravity=10,p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.onLayoutEnd=function(){},p.tick=function(){},p.animate=!0,p.updateCfg(b),p}return E.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},E.prototype.execute=function(){var b=this,p,m,g=this,M=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!M||M.length===0){(p=g.onLayoutEnd)===null||p===void 0||p.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var _=g.center;if(M.length===1){M[0].x=_[0],M[0].y=_[1],(m=g.onLayoutEnd)===null||m===void 0||m.call(g);return}var S={},O={};return M.forEach(function(y,d){(0,R.isNumber)(y.x)||(y.x=Math.random()*b.width),(0,R.isNumber)(y.y)||(y.y=Math.random()*b.height),S[y.id]=y,O[y.id]=d}),g.nodeMap=S,g.nodeIdxMap=O,g.run()},E.prototype.run=function(){var b,p=this,m=p.nodes;if(m){var g=p.edges,M=p.maxIteration,_=p.workerEnabled,S=p.clustering,O=p.animate,y={};if(S&&m.forEach(function(q){y[q.cluster]===void 0&&(y[q.cluster]={name:q.cluster,cx:0,cy:0,count:0})}),_||!O){for(var d=0;d<M;d++)p.runOneStep(y);(b=p.onLayoutEnd)===null||b===void 0||b.call(p)}else{if(typeof window=="undefined")return;var V=0;this.timeInterval=window.setInterval(function(){var q;p.runOneStep(y),V++,V>=M&&((q=p.onLayoutEnd)===null||q===void 0||q.call(p),window.clearInterval(p.timeInterval))},0)}return{nodes:m,edges:g}}},E.prototype.runOneStep=function(b){var p,m=this,g=m.nodes;if(g){var M=m.edges,_=m.center,S=m.gravity,O=m.speed,y=m.clustering,d=m.height*m.width,V=Math.sqrt(d)/10,q=d/(g.length+1),Y=Math.sqrt(q),X=[];if(g.forEach(function(nt,tt){X[tt]={x:0,y:0}}),m.applyCalculate(g,M,X,Y,q),y){for(var H in b)b[H].cx=0,b[H].cy=0,b[H].count=0;g.forEach(function(nt){var tt=b[nt.cluster];(0,R.isNumber)(nt.x)&&(tt.cx+=nt.x),(0,R.isNumber)(nt.y)&&(tt.cy+=nt.y),tt.count++});for(var H in b)b[H].cx/=b[H].count,b[H].cy/=b[H].count;var J=m.clusterGravity||S;g.forEach(function(nt,tt){if(!(!(0,R.isNumber)(nt.x)||!(0,R.isNumber)(nt.y))){var at=b[nt.cluster],ct=Math.sqrt((nt.x-at.cx)*(nt.x-at.cx)+(nt.y-at.cy)*(nt.y-at.cy)),ht=Y*J;X[tt].x-=ht*(nt.x-at.cx)/ct,X[tt].y-=ht*(nt.y-at.cy)/ct}})}g.forEach(function(nt,tt){if(!(!(0,R.isNumber)(nt.x)||!(0,R.isNumber)(nt.y))){var at=.01*Y*S;X[tt].x-=at*(nt.x-_[0]),X[tt].y-=at*(nt.y-_[1])}}),g.forEach(function(nt,tt){if((0,R.isNumber)(nt.fx)&&(0,R.isNumber)(nt.fy)){nt.x=nt.fx,nt.y=nt.fy;return}if(!(!(0,R.isNumber)(nt.x)||!(0,R.isNumber)(nt.y))){var at=Math.sqrt(X[tt].x*X[tt].x+X[tt].y*X[tt].y);if(at>0){var ct=Math.min(V*(O/L),at);nt.x+=X[tt].x/at*ct,nt.y+=X[tt].y/at*ct}}}),(p=m.tick)===null||p===void 0||p.call(m)}},E.prototype.applyCalculate=function(b,p,m,g,M){var _=this;_.calRepulsive(b,m,M),p&&_.calAttractive(p,m,g)},E.prototype.calRepulsive=function(b,p,m){b.forEach(function(g,M){p[M]={x:0,y:0},b.forEach(function(_,S){if(M!==S&&!(!(0,R.isNumber)(g.x)||!(0,R.isNumber)(_.x)||!(0,R.isNumber)(g.y)||!(0,R.isNumber)(_.y))){var O=g.x-_.x,y=g.y-_.y,d=O*O+y*y;if(d===0){d=1;var V=M>S?1:-1;O=.01*V,y=.01*V}var q=m/d;p[M].x+=O*q,p[M].y+=y*q}})})},E.prototype.calAttractive=function(b,p,m){var g=this;b.forEach(function(M){var _=(0,R.getEdgeTerminal)(M,"source"),S=(0,R.getEdgeTerminal)(M,"target");if(!(!_||!S)){var O=g.nodeIdxMap[_],y=g.nodeIdxMap[S];if(O!==y){var d=g.nodeMap[_],V=g.nodeMap[S];if(!(!(0,R.isNumber)(V.x)||!(0,R.isNumber)(d.x)||!(0,R.isNumber)(V.y)||!(0,R.isNumber)(d.y))){var q=V.x-d.x,Y=V.y-d.y,X=Math.sqrt(q*q+Y*Y),H=X*X/m;p[y].x-=q/X*H,p[y].y-=Y/X*H,p[O].x+=q/X*H,p[O].y+=Y/X*H}}}})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},E.prototype.getType=function(){return"fruchterman"},E}(W.Base);F.FruchtermanLayout=k},13653:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var N=function(E,b){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g])},N(E,b)};return function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");N(E,b);function p(){this.constructor=E}E.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.GForceLayout=void 0;var W=B(62329),R=B(49784),L=function(N,E){var b;return N?(0,R.isNumber)(N)?b=function(p){return N}:b=N:b=function(p){return E||1},b},k=function(N){P(E,N);function E(b){var p=N.call(this)||this;return p.maxIteration=500,p.workerEnabled=!1,p.edgeStrength=200,p.nodeStrength=1e3,p.coulombDisScale=.005,p.damping=.9,p.maxSpeed=1e3,p.minMovement=.5,p.interval=.02,p.factor=1,p.linkDistance=1,p.gravity=10,p.preventOverlap=!0,p.collideStrength=1,p.tick=function(){},p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.animate=!0,p.updateCfg(b),p}return E.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},E.prototype.execute=function(){var b,p,m=this,g=m.nodes;if(m.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(m.timeInterval),!g||g.length===0){(b=m.onLayoutEnd)===null||b===void 0||b.call(m);return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var M=m.center;if(g.length===1){g[0].x=M[0],g[0].y=M[1],(p=m.onLayoutEnd)===null||p===void 0||p.call(m);return}var _={},S={};g.forEach(function(Y,X){(0,R.isNumber)(Y.x)||(Y.x=Math.random()*m.width),(0,R.isNumber)(Y.y)||(Y.y=Math.random()*m.height),_[Y.id]=Y,S[Y.id]=X}),m.nodeMap=_,m.nodeIdxMap=S,m.linkDistance=L(m.linkDistance,1),m.nodeStrength=L(m.nodeStrength,1),m.edgeStrength=L(m.edgeStrength,1);var O=m.nodeSize,y;if(m.preventOverlap){var d=m.nodeSpacing,V;(0,R.isNumber)(d)?V=function(){return d}:(0,R.isFunction)(d)?V=d:V=function(){return 0},O?(0,R.isArray)(O)?y=function(Y){return Math.max(O[0],O[1])+V(Y)}:y=function(Y){return O+V(Y)}:y=function(Y){return Y.size?(0,R.isArray)(Y.size)?Math.max(Y.size[0],Y.size[1])+V(Y):(0,R.isObject)(Y.size)?Math.max(Y.size.width,Y.size.height)+V(Y):Y.size+V(Y):10+V(Y)}}m.nodeSize=y;var q=m.edges;m.degrees=(0,R.getDegree)(g.length,m.nodeIdxMap,q),m.getMass||(m.getMass=function(Y){var X=Y.mass||m.degrees[m.nodeIdxMap[Y.id]].all||1;return X}),m.run()},E.prototype.run=function(){var b,p=this,m=p.maxIteration,g=p.nodes,M=p.workerEnabled,_=p.minMovement,S=p.animate;if(g)if(M||!S){for(var O=0;O<m;O++){var y=p.runOneStep(O);if(p.reachMoveThreshold(g,y,_))break}(b=p.onLayoutEnd)===null||b===void 0||b.call(p)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var V,q;if(g){var Y=p.runOneStep(d)||[];p.reachMoveThreshold(g,Y,_)&&((V=p.onLayoutEnd)===null||V===void 0||V.call(p),window.clearInterval(p.timeInterval)),d++,d>=m&&((q=p.onLayoutEnd)===null||q===void 0||q.call(p),window.clearInterval(p.timeInterval))}},0)}},E.prototype.reachMoveThreshold=function(b,p,m){var g=0;return b.forEach(function(M,_){var S=M.x-p[_].x,O=M.y-p[_].y;g+=Math.sqrt(S*S+O*O)}),g/=b.length,g<m},E.prototype.runOneStep=function(b){var p,m=this,g=m.nodes,M=m.edges,_=[],S=[];if(g){g.forEach(function(d,V){_[2*V]=0,_[2*V+1]=0,S[2*V]=0,S[2*V+1]=0}),m.calRepulsive(_,g),M&&m.calAttractive(_,M),m.calGravity(_,g);var O=Math.max(.02,m.interval-b*.002);m.updateVelocity(_,S,O,g);var y=[];return g.forEach(function(d){y.push({x:d.x,y:d.y})}),m.updatePosition(S,O,g),(p=m.tick)===null||p===void 0||p.call(m),y}},E.prototype.calRepulsive=function(b,p){var m=this,g=m.getMass,M=m.factor,_=m.coulombDisScale,S=m.preventOverlap,O=m.collideStrength,y=O===void 0?1:O,d=m.nodeStrength,V=m.nodeSize;p.forEach(function(q,Y){var X=g?g(q):1;p.forEach(function(H,J){if(!(Y>=J)){var nt=q.x-H.x,tt=q.y-H.y;nt===0&&tt===0&&(nt=Math.random()*.01,tt=Math.random()*.01);var at=nt*nt+tt*tt,ct=Math.sqrt(at),ht=(ct+.1)*_,Lt=nt/ct,St=tt/ct,Zt=(d(q)+d(H))*.5*M/(ht*ht),Ut=g?g(H):1;if(b[2*Y]+=Lt*Zt,b[2*Y+1]+=St*Zt,b[2*J]-=Lt*Zt,b[2*J+1]-=St*Zt,S&&(V(q)+V(H))/2>ct){var Ot=y*(d(q)+d(H))*.5/at;b[2*Y]+=Lt*Ot/X,b[2*Y+1]+=St*Ot/X,b[2*J]-=Lt*Ot/Ut,b[2*J+1]-=St*Ot/Ut}}})})},E.prototype.calAttractive=function(b,p){var m=this,g=m.nodeMap,M=m.nodeIdxMap,_=m.linkDistance,S=m.edgeStrength,O=m.nodeSize,y=m.getMass;p.forEach(function(d,V){var q=(0,R.getEdgeTerminal)(d,"source"),Y=(0,R.getEdgeTerminal)(d,"target"),X=g[q],H=g[Y],J=H.x-X.x,nt=H.y-X.y;J===0&&nt===0&&(J=Math.random()*.01,nt=Math.random()*.01);var tt=Math.sqrt(J*J+nt*nt),at=J/tt,ct=nt/tt,ht=_(d,X,H)||1+(O(X)+O(H)||0)/2,Lt=ht-tt,St=Lt*S(d),Zt=M[q],Ut=M[Y],Ot=y?y(X):1,Z=y?y(H):1;b[2*Zt]-=at*St/Ot,b[2*Zt+1]-=ct*St/Ot,b[2*Ut]+=at*St/Z,b[2*Ut+1]+=ct*St/Z})},E.prototype.calGravity=function(b,p){for(var m=this,g=m.center,M=m.gravity,_=m.degrees,S=p.length,O=0;O<S;O++){var y=p[O],d=y.x-g[0],V=y.y-g[1],q=M;if(m.getCenter){var Y=m.getCenter(y,_[O].all);Y&&(0,R.isNumber)(Y[0])&&(0,R.isNumber)(Y[1])&&(0,R.isNumber)(Y[2])&&(d=y.x-Y[0],V=y.y-Y[1],q=Y[2])}q&&(b[2*O]-=q*d,b[2*O+1]-=q*V)}},E.prototype.updateVelocity=function(b,p,m,g){var M=this,_=m*M.damping;g.forEach(function(S,O){var y=b[2*O]*_||.01,d=b[2*O+1]*_||.01,V=Math.sqrt(y*y+d*d);if(V>M.maxSpeed){var q=M.maxSpeed/V;y=q*y,d=q*d}p[2*O]=y,p[2*O+1]=d})},E.prototype.updatePosition=function(b,p,m){m.forEach(function(g,M){if((0,R.isNumber)(g.fx)&&(0,R.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var _=b[2*M]*p,S=b[2*M+1]*p;g.x+=_,g.y+=S})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},E.prototype.getType=function(){return"gForce"},E}(W.Base);F.GForceLayout=k},87745:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var g=function(M,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,O){S.__proto__=O}||function(S,O){for(var y in O)Object.prototype.hasOwnProperty.call(O,y)&&(S[y]=O[y])},g(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(M,_);function S(){this.constructor=M}M.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}(),W=this&&this.__awaiter||function(g,M,_,S){function O(y){return y instanceof _?y:new _(function(d){d(y)})}return new(_||(_=Promise))(function(y,d){function V(X){try{Y(S.next(X))}catch(H){d(H)}}function q(X){try{Y(S.throw(X))}catch(H){d(H)}}function Y(X){X.done?y(X.value):O(X.value).then(V,q)}Y((S=S.apply(g,M||[])).next())})},R=this&&this.__generator||function(g,M){var _={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},S,O,y,d;return d={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function V(Y){return function(X){return q([Y,X])}}function q(Y){if(S)throw new TypeError("Generator is already executing.");for(;d&&(d=0,Y[0]&&(_=0)),_;)try{if(S=1,O&&(y=Y[0]&2?O.return:Y[0]?O.throw||((y=O.return)&&y.call(O),0):O.next)&&!(y=y.call(O,Y[1])).done)return y;switch(O=0,y&&(Y=[Y[0]&2,y.value]),Y[0]){case 0:case 1:y=Y;break;case 4:return _.label++,{value:Y[1],done:!1};case 5:_.label++,O=Y[1],Y=[0];continue;case 7:Y=_.ops.pop(),_.trys.pop();continue;default:if(y=_.trys,!(y=y.length>0&&y[y.length-1])&&(Y[0]===6||Y[0]===2)){_=0;continue}if(Y[0]===3&&(!y||Y[1]>y[0]&&Y[1]<y[3])){_.label=Y[1];break}if(Y[0]===6&&_.label<y[1]){_.label=y[1],y=Y;break}if(y&&_.label<y[2]){_.label=y[2],_.ops.push(Y);break}y[2]&&_.ops.pop(),_.trys.pop();continue}Y=M.call(g,_)}catch(X){Y=[6,X],O=0}finally{S=y=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(F,"__esModule",{value:!0}),F.FruchtermanGPULayout=void 0;var L=B(62329),k=B(49784),N=B(1029),E=B(48835),b=B(8574),p=B(16470),m=function(g){P(M,g);function M(_){var S=g.call(this)||this;return S.maxIteration=1e3,S.gravity=10,S.speed=1,S.clustering=!1,S.clusterField="cluster",S.clusterGravity=10,S.workerEnabled=!1,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.updateCfg(_),S}return M.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},M.prototype.execute=function(){return W(this,void 0,void 0,function(){var _,S,O,y,d,V=this;return R(this,function(q){switch(q.label){case 0:return _=this,S=_.nodes,!S||S.length===0?(_.onLayoutEnd&&_.onLayoutEnd(),[2]):(!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]),O=_.center,S.length===1?(S[0].x=O[0],S[0].y=O[1],_.onLayoutEnd&&_.onLayoutEnd(),[2]):(y={},d={},S.forEach(function(Y,X){(0,k.isNumber)(Y.x)||(Y.x=Math.random()*V.width),(0,k.isNumber)(Y.y)||(Y.y=Math.random()*V.height),y[Y.id]=Y,d[Y.id]=X}),_.nodeMap=y,_.nodeIdxMap=d,[4,_.run()]));case 1:return q.sent(),[2]}})})},M.prototype.executeWithWorker=function(_,S){return W(this,void 0,void 0,function(){var O,y,d,V,q,Y=this;return R(this,function(X){switch(X.label){case 0:return O=this,y=O.nodes,d=O.center,!y||y.length===0?[2]:y.length===1?(y[0].x=d[0],y[0].y=d[1],[2]):(V={},q={},y.forEach(function(H,J){(0,k.isNumber)(H.x)||(H.x=Math.random()*Y.width),(0,k.isNumber)(H.y)||(H.y=Math.random()*Y.height),V[H.id]=H,q[H.id]=J}),O.nodeMap=V,O.nodeIdxMap=q,[4,O.run(_,S)]);case 1:return X.sent(),[2]}})})},M.prototype.run=function(_,S){return W(this,void 0,void 0,function(){var O,y,d,V,q,Y,X,H,J,nt,tt,at,ct,ht,Lt,St,Zt,Ut,Ot,Z,st,Et,Bt,Pt,Ht,le,ye=this;return R(this,function(Gt){switch(Gt.label){case 0:for(O=this,y=O.nodes,d=O.edges,V=O.maxIteration,q=O.center,Y=O.height*O.width,X=Math.sqrt(Y)/10,H=Y/(y.length+1),J=Math.sqrt(H),nt=O.speed,tt=O.clustering,at=(0,E.attributesToTextureData)([O.clusterField],y),ct=at.array,ht=at.count,y.forEach(function(zt,ue){var we=0,de=0;(0,k.isNumber)(zt.fx)&&(0,k.isNumber)(zt.fy)&&(we=zt.fx||.001,de=zt.fy||.001),ct[4*ue+1]=we,ct[4*ue+2]=de}),Lt=y.length,St=(0,E.buildTextureData)(y,d),Zt=St.maxEdgePerVetex,Ut=St.array,Ot=O.workerEnabled,Ot?Z=N.World.create({canvas:_,engineOptions:{supportCompute:!0}}):Z=N.World.create({engineOptions:{supportCompute:!0}}),st=O.onLayoutEnd,Et=[],Bt=0;Bt<ht;Bt++)Et.push(0,0,0,0);return Pt=Z.createKernel(b.fruchtermanBundle).setDispatch([Lt,1,1]).setBinding({u_Data:Ut,u_K:J,u_K2:H,u_Gravity:O.gravity,u_ClusterGravity:O.clusterGravity||O.gravity||1,u_Speed:nt,u_MaxDisplace:X,u_Clustering:tt?1:0,u_Center:q,u_AttributeArray:ct,u_ClusterCenters:Et,MAX_EDGE_PER_VERTEX:Zt,VERTEX_COUNT:Lt}),tt&&(Ht=Z.createKernel(b.clusterBundle).setDispatch([ht,1,1]).setBinding({u_Data:Ut,u_NodeAttributes:ct,u_ClusterCenters:Et,VERTEX_COUNT:Lt,CLUSTER_COUNT:ht})),le=function(){return W(ye,void 0,void 0,function(){var zt,ue;return R(this,function(we){switch(we.label){case 0:zt=0,we.label=1;case 1:return zt<V?[4,Pt.execute()]:[3,6];case 2:return we.sent(),tt?(Ht.setBinding({u_Data:Pt}),[4,Ht.execute()]):[3,4];case 3:we.sent(),Pt.setBinding({u_ClusterCenters:Ht}),we.label=4;case 4:Pt.setBinding({u_MaxDisplace:X*=.99}),we.label=5;case 5:return zt++,[3,1];case 6:return[4,Pt.getOutput()];case 7:return ue=we.sent(),_?S.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:ue}):y.forEach(function(de,Mt){var ee=ue[4*Mt],ce=ue[4*Mt+1];de.x=ee,de.y=ce}),st&&st(),[2]}})})},[4,le()];case 1:return Gt.sent(),[2]}})})},M.prototype.getType=function(){return"fruchterman-gpu"},M}(L.Base);F.FruchtermanGPULayout=m},8574:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.clusterBundle=F.clusterCode=F.fruchtermanBundle=F.fruchtermanCode=void 0,F.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,F.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',F.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,F.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},85194:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var M=function(_,S){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,y){O.__proto__=y}||function(O,y){for(var d in y)Object.prototype.hasOwnProperty.call(y,d)&&(O[d]=y[d])},M(_,S)};return function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");M(_,S);function O(){this.constructor=_}_.prototype=S===null?Object.create(S):(O.prototype=S.prototype,new O)}}(),W=this&&this.__awaiter||function(M,_,S,O){function y(d){return d instanceof S?d:new S(function(V){V(d)})}return new(S||(S=Promise))(function(d,V){function q(H){try{X(O.next(H))}catch(J){V(J)}}function Y(H){try{X(O.throw(H))}catch(J){V(J)}}function X(H){H.done?d(H.value):y(H.value).then(q,Y)}X((O=O.apply(M,_||[])).next())})},R=this&&this.__generator||function(M,_){var S={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},O,y,d,V;return V={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function q(X){return function(H){return Y([X,H])}}function Y(X){if(O)throw new TypeError("Generator is already executing.");for(;V&&(V=0,X[0]&&(S=0)),S;)try{if(O=1,y&&(d=X[0]&2?y.return:X[0]?y.throw||((d=y.return)&&d.call(y),0):y.next)&&!(d=d.call(y,X[1])).done)return d;switch(y=0,d&&(X=[X[0]&2,d.value]),X[0]){case 0:case 1:d=X;break;case 4:return S.label++,{value:X[1],done:!1};case 5:S.label++,y=X[1],X=[0];continue;case 7:X=S.ops.pop(),S.trys.pop();continue;default:if(d=S.trys,!(d=d.length>0&&d[d.length-1])&&(X[0]===6||X[0]===2)){S=0;continue}if(X[0]===3&&(!d||X[1]>d[0]&&X[1]<d[3])){S.label=X[1];break}if(X[0]===6&&S.label<d[1]){S.label=d[1],d=X;break}if(d&&S.label<d[2]){S.label=d[2],S.ops.push(X);break}d[2]&&S.ops.pop(),S.trys.pop();continue}X=_.call(M,S)}catch(H){X=[6,H],y=0}finally{O=d=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}};Object.defineProperty(F,"__esModule",{value:!0}),F.GForceGPULayout=void 0;var L=B(62329),k=B(49784),N=B(1029),E=B(48835),b=B(80628),p=B(49762),m=B(16470),g=function(M){P(_,M);function _(S){var O=M.call(this)||this;return O.maxIteration=1e3,O.edgeStrength=200,O.nodeStrength=1e3,O.coulombDisScale=.005,O.damping=.9,O.maxSpeed=1e3,O.minMovement=.5,O.interval=.02,O.factor=1,O.linkDistance=1,O.gravity=10,O.workerEnabled=!1,O.nodes=[],O.edges=[],O.width=300,O.height=300,O.nodeMap={},O.nodeIdxMap={},O.updateCfg(S),O}return _.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},_.prototype.execute=function(){return W(this,void 0,void 0,function(){var S,O,y,d,V;return R(this,function(q){switch(q.label){case 0:return S=this,O=S.nodes,!O||O.length===0?(S.onLayoutEnd&&S.onLayoutEnd(),[2]):(!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]),y=S.center,O.length===1?(O[0].x=y[0],O[0].y=y[1],S.onLayoutEnd&&S.onLayoutEnd(),[2]):(d={},V={},O.forEach(function(Y,X){(0,k.isNumber)(Y.x)||(Y.x=Math.random()*S.width),(0,k.isNumber)(Y.y)||(Y.y=Math.random()*S.height),d[Y.id]=Y,V[Y.id]=X}),S.nodeMap=d,S.nodeIdxMap=V,S.nodeStrength=(0,E.proccessToFunc)(S.nodeStrength,1),S.edgeStrength=(0,E.proccessToFunc)(S.edgeStrength,1),[4,S.run()]));case 1:return q.sent(),[2]}})})},_.prototype.executeWithWorker=function(S,O){var y=this,d=y.nodes,V=y.center;if(!(!d||d.length===0)){if(d.length===1){d[0].x=V[0],d[0].y=V[1];return}var q={},Y={};d.forEach(function(X,H){(0,k.isNumber)(X.x)||(X.x=Math.random()*y.width),(0,k.isNumber)(X.y)||(X.y=Math.random()*y.height),q[X.id]=X,Y[X.id]=H}),y.nodeMap=q,y.nodeIdxMap=Y,y.nodeStrength=(0,E.proccessToFunc)(y.nodeStrength,1),y.edgeStrength=(0,E.proccessToFunc)(y.edgeStrength,1),y.run(S,O)}},_.prototype.run=function(S,O){return W(this,void 0,void 0,function(){var y,d,V,q,Y,X,H,J,nt,tt,at,ct,ht,Lt,St,Zt,Ut,Ot,Z,st,Et,Bt,Pt,Ht,le,ye,Gt,zt=this;return R(this,function(ue){switch(ue.label){case 0:for(y=this,d=y.nodes,V=y.edges,q=y.maxIteration,!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),Y=d.length,y.linkDistance=(0,E.proccessToFunc)(y.linkDistance),y.edgeStrength=(0,E.proccessToFunc)(y.edgeStrength),X=(0,E.buildTextureDataWithTwoEdgeAttr)(d,V,y.linkDistance,y.edgeStrength),H=X.maxEdgePerVetex,J=X.array,y.degrees=(0,b.getDegree)(d.length,y.nodeIdxMap,V).map(function(we){return we.all}),nt=[],tt=[],at=[],ct=[],ht=[],Lt=[],St=[],y.getMass||(y.getMass=function(we){return y.degrees[y.nodeIdxMap[we.id]]||1}),Zt=y.gravity,Ut=y.center,d.forEach(function(we,de){nt.push(y.getMass(we)),tt.push(y.nodeStrength(we)),y.degrees[de]||(y.degrees[de]=0);var Mt=[Ut[0],Ut[1],Zt];if(y.getCenter){var ee=y.getCenter(we,y.degrees[de]);ee&&(0,k.isNumber)(ee[0])&&(0,k.isNumber)(ee[1])&&(0,k.isNumber)(ee[2])&&(Mt=ee)}at.push(Mt[0]),ct.push(Mt[1]),ht.push(Mt[2]),(0,k.isNumber)(we.fx)&&(0,k.isNumber)(we.fy)?(Lt.push(we.fx||.001),St.push(we.fy||.001)):(Lt.push(0),St.push(0))}),Ot=(0,E.arrayToTextureData)([nt,y.degrees,tt,Lt]),Z=(0,E.arrayToTextureData)([at,ct,ht,St]),st=y.workerEnabled,st?Et=N.World.create({canvas:S,engineOptions:{supportCompute:!0}}):Et=N.World.create({engineOptions:{supportCompute:!0}}),Bt=y.onLayoutEnd,Pt=[],J.forEach(function(we){Pt.push(we)}),Ht=0;Ht<4;Ht++)Pt.push(0);return le=Et.createKernel(p.gForceBundle).setDispatch([Y,1,1]).setBinding({u_Data:J,u_damping:y.damping,u_maxSpeed:y.maxSpeed,u_minMovement:y.minMovement,u_coulombDisScale:y.coulombDisScale,u_factor:y.factor,u_NodeAttributeArray1:Ot,u_NodeAttributeArray2:Z,MAX_EDGE_PER_VERTEX:H,VERTEX_COUNT:Y,u_AveMovement:Pt,u_interval:y.interval}),ye=Et.createKernel(p.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:J,VERTEX_COUNT:Y,u_AveMovement:[0,0,0,0]}),Gt=function(){return W(zt,void 0,void 0,function(){var we,de,Mt;return R(this,function(ee){switch(ee.label){case 0:we=0,ee.label=1;case 1:return we<q?[4,le.execute()]:[3,5];case 2:return ee.sent(),ye.setBinding({u_Data:le}),[4,ye.execute()];case 3:ee.sent(),de=Math.max(.02,y.interval-we*.002),le.setBinding({u_interval:de,u_AveMovement:ye}),ee.label=4;case 4:return we++,[3,1];case 5:return[4,le.getOutput()];case 6:return Mt=ee.sent(),S?O.postMessage({type:m.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Mt}):d.forEach(function(ce,At){var Wt=Mt[4*At],fe=Mt[4*At+1];ce.x=Wt,ce.y=fe}),Bt&&Bt(),[2]}})})},[4,Gt()];case 1:return ue.sent(),[2]}})})},_.prototype.getType=function(){return"gForce-gpu"},_}(L.Base);F.GForceGPULayout=g},49762:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.aveMovementBundle=F.aveMovementCode=F.gForceBundle=F.gForceCode=void 0,F.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,F.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',F.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,F.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},94414:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var k=function(N,E){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(b[m]=p[m])},k(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");k(N,E);function b(){this.constructor=N}N.prototype=E===null?Object.create(E):(b.prototype=E.prototype,new b)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.GridLayout=void 0;var W=B(49784),R=B(62329),L=function(k){P(N,k);function N(E){var b=k.call(this)||this;return b.begin=[0,0],b.preventOverlap=!0,b.preventOverlapPadding=10,b.condense=!1,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.row=0,b.col=0,b.cellWidth=0,b.cellHeight=0,b.cellUsed={},b.id2manPos={},b.onLayoutEnd=function(){},b.updateCfg(E),b}return N.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},N.prototype.execute=function(){var E=this,b=E.nodes,p=E.edges,m=E.begin,g=b.length;if(g===0)return E.onLayoutEnd&&E.onLayoutEnd(),{nodes:b,edges:p};if(g===1)return b[0].x=m[0],b[0].y=m[1],E.onLayoutEnd&&E.onLayoutEnd(),{nodes:b,edges:p};var M=E.sortBy,_=E.width,S=E.height,O=E.condense,y=E.preventOverlapPadding,d=E.preventOverlap,V=E.nodeSpacing,q=E.nodeSize,Y=[];b.forEach(function(Ot){Y.push(Ot)});var X={};if(Y.forEach(function(Ot,Z){X[Ot.id]=Z}),(M==="degree"||!(0,W.isString)(M)||Y[0][M]===void 0)&&(M="degree",(0,W.isNaN)(b[0].degree))){var H=(0,W.getDegree)(Y.length,X,p);Y.forEach(function(Ot,Z){Ot.degree=H[Z].all})}Y.sort(function(Ot,Z){return Z[M]-Ot[M]}),!_&&typeof window!="undefined"&&(_=window.innerWidth),!S&&typeof window!="undefined"&&(S=window.innerHeight);var J=E.rows,nt=E.cols!=null?E.cols:E.columns;if(E.cells=g,J!=null&&nt!=null?(E.rows=J,E.cols=nt):J!=null&&nt==null?(E.rows=J,E.cols=Math.ceil(E.cells/E.rows)):J==null&&nt!=null?(E.cols=nt,E.rows=Math.ceil(E.cells/E.cols)):(E.splits=Math.sqrt(E.cells*E.height/E.width),E.rows=Math.round(E.splits),E.cols=Math.round(E.width/E.height*E.splits)),E.rows=Math.max(E.rows,1),E.cols=Math.max(E.cols,1),E.cols*E.rows>E.cells){var tt=E.small(),at=E.large();(tt-1)*at>=E.cells?E.small(tt-1):(at-1)*tt>=E.cells&&E.large(at-1)}else for(;E.cols*E.rows<E.cells;){var tt=E.small(),at=E.large();(at+1)*tt>=E.cells?E.large(at+1):E.small(tt+1)}if(E.cellWidth=_/E.cols,E.cellHeight=S/E.rows,O&&(E.cellWidth=0,E.cellHeight=0),d||V){var ct=(0,W.getFuncByUnknownType)(10,V),ht=(0,W.getFuncByUnknownType)(30,q,!1);Y.forEach(function(Ot){(!Ot.x||!Ot.y)&&(Ot.x=0,Ot.y=0);var Z=ht(Ot)||30,st,Et;(0,W.isArray)(Z)?(st=Z[0],Et=Z[1]):(st=Z,Et=Z);var Bt=ct!==void 0?ct(Ot):y,Pt=st+Bt,Ht=Et+Bt;E.cellWidth=Math.max(E.cellWidth,Pt),E.cellHeight=Math.max(E.cellHeight,Ht)})}E.cellUsed={},E.row=0,E.col=0,E.id2manPos={};for(var Lt=0;Lt<Y.length;Lt++){var St=Y[Lt],Zt=void 0;if(E.position&&(Zt=E.position(St)),Zt&&(Zt.row!==void 0||Zt.col!==void 0)){var Ut={row:Zt.row,col:Zt.col};if(Ut.col===void 0)for(Ut.col=0;E.used(Ut.row,Ut.col);)Ut.col++;else if(Ut.row===void 0)for(Ut.row=0;E.used(Ut.row,Ut.col);)Ut.row++;E.id2manPos[St.id]=Ut,E.use(Ut.row,Ut.col)}E.getPos(St)}return E.onLayoutEnd&&E.onLayoutEnd(),{edges:p,nodes:Y}},N.prototype.small=function(E){var b=this,p,m=b.rows||5,g=b.cols||5;if(E==null)p=Math.min(m,g);else{var M=Math.min(m,g);M===b.rows?b.rows=E:b.cols=E}return p},N.prototype.large=function(E){var b=this,p,m=b.rows||5,g=b.cols||5;if(E==null)p=Math.max(m,g);else{var M=Math.max(m,g);M===b.rows?b.rows=E:b.cols=E}return p},N.prototype.used=function(E,b){var p=this;return p.cellUsed["c-".concat(E,"-").concat(b)]||!1},N.prototype.use=function(E,b){var p=this;p.cellUsed["c-".concat(E,"-").concat(b)]=!0},N.prototype.moveToNextCell=function(){var E=this,b=E.cols||5;E.col++,E.col>=b&&(E.col=0,E.row++)},N.prototype.getPos=function(E){var b=this,p=b.begin,m=b.cellWidth,g=b.cellHeight,M,_,S=b.id2manPos[E.id];if(S)M=S.col*m+m/2+p[0],_=S.row*g+g/2+p[1];else{for(;b.used(b.row,b.col);)b.moveToNextCell();M=b.col*m+m/2+p[0],_=b.row*g+g/2+p[1],b.use(b.row,b.col),b.moveToNextCell()}E.x=M,E.y=_},N.prototype.getType=function(){return"grid"},N}(R.Base);F.GridLayout=L},2584:function(Le,F,B){"use strict";var P=this&&this.__createBinding||(Object.create?function(H,J,nt,tt){tt===void 0&&(tt=nt);var at=Object.getOwnPropertyDescriptor(J,nt);(!at||("get"in at?!J.__esModule:at.writable||at.configurable))&&(at={enumerable:!0,get:function(){return J[nt]}}),Object.defineProperty(H,tt,at)}:function(H,J,nt,tt){tt===void 0&&(tt=nt),H[tt]=J[nt]}),W=this&&this.__exportStar||function(H,J){for(var nt in H)nt!=="default"&&!Object.prototype.hasOwnProperty.call(J,nt)&&P(J,H,nt)};Object.defineProperty(F,"__esModule",{value:!0}),F.ERLayout=F.ForceAtlas2Layout=F.ComboCombinedLayout=F.ComboForceLayout=F.GForceGPULayout=F.FruchtermanGPULayout=F.FruchtermanLayout=F.MDSLayout=F.ConcentricLayout=F.RadialLayout=F.DagreCompoundLayout=F.DagreLayout=F.CircularLayout=F.ForceLayout=F.Force2Layout=F.GForceLayout=F.RandomLayout=F.GridLayout=F.Layouts=F.Layout=void 0;var R=B(94414);Object.defineProperty(F,"GridLayout",{enumerable:!0,get:function(){return R.GridLayout}});var L=B(39711);Object.defineProperty(F,"RandomLayout",{enumerable:!0,get:function(){return L.RandomLayout}});var k=B(13653);Object.defineProperty(F,"GForceLayout",{enumerable:!0,get:function(){return k.GForceLayout}});var N=B(6740);Object.defineProperty(F,"Force2Layout",{enumerable:!0,get:function(){return N.Force2Layout}});var E=B(85717);Object.defineProperty(F,"ForceLayout",{enumerable:!0,get:function(){return E.ForceLayout}});var b=B(64885);Object.defineProperty(F,"CircularLayout",{enumerable:!0,get:function(){return b.CircularLayout}});var p=B(20171);Object.defineProperty(F,"DagreLayout",{enumerable:!0,get:function(){return p.DagreLayout}});var m=B(77057);Object.defineProperty(F,"DagreCompoundLayout",{enumerable:!0,get:function(){return m.DagreCompoundLayout}});var g=B(47944);Object.defineProperty(F,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var M=B(43281);Object.defineProperty(F,"ConcentricLayout",{enumerable:!0,get:function(){return M.ConcentricLayout}});var _=B(52899);Object.defineProperty(F,"MDSLayout",{enumerable:!0,get:function(){return _.MDSLayout}});var S=B(80374);Object.defineProperty(F,"FruchtermanLayout",{enumerable:!0,get:function(){return S.FruchtermanLayout}});var O=B(87745);Object.defineProperty(F,"FruchtermanGPULayout",{enumerable:!0,get:function(){return O.FruchtermanGPULayout}});var y=B(85194);Object.defineProperty(F,"GForceGPULayout",{enumerable:!0,get:function(){return y.GForceGPULayout}});var d=B(66590);Object.defineProperty(F,"ComboForceLayout",{enumerable:!0,get:function(){return d.ComboForceLayout}});var V=B(63861);Object.defineProperty(F,"ComboCombinedLayout",{enumerable:!0,get:function(){return V.ComboCombinedLayout}});var q=B(48564);Object.defineProperty(F,"ForceAtlas2Layout",{enumerable:!0,get:function(){return q.ForceAtlas2Layout}});var Y=B(90441);Object.defineProperty(F,"ERLayout",{enumerable:!0,get:function(){return Y.ERLayout}});var X=B(42875);Object.defineProperty(F,"Layout",{enumerable:!0,get:function(){return X.Layout}}),Object.defineProperty(F,"Layouts",{enumerable:!0,get:function(){return X.Layouts}}),W(B(32867),F)},42875:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Layouts=F.Layout=void 0;var P=B(95326),W=B(94414),R=B(39711),L=B(6740),k=B(13653),N=B(85717),E=B(64885),b=B(20171),p=B(47944),m=B(43281),g=B(52899),M=B(80374),_=B(87745),S=B(85194),O=B(66590),y=B(63861),d=B(48564),V=B(90441),q=B(77057),Y=B(49784),X=function(){function H(J){var nt=(0,P.getLayoutByName)(J.type);this.layoutInstance=new nt(J)}return H.prototype.layout=function(J){return this.layoutInstance.layout(J)},H.prototype.updateCfg=function(J){this.layoutInstance.updateCfg(J)},H.prototype.init=function(J){this.correctLayers(J.nodes),this.layoutInstance.init(J)},H.prototype.correctLayers=function(J){if(J!=null&&J.length){var nt=1/0,tt=[];if(J.forEach(function(ct){(0,Y.isString)(ct.layer)&&(ct.layer=parseInt(ct.layer,10)),!(ct.layer===void 0||isNaN(ct.layer))&&(tt.push(ct),ct.layer<nt&&(nt=ct.layer))}),nt<=0){var at=Math.abs(nt)+1;tt.forEach(function(ct){return ct.layer+=at})}}},H.prototype.execute=function(){this.layoutInstance.execute()},H.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},H.prototype.destroy=function(){return this.layoutInstance.destroy()},H}();F.Layout=X,F.Layouts={force:N.ForceLayout,fruchterman:M.FruchtermanLayout,forceAtlas2:d.ForceAtlas2Layout,gForce:k.GForceLayout,force2:L.Force2Layout,dagre:b.DagreLayout,dagreCompound:q.DagreCompoundLayout,circular:E.CircularLayout,radial:p.RadialLayout,concentric:m.ConcentricLayout,grid:W.GridLayout,mds:g.MDSLayout,comboForce:O.ComboForceLayout,comboCombined:y.ComboCombinedLayout,random:R.RandomLayout,"gForce-gpu":S.GForceGPULayout,"fruchterman-gpu":_.FruchtermanGPULayout,er:V.ERLayout}},52899:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var N=function(E,b){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g])},N(E,b)};return function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");N(E,b);function p(){this.constructor=E}E.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.MDSLayout=void 0;var W=B(5237),R=B(49784),L=B(62329),k=function(N){P(E,N);function E(b){var p=N.call(this)||this;return p.center=[0,0],p.linkDistance=50,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(b),p}return E.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},E.prototype.execute=function(){var b=this,p=b.nodes,m=b.edges,g=m===void 0?[]:m,M=b.center;if(!p||p.length===0){b.onLayoutEnd&&b.onLayoutEnd();return}if(p.length===1){p[0].x=M[0],p[0].y=M[1],b.onLayoutEnd&&b.onLayoutEnd();return}var _=b.linkDistance,S=(0,R.getAdjMatrix)({nodes:p,edges:g},!1),O=(0,R.floydWarshall)(S);b.handleInfinity(O);var y=(0,R.scaleMatrix)(O,_);b.scaledDistances=y;var d=b.runMDS();return b.positions=d,d.forEach(function(V,q){p[q].x=V[0]+M[0],p[q].y=V[1]+M[1]}),b.onLayoutEnd&&b.onLayoutEnd(),{nodes:p,edges:g}},E.prototype.runMDS=function(){var b=this,p=2,m=b.scaledDistances,g=W.Matrix.mul(W.Matrix.pow(m,2),-.5),M=g.mean("row"),_=g.mean("column"),S=g.mean();g.add(S).subRowVector(M).subColumnVector(_);var O=new W.SingularValueDecomposition(g),y=W.Matrix.sqrt(O.diagonalMatrix).diagonal();return O.leftSingularVectors.toJSON().map(function(d){return W.Matrix.mul([d],[y]).toJSON()[0].splice(0,p)})},E.prototype.handleInfinity=function(b){var p=-999999;b.forEach(function(m){m.forEach(function(g){g!==1/0&&p<g&&(p=g)})}),b.forEach(function(m,g){m.forEach(function(M,_){M===1/0&&(b[g][_]=p)})})},E.prototype.getType=function(){return"mds"},E}(L.Base);F.MDSLayout=k},47944:function(Le,F,B){"use strict";var P=this&&this.__createBinding||(Object.create?function(R,L,k,N){N===void 0&&(N=k);var E=Object.getOwnPropertyDescriptor(L,k);(!E||("get"in E?!L.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return L[k]}}),Object.defineProperty(R,N,E)}:function(R,L,k,N){N===void 0&&(N=k),R[N]=L[k]}),W=this&&this.__exportStar||function(R,L){for(var k in R)k!=="default"&&!Object.prototype.hasOwnProperty.call(L,k)&&P(L,R,k)};Object.defineProperty(F,"__esModule",{value:!0}),W(B(55974),F)},66082:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var P=B(5237),W=function(){function R(L){this.distances=L.distances,this.dimension=L.dimension||2,this.linkDistance=L.linkDistance}return R.prototype.layout=function(){var L=this,k=L.dimension,N=L.distances,E=L.linkDistance;try{var b=P.Matrix.mul(P.Matrix.pow(N,2),-.5),p=b.mean("row"),m=b.mean("column"),g=b.mean();b.add(g).subRowVector(p).subColumnVector(m);var M=new P.SingularValueDecomposition(b),_=P.Matrix.sqrt(M.diagonalMatrix).diagonal();return M.leftSingularVectors.toJSON().map(function(V){return P.Matrix.mul([V],[_]).toJSON()[0].splice(0,k)})}catch(V){for(var S=[],O=0;O<N.length;O++){var y=Math.random()*E,d=Math.random()*E;S.push([y,d])}return S}},R}();F.default=W},55974:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var g=function(M,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,O){S.__proto__=O}||function(S,O){for(var y in O)Object.prototype.hasOwnProperty.call(O,y)&&(S[y]=O[y])},g(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(M,_);function S(){this.constructor=M}M.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}(),W=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(F,"__esModule",{value:!0}),F.RadialLayout=void 0;var R=B(49784),L=B(62329),k=W(B(66082)),N=W(B(6290));function E(g){for(var M=g.length,_=g[0].length,S=[],O=0;O<M;O++){for(var y=[],d=0;d<_;d++)g[O][d]!==0?y.push(1/(g[O][d]*g[O][d])):y.push(0);S.push(y)}return S}function b(g,M){var _=-1;return g.forEach(function(S,O){S.id===M&&(_=O)}),_}function p(g,M){return Math.sqrt((g[0]-M[0])*(g[0]-M[0])+(g[1]-M[1])*(g[1]-M[1]))}var m=function(g){P(M,g);function M(_){var S=g.call(this)||this;return S.maxIteration=1e3,S.focusNode=null,S.unitRadius=null,S.linkDistance=50,S.preventOverlap=!1,S.strictRadial=!0,S.maxPreventOverlapIteration=200,S.sortStrength=10,S.nodes=[],S.edges=[],S.updateCfg(_),S}return M.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},M.prototype.execute=function(){var _=this,S=_.nodes,O=_.edges||[];if(!S||S.length===0){_.onLayoutEnd&&_.onLayoutEnd();return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var y=_.center;if(S.length===1){S[0].x=y[0],S[0].y=y[1],_.onLayoutEnd&&_.onLayoutEnd();return}var d=_.linkDistance,V=null;if((0,R.isString)(_.focusNode)){for(var q=!1,Y=0;Y<S.length;Y++)S[Y].id===_.focusNode&&(V=S[Y],_.focusNode=V,q=!0,Y=S.length);q||(V=null)}else V=_.focusNode;V||(V=S[0],_.focusNode=V);var X=b(S,V.id);X<0&&(X=0),_.focusIndex=X;var H=(0,R.getAdjMatrix)({nodes:S,edges:O},!1),J=(0,R.floydWarshall)(H),nt=_.maxToFocus(J,X);_.handleInfinity(J,X,nt+1),_.distances=J;var tt=J[X],at=_.width||500,ct=_.height||500,ht=at-y[0]>y[0]?y[0]:at-y[0],Lt=ct-y[1]>y[1]?y[1]:ct-y[1];ht===0&&(ht=at/2),Lt===0&&(Lt=ct/2);var St=Lt>ht?ht:Lt,Zt=Math.max.apply(Math,tt),Ut=[];tt.forEach(function(we,de){_.unitRadius||(_.unitRadius=St/Zt),Ut[de]=we*_.unitRadius}),_.radii=Ut;var Ot=_.eIdealDisMatrix();_.eIdealDistances=Ot;var Z=E(Ot);_.weights=Z;var st=new k.default({linkDistance:d,distances:Ot}),Et=st.layout();Et.forEach(function(we){(0,R.isNaN)(we[0])&&(we[0]=Math.random()*d),(0,R.isNaN)(we[1])&&(we[1]=Math.random()*d)}),_.positions=Et,Et.forEach(function(we,de){S[de].x=we[0]+y[0],S[de].y=we[1]+y[1]}),Et.forEach(function(we){we[0]-=Et[X][0],we[1]-=Et[X][1]}),_.run();var Bt=_.preventOverlap,Pt=_.nodeSize,Ht,le=_.strictRadial;if(Bt){var ye=_.nodeSpacing,Gt;(0,R.isNumber)(ye)?Gt=function(){return ye}:(0,R.isFunction)(ye)?Gt=ye:Gt=function(){return 0},Pt?(0,R.isArray)(Pt)?Ht=function(we){var de=Pt[0]>Pt[1]?Pt[0]:Pt[1];return de+Gt(we)}:Ht=function(we){return Pt+Gt(we)}:Ht=function(we){if(we.size){if((0,R.isArray)(we.size)){var de=we.size[0]>we.size[1]?we.size[0]:we.size[1];return de+Gt(we)}if((0,R.isObject)(we.size)){var de=we.size.width>we.size.height?we.size.width:we.size.height;return de+Gt(we)}return we.size+Gt(we)}return 10+Gt(we)};var zt={nodes:S,nodeSizeFunc:Ht,adjMatrix:H,positions:Et,radii:Ut,height:ct,width:at,strictRadial:le,focusID:X,iterations:_.maxPreventOverlapIteration||200,k:Et.length/4.5},ue=new N.default(zt);Et=ue.layout()}return Et.forEach(function(we,de){S[de].x=we[0]+y[0],S[de].y=we[1]+y[1]}),_.onLayoutEnd&&_.onLayoutEnd(),{nodes:S,edges:O}},M.prototype.run=function(){for(var _=this,S=_.maxIteration,O=_.positions||[],y=_.weights||[],d=_.eIdealDistances||[],V=_.radii||[],q=0;q<=S;q++){var Y=q/S;_.oneIteration(Y,O,V,d,y)}},M.prototype.oneIteration=function(_,S,O,y,d){var V=this,q=1-_,Y=V.focusIndex;S.forEach(function(X,H){var J=p(X,[0,0]),nt=J===0?0:1/J;if(H!==Y){var tt=0,at=0,ct=0;S.forEach(function(Lt,St){if(H!==St){var Zt=p(X,Lt),Ut=Zt===0?0:1/Zt,Ot=y[St][H];ct+=d[H][St],tt+=d[H][St]*(Lt[0]+Ot*(X[0]-Lt[0])*Ut),at+=d[H][St]*(Lt[1]+Ot*(X[1]-Lt[1])*Ut)}});var ht=O[H]===0?0:1/O[H];ct*=q,ct+=_*ht*ht,tt*=q,tt+=_*ht*X[0]*nt,X[0]=tt/ct,at*=q,at+=_*ht*X[1]*nt,X[1]=at/ct}})},M.prototype.eIdealDisMatrix=function(){var _=this,S=_.nodes;if(!S)return[];var O=_.distances,y=_.linkDistance,d=_.radii||[],V=_.unitRadius||50,q=[];return O&&O.forEach(function(Y,X){var H=[];Y.forEach(function(J,nt){if(X===nt)H.push(0);else if(d[X]===d[nt])if(_.sortBy==="data")H.push(J*(Math.abs(X-nt)*_.sortStrength)/(d[X]/V));else if(_.sortBy){var tt=S[X][_.sortBy]||0,at=S[nt][_.sortBy]||0;(0,R.isString)(tt)&&(tt=tt.charCodeAt(0)),(0,R.isString)(at)&&(at=at.charCodeAt(0)),H.push(J*(Math.abs(tt-at)*_.sortStrength)/(d[X]/V))}else H.push(J*y/(d[X]/V));else{var ct=(y+V)/2;H.push(J*ct)}}),q.push(H)}),q},M.prototype.handleInfinity=function(_,S,O){for(var y=_.length,d=0;d<y;d++)if(_[S][d]===1/0){_[S][d]=O,_[d][S]=O;for(var V=0;V<y;V++)_[d][V]!==1/0&&_[S][V]===1/0&&(_[S][V]=O+_[d][V],_[V][S]=O+_[d][V])}for(var d=0;d<y;d++)if(d!==S){for(var V=0;V<y;V++)if(_[d][V]===1/0){var q=Math.abs(_[S][d]-_[S][V]);q=q===0?1:q,_[d][V]=q}}},M.prototype.maxToFocus=function(_,S){for(var O=0,y=0;y<_[S].length;y++)_[S][y]!==1/0&&(O=_[S][y]>O?_[S][y]:O);return O},M.prototype.getType=function(){return"radial"},M}(L.Base);F.RadialLayout=m},6290:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var B=800,P=function(){function W(R){this.disp=[],this.positions=R.positions,this.adjMatrix=R.adjMatrix,this.focusID=R.focusID,this.radii=R.radii,this.iterations=R.iterations||10,this.height=R.height||10,this.width=R.width||10,this.speed=R.speed||100,this.gravity=R.gravity||10,this.nodeSizeFunc=R.nodeSizeFunc,this.k=R.k||5,this.strictRadial=R.strictRadial,this.nodes=R.nodes}return W.prototype.layout=function(){var R=this,L=R.positions,k=[],N=R.iterations,E=R.width/10;R.maxDisplace=E,R.disp=k;for(var b=0;b<N;b++)L.forEach(function(p,m){k[m]={x:0,y:0}}),R.getRepulsion(),R.updatePositions();return L},W.prototype.getRepulsion=function(){var R=this,L=R.positions,k=R.nodes,N=R.disp,E=R.k,b=R.radii||[];L.forEach(function(p,m){N[m]={x:0,y:0},L.forEach(function(g,M){if(m!==M&&b[m]===b[M]){var _=p[0]-g[0],S=p[1]-g[1],O=Math.sqrt(_*_+S*S);if(O===0){O=1;var y=m>M?1:-1;_=.01*y,S=.01*y}if(O<R.nodeSizeFunc(k[m])/2+R.nodeSizeFunc(k[M])/2){var d=E*E/O;N[m].x+=_/O*d,N[m].y+=S/O*d}}})})},W.prototype.updatePositions=function(){var R=this,L=R.positions,k=R.disp,N=R.speed,E=R.strictRadial,b=R.focusID,p=R.maxDisplace||R.width/10;E&&k.forEach(function(g,M){var _=L[M][0]-L[b][0],S=L[M][1]-L[b][1],O=Math.sqrt(_*_+S*S),y=S/O,d=-_/O,V=Math.sqrt(g.x*g.x+g.y*g.y),q=Math.acos((y*g.x+d*g.y)/V);q>Math.PI/2&&(q-=Math.PI/2,y*=-1,d*=-1);var Y=Math.cos(q)*V;g.x=y*Y,g.y=d*Y});var m=R.radii;L.forEach(function(g,M){if(M!==b){var _=Math.sqrt(k[M].x*k[M].x+k[M].y*k[M].y);if(_>0&&M!==b){var S=Math.min(p*(N/B),_);if(g[0]+=k[M].x/_*S,g[1]+=k[M].y/_*S,E){var O=g[0]-L[b][0],y=g[1]-L[b][1],d=Math.sqrt(O*O+y*y);O=O/d*m[M],y=y/d*m[M],g[0]=L[b][0]+O,g[1]=L[b][1]+y}}}})},W}();F.default=P},39711:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var L=function(k,N){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(E[p]=b[p])},L(k,N)};return function(k,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");L(k,N);function E(){this.constructor=k}k.prototype=N===null?Object.create(N):(E.prototype=N.prototype,new E)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.RandomLayout=void 0;var W=B(62329),R=function(L){P(k,L);function k(N){var E=L.call(this)||this;return E.center=[0,0],E.width=300,E.height=300,E.nodes=[],E.edges=[],E.onLayoutEnd=function(){},E.updateCfg(N),E}return k.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},k.prototype.execute=function(){var N=this,E=N.nodes,b=.9,p=N.center;return!N.width&&typeof window!="undefined"&&(N.width=window.innerWidth),!N.height&&typeof window!="undefined"&&(N.height=window.innerHeight),E&&E.forEach(function(m){m.x=(Math.random()-.5)*b*N.width+p[0],m.y=(Math.random()-.5)*b*N.height+p[1]}),N.onLayoutEnd&&N.onLayoutEnd(),{nodes:E,edges:this.edges}},k.prototype.getType=function(){return"random"},k}(W.Base);F.RandomLayout=R},32867:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0})},95326:function(Le,F,B){"use strict";var P=this&&this.__extends||function(){var b=function(p,m){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,M){g.__proto__=M}||function(g,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(g[_]=M[_])},b(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.getLayoutByName=F.unRegisterLayout=F.registerLayout=void 0;var W=B(62329),R=B(49784),L=new Map,k=function(b,p){if(L.get(b)&&console.warn("The layout with the name ".concat(b," exists already, it will be overridden")),(0,R.isObject)(p)){var m=function(g){P(M,g);function M(_){var S=this,O;S=g.call(this)||this;var y=S,d={},V=Object.assign({},y.getDefaultCfg(),((O=p.getDefaultCfg)===null||O===void 0?void 0:O.call(p))||{});return Object.assign(d,V,p,_),Object.keys(d).forEach(function(q){var Y=d[q];y[q]=Y}),S}return M}(W.Base);L.set(b,m)}else L.set(b,p);return L.get(b)};F.registerLayout=k;var N=function(b){L.has(b)&&L.delete(b)};F.unRegisterLayout=N;var E=function(b){return L.has(b)?L.get(b):null};F.getLayoutByName=E},85087:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.isArray=void 0,F.isArray=Array.isArray},78732:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getFuncByUnknownType=F.getFunc=F.isFunction=void 0;var P=B(49784),W=B(30627),R=function(N){return typeof N=="function"};F.isFunction=R;var L=function(N,E,b){var p;return b?p=b:(0,W.isNumber)(N)?p=function(){return N}:p=function(){return E},p};F.getFunc=L;var k=function(N,E,b){return b===void 0&&(b=!0),!E&&E!==0?function(p){return p.size?(0,P.isArray)(p.size)?p.size[0]>p.size[1]?p.size[0]:p.size[1]:(0,P.isObject)(p.size)?p.size.width>p.size.height?p.size.width:p.size.height:p.size:N}:(0,F.isFunction)(E)?E:(0,W.isNumber)(E)?function(){return E}:(0,P.isArray)(E)?function(){if(b){var p=Math.max.apply(Math,E);return isNaN(p)?N:p}return E}:(0,P.isObject)(E)?function(){if(b){var p=Math.max(E.width,E.height);return isNaN(p)?N:p}return[E.width,E.height]}:function(){return N}};F.getFuncByUnknownType=k},48835:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.arrayToTextureData=F.attributesToTextureData=F.buildTextureDataWithTwoEdgeAttr=F.buildTextureData=F.proccessToFunc=void 0;var P=B(49784),W=B(80628),R=function(b,p){var m;return b?(0,P.isNumber)(b)?m=function(){return b}:m=b:m=function(){return p||1},m};F.proccessToFunc=R;var L=function(b,p){var m=[],g=[],M={},_=0;for(_=0;_<b.length;_++){var S=b[_];M[S.id]=_,m.push(S.x),m.push(S.y),m.push(0),m.push(0),g.push([])}for(_=0;_<p.length;_++){var O=p[_],y=(0,W.getEdgeTerminal)(O,"source"),d=(0,W.getEdgeTerminal)(O,"target");!isNaN(M[y])&&!isNaN(M[d])&&(g[M[y]].push(M[d]),g[M[d]].push(M[y]))}var V=0;for(_=0;_<b.length;_++){var q=m.length,Y=g[_],X=Y.length;m[_*4+2]=q,m[_*4+3]=X,V=Math.max(V,X);for(var H=0;H<X;++H){var J=Y[H];m.push(+J)}}for(;m.length%4!==0;)m.push(0);return{maxEdgePerVetex:V,array:new Float32Array(m)}};F.buildTextureData=L;var k=function(b,p,m,g){var M=[],_=[],S={},O=0;for(O=0;O<b.length;O++){var y=b[O];S[y.id]=O,M.push(y.x),M.push(y.y),M.push(0),M.push(0),_.push([])}for(O=0;O<p.length;O++){var d=p[O],V=(0,W.getEdgeTerminal)(d,"source"),q=(0,W.getEdgeTerminal)(d,"target");_[S[V]].push(S[q]),_[S[V]].push(m(d)),_[S[V]].push(g(d)),_[S[V]].push(0),_[S[q]].push(S[V]),_[S[q]].push(m(d)),_[S[q]].push(g(d)),_[S[q]].push(0)}var Y=0;for(O=0;O<b.length;O++){var X=M.length,H=_[O],J=H.length;M[O*4+2]=X+1048576*J/4,M[O*4+3]=0,Y=Math.max(Y,J/4);for(var nt=0;nt<J;++nt){var tt=H[nt];M.push(+tt)}}for(;M.length%4!==0;)M.push(0);return{maxEdgePerVetex:Y,array:new Float32Array(M)}};F.buildTextureDataWithTwoEdgeAttr=k;var N=function(b,p){var m=[],g=b.length,M={};return p.forEach(function(_){b.forEach(function(S,O){if(M[_[S]]===void 0&&(M[_[S]]=Object.keys(M).length),m.push(M[_[S]]),O===g-1)for(;m.length%4!==0;)m.push(0)})}),{array:new Float32Array(m),count:Object.keys(M).length}};F.attributesToTextureData=N;var E=function(b){for(var p=[],m=b.length,g=b[0].length,M=function(S){b.forEach(function(O,y){if(p.push(O[S]),y===m-1)for(;p.length%4!==0;)p.push(0)})},_=0;_<g;_++)M(_);return new Float32Array(p)};F.arrayToTextureData=E},49784:function(Le,F,B){"use strict";var P=this&&this.__createBinding||(Object.create?function(R,L,k,N){N===void 0&&(N=k);var E=Object.getOwnPropertyDescriptor(L,k);(!E||("get"in E?!L.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return L[k]}}),Object.defineProperty(R,N,E)}:function(R,L,k,N){N===void 0&&(N=k),R[N]=L[k]}),W=this&&this.__exportStar||function(R,L){for(var k in R)k!=="default"&&!Object.prototype.hasOwnProperty.call(L,k)&&P(L,R,k)};Object.defineProperty(F,"__esModule",{value:!0}),W(B(8055),F),W(B(85087),F),W(B(30627),F),W(B(80628),F),W(B(98130),F),W(B(78732),F)},80628:function(Le,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getCoreNodeAndRelativeLeafNodes=F.getAvgNodePosition=F.getLayoutBBox=F.traverseTreeUp=F.scaleMatrix=F.getAdjMatrix=F.floydWarshall=F.getDegreeMap=F.getDegree=F.getEdgeTerminal=void 0;var P=B(85087),W=B(30627),R=B(98130),L=function(V,q){var Y=V[q];return(0,R.isObject)(Y)?Y.cell:Y};F.getEdgeTerminal=L;var k=function(V,q,Y){for(var X=[],H=0;H<V;H++)X[H]={in:0,out:0,all:0};return Y&&Y.forEach(function(J){var nt=(0,F.getEdgeTerminal)(J,"source"),tt=(0,F.getEdgeTerminal)(J,"target");nt&&X[q[nt]]&&(X[q[nt]].out+=1,X[q[nt]].all+=1),tt&&X[q[tt]]&&(X[q[tt]].in+=1,X[q[tt]].all+=1)}),X};F.getDegree=k;var N=function(V,q){var Y={};return V.forEach(function(X){Y[X.id]={in:0,out:0,all:0}}),q&&q.forEach(function(X){var H=(0,F.getEdgeTerminal)(X,"source"),J=(0,F.getEdgeTerminal)(X,"target");H&&(Y[H].out+=1,Y[H].all+=1),J&&(Y[J].in+=1,Y[J].all+=1)}),Y};F.getDegreeMap=N;var E=function(V){for(var q=[],Y=V.length,X=0;X<Y;X+=1){q[X]=[];for(var H=0;H<Y;H+=1)X===H?q[X][H]=0:V[X][H]===0||!V[X][H]?q[X][H]=1/0:q[X][H]=V[X][H]}for(var J=0;J<Y;J+=1)for(var X=0;X<Y;X+=1)for(var H=0;H<Y;H+=1)q[X][H]>q[X][J]+q[J][H]&&(q[X][H]=q[X][J]+q[J][H]);return q};F.floydWarshall=E;var b=function(V,q){var Y=V.nodes,X=V.edges,H=[],J={};if(!Y)throw new Error("invalid nodes data!");return Y&&Y.forEach(function(nt,tt){J[nt.id]=tt;var at=[];H.push(at)}),X==null||X.forEach(function(nt){var tt=(0,F.getEdgeTerminal)(nt,"source"),at=(0,F.getEdgeTerminal)(nt,"target"),ct=J[tt],ht=J[at];ct===void 0||ht===void 0||(H[ct][ht]=1,q||(H[ht][ct]=1))}),H};F.getAdjMatrix=b;var p=function(V,q){var Y=[];return V.forEach(function(X){var H=[];X.forEach(function(J){H.push(J*q)}),Y.push(H)}),Y};F.scaleMatrix=p;var m=function(V,q){if(V&&V.children){for(var Y=V.children.length-1;Y>=0;Y--)if(!m(V.children[Y],q))return}return!!q(V)},g=function(V,q){typeof q=="function"&&m(V,q)};F.traverseTreeUp=g;var M=function(V){var q=1/0,Y=1/0,X=-1/0,H=-1/0;return V.forEach(function(J){var nt=J.size;(0,P.isArray)(nt)?nt.length===1&&(nt=[nt[0],nt[0]]):(0,W.isNumber)(nt)?nt=[nt,nt]:(nt===void 0||isNaN(nt))&&(nt=[30,30]);var tt=[nt[0]/2,nt[1]/2],at=J.x-tt[0],ct=J.x+tt[0],ht=J.y-tt[1],Lt=J.y+tt[1];q>at&&(q=at),Y>ht&&(Y=ht),X<ct&&(X=ct),H<Lt&&(H=Lt)}),{minX:q,minY:Y,maxX:X,maxY:H}};F.getLayoutBBox=M;var _=function(V){var q={x:0,y:0};V.forEach(function(X){q.x+=X.x||0,q.y+=X.y||0});var Y=V.length||1;return{x:q.x/Y,y:q.y/Y}};F.getAvgNodePosition=_;var S=function(V,q,Y){var X,H;return V==="source"?((X=Y==null?void 0:Y.find(function(J){return J.target===q.id}))===null||X===void 0?void 0:X.source)||{}:((H=Y==null?void 0:Y.find(function(J){return J.source===q.id}))===null||H===void 0?void 0:H.target)||{}},O=function(V,q,Y){var X=[];switch(V){case"source":X=Y==null?void 0:Y.filter(function(J){return J.source===q.id}).map(function(J){return J.target});break;case"target":X=Y==null?void 0:Y.filter(function(J){return J.target===q.id}).map(function(J){return J.source});break;case"both":X=Y==null?void 0:Y.filter(function(J){return J.source===q.id}).map(function(J){return J.target}).concat(Y==null?void 0:Y.filter(function(J){return J.target===q.id}).map(function(J){return J.source}));break;default:break}var H=new Set(X);return Array.from(H)},y=function(V,q,Y,X,H){var J=Y[q]||"",nt=(X==null?void 0:X.filter(function(tt){return tt[q]===J}))||[];return V==="leaf"&&(nt=nt.filter(function(tt){var at,ct;return((at=H[tt.id])===null||at===void 0?void 0:at.in)===0||((ct=H[tt.id])===null||ct===void 0?void 0:ct.out)===0})),nt},d=function(V,q,Y,X,H,J){var nt=H[q.id],tt=nt.in,at=nt.out,ct=q,ht=[];tt===0?(ct=S("source",q,Y),ht=O("both",ct,Y).map(function(St){return J[St]})):at===0&&(ct=S("target",q,Y),ht=O("both",ct,Y).map(function(St){return J[St]})),ht=ht.filter(function(St){return H[St.id]&&(H[St.id].in===0||H[St.id].out===0)});var Lt=y(V,X,q,ht,H);return{coreNode:ct,relativeLeafNodes:ht,sameTypeLeafNodes:Lt}};F.getCoreNodeAndRelativeLeafNodes=d},30627:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.toNumber=F.isNaN=F.isNumber=void 0;var B=function(R){return typeof R=="number"};F.isNumber=B;var P=function(R){return Number.isNaN(Number(R))};F.isNaN=P;var W=function(R){var L=parseFloat(R);return(0,F.isNaN)(L)?R:L};F.toNumber=W},98130:function(Le,F){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(R){for(var L,k=1,N=arguments.length;k<N;k++){L=arguments[k];for(var E in L)Object.prototype.hasOwnProperty.call(L,E)&&(R[E]=L[E])}return R},B.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0}),F.clone=F.isObject=void 0;var P=function(R){return R!==null&&typeof R=="object"};F.isObject=P;var W=function(R){if(R===null)return R;if(R instanceof Date)return new Date(R.getTime());if(R instanceof Array){var L=[];return R.forEach(function(N){L.push(N)}),L.map(function(N){return(0,F.clone)(N)})}if(typeof R=="object"&&Object.keys(R).length){var k=B({},R);return Object.keys(k).forEach(function(N){k[N]=(0,F.clone)(k[N])}),k}return R};F.clone=W},8055:function(Le,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.camelize=F.isString=void 0;var B=function(R){return typeof R=="string"};F.isString=B;var P=function(R){var L=Object.create(null);return function(k){var N=L[k];return N||(L[k]=R(k))}},W=/-(\w)/g;F.camelize=P(function(R){return R.replace(W,function(L,k){return k?k.toUpperCase():""})})},31278:function(Le,F,B){"use strict";var P;P={value:!0};var W=B(58204);function R(g,M,_){var S=[0,0,0,0,0,0,0,0,0];return W.mat3.fromTranslation(S,_),W.mat3.multiply(g,S,M)}P=R;function L(g,M,_){var S=[0,0,0,0,0,0,0,0,0];return W.mat3.fromRotation(S,_),W.mat3.multiply(g,S,M)}P=L;function k(g,M,_){var S=[0,0,0,0,0,0,0,0,0];return W.mat3.fromScaling(S,_),W.mat3.multiply(g,S,M)}P=k;function N(g,M,_){return W.mat3.multiply(g,_,M)}function E(g,M){for(var _=g?[].concat(g):[1,0,0,0,1,0,0,0,1],S=0,O=M.length;S<O;S++){var y=M[S];switch(y[0]){case"t":R(_,_,[y[1],y[2]]);break;case"s":k(_,_,[y[1],y[2]]);break;case"r":L(_,_,y[1]);break;case"m":N(_,_,y[1]);break;default:break}}return _}F.vs=E;function b(g,M){return g[0]*M[1]-M[0]*g[1]}P=b;function p(g,M,_){var S=W.vec2.angle(g,M),O=b(g,M)>=0;return _?O?Math.PI*2-S:S:O?S:Math.PI*2-S}P=p;function m(g,M,_){return _?(g[0]=M[1],g[1]=-1*M[0]):(g[0]=-1*M[1],g[1]=M[0]),g}P=m},13810:function(Le,F,B){"use strict";B.r(F),B.d(F,{Cache:function(){return $n},assign:function(){return Ja},augment:function(){return Ka},clamp:function(){return Ke},clearAnimationFrame:function(){return ss},clone:function(){return Jo},contains:function(){return L},debounce:function(){return Wo},deepMix:function(){return Zi},difference:function(){return b},each:function(){return V},endsWith:function(){return Ea},every:function(){return ir},extend:function(){return vo},filter:function(){return N},find:function(){return ht},findIndex:function(){return St},firstValue:function(){return Ut},fixedBase:function(){return Cr},flatten:function(){return Z},flattenDeep:function(){return Et},forIn:function(){return te},get:function(){return $i},getEllipsisText:function(){return Ns},getRange:function(){return le},getType:function(){return qo},getWrapBehavior:function(){return Ra},group:function(){return Zn},groupBy:function(){return In},groupToMap:function(){return kn},has:function(){return ge},hasKey:function(){return ie},hasValue:function(){return tr},head:function(){return Sn},identity:function(){return Fi},includes:function(){return L},indexOf:function(){return Ei},isArguments:function(){return zi},isArray:function(){return O},isArrayLike:function(){return W},isBoolean:function(){return ro},isDate:function(){return Da},isDecimal:function(){return jr},isElement:function(){return Lo},isEmpty:function(){return Vo},isEqual:function(){return jo},isEqualWith:function(){return ao},isError:function(){return To},isEven:function(){return pt},isFinite:function(){return Io},isFunction:function(){return M},isInteger:function(){return I},isMatch:function(){return H},isNegative:function(){return Q},isNil:function(){return S},isNull:function(){return Ui},isNumber:function(){return Vr},isNumberEqual:function(){return kt},isObject:function(){return y},isObjectLike:function(){return nt},isOdd:function(){return Kt},isPlainObject:function(){return at},isPositive:function(){return _e},isPrototype:function(){return ai},isRegExp:function(){return mn},isString:function(){return Ge},isType:function(){return g},isUndefined:function(){return wo},keys:function(){return Y},last:function(){return Bn},lowerCase:function(){return qr},lowerFirst:function(){return Mn},map:function(){return io},mapValues:function(){return po},max:function(){return Bt},maxBy:function(){return Qe},measureTextWidth:function(){return Ho},memoize:function(){return Xo},min:function(){return Pt},minBy:function(){return Ir},mix:function(){return Ja},mod:function(){return Hr},noop:function(){return Bi},number2color:function(){return aa},omit:function(){return ta},parseRadius:function(){return Re},pick:function(){return gi},pull:function(){return we},pullAt:function(){return ee},reduce:function(){return At},remove:function(){return fe},requestAnimationFrame:function(){return Uo},set:function(){return la},size:function(){return Do},some:function(){return Jr},sortBy:function(){return _r},startsWith:function(){return Nn},substitute:function(){return Sa},throttle:function(){return Qi},toArray:function(){return yo},toDegree:function(){return ur},toInteger:function(){return Sr},toRadian:function(){return Ct},toString:function(){return Gr},union:function(){return rn},uniq:function(){return Ft},uniqueId:function(){return Mo},upperCase:function(){return ca},upperFirst:function(){return qa},values:function(){return Je},valuesOfKey:function(){return pn},wrapBehavior:function(){return zn}});var P=function(xt){return xt!==null&&typeof xt!="function"&&isFinite(xt.length)},W=P,R=function(xt,pe){return W(xt)?xt.indexOf(pe)>-1:!1},L=R,k=function(xt,pe){if(!W(xt))return xt;for(var De=[],$e=0;$e<xt.length;$e++){var br=xt[$e];pe(br,$e)&&De.push(br)}return De},N=k,E=function(xt,pe){return pe===void 0&&(pe=[]),N(xt,function(De){return!L(pe,De)})},b=E,p={}.toString,m=function(xt,pe){return p.call(xt)==="[object "+pe+"]"},g=m,M=function(xt){return g(xt,"Function")},_=function(xt){return xt==null},S=_,O=function(xt){return Array.isArray?Array.isArray(xt):g(xt,"Array")},y=function(xt){var pe=typeof xt;return xt!==null&&pe==="object"||pe==="function"};function d(xt,pe){if(xt){var De;if(O(xt))for(var $e=0,br=xt.length;$e<br&&(De=pe(xt[$e],$e),De!==!1);$e++);else if(y(xt)){for(var zr in xt)if(xt.hasOwnProperty(zr)&&(De=pe(xt[zr],zr),De===!1))break}}}var V=d,q=Object.keys?function(xt){return Object.keys(xt)}:function(xt){var pe=[];return V(xt,function(De,$e){M(xt)&&$e==="prototype"||pe.push($e)}),pe},Y=q;function X(xt,pe){var De=Y(pe),$e=De.length;if(S(xt))return!$e;for(var br=0;br<$e;br+=1){var zr=De[br];if(pe[zr]!==xt[zr]||!(zr in xt))return!1}return!0}var H=X,J=function(xt){return typeof xt=="object"&&xt!==null},nt=J,tt=function(xt){if(!nt(xt)||!g(xt,"Object"))return!1;if(Object.getPrototypeOf(xt)===null)return!0;for(var pe=xt;Object.getPrototypeOf(pe)!==null;)pe=Object.getPrototypeOf(pe);return Object.getPrototypeOf(xt)===pe},at=tt;function ct(xt,pe){if(!O(xt))return null;var De;if(M(pe)&&(De=pe),at(pe)&&(De=function(br){return H(br,pe)}),De){for(var $e=0;$e<xt.length;$e+=1)if(De(xt[$e]))return xt[$e]}return null}var ht=ct;function Lt(xt,pe,De){De===void 0&&(De=0);for(var $e=De;$e<xt.length;$e++)if(pe(xt[$e],$e))return $e;return-1}var St=Lt,Zt=function(xt,pe){for(var De=null,$e=0;$e<xt.length;$e++){var br=xt[$e],zr=br[pe];if(!S(zr)){O(zr)?De=zr[0]:De=zr;break}}return De},Ut=Zt,Ot=function(xt){if(!O(xt))return[];for(var pe=[],De=0;De<xt.length;De++)pe=pe.concat(xt[De]);return pe},Z=Ot,st=function(xt,pe){if(pe===void 0&&(pe=[]),!O(xt))pe.push(xt);else for(var De=0;De<xt.length;De+=1)st(xt[De],pe);return pe},Et=st,Bt=function(xt){if(O(xt))return xt.reduce(function(pe,De){return Math.max(pe,De)},xt[0])},Pt=function(xt){if(O(xt))return xt.reduce(function(pe,De){return Math.min(pe,De)},xt[0])},Ht=function(xt){var pe=xt.filter(function(un){return!isNaN(un)});if(!pe.length)return{min:0,max:0};if(O(xt[0])){for(var De=[],$e=0;$e<xt.length;$e++)De=De.concat(xt[$e]);pe=De}var br=Bt(pe),zr=Pt(pe);return{min:zr,max:br}},le=Ht,ye=Array.prototype,Gt=ye.splice,zt=ye.indexOf,ue=function(xt){for(var pe=[],De=1;De<arguments.length;De++)pe[De-1]=arguments[De];for(var $e=0;$e<pe.length;$e++)for(var br=pe[$e],zr=-1;(zr=zt.call(xt,br))>-1;)Gt.call(xt,zr,1);return xt},we=ue,de=Array.prototype.splice,Mt=function(pe,De){if(!W(pe))return[];for(var $e=pe?De.length:0,br=$e-1;$e--;){var zr=void 0,un=De[$e];($e===br||un!==zr)&&(zr=un,de.call(pe,un,1))}return pe},ee=Mt,ce=function(xt,pe,De){if(!O(xt)&&!at(xt))return xt;var $e=De;return V(xt,function(br,zr){$e=pe($e,br,zr)}),$e},At=ce,Wt=function(xt,pe){var De=[];if(!W(xt))return De;for(var $e=-1,br=[],zr=xt.length;++$e<zr;){var un=xt[$e];pe(un,$e,xt)&&(De.push(un),br.push($e))}return ee(xt,br),De},fe=Wt,Ge=function(xt){return g(xt,"String")};function Be(xt,pe){var De;if(M(pe))De=function(br,zr){return pe(br)-pe(zr)};else{var $e=[];Ge(pe)?$e.push(pe):O(pe)&&($e=pe),De=function(br,zr){for(var un=0;un<$e.length;un+=1){var ha=$e[un];if(br[ha]>zr[ha])return 1;if(br[ha]<zr[ha])return-1}return 0}}return xt.sort(De),xt}var _r=Be;function Ft(xt,pe){pe===void 0&&(pe=new Map);var De=[];if(Array.isArray(xt))for(var $e=0,br=xt.length;$e<br;$e++){var zr=xt[$e];pe.has(zr)||(De.push(zr),pe.set(zr,!0))}return De}var hr=function(){for(var xt=[],pe=0;pe<arguments.length;pe++)xt[pe]=arguments[pe];return Ft([].concat.apply([],xt))},rn=hr,pn=function(xt,pe){for(var De=[],$e={},br=0;br<xt.length;br++){var zr=xt[br],un=zr[pe];if(!S(un)){O(un)||(un=[un]);for(var ha=0;ha<un.length;ha++){var Xa=un[ha];$e[Xa]||(De.push(Xa),$e[Xa]=!0)}}}return De};function Sn(xt){if(W(xt))return xt[0]}function Bn(xt){if(W(xt)){var pe=xt;return pe[pe.length-1]}}function Kn(xt,pe){return O(xt)||Ge(xt)?xt[0]===pe:!1}var Nn=Kn;function ra(xt,pe){return O(xt)||Ge(xt)?xt[xt.length-1]===pe:!1}var Ea=ra,na=function(xt,pe){for(var De=0;De<xt.length;De++)if(!pe(xt[De],De))return!1;return!0},ir=na,Tr=function(xt,pe){for(var De=0;De<xt.length;De++)if(pe(xt[De],De))return!0;return!1},Jr=Tr,vn=Object.prototype.hasOwnProperty;function Tn(xt,pe){if(!pe||!O(xt))return{};for(var De={},$e=M(pe)?pe:function(ha){return ha[pe]},br,zr=0;zr<xt.length;zr++){var un=xt[zr];br=$e(un),vn.call(De,br)?De[br].push(un):De[br]=[un]}return De}var In=Tn;function kn(xt,pe){if(!pe)return{0:xt};if(!M(pe)){var De=O(pe)?pe:pe.replace(/\s+/g,"").split("*");pe=function($e){for(var br="_",zr=0,un=De.length;zr<un;zr++)br+=$e[De[zr]]&&$e[De[zr]].toString();return br}}return In(xt,pe)}var Zn=function(xt,pe){if(!pe)return[xt];var De=kn(xt,pe),$e=[];for(var br in De)$e.push(De[br]);return $e};function Yn(xt,pe){return xt["_wrap_"+pe]}var Ra=Yn;function gn(xt,pe){if(xt["_wrap_"+pe])return xt["_wrap_"+pe];var De=function($e){xt[pe]($e)};return xt["_wrap_"+pe]=De,De}var zn=gn,Un={};function _n(xt){var pe=Un[xt];if(!pe){for(var De=xt.toString(16),$e=De.length;$e<6;$e++)De="0"+De;pe="#"+De,Un[xt]=pe}return pe}var aa=_n;function $(xt){var pe=0,De=0,$e=0,br=0;return O(xt)?xt.length===1?pe=De=$e=br=xt[0]:xt.length===2?(pe=$e=xt[0],De=br=xt[1]):xt.length===3?(pe=xt[0],De=br=xt[1],$e=xt[2]):(pe=xt[0],De=xt[1],$e=xt[2],br=xt[3]):pe=De=$e=br=xt,{r1:pe,r2:De,r3:$e,r4:br}}var Re=$,be=function(xt,pe,De){return xt<pe?pe:xt>De?De:xt},Ke=be,Ze=function(xt,pe){var De=pe.toString(),$e=De.indexOf(".");if($e===-1)return Math.round(xt);var br=De.substr($e+1).length;return br>20&&(br=20),parseFloat(xt.toFixed(br))},Cr=Ze,Mr=function(xt){return g(xt,"Number")},Vr=Mr,tn=function(xt){return Vr(xt)&&xt%1!==0},jr=tn,dt=function(xt){return Vr(xt)&&xt%2===0},pt=dt,U=Number.isInteger?Number.isInteger:function(xt){return Vr(xt)&&xt%1===0},I=U,T=function(xt){return Vr(xt)&&xt<0},Q=T,bt=1e-5;function kt(xt,pe,De){return De===void 0&&(De=bt),Math.abs(xt-pe)<De}var It=function(xt){return Vr(xt)&&xt%2!==0},Kt=It,Pe=function(xt){return Vr(xt)&&xt>0},_e=Pe,Qe=function(xt,pe){if(O(xt)){for(var De,$e=-1/0,br=0;br<xt.length;br++){var zr=xt[br],un=M(pe)?pe(zr):zr[pe];un>$e&&(De=zr,$e=un)}return De}},Ir=function(xt,pe){if(O(xt)){for(var De,$e=1/0,br=0;br<xt.length;br++){var zr=xt[br],un=M(pe)?pe(zr):zr[pe];un<$e&&(De=zr,$e=un)}return De}},sr=function(xt,pe){return(xt%pe+pe)%pe},Hr=sr,xn=180/Math.PI,ze=function(xt){return xn*xt},ur=ze,Sr=parseInt,Nr=Math.PI/180,$t=function(xt){return Nr*xt},Ct=$t,te=V,ge=function(xt,pe){return xt.hasOwnProperty(pe)},ie=ge,Te=Object.values?function(xt){return Object.values(xt)}:function(xt){var pe=[];return V(xt,function(De,$e){M(xt)&&$e==="prototype"||pe.push(De)}),pe},Je=Te,tr=function(xt,pe){return L(Je(xt),pe)},Gr=function(xt){return S(xt)?"":xt.toString()},cn=function(xt){return Gr(xt).toLowerCase()},qr=cn,Fn=function(xt){var pe=Gr(xt);return pe.charAt(0).toLowerCase()+pe.substring(1)},Mn=Fn;function ia(xt,pe){return!xt||!pe?xt:xt.replace(/\\?\{([^{}]+)\}/g,function(De,$e){return De.charAt(0)==="\\"?De.slice(1):pe[$e]===void 0?"":pe[$e]})}var Sa=ia,Ca=function(xt){return Gr(xt).toUpperCase()},ca=Ca,ho=function(xt){var pe=Gr(xt);return pe.charAt(0).toUpperCase()+pe.substring(1)},qa=ho,Ha={}.toString,Ni=function(xt){return Ha.call(xt).replace(/^\[object /,"").replace(/]$/,"")},qo=Ni,Pi=function(xt){return g(xt,"Arguments")},zi=Pi,ua=function(xt){return g(xt,"Boolean")},ro=ua,zo=function(xt){return g(xt,"Date")},Da=zo,Co=function(xt){return g(xt,"Error")},To=Co;function Io(xt){return Vr(xt)&&isFinite(xt)}var bi=function(xt){return xt===null},Ui=bi,Eo=Object.prototype,os=function(xt){var pe=xt&&xt.constructor,De=typeof pe=="function"&&pe.prototype||Eo;return xt===De},ai=os,xi=function(xt){return g(xt,"RegExp")},mn=xi,Oo=function(xt){return xt===void 0},wo=Oo,no=function(xt){return xt instanceof Element||xt instanceof HTMLDocument},Lo=no;function Uo(xt){var pe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(De){return setTimeout(De,16)};return pe(xt)}function ss(xt){var pe=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;pe(xt)}function wn(xt,pe){for(var De in pe)pe.hasOwnProperty(De)&&De!=="constructor"&&pe[De]!==void 0&&(xt[De]=pe[De])}function Ja(xt,pe,De,$e){return pe&&wn(xt,pe),De&&wn(xt,De),$e&&wn(xt,$e),xt}var Ki=function(){for(var xt=[],pe=0;pe<arguments.length;pe++)xt[pe]=arguments[pe];for(var De=xt[0],$e=1;$e<xt.length;$e++){var br=xt[$e];M(br)&&(br=br.prototype),Ja(De.prototype,br)}},Ka=Ki,_o=function(xt){if(typeof xt!="object"||xt===null)return xt;var pe;if(O(xt)){pe=[];for(var De=0,$e=xt.length;De<$e;De++)typeof xt[De]=="object"&&xt[De]!=null?pe[De]=_o(xt[De]):pe[De]=xt[De]}else{pe={};for(var br in xt)typeof xt[br]=="object"&&xt[br]!=null?pe[br]=_o(xt[br]):pe[br]=xt[br]}return pe},Jo=_o;function ki(xt,pe,De){var $e;return function(){var br=this,zr=arguments,un=function(){$e=null,De||xt.apply(br,zr)},ha=De&&!$e;clearTimeout($e),$e=setTimeout(un,pe),ha&&xt.apply(br,zr)}}var Wo=ki,Xo=function(xt,pe){if(!M(xt))throw new TypeError("Expected a function");var De=function(){for(var $e=[],br=0;br<arguments.length;br++)$e[br]=arguments[br];var zr=pe?pe.apply(this,$e):$e[0],un=De.cache;if(un.has(zr))return un.get(zr);var ha=xt.apply(this,$e);return un.set(zr,ha),ha};return De.cache=new Map,De},So=5;function ga(xt,pe,De,$e){De=De||0,$e=$e||So;for(var br in pe)if(pe.hasOwnProperty(br)){var zr=pe[br];zr!==null&&at(zr)?(at(xt[br])||(xt[br]={}),De<$e?ga(xt[br],zr,De+1,$e):xt[br]=pe[br]):O(zr)?(xt[br]=[],xt[br]=xt[br].concat(zr)):zr!==void 0&&(xt[br]=zr)}}var us=function(xt){for(var pe=[],De=1;De<arguments.length;De++)pe[De-1]=arguments[De];for(var $e=0;$e<pe.length;$e+=1)ga(xt,pe[$e]);return xt},Zi=us,Ri=function(xt,pe,De,$e){M(pe)||(De=pe,pe=xt,xt=function(){});var br=Object.create?function(un,ha){return Object.create(un,{constructor:{value:ha}})}:function(un,ha){function Xa(){}Xa.prototype=un;var Ci=new Xa;return Ci.constructor=ha,Ci},zr=br(pe.prototype,xt);return xt.prototype=Ja(zr,xt.prototype),xt.superclass=br(pe.prototype,pe),Ja(zr,De),Ja(xt,$e),xt},vo=Ri,Yo=function(xt,pe){if(!W(xt))return-1;var De=Array.prototype.indexOf;if(De)return De.call(xt,pe);for(var $e=-1,br=0;br<xt.length;br++)if(xt[br]===pe){$e=br;break}return $e},Ei=Yo,Wi=Object.prototype.hasOwnProperty;function Za(xt){if(S(xt))return!0;if(W(xt))return!xt.length;var pe=qo(xt);if(pe==="Map"||pe==="Set")return!xt.size;if(ai(xt))return!Object.keys(xt).length;for(var De in xt)if(Wi.call(xt,De))return!1;return!0}var Vo=Za,Xi=function(xt,pe){if(xt===pe)return!0;if(!xt||!pe||Ge(xt)||Ge(pe))return!1;if(W(xt)||W(pe)){if(xt.length!==pe.length)return!1;for(var De=!0,$e=0;$e<xt.length&&(De=Xi(xt[$e],pe[$e]),!!De);$e++);return De}if(nt(xt)||nt(pe)){var br=Object.keys(xt),zr=Object.keys(pe);if(br.length!==zr.length)return!1;for(var De=!0,$e=0;$e<br.length&&(De=Xi(xt[br[$e]],pe[br[$e]]),!!De);$e++);return De}return!1},jo=Xi,ao=function(xt,pe,De){return M(De)?!!De(xt,pe):jo(xt,pe)},Yi=function(xt,pe){if(!W(xt))return xt;for(var De=[],$e=0;$e<xt.length;$e++){var br=xt[$e];De.push(pe(br,$e))}return De},io=Yi,go=function(xt){return xt},po=function(xt,pe){pe===void 0&&(pe=go);var De={};return y(xt)&&!S(xt)&&Object.keys(xt).forEach(function($e){De[$e]=pe(xt[$e],$e)}),De},$i=function(xt,pe,De){for(var $e=0,br=Ge(pe)?pe.split("."):pe;xt&&$e<br.length;)xt=xt[br[$e++]];return xt===void 0||$e<br.length?De:xt},la=function(xt,pe,De){var $e=xt,br=Ge(pe)?pe.split("."):pe;return br.forEach(function(zr,un){un<br.length-1?(y($e[zr])||($e[zr]=Vr(br[un+1])?[]:{}),$e=$e[zr]):$e[zr]=De}),xt},ti=Object.prototype.hasOwnProperty,gi=function(xt,pe){if(xt===null||!at(xt))return{};var De={};return V(pe,function($e){ti.call(xt,$e)&&(De[$e]=xt[$e])}),De},ta=function(xt,pe){return At(xt,function(De,$e,br){return pe.includes(br)||(De[br]=$e),De},{})},Qi=function(xt,pe,De){var $e,br,zr,un,ha=0;De||(De={});var Xa=function(){ha=De.leading===!1?0:Date.now(),$e=null,un=xt.apply(br,zr),$e||(br=zr=null)},Ci=function(){var Vi=Date.now();!ha&&De.leading===!1&&(ha=Vi);var ps=pe-(Vi-ha);return br=this,zr=arguments,ps<=0||ps>pe?($e&&(clearTimeout($e),$e=null),ha=Vi,un=xt.apply(br,zr),$e||(br=zr=null)):!$e&&De.trailing!==!1&&($e=setTimeout(Xa,ps)),un};return Ci.cancel=function(){clearTimeout($e),ha=0,$e=br=zr=null},Ci},yo=function(xt){return W(xt)?Array.prototype.slice.call(xt):[]},ii={},Mo=function(xt){return xt=xt||"g",ii[xt]?ii[xt]+=1:ii[xt]=1,xt+ii[xt]},Bi=function(){},Fi=function(xt){return xt};function Do(xt){return S(xt)?0:W(xt)?xt.length:Object.keys(xt).length}var fs=B(70655),No,Ho=Xo(function(xt,pe){pe===void 0&&(pe={});var De=pe.fontSize,$e=pe.fontFamily,br=pe.fontWeight,zr=pe.fontStyle,un=pe.fontVariant;return No||(No=document.createElement("canvas").getContext("2d")),No.font=[zr,un,br,De+"px",$e].join(" "),No.measureText(Ge(xt)?xt:"").width},function(xt,pe){return pe===void 0&&(pe={}),(0,fs.__spreadArrays)([xt],Je(pe)).join("")}),Ns=function(xt,pe,De,$e){$e===void 0&&($e="...");var br=16,zr=Ho($e,De),un=Ge(xt)?xt:Gr(xt),ha=pe,Xa=[],Ci,Vi;if(Ho(xt,De)<=pe)return xt;for(;Ci=un.substr(0,br),Vi=Ho(Ci,De),!(Vi+zr>ha&&Vi>ha);)if(Xa.push(Ci),ha-=Vi,un=un.substr(br),!un)return Xa.join("");for(;Ci=un.substr(0,1),Vi=Ho(Ci,De),!(Vi+zr>ha);)if(Xa.push(Ci),ha-=Vi,un=un.substr(1),!un)return Xa.join("");return""+Xa.join("")+$e},Ps=function(){function xt(){this.map={}}return xt.prototype.has=function(pe){return this.map[pe]!==void 0},xt.prototype.get=function(pe,De){var $e=this.map[pe];return $e===void 0?De:$e},xt.prototype.set=function(pe,De){this.map[pe]=De},xt.prototype.clear=function(){this.map={}},xt.prototype.delete=function(pe){delete this.map[pe]},xt.prototype.size=function(){return Object.keys(this.map).length},xt}(),$n=Ps},71497:function(Le,F,B){"use strict";B.r(F),B.d(F,{forceCenter:function(){return P},forceCollide:function(){return E},forceLink:function(){return M},forceManyBody:function(){return St},forceRadial:function(){return Zt},forceSimulation:function(){return Lt},forceX:function(){return Ut},forceY:function(){return Ot}});function P(Z,st){var Et,Bt=1;Z==null&&(Z=0),st==null&&(st=0);function Pt(){var Ht,le=Et.length,ye,Gt=0,zt=0;for(Ht=0;Ht<le;++Ht)ye=Et[Ht],Gt+=ye.x,zt+=ye.y;for(Gt=(Gt/le-Z)*Bt,zt=(zt/le-st)*Bt,Ht=0;Ht<le;++Ht)ye=Et[Ht],ye.x-=Gt,ye.y-=zt}return Pt.initialize=function(Ht){Et=Ht},Pt.x=function(Ht){return arguments.length?(Z=+Ht,Pt):Z},Pt.y=function(Ht){return arguments.length?(st=+Ht,Pt):st},Pt.strength=function(Ht){return arguments.length?(Bt=+Ht,Pt):Bt},Pt}var W=B(47148);function R(Z){return function(){return Z}}function L(Z){return(Z()-.5)*1e-6}function k(Z){return Z.x+Z.vx}function N(Z){return Z.y+Z.vy}function E(Z){var st,Et,Bt,Pt=1,Ht=1;typeof Z!="function"&&(Z=R(Z==null?1:+Z));function le(){for(var zt,ue=st.length,we,de,Mt,ee,ce,At,Wt=0;Wt<Ht;++Wt)for(we=(0,W.Z)(st,k,N).visitAfter(ye),zt=0;zt<ue;++zt)de=st[zt],ce=Et[de.index],At=ce*ce,Mt=de.x+de.vx,ee=de.y+de.vy,we.visit(fe);function fe(Ge,Be,_r,Ft,hr){var rn=Ge.data,pn=Ge.r,Sn=ce+pn;if(rn){if(rn.index>de.index){var Bn=Mt-rn.x-rn.vx,Kn=ee-rn.y-rn.vy,Nn=Bn*Bn+Kn*Kn;Nn<Sn*Sn&&(Bn===0&&(Bn=L(Bt),Nn+=Bn*Bn),Kn===0&&(Kn=L(Bt),Nn+=Kn*Kn),Nn=(Sn-(Nn=Math.sqrt(Nn)))/Nn*Pt,de.vx+=(Bn*=Nn)*(Sn=(pn*=pn)/(At+pn)),de.vy+=(Kn*=Nn)*Sn,rn.vx-=Bn*(Sn=1-Sn),rn.vy-=Kn*Sn)}return}return Be>Mt+Sn||Ft<Mt-Sn||_r>ee+Sn||hr<ee-Sn}}function ye(zt){if(zt.data)return zt.r=Et[zt.data.index];for(var ue=zt.r=0;ue<4;++ue)zt[ue]&&zt[ue].r>zt.r&&(zt.r=zt[ue].r)}function Gt(){if(st){var zt,ue=st.length,we;for(Et=new Array(ue),zt=0;zt<ue;++zt)we=st[zt],Et[we.index]=+Z(we,zt,st)}}return le.initialize=function(zt,ue){st=zt,Bt=ue,Gt()},le.iterations=function(zt){return arguments.length?(Ht=+zt,le):Ht},le.strength=function(zt){return arguments.length?(Pt=+zt,le):Pt},le.radius=function(zt){return arguments.length?(Z=typeof zt=="function"?zt:R(+zt),Gt(),le):Z},le}var b=B(18698),p=B.n(b);function m(Z){return Z.index}function g(Z,st){var Et=Z.get(st);if(!Et)throw new Error("node not found: "+st);return Et}function M(Z){var st=m,Et=we,Bt,Pt=R(30),Ht,le,ye,Gt,zt,ue=1;Z==null&&(Z=[]);function we(At){return 1/Math.min(ye[At.source.index],ye[At.target.index])}function de(At){for(var Wt=0,fe=Z.length;Wt<ue;++Wt)for(var Ge=0,Be,_r,Ft,hr,rn,pn,Sn;Ge<fe;++Ge)Be=Z[Ge],_r=Be.source,Ft=Be.target,hr=Ft.x+Ft.vx-_r.x-_r.vx||L(zt),rn=Ft.y+Ft.vy-_r.y-_r.vy||L(zt),pn=Math.sqrt(hr*hr+rn*rn),pn=(pn-Ht[Ge])/pn*At*Bt[Ge],hr*=pn,rn*=pn,Ft.vx-=hr*(Sn=Gt[Ge]),Ft.vy-=rn*Sn,_r.vx+=hr*(Sn=1-Sn),_r.vy+=rn*Sn}function Mt(){if(le){var At,Wt=le.length,fe=Z.length,Ge=new Map(le.map(function(_r,Ft){return[st(_r,Ft,le),_r]})),Be;for(At=0,ye=new Array(Wt);At<fe;++At)Be=Z[At],Be.index=At,p()(Be.source)!=="object"&&(Be.source=g(Ge,Be.source)),p()(Be.target)!=="object"&&(Be.target=g(Ge,Be.target)),ye[Be.source.index]=(ye[Be.source.index]||0)+1,ye[Be.target.index]=(ye[Be.target.index]||0)+1;for(At=0,Gt=new Array(fe);At<fe;++At)Be=Z[At],Gt[At]=ye[Be.source.index]/(ye[Be.source.index]+ye[Be.target.index]);Bt=new Array(fe),ee(),Ht=new Array(fe),ce()}}function ee(){if(le)for(var At=0,Wt=Z.length;At<Wt;++At)Bt[At]=+Et(Z[At],At,Z)}function ce(){if(le)for(var At=0,Wt=Z.length;At<Wt;++At)Ht[At]=+Pt(Z[At],At,Z)}return de.initialize=function(At,Wt){le=At,zt=Wt,Mt()},de.links=function(At){return arguments.length?(Z=At,Mt(),de):Z},de.id=function(At){return arguments.length?(st=At,de):st},de.iterations=function(At){return arguments.length?(ue=+At,de):ue},de.strength=function(At){return arguments.length?(Et=typeof At=="function"?At:R(+At),ee(),de):Et},de.distance=function(At){return arguments.length?(Pt=typeof At=="function"?At:R(+At),ce(),de):Pt},de}var _={value:function(){}};function S(){for(var Z=0,st=arguments.length,Et={},Bt;Z<st;++Z){if(!(Bt=arguments[Z]+"")||Bt in Et||/[\s.]/.test(Bt))throw new Error("illegal type: "+Bt);Et[Bt]=[]}return new O(Et)}function O(Z){this._=Z}function y(Z,st){return Z.trim().split(/^|\s+/).map(function(Et){var Bt="",Pt=Et.indexOf(".");if(Pt>=0&&(Bt=Et.slice(Pt+1),Et=Et.slice(0,Pt)),Et&&!st.hasOwnProperty(Et))throw new Error("unknown type: "+Et);return{type:Et,name:Bt}})}O.prototype=S.prototype={constructor:O,on:function(st,Et){var Bt=this._,Pt=y(st+"",Bt),Ht,le=-1,ye=Pt.length;if(arguments.length<2){for(;++le<ye;)if((Ht=(st=Pt[le]).type)&&(Ht=d(Bt[Ht],st.name)))return Ht;return}if(Et!=null&&typeof Et!="function")throw new Error("invalid callback: "+Et);for(;++le<ye;)if(Ht=(st=Pt[le]).type)Bt[Ht]=V(Bt[Ht],st.name,Et);else if(Et==null)for(Ht in Bt)Bt[Ht]=V(Bt[Ht],st.name,null);return this},copy:function(){var st={},Et=this._;for(var Bt in Et)st[Bt]=Et[Bt].slice();return new O(st)},call:function(st,Et){if((Ht=arguments.length-2)>0)for(var Bt=new Array(Ht),Pt=0,Ht,le;Pt<Ht;++Pt)Bt[Pt]=arguments[Pt+2];if(!this._.hasOwnProperty(st))throw new Error("unknown type: "+st);for(le=this._[st],Pt=0,Ht=le.length;Pt<Ht;++Pt)le[Pt].value.apply(Et,Bt)},apply:function(st,Et,Bt){if(!this._.hasOwnProperty(st))throw new Error("unknown type: "+st);for(var Pt=this._[st],Ht=0,le=Pt.length;Ht<le;++Ht)Pt[Ht].value.apply(Et,Bt)}};function d(Z,st){for(var Et=0,Bt=Z.length,Pt;Et<Bt;++Et)if((Pt=Z[Et]).name===st)return Pt.value}function V(Z,st,Et){for(var Bt=0,Pt=Z.length;Bt<Pt;++Bt)if(Z[Bt].name===st){Z[Bt]=_,Z=Z.slice(0,Bt).concat(Z.slice(Bt+1));break}return Et!=null&&Z.push({name:st,value:Et}),Z}var q=S,Y=B(35374),X=1664525,H=1013904223,J=4294967296;function nt(){var Z=1;return function(){return(Z=(X*Z+H)%J)/J}}function tt(Z){return Z.x}function at(Z){return Z.y}var ct=10,ht=Math.PI*(3-Math.sqrt(5));function Lt(Z){var st,Et=1,Bt=.001,Pt=1-Math.pow(Bt,1/300),Ht=0,le=.6,ye=new Map,Gt=(0,Y.HT)(we),zt=q("tick","end"),ue=nt();Z==null&&(Z=[]);function we(){de(),zt.call("tick",st),Et<Bt&&(Gt.stop(),zt.call("end",st))}function de(ce){var At,Wt=Z.length,fe;ce===void 0&&(ce=1);for(var Ge=0;Ge<ce;++Ge)for(Et+=(Ht-Et)*Pt,ye.forEach(function(Be){Be(Et)}),At=0;At<Wt;++At)fe=Z[At],fe.fx==null?fe.x+=fe.vx*=le:(fe.x=fe.fx,fe.vx=0),fe.fy==null?fe.y+=fe.vy*=le:(fe.y=fe.fy,fe.vy=0);return st}function Mt(){for(var ce=0,At=Z.length,Wt;ce<At;++ce){if(Wt=Z[ce],Wt.index=ce,Wt.fx!=null&&(Wt.x=Wt.fx),Wt.fy!=null&&(Wt.y=Wt.fy),isNaN(Wt.x)||isNaN(Wt.y)){var fe=ct*Math.sqrt(.5+ce),Ge=ce*ht;Wt.x=fe*Math.cos(Ge),Wt.y=fe*Math.sin(Ge)}(isNaN(Wt.vx)||isNaN(Wt.vy))&&(Wt.vx=Wt.vy=0)}}function ee(ce){return ce.initialize&&ce.initialize(Z,ue),ce}return Mt(),st={tick:de,restart:function(){return Gt.restart(we),st},stop:function(){return Gt.stop(),st},nodes:function(At){return arguments.length?(Z=At,Mt(),ye.forEach(ee),st):Z},alpha:function(At){return arguments.length?(Et=+At,st):Et},alphaMin:function(At){return arguments.length?(Bt=+At,st):Bt},alphaDecay:function(At){return arguments.length?(Pt=+At,st):+Pt},alphaTarget:function(At){return arguments.length?(Ht=+At,st):Ht},velocityDecay:function(At){return arguments.length?(le=1-At,st):1-le},randomSource:function(At){return arguments.length?(ue=At,ye.forEach(ee),st):ue},force:function(At,Wt){return arguments.length>1?(Wt==null?ye.delete(At):ye.set(At,ee(Wt)),st):ye.get(At)},find:function(At,Wt,fe){var Ge=0,Be=Z.length,_r,Ft,hr,rn,pn;for(fe==null?fe=1/0:fe*=fe,Ge=0;Ge<Be;++Ge)rn=Z[Ge],_r=At-rn.x,Ft=Wt-rn.y,hr=_r*_r+Ft*Ft,hr<fe&&(pn=rn,fe=hr);return pn},on:function(At,Wt){return arguments.length>1?(zt.on(At,Wt),st):zt.on(At)}}}function St(){var Z,st,Et,Bt,Pt=R(-30),Ht,le=1,ye=1/0,Gt=.81;function zt(Mt){var ee,ce=Z.length,At=(0,W.Z)(Z,tt,at).visitAfter(we);for(Bt=Mt,ee=0;ee<ce;++ee)st=Z[ee],At.visit(de)}function ue(){if(Z){var Mt,ee=Z.length,ce;for(Ht=new Array(ee),Mt=0;Mt<ee;++Mt)ce=Z[Mt],Ht[ce.index]=+Pt(ce,Mt,Z)}}function we(Mt){var ee=0,ce,At,Wt=0,fe,Ge,Be;if(Mt.length){for(fe=Ge=Be=0;Be<4;++Be)(ce=Mt[Be])&&(At=Math.abs(ce.value))&&(ee+=ce.value,Wt+=At,fe+=At*ce.x,Ge+=At*ce.y);Mt.x=fe/Wt,Mt.y=Ge/Wt}else{ce=Mt,ce.x=ce.data.x,ce.y=ce.data.y;do ee+=Ht[ce.data.index];while(ce=ce.next)}Mt.value=ee}function de(Mt,ee,ce,At){if(!Mt.value)return!0;var Wt=Mt.x-st.x,fe=Mt.y-st.y,Ge=At-ee,Be=Wt*Wt+fe*fe;if(Ge*Ge/Gt<Be)return Be<ye&&(Wt===0&&(Wt=L(Et),Be+=Wt*Wt),fe===0&&(fe=L(Et),Be+=fe*fe),Be<le&&(Be=Math.sqrt(le*Be)),st.vx+=Wt*Mt.value*Bt/Be,st.vy+=fe*Mt.value*Bt/Be),!0;if(Mt.length||Be>=ye)return;(Mt.data!==st||Mt.next)&&(Wt===0&&(Wt=L(Et),Be+=Wt*Wt),fe===0&&(fe=L(Et),Be+=fe*fe),Be<le&&(Be=Math.sqrt(le*Be)));do Mt.data!==st&&(Ge=Ht[Mt.data.index]*Bt/Be,st.vx+=Wt*Ge,st.vy+=fe*Ge);while(Mt=Mt.next)}return zt.initialize=function(Mt,ee){Z=Mt,Et=ee,ue()},zt.strength=function(Mt){return arguments.length?(Pt=typeof Mt=="function"?Mt:R(+Mt),ue(),zt):Pt},zt.distanceMin=function(Mt){return arguments.length?(le=Mt*Mt,zt):Math.sqrt(le)},zt.distanceMax=function(Mt){return arguments.length?(ye=Mt*Mt,zt):Math.sqrt(ye)},zt.theta=function(Mt){return arguments.length?(Gt=Mt*Mt,zt):Math.sqrt(Gt)},zt}function Zt(Z,st,Et){var Bt,Pt=R(.1),Ht,le;typeof Z!="function"&&(Z=R(+Z)),st==null&&(st=0),Et==null&&(Et=0);function ye(zt){for(var ue=0,we=Bt.length;ue<we;++ue){var de=Bt[ue],Mt=de.x-st||1e-6,ee=de.y-Et||1e-6,ce=Math.sqrt(Mt*Mt+ee*ee),At=(le[ue]-ce)*Ht[ue]*zt/ce;de.vx+=Mt*At,de.vy+=ee*At}}function Gt(){if(Bt){var zt,ue=Bt.length;for(Ht=new Array(ue),le=new Array(ue),zt=0;zt<ue;++zt)le[zt]=+Z(Bt[zt],zt,Bt),Ht[zt]=isNaN(le[zt])?0:+Pt(Bt[zt],zt,Bt)}}return ye.initialize=function(zt){Bt=zt,Gt()},ye.strength=function(zt){return arguments.length?(Pt=typeof zt=="function"?zt:R(+zt),Gt(),ye):Pt},ye.radius=function(zt){return arguments.length?(Z=typeof zt=="function"?zt:R(+zt),Gt(),ye):Z},ye.x=function(zt){return arguments.length?(st=+zt,ye):st},ye.y=function(zt){return arguments.length?(Et=+zt,ye):Et},ye}function Ut(Z){var st=R(.1),Et,Bt,Pt;typeof Z!="function"&&(Z=R(Z==null?0:+Z));function Ht(ye){for(var Gt=0,zt=Et.length,ue;Gt<zt;++Gt)ue=Et[Gt],ue.vx+=(Pt[Gt]-ue.x)*Bt[Gt]*ye}function le(){if(Et){var ye,Gt=Et.length;for(Bt=new Array(Gt),Pt=new Array(Gt),ye=0;ye<Gt;++ye)Bt[ye]=isNaN(Pt[ye]=+Z(Et[ye],ye,Et))?0:+st(Et[ye],ye,Et)}}return Ht.initialize=function(ye){Et=ye,le()},Ht.strength=function(ye){return arguments.length?(st=typeof ye=="function"?ye:R(+ye),le(),Ht):st},Ht.x=function(ye){return arguments.length?(Z=typeof ye=="function"?ye:R(+ye),le(),Ht):Z},Ht}function Ot(Z){var st=R(.1),Et,Bt,Pt;typeof Z!="function"&&(Z=R(Z==null?0:+Z));function Ht(ye){for(var Gt=0,zt=Et.length,ue;Gt<zt;++Gt)ue=Et[Gt],ue.vy+=(Pt[Gt]-ue.y)*Bt[Gt]*ye}function le(){if(Et){var ye,Gt=Et.length;for(Bt=new Array(Gt),Pt=new Array(Gt),ye=0;ye<Gt;++ye)Bt[ye]=isNaN(Pt[ye]=+Z(Et[ye],ye,Et))?0:+st(Et[ye],ye,Et)}}return Ht.initialize=function(ye){Et=ye,le()},Ht.strength=function(ye){return arguments.length?(st=typeof ye=="function"?ye:R(+ye),le(),Ht):st},Ht.y=function(ye){return arguments.length?(Z=typeof ye=="function"?ye:R(+ye),le(),Ht):Z},Ht}},5237:function(Le,F,B){"use strict";B.r(F),B.d(F,{AbstractMatrix:function(){return Be},CHO:function(){return tn},CholeskyDecomposition:function(){return tn},EVD:function(){return be},EigenvalueDecomposition:function(){return be},LU:function(){return Tn},LuDecomposition:function(){return Tn},Matrix:function(){return hr},MatrixColumnSelectionView:function(){return Sn},MatrixColumnView:function(){return pn},MatrixFlipColumnView:function(){return Bn},MatrixFlipRowView:function(){return Kn},MatrixRowSelectionView:function(){return ra},MatrixRowView:function(){return Nn},MatrixSelectionView:function(){return Ea},MatrixSubView:function(){return na},MatrixTransposeView:function(){return ir},NIPALS:function(){return jr},Nipals:function(){return jr},QR:function(){return kn},QrDecomposition:function(){return kn},SVD:function(){return Zn},SingularValueDecomposition:function(){return Zn},WrapperMatrix1D:function(){return Tr},WrapperMatrix2D:function(){return Jr},correlation:function(){return Re},covariance:function(){return $},default:function(){return hr},determinant:function(){return gn},inverse:function(){return Yn},linearDependencies:function(){return _n},pseudoInverse:function(){return aa},solve:function(){return Ra},wrap:function(){return vn}});var P=B(94993),W=B.n(P),R=B(61655),L=B.n(R),k=B(26389),N=B.n(k),E=B(18698),b=B.n(E),p=B(56690),m=B.n(p),g=B(89728),M=B.n(g);const _=Object.prototype.toString;function S(dt){const pt=_.call(dt);return pt.endsWith("Array]")&&!pt.includes("Big")}function O(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!S(dt))throw new TypeError("input must be an array");if(dt.length===0)throw new TypeError("input must not be empty");var U=pt.fromIndex,I=U===void 0?0:U,T=pt.toIndex,Q=T===void 0?dt.length:T;if(I<0||I>=dt.length||!Number.isInteger(I))throw new Error("fromIndex must be a positive integer smaller than length");if(Q<=I||Q>dt.length||!Number.isInteger(Q))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var bt=dt[I],kt=I+1;kt<Q;kt++)dt[kt]>bt&&(bt=dt[kt]);return bt}function y(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!S(dt))throw new TypeError("input must be an array");if(dt.length===0)throw new TypeError("input must not be empty");var U=pt.fromIndex,I=U===void 0?0:U,T=pt.toIndex,Q=T===void 0?dt.length:T;if(I<0||I>=dt.length||!Number.isInteger(I))throw new Error("fromIndex must be a positive integer smaller than length");if(Q<=I||Q>dt.length||!Number.isInteger(Q))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var bt=dt[I],kt=I+1;kt<Q;kt++)dt[kt]<bt&&(bt=dt[kt]);return bt}function d(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(S(dt)){if(dt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var U;if(pt.output!==void 0){if(!S(pt.output))throw new TypeError("output option must be an array if specified");U=pt.output}else U=new Array(dt.length);var I=y(dt),T=O(dt);if(I===T)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Q=pt.min,bt=Q===void 0?pt.autoMinMax?I:0:Q,kt=pt.max,It=kt===void 0?pt.autoMinMax?T:1:kt;if(bt>=It)throw new RangeError("min option must be smaller than max option");for(var Kt=(It-bt)/(T-I),Pe=0;Pe<dt.length;Pe++)U[Pe]=(dt[Pe]-I)*Kt+bt;return U}var V=" ".repeat(2),q=" ".repeat(4);function Y(){return X(this)}function X(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=pt.maxRows,I=U===void 0?15:U,T=pt.maxColumns,Q=T===void 0?10:T,bt=pt.maxNumSize,kt=bt===void 0?8:bt,It=pt.padMinus,Kt=It===void 0?"auto":It;return"".concat(dt.constructor.name,` {
`).concat(V,`[
`).concat(q).concat(H(dt,I,Q,kt,Kt),`
`).concat(V,`]
`).concat(V,"rows: ").concat(dt.rows,`
`).concat(V,"columns: ").concat(dt.columns,`
}`)}function H(dt,pt,U,I,T){var Q=dt.rows,bt=dt.columns,kt=Math.min(Q,pt),It=Math.min(bt,U),Kt=[];if(T==="auto"){T=!1;t:for(var Pe=0;Pe<kt;Pe++)for(var _e=0;_e<It;_e++)if(dt.get(Pe,_e)<0){T=!0;break t}}for(var Qe=0;Qe<kt;Qe++){for(var Ir=[],sr=0;sr<It;sr++)Ir.push(J(dt.get(Qe,sr),I,T));Kt.push("".concat(Ir.join(" ")))}return It!==bt&&(Kt[Kt.length-1]+=" ... ".concat(bt-U," more columns")),kt!==Q&&Kt.push("... ".concat(Q-pt," more rows")),Kt.join(`
`.concat(q))}function J(dt,pt,U){return(dt>=0&&U?" ".concat(nt(dt,pt-1)):nt(dt,pt)).padEnd(pt)}function nt(dt,pt){var U=dt.toString();if(U.length<=pt)return U;var I=dt.toFixed(pt);if(I.length>pt&&(I=dt.toFixed(Math.max(0,pt-(I.length-pt)))),I.length<=pt&&!I.startsWith("0.000")&&!I.startsWith("-0.000"))return I;var T=dt.toExponential(pt);return T.length>pt&&(T=dt.toExponential(Math.max(0,pt-(T.length-pt)))),T.slice(0)}function tt(dt,pt){dt.prototype.add=function(I){return typeof I=="number"?this.addS(I):this.addM(I)},dt.prototype.addS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)+I);return this},dt.prototype.addM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)+I.get(T,Q));return this},dt.add=function(I,T){var Q=new pt(I);return Q.add(T)},dt.prototype.sub=function(I){return typeof I=="number"?this.subS(I):this.subM(I)},dt.prototype.subS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)-I);return this},dt.prototype.subM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)-I.get(T,Q));return this},dt.sub=function(I,T){var Q=new pt(I);return Q.sub(T)},dt.prototype.subtract=dt.prototype.sub,dt.prototype.subtractS=dt.prototype.subS,dt.prototype.subtractM=dt.prototype.subM,dt.subtract=dt.sub,dt.prototype.mul=function(I){return typeof I=="number"?this.mulS(I):this.mulM(I)},dt.prototype.mulS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)*I);return this},dt.prototype.mulM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)*I.get(T,Q));return this},dt.mul=function(I,T){var Q=new pt(I);return Q.mul(T)},dt.prototype.multiply=dt.prototype.mul,dt.prototype.multiplyS=dt.prototype.mulS,dt.prototype.multiplyM=dt.prototype.mulM,dt.multiply=dt.mul,dt.prototype.div=function(I){return typeof I=="number"?this.divS(I):this.divM(I)},dt.prototype.divS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)/I);return this},dt.prototype.divM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)/I.get(T,Q));return this},dt.div=function(I,T){var Q=new pt(I);return Q.div(T)},dt.prototype.divide=dt.prototype.div,dt.prototype.divideS=dt.prototype.divS,dt.prototype.divideM=dt.prototype.divM,dt.divide=dt.div,dt.prototype.mod=function(I){return typeof I=="number"?this.modS(I):this.modM(I)},dt.prototype.modS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)%I);return this},dt.prototype.modM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)%I.get(T,Q));return this},dt.mod=function(I,T){var Q=new pt(I);return Q.mod(T)},dt.prototype.modulus=dt.prototype.mod,dt.prototype.modulusS=dt.prototype.modS,dt.prototype.modulusM=dt.prototype.modM,dt.modulus=dt.mod,dt.prototype.and=function(I){return typeof I=="number"?this.andS(I):this.andM(I)},dt.prototype.andS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)&I);return this},dt.prototype.andM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)&I.get(T,Q));return this},dt.and=function(I,T){var Q=new pt(I);return Q.and(T)},dt.prototype.or=function(I){return typeof I=="number"?this.orS(I):this.orM(I)},dt.prototype.orS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)|I);return this},dt.prototype.orM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)|I.get(T,Q));return this},dt.or=function(I,T){var Q=new pt(I);return Q.or(T)},dt.prototype.xor=function(I){return typeof I=="number"?this.xorS(I):this.xorM(I)},dt.prototype.xorS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)^I);return this},dt.prototype.xorM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)^I.get(T,Q));return this},dt.xor=function(I,T){var Q=new pt(I);return Q.xor(T)},dt.prototype.leftShift=function(I){return typeof I=="number"?this.leftShiftS(I):this.leftShiftM(I)},dt.prototype.leftShiftS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)<<I);return this},dt.prototype.leftShiftM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)<<I.get(T,Q));return this},dt.leftShift=function(I,T){var Q=new pt(I);return Q.leftShift(T)},dt.prototype.signPropagatingRightShift=function(I){return typeof I=="number"?this.signPropagatingRightShiftS(I):this.signPropagatingRightShiftM(I)},dt.prototype.signPropagatingRightShiftS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)>>I);return this},dt.prototype.signPropagatingRightShiftM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)>>I.get(T,Q));return this},dt.signPropagatingRightShift=function(I,T){var Q=new pt(I);return Q.signPropagatingRightShift(T)},dt.prototype.rightShift=function(I){return typeof I=="number"?this.rightShiftS(I):this.rightShiftM(I)},dt.prototype.rightShiftS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)>>>I);return this},dt.prototype.rightShiftM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,this.get(T,Q)>>>I.get(T,Q));return this},dt.rightShift=function(I,T){var Q=new pt(I);return Q.rightShift(T)},dt.prototype.zeroFillRightShift=dt.prototype.rightShift,dt.prototype.zeroFillRightShiftS=dt.prototype.rightShiftS,dt.prototype.zeroFillRightShiftM=dt.prototype.rightShiftM,dt.zeroFillRightShift=dt.rightShift,dt.prototype.not=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,~this.get(I,T));return this},dt.not=function(I){var T=new pt(I);return T.not()},dt.prototype.abs=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.abs(this.get(I,T)));return this},dt.abs=function(I){var T=new pt(I);return T.abs()},dt.prototype.acos=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.acos(this.get(I,T)));return this},dt.acos=function(I){var T=new pt(I);return T.acos()},dt.prototype.acosh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.acosh(this.get(I,T)));return this},dt.acosh=function(I){var T=new pt(I);return T.acosh()},dt.prototype.asin=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.asin(this.get(I,T)));return this},dt.asin=function(I){var T=new pt(I);return T.asin()},dt.prototype.asinh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.asinh(this.get(I,T)));return this},dt.asinh=function(I){var T=new pt(I);return T.asinh()},dt.prototype.atan=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.atan(this.get(I,T)));return this},dt.atan=function(I){var T=new pt(I);return T.atan()},dt.prototype.atanh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.atanh(this.get(I,T)));return this},dt.atanh=function(I){var T=new pt(I);return T.atanh()},dt.prototype.cbrt=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.cbrt(this.get(I,T)));return this},dt.cbrt=function(I){var T=new pt(I);return T.cbrt()},dt.prototype.ceil=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.ceil(this.get(I,T)));return this},dt.ceil=function(I){var T=new pt(I);return T.ceil()},dt.prototype.clz32=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.clz32(this.get(I,T)));return this},dt.clz32=function(I){var T=new pt(I);return T.clz32()},dt.prototype.cos=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.cos(this.get(I,T)));return this},dt.cos=function(I){var T=new pt(I);return T.cos()},dt.prototype.cosh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.cosh(this.get(I,T)));return this},dt.cosh=function(I){var T=new pt(I);return T.cosh()},dt.prototype.exp=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.exp(this.get(I,T)));return this},dt.exp=function(I){var T=new pt(I);return T.exp()},dt.prototype.expm1=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.expm1(this.get(I,T)));return this},dt.expm1=function(I){var T=new pt(I);return T.expm1()},dt.prototype.floor=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.floor(this.get(I,T)));return this},dt.floor=function(I){var T=new pt(I);return T.floor()},dt.prototype.fround=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.fround(this.get(I,T)));return this},dt.fround=function(I){var T=new pt(I);return T.fround()},dt.prototype.log=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log(this.get(I,T)));return this},dt.log=function(I){var T=new pt(I);return T.log()},dt.prototype.log1p=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log1p(this.get(I,T)));return this},dt.log1p=function(I){var T=new pt(I);return T.log1p()},dt.prototype.log10=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log10(this.get(I,T)));return this},dt.log10=function(I){var T=new pt(I);return T.log10()},dt.prototype.log2=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log2(this.get(I,T)));return this},dt.log2=function(I){var T=new pt(I);return T.log2()},dt.prototype.round=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.round(this.get(I,T)));return this},dt.round=function(I){var T=new pt(I);return T.round()},dt.prototype.sign=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sign(this.get(I,T)));return this},dt.sign=function(I){var T=new pt(I);return T.sign()},dt.prototype.sin=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sin(this.get(I,T)));return this},dt.sin=function(I){var T=new pt(I);return T.sin()},dt.prototype.sinh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sinh(this.get(I,T)));return this},dt.sinh=function(I){var T=new pt(I);return T.sinh()},dt.prototype.sqrt=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sqrt(this.get(I,T)));return this},dt.sqrt=function(I){var T=new pt(I);return T.sqrt()},dt.prototype.tan=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.tan(this.get(I,T)));return this},dt.tan=function(I){var T=new pt(I);return T.tan()},dt.prototype.tanh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.tanh(this.get(I,T)));return this},dt.tanh=function(I){var T=new pt(I);return T.tanh()},dt.prototype.trunc=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.trunc(this.get(I,T)));return this},dt.trunc=function(I){var T=new pt(I);return T.trunc()},dt.pow=function(I,T){var Q=new pt(I);return Q.pow(T)},dt.prototype.pow=function(I){return typeof I=="number"?this.powS(I):this.powM(I)},dt.prototype.powS=function(I){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,Math.pow(this.get(T,Q),I));return this},dt.prototype.powM=function(I){if(I=pt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.set(T,Q,Math.pow(this.get(T,Q),I.get(T,Q)));return this}}function at(dt,pt,U){var I=U?dt.rows:dt.rows-1;if(pt<0||pt>I)throw new RangeError("Row index out of range")}function ct(dt,pt,U){var I=U?dt.columns:dt.columns-1;if(pt<0||pt>I)throw new RangeError("Column index out of range")}function ht(dt,pt){if(pt.to1DArray&&(pt=pt.to1DArray()),pt.length!==dt.columns)throw new RangeError("vector size must be the same as the number of columns");return pt}function Lt(dt,pt){if(pt.to1DArray&&(pt=pt.to1DArray()),pt.length!==dt.rows)throw new RangeError("vector size must be the same as the number of rows");return pt}function St(dt,pt){if(!S(pt))throw new TypeError("row indices must be an array");for(var U=0;U<pt.length;U++)if(pt[U]<0||pt[U]>=dt.rows)throw new RangeError("row indices are out of range")}function Zt(dt,pt){if(!S(pt))throw new TypeError("column indices must be an array");for(var U=0;U<pt.length;U++)if(pt[U]<0||pt[U]>=dt.columns)throw new RangeError("column indices are out of range")}function Ut(dt,pt,U,I,T){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Z("startRow",pt),Z("endRow",U),Z("startColumn",I),Z("endColumn",T),pt>U||I>T||pt<0||pt>=dt.rows||U<0||U>=dt.rows||I<0||I>=dt.columns||T<0||T>=dt.columns)throw new RangeError("Submatrix indices are out of range")}function Ot(dt){for(var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],I=0;I<dt;I++)U.push(pt);return U}function Z(dt,pt){if(typeof pt!="number")throw new TypeError("".concat(dt," must be a number"))}function st(dt){if(dt.isEmpty())throw new Error("Empty matrix has no elements to index")}function Et(dt){for(var pt=Ot(dt.rows),U=0;U<dt.rows;++U)for(var I=0;I<dt.columns;++I)pt[U]+=dt.get(U,I);return pt}function Bt(dt){for(var pt=Ot(dt.columns),U=0;U<dt.rows;++U)for(var I=0;I<dt.columns;++I)pt[I]+=dt.get(U,I);return pt}function Pt(dt){for(var pt=0,U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)pt+=dt.get(U,I);return pt}function Ht(dt){for(var pt=Ot(dt.rows,1),U=0;U<dt.rows;++U)for(var I=0;I<dt.columns;++I)pt[U]*=dt.get(U,I);return pt}function le(dt){for(var pt=Ot(dt.columns,1),U=0;U<dt.rows;++U)for(var I=0;I<dt.columns;++I)pt[I]*=dt.get(U,I);return pt}function ye(dt){for(var pt=1,U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)pt*=dt.get(U,I);return pt}function Gt(dt,pt,U){for(var I=dt.rows,T=dt.columns,Q=[],bt=0;bt<I;bt++){for(var kt=0,It=0,Kt=0,Pe=0;Pe<T;Pe++)Kt=dt.get(bt,Pe)-U[bt],kt+=Kt,It+=Kt*Kt;pt?Q.push((It-kt*kt/T)/(T-1)):Q.push((It-kt*kt/T)/T)}return Q}function zt(dt,pt,U){for(var I=dt.rows,T=dt.columns,Q=[],bt=0;bt<T;bt++){for(var kt=0,It=0,Kt=0,Pe=0;Pe<I;Pe++)Kt=dt.get(Pe,bt)-U[bt],kt+=Kt,It+=Kt*Kt;pt?Q.push((It-kt*kt/I)/(I-1)):Q.push((It-kt*kt/I)/I)}return Q}function ue(dt,pt,U){for(var I=dt.rows,T=dt.columns,Q=I*T,bt=0,kt=0,It=0,Kt=0;Kt<I;Kt++)for(var Pe=0;Pe<T;Pe++)It=dt.get(Kt,Pe)-U,bt+=It,kt+=It*It;return pt?(kt-bt*bt/Q)/(Q-1):(kt-bt*bt/Q)/Q}function we(dt,pt){for(var U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)dt.set(U,I,dt.get(U,I)-pt[U])}function de(dt,pt){for(var U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)dt.set(U,I,dt.get(U,I)-pt[I])}function Mt(dt,pt){for(var U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)dt.set(U,I,dt.get(U,I)-pt)}function ee(dt){for(var pt=[],U=0;U<dt.rows;U++){for(var I=0,T=0;T<dt.columns;T++)I+=Math.pow(dt.get(U,T),2)/(dt.columns-1);pt.push(Math.sqrt(I))}return pt}function ce(dt,pt){for(var U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)dt.set(U,I,dt.get(U,I)/pt[U])}function At(dt){for(var pt=[],U=0;U<dt.columns;U++){for(var I=0,T=0;T<dt.rows;T++)I+=Math.pow(dt.get(T,U),2)/(dt.rows-1);pt.push(Math.sqrt(I))}return pt}function Wt(dt,pt){for(var U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)dt.set(U,I,dt.get(U,I)/pt[I])}function fe(dt){for(var pt=dt.size-1,U=0,I=0;I<dt.columns;I++)for(var T=0;T<dt.rows;T++)U+=Math.pow(dt.get(T,I),2)/pt;return Math.sqrt(U)}function Ge(dt,pt){for(var U=0;U<dt.rows;U++)for(var I=0;I<dt.columns;I++)dt.set(U,I,dt.get(U,I)/pt)}var Be=function(){function dt(){m()(this,dt)}return M()(dt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(U){if(typeof U!="function")throw new TypeError("callback must be a function");for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)U.call(this,I,T);return this}},{key:"to1DArray",value:function(){for(var U=[],I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)U.push(this.get(I,T));return U}},{key:"to2DArray",value:function(){for(var U=[],I=0;I<this.rows;I++){U.push([]);for(var T=0;T<this.columns;T++)U[I].push(this.get(I,T))}return U}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var U=0;U<this.rows;U++)for(var I=0;I<=U;I++)if(this.get(U,I)!==this.get(I,U))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var U=0,I=0,T=-1,Q=!0,bt=!1;U<this.rows&&Q;){for(I=0,bt=!1;I<this.columns&&bt===!1;)this.get(U,I)===0?I++:this.get(U,I)===1&&I>T?(bt=!0,T=I):(Q=!1,bt=!0);U++}return Q}},{key:"isReducedEchelonForm",value:function(){for(var U=0,I=0,T=-1,Q=!0,bt=!1;U<this.rows&&Q;){for(I=0,bt=!1;I<this.columns&&bt===!1;)this.get(U,I)===0?I++:this.get(U,I)===1&&I>T?(bt=!0,T=I):(Q=!1,bt=!0);for(var kt=I+1;kt<this.rows;kt++)this.get(U,kt)!==0&&(Q=!1);U++}return Q}},{key:"echelonForm",value:function(){for(var U=this.clone(),I=0,T=0;I<U.rows&&T<U.columns;){for(var Q=I,bt=I;bt<U.rows;bt++)U.get(bt,T)>U.get(Q,T)&&(Q=bt);if(U.get(Q,T)===0)T++;else{U.swapRows(I,Q);for(var kt=U.get(I,T),It=T;It<U.columns;It++)U.set(I,It,U.get(I,It)/kt);for(var Kt=I+1;Kt<U.rows;Kt++){var Pe=U.get(Kt,T)/U.get(I,T);U.set(Kt,T,0);for(var _e=T+1;_e<U.columns;_e++)U.set(Kt,_e,U.get(Kt,_e)-U.get(I,_e)*Pe)}I++,T++}}return U}},{key:"reducedEchelonForm",value:function(){for(var U=this.echelonForm(),I=U.columns,T=U.rows,Q=T-1;Q>=0;)if(U.maxRow(Q)===0)Q--;else{for(var bt=0,kt=!1;bt<T&&kt===!1;)U.get(Q,bt)===1?kt=!0:bt++;for(var It=0;It<Q;It++)for(var Kt=U.get(It,bt),Pe=bt;Pe<I;Pe++){var _e=U.get(It,Pe)-Kt*U.get(Q,Pe);U.set(It,Pe,_e)}Q--}return U}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(U)!=="object")throw new TypeError("options must be an object");var I=U.rows,T=I===void 0?1:I,Q=U.columns,bt=Q===void 0?1:Q;if(!Number.isInteger(T)||T<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(bt)||bt<=0)throw new TypeError("columns must be a positive integer");for(var kt=new hr(this.rows*T,this.columns*bt),It=0;It<T;It++)for(var Kt=0;Kt<bt;Kt++)kt.setSubMatrix(this,this.rows*It,this.columns*Kt);return kt}},{key:"fill",value:function(U){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,U);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(U){at(this,U);for(var I=[],T=0;T<this.columns;T++)I.push(this.get(U,T));return I}},{key:"getRowVector",value:function(U){return hr.rowVector(this.getRow(U))}},{key:"setRow",value:function(U,I){at(this,U),I=ht(this,I);for(var T=0;T<this.columns;T++)this.set(U,T,I[T]);return this}},{key:"swapRows",value:function(U,I){at(this,U),at(this,I);for(var T=0;T<this.columns;T++){var Q=this.get(U,T);this.set(U,T,this.get(I,T)),this.set(I,T,Q)}return this}},{key:"getColumn",value:function(U){ct(this,U);for(var I=[],T=0;T<this.rows;T++)I.push(this.get(T,U));return I}},{key:"getColumnVector",value:function(U){return hr.columnVector(this.getColumn(U))}},{key:"setColumn",value:function(U,I){ct(this,U),I=Lt(this,I);for(var T=0;T<this.rows;T++)this.set(T,U,I[T]);return this}},{key:"swapColumns",value:function(U,I){ct(this,U),ct(this,I);for(var T=0;T<this.rows;T++){var Q=this.get(T,U);this.set(T,U,this.get(T,I)),this.set(T,I,Q)}return this}},{key:"addRowVector",value:function(U){U=ht(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)+U[T]);return this}},{key:"subRowVector",value:function(U){U=ht(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)-U[T]);return this}},{key:"mulRowVector",value:function(U){U=ht(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)*U[T]);return this}},{key:"divRowVector",value:function(U){U=ht(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)/U[T]);return this}},{key:"addColumnVector",value:function(U){U=Lt(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)+U[I]);return this}},{key:"subColumnVector",value:function(U){U=Lt(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)-U[I]);return this}},{key:"mulColumnVector",value:function(U){U=Lt(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)*U[I]);return this}},{key:"divColumnVector",value:function(U){U=Lt(this,U);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)/U[I]);return this}},{key:"mulRow",value:function(U,I){at(this,U);for(var T=0;T<this.columns;T++)this.set(U,T,this.get(U,T)*I);return this}},{key:"mulColumn",value:function(U,I){ct(this,U);for(var T=0;T<this.rows;T++)this.set(T,U,this.get(T,U)*I);return this}},{key:"max",value:function(U){if(this.isEmpty())return NaN;switch(U){case"row":{for(var I=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.get(T,Q)>I[T]&&(I[T]=this.get(T,Q));return I}case"column":{for(var bt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),kt=0;kt<this.rows;kt++)for(var It=0;It<this.columns;It++)this.get(kt,It)>bt[It]&&(bt[It]=this.get(kt,It));return bt}case void 0:{for(var Kt=this.get(0,0),Pe=0;Pe<this.rows;Pe++)for(var _e=0;_e<this.columns;_e++)this.get(Pe,_e)>Kt&&(Kt=this.get(Pe,_e));return Kt}default:throw new Error("invalid option: ".concat(U))}}},{key:"maxIndex",value:function(){st(this);for(var U=this.get(0,0),I=[0,0],T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.get(T,Q)>U&&(U=this.get(T,Q),I[0]=T,I[1]=Q);return I}},{key:"min",value:function(U){if(this.isEmpty())return NaN;switch(U){case"row":{for(var I=new Array(this.rows).fill(Number.POSITIVE_INFINITY),T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.get(T,Q)<I[T]&&(I[T]=this.get(T,Q));return I}case"column":{for(var bt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),kt=0;kt<this.rows;kt++)for(var It=0;It<this.columns;It++)this.get(kt,It)<bt[It]&&(bt[It]=this.get(kt,It));return bt}case void 0:{for(var Kt=this.get(0,0),Pe=0;Pe<this.rows;Pe++)for(var _e=0;_e<this.columns;_e++)this.get(Pe,_e)<Kt&&(Kt=this.get(Pe,_e));return Kt}default:throw new Error("invalid option: ".concat(U))}}},{key:"minIndex",value:function(){st(this);for(var U=this.get(0,0),I=[0,0],T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)this.get(T,Q)<U&&(U=this.get(T,Q),I[0]=T,I[1]=Q);return I}},{key:"maxRow",value:function(U){if(at(this,U),this.isEmpty())return NaN;for(var I=this.get(U,0),T=1;T<this.columns;T++)this.get(U,T)>I&&(I=this.get(U,T));return I}},{key:"maxRowIndex",value:function(U){at(this,U),st(this);for(var I=this.get(U,0),T=[U,0],Q=1;Q<this.columns;Q++)this.get(U,Q)>I&&(I=this.get(U,Q),T[1]=Q);return T}},{key:"minRow",value:function(U){if(at(this,U),this.isEmpty())return NaN;for(var I=this.get(U,0),T=1;T<this.columns;T++)this.get(U,T)<I&&(I=this.get(U,T));return I}},{key:"minRowIndex",value:function(U){at(this,U),st(this);for(var I=this.get(U,0),T=[U,0],Q=1;Q<this.columns;Q++)this.get(U,Q)<I&&(I=this.get(U,Q),T[1]=Q);return T}},{key:"maxColumn",value:function(U){if(ct(this,U),this.isEmpty())return NaN;for(var I=this.get(0,U),T=1;T<this.rows;T++)this.get(T,U)>I&&(I=this.get(T,U));return I}},{key:"maxColumnIndex",value:function(U){ct(this,U),st(this);for(var I=this.get(0,U),T=[0,U],Q=1;Q<this.rows;Q++)this.get(Q,U)>I&&(I=this.get(Q,U),T[0]=Q);return T}},{key:"minColumn",value:function(U){if(ct(this,U),this.isEmpty())return NaN;for(var I=this.get(0,U),T=1;T<this.rows;T++)this.get(T,U)<I&&(I=this.get(T,U));return I}},{key:"minColumnIndex",value:function(U){ct(this,U),st(this);for(var I=this.get(0,U),T=[0,U],Q=1;Q<this.rows;Q++)this.get(Q,U)<I&&(I=this.get(Q,U),T[0]=Q);return T}},{key:"diag",value:function(){for(var U=Math.min(this.rows,this.columns),I=[],T=0;T<U;T++)I.push(this.get(T,T));return I}},{key:"norm",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",I=0;if(U==="max")return this.max();if(U==="frobenius"){for(var T=0;T<this.rows;T++)for(var Q=0;Q<this.columns;Q++)I=I+this.get(T,Q)*this.get(T,Q);return Math.sqrt(I)}else throw new RangeError("unknown norm type: ".concat(U))}},{key:"cumulativeSum",value:function(){for(var U=0,I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)U+=this.get(I,T),this.set(I,T,U);return this}},{key:"dot",value:function(U){dt.isMatrix(U)&&(U=U.to1DArray());var I=this.to1DArray();if(I.length!==U.length)throw new RangeError("vectors do not have the same size");for(var T=0,Q=0;Q<I.length;Q++)T+=I[Q]*U[Q];return T}},{key:"mmul",value:function(U){U=hr.checkMatrix(U);for(var I=this.rows,T=this.columns,Q=U.columns,bt=new hr(I,Q),kt=new Float64Array(T),It=0;It<Q;It++){for(var Kt=0;Kt<T;Kt++)kt[Kt]=U.get(Kt,It);for(var Pe=0;Pe<I;Pe++){for(var _e=0,Qe=0;Qe<T;Qe++)_e+=this.get(Pe,Qe)*kt[Qe];bt.set(Pe,It,_e)}}return bt}},{key:"strassen2x2",value:function(U){U=hr.checkMatrix(U);var I=new hr(2,2),T=this.get(0,0),Q=U.get(0,0),bt=this.get(0,1),kt=U.get(0,1),It=this.get(1,0),Kt=U.get(1,0),Pe=this.get(1,1),_e=U.get(1,1),Qe=(T+Pe)*(Q+_e),Ir=(It+Pe)*Q,sr=T*(kt-_e),Hr=Pe*(Kt-Q),xn=(T+bt)*_e,ze=(It-T)*(Q+kt),ur=(bt-Pe)*(Kt+_e),Sr=Qe+Hr-xn+ur,Nr=sr+xn,$t=Ir+Hr,Ct=Qe-Ir+sr+ze;return I.set(0,0,Sr),I.set(0,1,Nr),I.set(1,0,$t),I.set(1,1,Ct),I}},{key:"strassen3x3",value:function(U){U=hr.checkMatrix(U);var I=new hr(3,3),T=this.get(0,0),Q=this.get(0,1),bt=this.get(0,2),kt=this.get(1,0),It=this.get(1,1),Kt=this.get(1,2),Pe=this.get(2,0),_e=this.get(2,1),Qe=this.get(2,2),Ir=U.get(0,0),sr=U.get(0,1),Hr=U.get(0,2),xn=U.get(1,0),ze=U.get(1,1),ur=U.get(1,2),Sr=U.get(2,0),Nr=U.get(2,1),$t=U.get(2,2),Ct=(T+Q+bt-kt-It-_e-Qe)*ze,te=(T-kt)*(-sr+ze),ge=It*(-Ir+sr+xn-ze-ur-Sr+$t),ie=(-T+kt+It)*(Ir-sr+ze),Te=(kt+It)*(-Ir+sr),Je=T*Ir,tr=(-T+Pe+_e)*(Ir-Hr+ur),Gr=(-T+Pe)*(Hr-ur),cn=(Pe+_e)*(-Ir+Hr),qr=(T+Q+bt-It-Kt-Pe-_e)*ur,Fn=_e*(-Ir+Hr+xn-ze-ur-Sr+Nr),Mn=(-bt+_e+Qe)*(ze+Sr-Nr),ia=(bt-Qe)*(ze-Nr),Sa=bt*Sr,Ca=(_e+Qe)*(-Sr+Nr),ca=(-bt+It+Kt)*(ur+Sr-$t),ho=(bt-Kt)*(ur-$t),qa=(It+Kt)*(-Sr+$t),Ha=Q*xn,Ni=Kt*Nr,qo=kt*Hr,Pi=Pe*sr,zi=Qe*$t,ua=Je+Sa+Ha,ro=Ct+ie+Te+Je+Mn+Sa+Ca,zo=Je+tr+cn+qr+Sa+ca+qa,Da=te+ge+ie+Je+Sa+ca+ho,Co=te+ie+Te+Je+Ni,To=Sa+ca+ho+qa+qo,Io=Je+tr+Gr+Fn+Mn+ia+Sa,bi=Mn+ia+Sa+Ca+Pi,Ui=Je+tr+Gr+cn+zi;return I.set(0,0,ua),I.set(0,1,ro),I.set(0,2,zo),I.set(1,0,Da),I.set(1,1,Co),I.set(1,2,To),I.set(2,0,Io),I.set(2,1,bi),I.set(2,2,Ui),I}},{key:"mmulStrassen",value:function(U){U=hr.checkMatrix(U);var I=this.clone(),T=I.rows,Q=I.columns,bt=U.rows,kt=U.columns;Q!==bt&&console.warn("Multiplying ".concat(T," x ").concat(Q," and ").concat(bt," x ").concat(kt," matrix: dimensions do not match."));function It(Qe,Ir,sr){var Hr=Qe.rows,xn=Qe.columns;if(Hr===Ir&&xn===sr)return Qe;var ze=dt.zeros(Ir,sr);return ze=ze.setSubMatrix(Qe,0,0),ze}var Kt=Math.max(T,bt),Pe=Math.max(Q,kt);I=It(I,Kt,Pe),U=It(U,Kt,Pe);function _e(Qe,Ir,sr,Hr){if(sr<=512||Hr<=512)return Qe.mmul(Ir);sr%2===1&&Hr%2===1?(Qe=It(Qe,sr+1,Hr+1),Ir=It(Ir,sr+1,Hr+1)):sr%2===1?(Qe=It(Qe,sr+1,Hr),Ir=It(Ir,sr+1,Hr)):Hr%2===1&&(Qe=It(Qe,sr,Hr+1),Ir=It(Ir,sr,Hr+1));var xn=parseInt(Qe.rows/2,10),ze=parseInt(Qe.columns/2,10),ur=Qe.subMatrix(0,xn-1,0,ze-1),Sr=Ir.subMatrix(0,xn-1,0,ze-1),Nr=Qe.subMatrix(0,xn-1,ze,Qe.columns-1),$t=Ir.subMatrix(0,xn-1,ze,Ir.columns-1),Ct=Qe.subMatrix(xn,Qe.rows-1,0,ze-1),te=Ir.subMatrix(xn,Ir.rows-1,0,ze-1),ge=Qe.subMatrix(xn,Qe.rows-1,ze,Qe.columns-1),ie=Ir.subMatrix(xn,Ir.rows-1,ze,Ir.columns-1),Te=_e(dt.add(ur,ge),dt.add(Sr,ie),xn,ze),Je=_e(dt.add(Ct,ge),Sr,xn,ze),tr=_e(ur,dt.sub($t,ie),xn,ze),Gr=_e(ge,dt.sub(te,Sr),xn,ze),cn=_e(dt.add(ur,Nr),ie,xn,ze),qr=_e(dt.sub(Ct,ur),dt.add(Sr,$t),xn,ze),Fn=_e(dt.sub(Nr,ge),dt.add(te,ie),xn,ze),Mn=dt.add(Te,Gr);Mn.sub(cn),Mn.add(Fn);var ia=dt.add(tr,cn),Sa=dt.add(Je,Gr),Ca=dt.sub(Te,Je);Ca.add(tr),Ca.add(qr);var ca=dt.zeros(2*Mn.rows,2*Mn.columns);return ca=ca.setSubMatrix(Mn,0,0),ca=ca.setSubMatrix(ia,Mn.rows,0),ca=ca.setSubMatrix(Sa,0,Mn.columns),ca=ca.setSubMatrix(Ca,Mn.rows,Mn.columns),ca.subMatrix(0,sr-1,0,Hr-1)}return _e(I,U,Kt,Pe)}},{key:"scaleRows",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(U)!=="object")throw new TypeError("options must be an object");var I=U.min,T=I===void 0?0:I,Q=U.max,bt=Q===void 0?1:Q;if(!Number.isFinite(T))throw new TypeError("min must be a number");if(!Number.isFinite(bt))throw new TypeError("max must be a number");if(T>=bt)throw new RangeError("min must be smaller than max");for(var kt=new hr(this.rows,this.columns),It=0;It<this.rows;It++){var Kt=this.getRow(It);Kt.length>0&&d(Kt,{min:T,max:bt,output:Kt}),kt.setRow(It,Kt)}return kt}},{key:"scaleColumns",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(U)!=="object")throw new TypeError("options must be an object");var I=U.min,T=I===void 0?0:I,Q=U.max,bt=Q===void 0?1:Q;if(!Number.isFinite(T))throw new TypeError("min must be a number");if(!Number.isFinite(bt))throw new TypeError("max must be a number");if(T>=bt)throw new RangeError("min must be smaller than max");for(var kt=new hr(this.rows,this.columns),It=0;It<this.columns;It++){var Kt=this.getColumn(It);Kt.length&&d(Kt,{min:T,max:bt,output:Kt}),kt.setColumn(It,Kt)}return kt}},{key:"flipRows",value:function(){for(var U=Math.ceil(this.columns/2),I=0;I<this.rows;I++)for(var T=0;T<U;T++){var Q=this.get(I,T),bt=this.get(I,this.columns-1-T);this.set(I,T,bt),this.set(I,this.columns-1-T,Q)}return this}},{key:"flipColumns",value:function(){for(var U=Math.ceil(this.rows/2),I=0;I<this.columns;I++)for(var T=0;T<U;T++){var Q=this.get(T,I),bt=this.get(this.rows-1-T,I);this.set(T,I,bt),this.set(this.rows-1-T,I,Q)}return this}},{key:"kroneckerProduct",value:function(U){U=hr.checkMatrix(U);for(var I=this.rows,T=this.columns,Q=U.rows,bt=U.columns,kt=new hr(I*Q,T*bt),It=0;It<I;It++)for(var Kt=0;Kt<T;Kt++)for(var Pe=0;Pe<Q;Pe++)for(var _e=0;_e<bt;_e++)kt.set(Q*It+Pe,bt*Kt+_e,this.get(It,Kt)*U.get(Pe,_e));return kt}},{key:"kroneckerSum",value:function(U){if(U=hr.checkMatrix(U),!this.isSquare()||!U.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var I=this.rows,T=U.rows,Q=this.kroneckerProduct(hr.eye(T,T)),bt=hr.eye(I,I).kroneckerProduct(U);return Q.add(bt)}},{key:"transpose",value:function(){for(var U=new hr(this.columns,this.rows),I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)U.set(T,I,this.get(I,T));return U}},{key:"sortRows",value:function(){for(var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_r,I=0;I<this.rows;I++)this.setRow(I,this.getRow(I).sort(U));return this}},{key:"sortColumns",value:function(){for(var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_r,I=0;I<this.columns;I++)this.setColumn(I,this.getColumn(I).sort(U));return this}},{key:"subMatrix",value:function(U,I,T,Q){Ut(this,U,I,T,Q);for(var bt=new hr(I-U+1,Q-T+1),kt=U;kt<=I;kt++)for(var It=T;It<=Q;It++)bt.set(kt-U,It-T,this.get(kt,It));return bt}},{key:"subMatrixRow",value:function(U,I,T){if(I===void 0&&(I=0),T===void 0&&(T=this.columns-1),I>T||I<0||I>=this.columns||T<0||T>=this.columns)throw new RangeError("Argument out of range");for(var Q=new hr(U.length,T-I+1),bt=0;bt<U.length;bt++)for(var kt=I;kt<=T;kt++){if(U[bt]<0||U[bt]>=this.rows)throw new RangeError("Row index out of range: ".concat(U[bt]));Q.set(bt,kt-I,this.get(U[bt],kt))}return Q}},{key:"subMatrixColumn",value:function(U,I,T){if(I===void 0&&(I=0),T===void 0&&(T=this.rows-1),I>T||I<0||I>=this.rows||T<0||T>=this.rows)throw new RangeError("Argument out of range");for(var Q=new hr(T-I+1,U.length),bt=0;bt<U.length;bt++)for(var kt=I;kt<=T;kt++){if(U[bt]<0||U[bt]>=this.columns)throw new RangeError("Column index out of range: ".concat(U[bt]));Q.set(kt-I,bt,this.get(kt,U[bt]))}return Q}},{key:"setSubMatrix",value:function(U,I,T){if(U=hr.checkMatrix(U),U.isEmpty())return this;var Q=I+U.rows-1,bt=T+U.columns-1;Ut(this,I,Q,T,bt);for(var kt=0;kt<U.rows;kt++)for(var It=0;It<U.columns;It++)this.set(I+kt,T+It,U.get(kt,It));return this}},{key:"selection",value:function(U,I){St(this,U),Zt(this,I);for(var T=new hr(U.length,I.length),Q=0;Q<U.length;Q++)for(var bt=U[Q],kt=0;kt<I.length;kt++){var It=I[kt];T.set(Q,kt,this.get(bt,It))}return T}},{key:"trace",value:function(){for(var U=Math.min(this.rows,this.columns),I=0,T=0;T<U;T++)I+=this.get(T,T);return I}},{key:"clone",value:function(){for(var U=new hr(this.rows,this.columns),I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)U.set(I,T,this.get(I,T));return U}},{key:"sum",value:function(U){switch(U){case"row":return Et(this);case"column":return Bt(this);case void 0:return Pt(this);default:throw new Error("invalid option: ".concat(U))}}},{key:"product",value:function(U){switch(U){case"row":return Ht(this);case"column":return le(this);case void 0:return ye(this);default:throw new Error("invalid option: ".concat(U))}}},{key:"mean",value:function(U){var I=this.sum(U);switch(U){case"row":{for(var T=0;T<this.rows;T++)I[T]/=this.columns;return I}case"column":{for(var Q=0;Q<this.columns;Q++)I[Q]/=this.rows;return I}case void 0:return I/this.size;default:throw new Error("invalid option: ".concat(U))}}},{key:"variance",value:function(U){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(U)==="object"&&(I=U,U=void 0),b()(I)!=="object")throw new TypeError("options must be an object");var T=I,Q=T.unbiased,bt=Q===void 0?!0:Q,kt=T.mean,It=kt===void 0?this.mean(U):kt;if(typeof bt!="boolean")throw new TypeError("unbiased must be a boolean");switch(U){case"row":{if(!S(It))throw new TypeError("mean must be an array");return Gt(this,bt,It)}case"column":{if(!S(It))throw new TypeError("mean must be an array");return zt(this,bt,It)}case void 0:{if(typeof It!="number")throw new TypeError("mean must be a number");return ue(this,bt,It)}default:throw new Error("invalid option: ".concat(U))}}},{key:"standardDeviation",value:function(U,I){b()(U)==="object"&&(I=U,U=void 0);var T=this.variance(U,I);if(U===void 0)return Math.sqrt(T);for(var Q=0;Q<T.length;Q++)T[Q]=Math.sqrt(T[Q]);return T}},{key:"center",value:function(U){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(U)==="object"&&(I=U,U=void 0),b()(I)!=="object")throw new TypeError("options must be an object");var T=I,Q=T.center,bt=Q===void 0?this.mean(U):Q;switch(U){case"row":{if(!S(bt))throw new TypeError("center must be an array");return we(this,bt),this}case"column":{if(!S(bt))throw new TypeError("center must be an array");return de(this,bt),this}case void 0:{if(typeof bt!="number")throw new TypeError("center must be a number");return Mt(this,bt),this}default:throw new Error("invalid option: ".concat(U))}}},{key:"scale",value:function(U){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(U)==="object"&&(I=U,U=void 0),b()(I)!=="object")throw new TypeError("options must be an object");var T=I.scale;switch(U){case"row":{if(T===void 0)T=ee(this);else if(!S(T))throw new TypeError("scale must be an array");return ce(this,T),this}case"column":{if(T===void 0)T=At(this);else if(!S(T))throw new TypeError("scale must be an array");return Wt(this,T),this}case void 0:{if(T===void 0)T=fe(this);else if(typeof T!="number")throw new TypeError("scale must be a number");return Ge(this,T),this}default:throw new Error("invalid option: ".concat(U))}}},{key:"toString",value:function(U){return X(this,U)}}],[{key:"from1DArray",value:function(U,I,T){var Q=U*I;if(Q!==T.length)throw new RangeError("data length does not match given dimensions");for(var bt=new hr(U,I),kt=0;kt<U;kt++)for(var It=0;It<I;It++)bt.set(kt,It,T[kt*I+It]);return bt}},{key:"rowVector",value:function(U){for(var I=new hr(1,U.length),T=0;T<U.length;T++)I.set(0,T,U[T]);return I}},{key:"columnVector",value:function(U){for(var I=new hr(U.length,1),T=0;T<U.length;T++)I.set(T,0,U[T]);return I}},{key:"zeros",value:function(U,I){return new hr(U,I)}},{key:"ones",value:function(U,I){return new hr(U,I).fill(1)}},{key:"rand",value:function(U,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(b()(T)!=="object")throw new TypeError("options must be an object");for(var Q=T.random,bt=Q===void 0?Math.random:Q,kt=new hr(U,I),It=0;It<U;It++)for(var Kt=0;Kt<I;Kt++)kt.set(It,Kt,bt());return kt}},{key:"randInt",value:function(U,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(b()(T)!=="object")throw new TypeError("options must be an object");var Q=T.min,bt=Q===void 0?0:Q,kt=T.max,It=kt===void 0?1e3:kt,Kt=T.random,Pe=Kt===void 0?Math.random:Kt;if(!Number.isInteger(bt))throw new TypeError("min must be an integer");if(!Number.isInteger(It))throw new TypeError("max must be an integer");if(bt>=It)throw new RangeError("min must be smaller than max");for(var _e=It-bt,Qe=new hr(U,I),Ir=0;Ir<U;Ir++)for(var sr=0;sr<I;sr++){var Hr=bt+Math.round(Pe()*_e);Qe.set(Ir,sr,Hr)}return Qe}},{key:"eye",value:function(U,I,T){I===void 0&&(I=U),T===void 0&&(T=1);for(var Q=Math.min(U,I),bt=this.zeros(U,I),kt=0;kt<Q;kt++)bt.set(kt,kt,T);return bt}},{key:"diag",value:function(U,I,T){var Q=U.length;I===void 0&&(I=Q),T===void 0&&(T=I);for(var bt=Math.min(Q,I,T),kt=this.zeros(I,T),It=0;It<bt;It++)kt.set(It,It,U[It]);return kt}},{key:"min",value:function(U,I){U=this.checkMatrix(U),I=this.checkMatrix(I);for(var T=U.rows,Q=U.columns,bt=new hr(T,Q),kt=0;kt<T;kt++)for(var It=0;It<Q;It++)bt.set(kt,It,Math.min(U.get(kt,It),I.get(kt,It)));return bt}},{key:"max",value:function(U,I){U=this.checkMatrix(U),I=this.checkMatrix(I);for(var T=U.rows,Q=U.columns,bt=new this(T,Q),kt=0;kt<T;kt++)for(var It=0;It<Q;It++)bt.set(kt,It,Math.max(U.get(kt,It),I.get(kt,It)));return bt}},{key:"checkMatrix",value:function(U){return dt.isMatrix(U)?U:new hr(U)}},{key:"isMatrix",value:function(U){return U!=null&&U.klass==="Matrix"}}]),dt}();Be.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Be.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y);function _r(dt,pt){return dt-pt}function Ft(dt){return dt.every(function(pt){return typeof pt=="number"})}Be.random=Be.rand,Be.randomInt=Be.randInt,Be.diagonal=Be.diag,Be.prototype.diagonal=Be.prototype.diag,Be.identity=Be.eye,Be.prototype.negate=Be.prototype.neg,Be.prototype.tensorProduct=Be.prototype.kroneckerProduct;var hr=function(dt){L()(U,dt);var pt=N()(U);function U(I,T){var Q;if(m()(this,U),Q=pt.call(this),U.isMatrix(I))return W()(Q,I.clone());if(Number.isInteger(I)&&I>=0)if(Q.data=[],Number.isInteger(T)&&T>=0)for(var bt=0;bt<I;bt++)Q.data.push(new Float64Array(T));else throw new TypeError("nColumns must be a positive integer");else if(S(I)){var kt=I;if(I=kt.length,T=I?kt[0].length:0,typeof T!="number")throw new TypeError("Data must be a 2D array with at least one element");Q.data=[];for(var It=0;It<I;It++){if(kt[It].length!==T)throw new RangeError("Inconsistent array dimensions");if(!Ft(kt[It]))throw new TypeError("Input data contains non-numeric values");Q.data.push(Float64Array.from(kt[It]))}}else throw new TypeError("First argument must be a positive number or an array");return Q.rows=I,Q.columns=T,Q}return M()(U,[{key:"set",value:function(T,Q,bt){return this.data[T][Q]=bt,this}},{key:"get",value:function(T,Q){return this.data[T][Q]}},{key:"removeRow",value:function(T){return at(this,T),this.data.splice(T,1),this.rows-=1,this}},{key:"addRow",value:function(T,Q){return Q===void 0&&(Q=T,T=this.rows),at(this,T,!0),Q=Float64Array.from(ht(this,Q)),this.data.splice(T,0,Q),this.rows+=1,this}},{key:"removeColumn",value:function(T){ct(this,T);for(var Q=0;Q<this.rows;Q++){for(var bt=new Float64Array(this.columns-1),kt=0;kt<T;kt++)bt[kt]=this.data[Q][kt];for(var It=T+1;It<this.columns;It++)bt[It-1]=this.data[Q][It];this.data[Q]=bt}return this.columns-=1,this}},{key:"addColumn",value:function(T,Q){typeof Q=="undefined"&&(Q=T,T=this.columns),ct(this,T,!0),Q=Lt(this,Q);for(var bt=0;bt<this.rows;bt++){for(var kt=new Float64Array(this.columns+1),It=0;It<T;It++)kt[It]=this.data[bt][It];for(kt[It++]=Q[bt];It<this.columns+1;It++)kt[It]=this.data[bt][It-1];this.data[bt]=kt}return this.columns+=1,this}}]),U}(Be);tt(Be,hr);var rn=function(dt){L()(U,dt);var pt=N()(U);function U(I,T,Q){var bt;return m()(this,U),bt=pt.call(this),bt.matrix=I,bt.rows=T,bt.columns=Q,bt}return M()(U)}(Be),pn=function(dt){L()(U,dt);var pt=N()(U);function U(I,T){var Q;return m()(this,U),ct(I,T),Q=pt.call(this,I,I.rows,1),Q.column=T,Q}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(T,this.column,bt),this}},{key:"get",value:function(T){return this.matrix.get(T,this.column)}}]),U}(rn),Sn=function(dt){L()(U,dt);var pt=N()(U);function U(I,T){var Q;return m()(this,U),Zt(I,T),Q=pt.call(this,I,I.rows,T.length),Q.columnIndices=T,Q}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(T,this.columnIndices[Q],bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(T,this.columnIndices[Q])}}]),U}(rn),Bn=function(dt){L()(U,dt);var pt=N()(U);function U(I){return m()(this,U),pt.call(this,I,I.rows,I.columns)}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(T,this.columns-Q-1,bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(T,this.columns-Q-1)}}]),U}(rn),Kn=function(dt){L()(U,dt);var pt=N()(U);function U(I){return m()(this,U),pt.call(this,I,I.rows,I.columns)}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(this.rows-T-1,Q,bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(this.rows-T-1,Q)}}]),U}(rn),Nn=function(dt){L()(U,dt);var pt=N()(U);function U(I,T){var Q;return m()(this,U),at(I,T),Q=pt.call(this,I,1,I.columns),Q.row=T,Q}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(this.row,Q,bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(this.row,Q)}}]),U}(rn),ra=function(dt){L()(U,dt);var pt=N()(U);function U(I,T){var Q;return m()(this,U),St(I,T),Q=pt.call(this,I,T.length,I.columns),Q.rowIndices=T,Q}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(this.rowIndices[T],Q,bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(this.rowIndices[T],Q)}}]),U}(rn),Ea=function(dt){L()(U,dt);var pt=N()(U);function U(I,T,Q){var bt;return m()(this,U),St(I,T),Zt(I,Q),bt=pt.call(this,I,T.length,Q.length),bt.rowIndices=T,bt.columnIndices=Q,bt}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(this.rowIndices[T],this.columnIndices[Q],bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(this.rowIndices[T],this.columnIndices[Q])}}]),U}(rn),na=function(dt){L()(U,dt);var pt=N()(U);function U(I,T,Q,bt,kt){var It;return m()(this,U),Ut(I,T,Q,bt,kt),It=pt.call(this,I,Q-T+1,kt-bt+1),It.startRow=T,It.startColumn=bt,It}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(this.startRow+T,this.startColumn+Q,bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(this.startRow+T,this.startColumn+Q)}}]),U}(rn),ir=function(dt){L()(U,dt);var pt=N()(U);function U(I){return m()(this,U),pt.call(this,I,I.columns,I.rows)}return M()(U,[{key:"set",value:function(T,Q,bt){return this.matrix.set(Q,T,bt),this}},{key:"get",value:function(T,Q){return this.matrix.get(Q,T)}}]),U}(rn),Tr=function(dt){L()(U,dt);var pt=N()(U);function U(I){var T,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m()(this,U);var bt=Q.rows,kt=bt===void 0?1:bt;if(I.length%kt!==0)throw new Error("the data length is not divisible by the number of rows");return T=pt.call(this),T.rows=kt,T.columns=I.length/kt,T.data=I,T}return M()(U,[{key:"set",value:function(T,Q,bt){var kt=this._calculateIndex(T,Q);return this.data[kt]=bt,this}},{key:"get",value:function(T,Q){var bt=this._calculateIndex(T,Q);return this.data[bt]}},{key:"_calculateIndex",value:function(T,Q){return T*this.columns+Q}}]),U}(Be),Jr=function(dt){L()(U,dt);var pt=N()(U);function U(I){var T;return m()(this,U),T=pt.call(this),T.data=I,T.rows=I.length,T.columns=I[0].length,T}return M()(U,[{key:"set",value:function(T,Q,bt){return this.data[T][Q]=bt,this}},{key:"get",value:function(T,Q){return this.data[T][Q]}}]),U}(Be);function vn(dt,pt){if(S(dt))return dt[0]&&S(dt[0])?new Jr(dt):new Tr(dt,pt);throw new Error("the argument is not an array")}var Tn=function(){function dt(pt){m()(this,dt),pt=Jr.checkMatrix(pt);var U=pt.clone(),I=U.rows,T=U.columns,Q=new Float64Array(I),bt=1,kt,It,Kt,Pe,_e,Qe,Ir,sr,Hr;for(kt=0;kt<I;kt++)Q[kt]=kt;for(sr=new Float64Array(I),It=0;It<T;It++){for(kt=0;kt<I;kt++)sr[kt]=U.get(kt,It);for(kt=0;kt<I;kt++){for(Hr=Math.min(kt,It),_e=0,Kt=0;Kt<Hr;Kt++)_e+=U.get(kt,Kt)*sr[Kt];sr[kt]-=_e,U.set(kt,It,sr[kt])}for(Pe=It,kt=It+1;kt<I;kt++)Math.abs(sr[kt])>Math.abs(sr[Pe])&&(Pe=kt);if(Pe!==It){for(Kt=0;Kt<T;Kt++)Qe=U.get(Pe,Kt),U.set(Pe,Kt,U.get(It,Kt)),U.set(It,Kt,Qe);Ir=Q[Pe],Q[Pe]=Q[It],Q[It]=Ir,bt=-bt}if(It<I&&U.get(It,It)!==0)for(kt=It+1;kt<I;kt++)U.set(kt,It,U.get(kt,It)/U.get(It,It))}this.LU=U,this.pivotVector=Q,this.pivotSign=bt}return M()(dt,[{key:"isSingular",value:function(){for(var U=this.LU,I=U.columns,T=0;T<I;T++)if(U.get(T,T)===0)return!0;return!1}},{key:"solve",value:function(U){U=hr.checkMatrix(U);var I=this.LU,T=I.rows;if(T!==U.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var Q=U.columns,bt=U.subMatrixRow(this.pivotVector,0,Q-1),kt=I.columns,It,Kt,Pe;for(Pe=0;Pe<kt;Pe++)for(It=Pe+1;It<kt;It++)for(Kt=0;Kt<Q;Kt++)bt.set(It,Kt,bt.get(It,Kt)-bt.get(Pe,Kt)*I.get(It,Pe));for(Pe=kt-1;Pe>=0;Pe--){for(Kt=0;Kt<Q;Kt++)bt.set(Pe,Kt,bt.get(Pe,Kt)/I.get(Pe,Pe));for(It=0;It<Pe;It++)for(Kt=0;Kt<Q;Kt++)bt.set(It,Kt,bt.get(It,Kt)-bt.get(Pe,Kt)*I.get(It,Pe))}return bt}},{key:"determinant",get:function(){var U=this.LU;if(!U.isSquare())throw new Error("Matrix must be square");for(var I=this.pivotSign,T=U.columns,Q=0;Q<T;Q++)I*=U.get(Q,Q);return I}},{key:"lowerTriangularMatrix",get:function(){for(var U=this.LU,I=U.rows,T=U.columns,Q=new hr(I,T),bt=0;bt<I;bt++)for(var kt=0;kt<T;kt++)bt>kt?Q.set(bt,kt,U.get(bt,kt)):bt===kt?Q.set(bt,kt,1):Q.set(bt,kt,0);return Q}},{key:"upperTriangularMatrix",get:function(){for(var U=this.LU,I=U.rows,T=U.columns,Q=new hr(I,T),bt=0;bt<I;bt++)for(var kt=0;kt<T;kt++)bt<=kt?Q.set(bt,kt,U.get(bt,kt)):Q.set(bt,kt,0);return Q}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),dt}();function In(dt,pt){var U=0;return Math.abs(dt)>Math.abs(pt)?(U=pt/dt,Math.abs(dt)*Math.sqrt(1+U*U)):pt!==0?(U=dt/pt,Math.abs(pt)*Math.sqrt(1+U*U)):0}var kn=function(){function dt(pt){m()(this,dt),pt=Jr.checkMatrix(pt);var U=pt.clone(),I=pt.rows,T=pt.columns,Q=new Float64Array(T),bt,kt,It,Kt;for(It=0;It<T;It++){var Pe=0;for(bt=It;bt<I;bt++)Pe=In(Pe,U.get(bt,It));if(Pe!==0){for(U.get(It,It)<0&&(Pe=-Pe),bt=It;bt<I;bt++)U.set(bt,It,U.get(bt,It)/Pe);for(U.set(It,It,U.get(It,It)+1),kt=It+1;kt<T;kt++){for(Kt=0,bt=It;bt<I;bt++)Kt+=U.get(bt,It)*U.get(bt,kt);for(Kt=-Kt/U.get(It,It),bt=It;bt<I;bt++)U.set(bt,kt,U.get(bt,kt)+Kt*U.get(bt,It))}}Q[It]=-Pe}this.QR=U,this.Rdiag=Q}return M()(dt,[{key:"solve",value:function(U){U=hr.checkMatrix(U);var I=this.QR,T=I.rows;if(U.rows!==T)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var Q=U.columns,bt=U.clone(),kt=I.columns,It,Kt,Pe,_e;for(Pe=0;Pe<kt;Pe++)for(Kt=0;Kt<Q;Kt++){for(_e=0,It=Pe;It<T;It++)_e+=I.get(It,Pe)*bt.get(It,Kt);for(_e=-_e/I.get(Pe,Pe),It=Pe;It<T;It++)bt.set(It,Kt,bt.get(It,Kt)+_e*I.get(It,Pe))}for(Pe=kt-1;Pe>=0;Pe--){for(Kt=0;Kt<Q;Kt++)bt.set(Pe,Kt,bt.get(Pe,Kt)/this.Rdiag[Pe]);for(It=0;It<Pe;It++)for(Kt=0;Kt<Q;Kt++)bt.set(It,Kt,bt.get(It,Kt)-bt.get(Pe,Kt)*I.get(It,Pe))}return bt.subMatrix(0,kt-1,0,Q-1)}},{key:"isFullRank",value:function(){for(var U=this.QR.columns,I=0;I<U;I++)if(this.Rdiag[I]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var U=this.QR,I=U.columns,T=new hr(I,I),Q,bt;for(Q=0;Q<I;Q++)for(bt=0;bt<I;bt++)Q<bt?T.set(Q,bt,U.get(Q,bt)):Q===bt?T.set(Q,bt,this.Rdiag[Q]):T.set(Q,bt,0);return T}},{key:"orthogonalMatrix",get:function(){var U=this.QR,I=U.rows,T=U.columns,Q=new hr(I,T),bt,kt,It,Kt;for(It=T-1;It>=0;It--){for(bt=0;bt<I;bt++)Q.set(bt,It,0);for(Q.set(It,It,1),kt=It;kt<T;kt++)if(U.get(It,It)!==0){for(Kt=0,bt=It;bt<I;bt++)Kt+=U.get(bt,It)*Q.get(bt,kt);for(Kt=-Kt/U.get(It,It),bt=It;bt<I;bt++)Q.set(bt,kt,Q.get(bt,kt)+Kt*U.get(bt,It))}}return Q}}]),dt}(),Zn=function(){function dt(pt){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(this,dt),pt=Jr.checkMatrix(pt),pt.isEmpty())throw new Error("Matrix must be non-empty");var I=pt.rows,T=pt.columns,Q=U.computeLeftSingularVectors,bt=Q===void 0?!0:Q,kt=U.computeRightSingularVectors,It=kt===void 0?!0:kt,Kt=U.autoTranspose,Pe=Kt===void 0?!1:Kt,_e=Boolean(bt),Qe=Boolean(It),Ir=!1,sr;if(I<T)if(!Pe)sr=pt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{sr=pt.transpose(),I=sr.rows,T=sr.columns,Ir=!0;var Hr=_e;_e=Qe,Qe=Hr}else sr=pt.clone();for(var xn=Math.min(I,T),ze=Math.min(I+1,T),ur=new Float64Array(ze),Sr=new hr(I,xn),Nr=new hr(T,T),$t=new Float64Array(T),Ct=new Float64Array(I),te=new Float64Array(ze),ge=0;ge<ze;ge++)te[ge]=ge;for(var ie=Math.min(I-1,T),Te=Math.max(0,Math.min(T-2,I)),Je=Math.max(ie,Te),tr=0;tr<Je;tr++){if(tr<ie){ur[tr]=0;for(var Gr=tr;Gr<I;Gr++)ur[tr]=In(ur[tr],sr.get(Gr,tr));if(ur[tr]!==0){sr.get(tr,tr)<0&&(ur[tr]=-ur[tr]);for(var cn=tr;cn<I;cn++)sr.set(cn,tr,sr.get(cn,tr)/ur[tr]);sr.set(tr,tr,sr.get(tr,tr)+1)}ur[tr]=-ur[tr]}for(var qr=tr+1;qr<T;qr++){if(tr<ie&&ur[tr]!==0){for(var Fn=0,Mn=tr;Mn<I;Mn++)Fn+=sr.get(Mn,tr)*sr.get(Mn,qr);Fn=-Fn/sr.get(tr,tr);for(var ia=tr;ia<I;ia++)sr.set(ia,qr,sr.get(ia,qr)+Fn*sr.get(ia,tr))}$t[qr]=sr.get(tr,qr)}if(_e&&tr<ie)for(var Sa=tr;Sa<I;Sa++)Sr.set(Sa,tr,sr.get(Sa,tr));if(tr<Te){$t[tr]=0;for(var Ca=tr+1;Ca<T;Ca++)$t[tr]=In($t[tr],$t[Ca]);if($t[tr]!==0){$t[tr+1]<0&&($t[tr]=0-$t[tr]);for(var ca=tr+1;ca<T;ca++)$t[ca]/=$t[tr];$t[tr+1]+=1}if($t[tr]=-$t[tr],tr+1<I&&$t[tr]!==0){for(var ho=tr+1;ho<I;ho++)Ct[ho]=0;for(var qa=tr+1;qa<I;qa++)for(var Ha=tr+1;Ha<T;Ha++)Ct[qa]+=$t[Ha]*sr.get(qa,Ha);for(var Ni=tr+1;Ni<T;Ni++)for(var qo=-$t[Ni]/$t[tr+1],Pi=tr+1;Pi<I;Pi++)sr.set(Pi,Ni,sr.get(Pi,Ni)+qo*Ct[Pi])}if(Qe)for(var zi=tr+1;zi<T;zi++)Nr.set(zi,tr,$t[zi])}}var ua=Math.min(T,I+1);if(ie<T&&(ur[ie]=sr.get(ie,ie)),I<ua&&(ur[ua-1]=0),Te+1<ua&&($t[Te]=sr.get(Te,ua-1)),$t[ua-1]=0,_e){for(var ro=ie;ro<xn;ro++){for(var zo=0;zo<I;zo++)Sr.set(zo,ro,0);Sr.set(ro,ro,1)}for(var Da=ie-1;Da>=0;Da--)if(ur[Da]!==0){for(var Co=Da+1;Co<xn;Co++){for(var To=0,Io=Da;Io<I;Io++)To+=Sr.get(Io,Da)*Sr.get(Io,Co);To=-To/Sr.get(Da,Da);for(var bi=Da;bi<I;bi++)Sr.set(bi,Co,Sr.get(bi,Co)+To*Sr.get(bi,Da))}for(var Ui=Da;Ui<I;Ui++)Sr.set(Ui,Da,-Sr.get(Ui,Da));Sr.set(Da,Da,1+Sr.get(Da,Da));for(var Eo=0;Eo<Da-1;Eo++)Sr.set(Eo,Da,0)}else{for(var os=0;os<I;os++)Sr.set(os,Da,0);Sr.set(Da,Da,1)}}if(Qe)for(var ai=T-1;ai>=0;ai--){if(ai<Te&&$t[ai]!==0)for(var xi=ai+1;xi<T;xi++){for(var mn=0,Oo=ai+1;Oo<T;Oo++)mn+=Nr.get(Oo,ai)*Nr.get(Oo,xi);mn=-mn/Nr.get(ai+1,ai);for(var wo=ai+1;wo<T;wo++)Nr.set(wo,xi,Nr.get(wo,xi)+mn*Nr.get(wo,ai))}for(var no=0;no<T;no++)Nr.set(no,ai,0);Nr.set(ai,ai,1)}for(var Lo=ua-1,Uo=0,ss=Number.EPSILON;ua>0;){var wn=void 0,Ja=void 0;for(wn=ua-2;wn>=-1&&wn!==-1;wn--){var Ki=Number.MIN_VALUE+ss*Math.abs(ur[wn]+Math.abs(ur[wn+1]));if(Math.abs($t[wn])<=Ki||Number.isNaN($t[wn])){$t[wn]=0;break}}if(wn===ua-2)Ja=4;else{var Ka=void 0;for(Ka=ua-1;Ka>=wn&&Ka!==wn;Ka--){var _o=(Ka!==ua?Math.abs($t[Ka]):0)+(Ka!==wn+1?Math.abs($t[Ka-1]):0);if(Math.abs(ur[Ka])<=ss*_o){ur[Ka]=0;break}}Ka===wn?Ja=3:Ka===ua-1?Ja=1:(Ja=2,wn=Ka)}switch(wn++,Ja){case 1:{var Jo=$t[ua-2];$t[ua-2]=0;for(var ki=ua-2;ki>=wn;ki--){var Wo=In(ur[ki],Jo),Xo=ur[ki]/Wo,So=Jo/Wo;if(ur[ki]=Wo,ki!==wn&&(Jo=-So*$t[ki-1],$t[ki-1]=Xo*$t[ki-1]),Qe)for(var ga=0;ga<T;ga++)Wo=Xo*Nr.get(ga,ki)+So*Nr.get(ga,ua-1),Nr.set(ga,ua-1,-So*Nr.get(ga,ki)+Xo*Nr.get(ga,ua-1)),Nr.set(ga,ki,Wo)}break}case 2:{var us=$t[wn-1];$t[wn-1]=0;for(var Zi=wn;Zi<ua;Zi++){var Ri=In(ur[Zi],us),vo=ur[Zi]/Ri,Yo=us/Ri;if(ur[Zi]=Ri,us=-Yo*$t[Zi],$t[Zi]=vo*$t[Zi],_e)for(var Ei=0;Ei<I;Ei++)Ri=vo*Sr.get(Ei,Zi)+Yo*Sr.get(Ei,wn-1),Sr.set(Ei,wn-1,-Yo*Sr.get(Ei,Zi)+vo*Sr.get(Ei,wn-1)),Sr.set(Ei,Zi,Ri)}break}case 3:{var Wi=Math.max(Math.abs(ur[ua-1]),Math.abs(ur[ua-2]),Math.abs($t[ua-2]),Math.abs(ur[wn]),Math.abs($t[wn])),Za=ur[ua-1]/Wi,Vo=ur[ua-2]/Wi,Xi=$t[ua-2]/Wi,jo=ur[wn]/Wi,ao=$t[wn]/Wi,Yi=((Vo+Za)*(Vo-Za)+Xi*Xi)/2,io=Za*Xi*(Za*Xi),go=0;(Yi!==0||io!==0)&&(Yi<0?go=0-Math.sqrt(Yi*Yi+io):go=Math.sqrt(Yi*Yi+io),go=io/(Yi+go));for(var po=(jo+Za)*(jo-Za)+go,$i=jo*ao,la=wn;la<ua-1;la++){var ti=In(po,$i);ti===0&&(ti=Number.MIN_VALUE);var gi=po/ti,ta=$i/ti;if(la!==wn&&($t[la-1]=ti),po=gi*ur[la]+ta*$t[la],$t[la]=gi*$t[la]-ta*ur[la],$i=ta*ur[la+1],ur[la+1]=gi*ur[la+1],Qe)for(var Qi=0;Qi<T;Qi++)ti=gi*Nr.get(Qi,la)+ta*Nr.get(Qi,la+1),Nr.set(Qi,la+1,-ta*Nr.get(Qi,la)+gi*Nr.get(Qi,la+1)),Nr.set(Qi,la,ti);if(ti=In(po,$i),ti===0&&(ti=Number.MIN_VALUE),gi=po/ti,ta=$i/ti,ur[la]=ti,po=gi*$t[la]+ta*ur[la+1],ur[la+1]=-ta*$t[la]+gi*ur[la+1],$i=ta*$t[la+1],$t[la+1]=gi*$t[la+1],_e&&la<I-1)for(var yo=0;yo<I;yo++)ti=gi*Sr.get(yo,la)+ta*Sr.get(yo,la+1),Sr.set(yo,la+1,-ta*Sr.get(yo,la)+gi*Sr.get(yo,la+1)),Sr.set(yo,la,ti)}$t[ua-2]=po,Uo=Uo+1;break}case 4:{if(ur[wn]<=0&&(ur[wn]=ur[wn]<0?-ur[wn]:0,Qe))for(var ii=0;ii<=Lo;ii++)Nr.set(ii,wn,-Nr.get(ii,wn));for(;wn<Lo&&!(ur[wn]>=ur[wn+1]);){var Mo=ur[wn];if(ur[wn]=ur[wn+1],ur[wn+1]=Mo,Qe&&wn<T-1)for(var Bi=0;Bi<T;Bi++)Mo=Nr.get(Bi,wn+1),Nr.set(Bi,wn+1,Nr.get(Bi,wn)),Nr.set(Bi,wn,Mo);if(_e&&wn<I-1)for(var Fi=0;Fi<I;Fi++)Mo=Sr.get(Fi,wn+1),Sr.set(Fi,wn+1,Sr.get(Fi,wn)),Sr.set(Fi,wn,Mo);wn++}Uo=0,ua--;break}}}if(Ir){var Do=Nr;Nr=Sr,Sr=Do}this.m=I,this.n=T,this.s=ur,this.U=Sr,this.V=Nr}return M()(dt,[{key:"solve",value:function(U){for(var I=U,T=this.threshold,Q=this.s.length,bt=hr.zeros(Q,Q),kt=0;kt<Q;kt++)Math.abs(this.s[kt])<=T?bt.set(kt,kt,0):bt.set(kt,kt,1/this.s[kt]);for(var It=this.U,Kt=this.rightSingularVectors,Pe=Kt.mmul(bt),_e=Kt.rows,Qe=It.rows,Ir=hr.zeros(_e,Qe),sr=0;sr<_e;sr++)for(var Hr=0;Hr<Qe;Hr++){for(var xn=0,ze=0;ze<Q;ze++)xn+=Pe.get(sr,ze)*It.get(Hr,ze);Ir.set(sr,Hr,xn)}return Ir.mmul(I)}},{key:"solveForDiagonal",value:function(U){return this.solve(hr.diag(U))}},{key:"inverse",value:function(){for(var U=this.V,I=this.threshold,T=U.rows,Q=U.columns,bt=new hr(T,this.s.length),kt=0;kt<T;kt++)for(var It=0;It<Q;It++)Math.abs(this.s[It])>I&&bt.set(kt,It,U.get(kt,It)/this.s[It]);for(var Kt=this.U,Pe=Kt.rows,_e=Kt.columns,Qe=new hr(T,Pe),Ir=0;Ir<T;Ir++)for(var sr=0;sr<Pe;sr++){for(var Hr=0,xn=0;xn<_e;xn++)Hr+=bt.get(Ir,xn)*Kt.get(sr,xn);Qe.set(Ir,sr,Hr)}return Qe}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var U=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,I=0,T=this.s,Q=0,bt=T.length;Q<bt;Q++)T[Q]>U&&I++;return I}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return hr.diag(this.s)}}]),dt}();function Yn(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return dt=Jr.checkMatrix(dt),pt?new Zn(dt).inverse():Ra(dt,hr.eye(dt.rows))}function Ra(dt,pt){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return dt=Jr.checkMatrix(dt),pt=Jr.checkMatrix(pt),U?new Zn(dt).solve(pt):dt.isSquare()?new Tn(dt).solve(pt):new kn(dt).solve(pt)}function gn(dt){if(dt=hr.checkMatrix(dt),dt.isSquare()){if(dt.columns===0)return 1;var pt,U,I,T;if(dt.columns===2)return pt=dt.get(0,0),U=dt.get(0,1),I=dt.get(1,0),T=dt.get(1,1),pt*T-U*I;if(dt.columns===3){var Q,bt,kt;return Q=new Ea(dt,[1,2],[1,2]),bt=new Ea(dt,[1,2],[0,2]),kt=new Ea(dt,[1,2],[0,1]),pt=dt.get(0,0),U=dt.get(0,1),I=dt.get(0,2),pt*gn(Q)-U*gn(bt)+I*gn(kt)}else return new Tn(dt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function zn(dt,pt){for(var U=[],I=0;I<dt;I++)I!==pt&&U.push(I);return U}function Un(dt,pt,U){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(dt>T)return new Array(pt.rows+1).fill(0);for(var Q=pt.addRow(U,[0]),bt=0;bt<Q.rows;bt++)Math.abs(Q.get(bt,0))<I&&Q.set(bt,0,0);return Q.to1DArray()}function _n(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=pt.thresholdValue,I=U===void 0?1e-9:U,T=pt.thresholdError,Q=T===void 0?1e-9:T;dt=hr.checkMatrix(dt);for(var bt=dt.rows,kt=new hr(bt,bt),It=0;It<bt;It++){var Kt=hr.columnVector(dt.getRow(It)),Pe=dt.subMatrixRow(zn(bt,It)).transpose(),_e=new Zn(Pe),Qe=_e.solve(Kt),Ir=hr.sub(Kt,Pe.mmul(Qe)).abs().max();kt.setRow(It,Un(Ir,Qe,It,I,Q))}return kt}function aa(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(dt=hr.checkMatrix(dt),dt.isEmpty())return dt.transpose();for(var U=new Zn(dt,{autoTranspose:!0}),I=U.leftSingularVectors,T=U.rightSingularVectors,Q=U.diagonal,bt=0;bt<Q.length;bt++)Math.abs(Q[bt])>pt?Q[bt]=1/Q[bt]:Q[bt]=0;return T.mmul(hr.diag(Q).mmul(I.transpose()))}function $(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};dt=new hr(dt);var I=!1;if(b()(pt)==="object"&&!hr.isMatrix(pt)&&!S(pt)?(U=pt,pt=dt,I=!0):pt=new hr(pt),dt.rows!==pt.rows)throw new TypeError("Both matrices must have the same number of rows");var T=U,Q=T.center,bt=Q===void 0?!0:Q;bt&&(dt=dt.center("column"),I||(pt=pt.center("column")));for(var kt=dt.transpose().mmul(pt),It=0;It<kt.rows;It++)for(var Kt=0;Kt<kt.columns;Kt++)kt.set(It,Kt,kt.get(It,Kt)*(1/(dt.rows-1)));return kt}function Re(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};dt=new hr(dt);var I=!1;if(b()(pt)==="object"&&!hr.isMatrix(pt)&&!S(pt)?(U=pt,pt=dt,I=!0):pt=new hr(pt),dt.rows!==pt.rows)throw new TypeError("Both matrices must have the same number of rows");var T=U,Q=T.center,bt=Q===void 0?!0:Q,kt=T.scale,It=kt===void 0?!0:kt;bt&&(dt.center("column"),I||pt.center("column")),It&&(dt.scale("column"),I||pt.scale("column"));for(var Kt=dt.standardDeviation("column",{unbiased:!0}),Pe=I?Kt:pt.standardDeviation("column",{unbiased:!0}),_e=dt.transpose().mmul(pt),Qe=0;Qe<_e.rows;Qe++)for(var Ir=0;Ir<_e.columns;Ir++)_e.set(Qe,Ir,_e.get(Qe,Ir)*(1/(Kt[Qe]*Pe[Ir]))*(1/(dt.rows-1)));return _e}var be=function(){function dt(pt){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m()(this,dt);var I=U.assumeSymmetric,T=I===void 0?!1:I;if(pt=Jr.checkMatrix(pt),!pt.isSquare())throw new Error("Matrix is not a square matrix");if(pt.isEmpty())throw new Error("Matrix must be non-empty");var Q=pt.columns,bt=new hr(Q,Q),kt=new Float64Array(Q),It=new Float64Array(Q),Kt=pt,Pe,_e,Qe=!1;if(T?Qe=!0:Qe=pt.isSymmetric(),Qe){for(Pe=0;Pe<Q;Pe++)for(_e=0;_e<Q;_e++)bt.set(Pe,_e,Kt.get(Pe,_e));Ke(Q,It,kt,bt),Ze(Q,It,kt,bt)}else{var Ir=new hr(Q,Q),sr=new Float64Array(Q);for(_e=0;_e<Q;_e++)for(Pe=0;Pe<Q;Pe++)Ir.set(Pe,_e,Kt.get(Pe,_e));Cr(Q,Ir,sr,bt),Mr(Q,It,kt,bt,Ir)}this.n=Q,this.e=It,this.d=kt,this.V=bt}return M()(dt,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var U=this.n,I=this.e,T=this.d,Q=new hr(U,U),bt,kt;for(bt=0;bt<U;bt++){for(kt=0;kt<U;kt++)Q.set(bt,kt,0);Q.set(bt,bt,T[bt]),I[bt]>0?Q.set(bt,bt+1,I[bt]):I[bt]<0&&Q.set(bt,bt-1,I[bt])}return Q}}]),dt}();function Ke(dt,pt,U,I){var T,Q,bt,kt,It,Kt,Pe,_e;for(It=0;It<dt;It++)U[It]=I.get(dt-1,It);for(kt=dt-1;kt>0;kt--){for(_e=0,bt=0,Kt=0;Kt<kt;Kt++)_e=_e+Math.abs(U[Kt]);if(_e===0)for(pt[kt]=U[kt-1],It=0;It<kt;It++)U[It]=I.get(kt-1,It),I.set(kt,It,0),I.set(It,kt,0);else{for(Kt=0;Kt<kt;Kt++)U[Kt]/=_e,bt+=U[Kt]*U[Kt];for(T=U[kt-1],Q=Math.sqrt(bt),T>0&&(Q=-Q),pt[kt]=_e*Q,bt=bt-T*Q,U[kt-1]=T-Q,It=0;It<kt;It++)pt[It]=0;for(It=0;It<kt;It++){for(T=U[It],I.set(It,kt,T),Q=pt[It]+I.get(It,It)*T,Kt=It+1;Kt<=kt-1;Kt++)Q+=I.get(Kt,It)*U[Kt],pt[Kt]+=I.get(Kt,It)*T;pt[It]=Q}for(T=0,It=0;It<kt;It++)pt[It]/=bt,T+=pt[It]*U[It];for(Pe=T/(bt+bt),It=0;It<kt;It++)pt[It]-=Pe*U[It];for(It=0;It<kt;It++){for(T=U[It],Q=pt[It],Kt=It;Kt<=kt-1;Kt++)I.set(Kt,It,I.get(Kt,It)-(T*pt[Kt]+Q*U[Kt]));U[It]=I.get(kt-1,It),I.set(kt,It,0)}}U[kt]=bt}for(kt=0;kt<dt-1;kt++){if(I.set(dt-1,kt,I.get(kt,kt)),I.set(kt,kt,1),bt=U[kt+1],bt!==0){for(Kt=0;Kt<=kt;Kt++)U[Kt]=I.get(Kt,kt+1)/bt;for(It=0;It<=kt;It++){for(Q=0,Kt=0;Kt<=kt;Kt++)Q+=I.get(Kt,kt+1)*I.get(Kt,It);for(Kt=0;Kt<=kt;Kt++)I.set(Kt,It,I.get(Kt,It)-Q*U[Kt])}}for(Kt=0;Kt<=kt;Kt++)I.set(Kt,kt+1,0)}for(It=0;It<dt;It++)U[It]=I.get(dt-1,It),I.set(dt-1,It,0);I.set(dt-1,dt-1,1),pt[0]=0}function Ze(dt,pt,U,I){var T,Q,bt,kt,It,Kt,Pe,_e,Qe,Ir,sr,Hr,xn,ze,ur,Sr,Nr;for(bt=1;bt<dt;bt++)pt[bt-1]=pt[bt];pt[dt-1]=0;var $t=0,Ct=0,te=Number.EPSILON;for(Kt=0;Kt<dt;Kt++){for(Ct=Math.max(Ct,Math.abs(U[Kt])+Math.abs(pt[Kt])),Pe=Kt;Pe<dt&&!(Math.abs(pt[Pe])<=te*Ct);)Pe++;if(Pe>Kt){Nr=0;do{for(Nr=Nr+1,T=U[Kt],_e=(U[Kt+1]-T)/(2*pt[Kt]),Qe=In(_e,1),_e<0&&(Qe=-Qe),U[Kt]=pt[Kt]/(_e+Qe),U[Kt+1]=pt[Kt]*(_e+Qe),Ir=U[Kt+1],Q=T-U[Kt],bt=Kt+2;bt<dt;bt++)U[bt]-=Q;for($t=$t+Q,_e=U[Pe],sr=1,Hr=sr,xn=sr,ze=pt[Kt+1],ur=0,Sr=0,bt=Pe-1;bt>=Kt;bt--)for(xn=Hr,Hr=sr,Sr=ur,T=sr*pt[bt],Q=sr*_e,Qe=In(_e,pt[bt]),pt[bt+1]=ur*Qe,ur=pt[bt]/Qe,sr=_e/Qe,_e=sr*U[bt]-ur*T,U[bt+1]=Q+ur*(sr*T+ur*U[bt]),It=0;It<dt;It++)Q=I.get(It,bt+1),I.set(It,bt+1,ur*I.get(It,bt)+sr*Q),I.set(It,bt,sr*I.get(It,bt)-ur*Q);_e=-ur*Sr*xn*ze*pt[Kt]/Ir,pt[Kt]=ur*_e,U[Kt]=sr*_e}while(Math.abs(pt[Kt])>te*Ct)}U[Kt]=U[Kt]+$t,pt[Kt]=0}for(bt=0;bt<dt-1;bt++){for(It=bt,_e=U[bt],kt=bt+1;kt<dt;kt++)U[kt]<_e&&(It=kt,_e=U[kt]);if(It!==bt)for(U[It]=U[bt],U[bt]=_e,kt=0;kt<dt;kt++)_e=I.get(kt,bt),I.set(kt,bt,I.get(kt,It)),I.set(kt,It,_e)}}function Cr(dt,pt,U,I){var T=0,Q=dt-1,bt,kt,It,Kt,Pe,_e,Qe;for(_e=T+1;_e<=Q-1;_e++){for(Qe=0,Kt=_e;Kt<=Q;Kt++)Qe=Qe+Math.abs(pt.get(Kt,_e-1));if(Qe!==0){for(It=0,Kt=Q;Kt>=_e;Kt--)U[Kt]=pt.get(Kt,_e-1)/Qe,It+=U[Kt]*U[Kt];for(kt=Math.sqrt(It),U[_e]>0&&(kt=-kt),It=It-U[_e]*kt,U[_e]=U[_e]-kt,Pe=_e;Pe<dt;Pe++){for(bt=0,Kt=Q;Kt>=_e;Kt--)bt+=U[Kt]*pt.get(Kt,Pe);for(bt=bt/It,Kt=_e;Kt<=Q;Kt++)pt.set(Kt,Pe,pt.get(Kt,Pe)-bt*U[Kt])}for(Kt=0;Kt<=Q;Kt++){for(bt=0,Pe=Q;Pe>=_e;Pe--)bt+=U[Pe]*pt.get(Kt,Pe);for(bt=bt/It,Pe=_e;Pe<=Q;Pe++)pt.set(Kt,Pe,pt.get(Kt,Pe)-bt*U[Pe])}U[_e]=Qe*U[_e],pt.set(_e,_e-1,Qe*kt)}}for(Kt=0;Kt<dt;Kt++)for(Pe=0;Pe<dt;Pe++)I.set(Kt,Pe,Kt===Pe?1:0);for(_e=Q-1;_e>=T+1;_e--)if(pt.get(_e,_e-1)!==0){for(Kt=_e+1;Kt<=Q;Kt++)U[Kt]=pt.get(Kt,_e-1);for(Pe=_e;Pe<=Q;Pe++){for(kt=0,Kt=_e;Kt<=Q;Kt++)kt+=U[Kt]*I.get(Kt,Pe);for(kt=kt/U[_e]/pt.get(_e,_e-1),Kt=_e;Kt<=Q;Kt++)I.set(Kt,Pe,I.get(Kt,Pe)+kt*U[Kt])}}}function Mr(dt,pt,U,I,T){var Q=dt-1,bt=0,kt=dt-1,It=Number.EPSILON,Kt=0,Pe=0,_e=0,Qe=0,Ir=0,sr=0,Hr=0,xn=0,ze,ur,Sr,Nr,$t,Ct,te,ge,ie,Te,Je,tr,Gr,cn,qr;for(ze=0;ze<dt;ze++)for((ze<bt||ze>kt)&&(U[ze]=T.get(ze,ze),pt[ze]=0),ur=Math.max(ze-1,0);ur<dt;ur++)Pe=Pe+Math.abs(T.get(ze,ur));for(;Q>=bt;){for(Nr=Q;Nr>bt&&(sr=Math.abs(T.get(Nr-1,Nr-1))+Math.abs(T.get(Nr,Nr)),sr===0&&(sr=Pe),!(Math.abs(T.get(Nr,Nr-1))<It*sr));)Nr--;if(Nr===Q)T.set(Q,Q,T.get(Q,Q)+Kt),U[Q]=T.get(Q,Q),pt[Q]=0,Q--,xn=0;else if(Nr===Q-1){if(te=T.get(Q,Q-1)*T.get(Q-1,Q),_e=(T.get(Q-1,Q-1)-T.get(Q,Q))/2,Qe=_e*_e+te,Hr=Math.sqrt(Math.abs(Qe)),T.set(Q,Q,T.get(Q,Q)+Kt),T.set(Q-1,Q-1,T.get(Q-1,Q-1)+Kt),ge=T.get(Q,Q),Qe>=0){for(Hr=_e>=0?_e+Hr:_e-Hr,U[Q-1]=ge+Hr,U[Q]=U[Q-1],Hr!==0&&(U[Q]=ge-te/Hr),pt[Q-1]=0,pt[Q]=0,ge=T.get(Q,Q-1),sr=Math.abs(ge)+Math.abs(Hr),_e=ge/sr,Qe=Hr/sr,Ir=Math.sqrt(_e*_e+Qe*Qe),_e=_e/Ir,Qe=Qe/Ir,ur=Q-1;ur<dt;ur++)Hr=T.get(Q-1,ur),T.set(Q-1,ur,Qe*Hr+_e*T.get(Q,ur)),T.set(Q,ur,Qe*T.get(Q,ur)-_e*Hr);for(ze=0;ze<=Q;ze++)Hr=T.get(ze,Q-1),T.set(ze,Q-1,Qe*Hr+_e*T.get(ze,Q)),T.set(ze,Q,Qe*T.get(ze,Q)-_e*Hr);for(ze=bt;ze<=kt;ze++)Hr=I.get(ze,Q-1),I.set(ze,Q-1,Qe*Hr+_e*I.get(ze,Q)),I.set(ze,Q,Qe*I.get(ze,Q)-_e*Hr)}else U[Q-1]=ge+_e,U[Q]=ge+_e,pt[Q-1]=Hr,pt[Q]=-Hr;Q=Q-2,xn=0}else{if(ge=T.get(Q,Q),ie=0,te=0,Nr<Q&&(ie=T.get(Q-1,Q-1),te=T.get(Q,Q-1)*T.get(Q-1,Q)),xn===10){for(Kt+=ge,ze=bt;ze<=Q;ze++)T.set(ze,ze,T.get(ze,ze)-ge);sr=Math.abs(T.get(Q,Q-1))+Math.abs(T.get(Q-1,Q-2)),ge=ie=.75*sr,te=-.4375*sr*sr}if(xn===30&&(sr=(ie-ge)/2,sr=sr*sr+te,sr>0)){for(sr=Math.sqrt(sr),ie<ge&&(sr=-sr),sr=ge-te/((ie-ge)/2+sr),ze=bt;ze<=Q;ze++)T.set(ze,ze,T.get(ze,ze)-sr);Kt+=sr,ge=ie=te=.964}for(xn=xn+1,$t=Q-2;$t>=Nr&&(Hr=T.get($t,$t),Ir=ge-Hr,sr=ie-Hr,_e=(Ir*sr-te)/T.get($t+1,$t)+T.get($t,$t+1),Qe=T.get($t+1,$t+1)-Hr-Ir-sr,Ir=T.get($t+2,$t+1),sr=Math.abs(_e)+Math.abs(Qe)+Math.abs(Ir),_e=_e/sr,Qe=Qe/sr,Ir=Ir/sr,!($t===Nr||Math.abs(T.get($t,$t-1))*(Math.abs(Qe)+Math.abs(Ir))<It*(Math.abs(_e)*(Math.abs(T.get($t-1,$t-1))+Math.abs(Hr)+Math.abs(T.get($t+1,$t+1))))));)$t--;for(ze=$t+2;ze<=Q;ze++)T.set(ze,ze-2,0),ze>$t+2&&T.set(ze,ze-3,0);for(Sr=$t;Sr<=Q-1&&(cn=Sr!==Q-1,Sr!==$t&&(_e=T.get(Sr,Sr-1),Qe=T.get(Sr+1,Sr-1),Ir=cn?T.get(Sr+2,Sr-1):0,ge=Math.abs(_e)+Math.abs(Qe)+Math.abs(Ir),ge!==0&&(_e=_e/ge,Qe=Qe/ge,Ir=Ir/ge)),ge!==0);Sr++)if(sr=Math.sqrt(_e*_e+Qe*Qe+Ir*Ir),_e<0&&(sr=-sr),sr!==0){for(Sr!==$t?T.set(Sr,Sr-1,-sr*ge):Nr!==$t&&T.set(Sr,Sr-1,-T.get(Sr,Sr-1)),_e=_e+sr,ge=_e/sr,ie=Qe/sr,Hr=Ir/sr,Qe=Qe/_e,Ir=Ir/_e,ur=Sr;ur<dt;ur++)_e=T.get(Sr,ur)+Qe*T.get(Sr+1,ur),cn&&(_e=_e+Ir*T.get(Sr+2,ur),T.set(Sr+2,ur,T.get(Sr+2,ur)-_e*Hr)),T.set(Sr,ur,T.get(Sr,ur)-_e*ge),T.set(Sr+1,ur,T.get(Sr+1,ur)-_e*ie);for(ze=0;ze<=Math.min(Q,Sr+3);ze++)_e=ge*T.get(ze,Sr)+ie*T.get(ze,Sr+1),cn&&(_e=_e+Hr*T.get(ze,Sr+2),T.set(ze,Sr+2,T.get(ze,Sr+2)-_e*Ir)),T.set(ze,Sr,T.get(ze,Sr)-_e),T.set(ze,Sr+1,T.get(ze,Sr+1)-_e*Qe);for(ze=bt;ze<=kt;ze++)_e=ge*I.get(ze,Sr)+ie*I.get(ze,Sr+1),cn&&(_e=_e+Hr*I.get(ze,Sr+2),I.set(ze,Sr+2,I.get(ze,Sr+2)-_e*Ir)),I.set(ze,Sr,I.get(ze,Sr)-_e),I.set(ze,Sr+1,I.get(ze,Sr+1)-_e*Qe)}}}if(Pe!==0){for(Q=dt-1;Q>=0;Q--)if(_e=U[Q],Qe=pt[Q],Qe===0)for(Nr=Q,T.set(Q,Q,1),ze=Q-1;ze>=0;ze--){for(te=T.get(ze,ze)-_e,Ir=0,ur=Nr;ur<=Q;ur++)Ir=Ir+T.get(ze,ur)*T.get(ur,Q);if(pt[ze]<0)Hr=te,sr=Ir;else if(Nr=ze,pt[ze]===0?T.set(ze,Q,te!==0?-Ir/te:-Ir/(It*Pe)):(ge=T.get(ze,ze+1),ie=T.get(ze+1,ze),Qe=(U[ze]-_e)*(U[ze]-_e)+pt[ze]*pt[ze],Ct=(ge*sr-Hr*Ir)/Qe,T.set(ze,Q,Ct),T.set(ze+1,Q,Math.abs(ge)>Math.abs(Hr)?(-Ir-te*Ct)/ge:(-sr-ie*Ct)/Hr)),Ct=Math.abs(T.get(ze,Q)),It*Ct*Ct>1)for(ur=ze;ur<=Q;ur++)T.set(ur,Q,T.get(ur,Q)/Ct)}else if(Qe<0)for(Nr=Q-1,Math.abs(T.get(Q,Q-1))>Math.abs(T.get(Q-1,Q))?(T.set(Q-1,Q-1,Qe/T.get(Q,Q-1)),T.set(Q-1,Q,-(T.get(Q,Q)-_e)/T.get(Q,Q-1))):(qr=Vr(0,-T.get(Q-1,Q),T.get(Q-1,Q-1)-_e,Qe),T.set(Q-1,Q-1,qr[0]),T.set(Q-1,Q,qr[1])),T.set(Q,Q-1,0),T.set(Q,Q,1),ze=Q-2;ze>=0;ze--){for(Te=0,Je=0,ur=Nr;ur<=Q;ur++)Te=Te+T.get(ze,ur)*T.get(ur,Q-1),Je=Je+T.get(ze,ur)*T.get(ur,Q);if(te=T.get(ze,ze)-_e,pt[ze]<0)Hr=te,Ir=Te,sr=Je;else if(Nr=ze,pt[ze]===0?(qr=Vr(-Te,-Je,te,Qe),T.set(ze,Q-1,qr[0]),T.set(ze,Q,qr[1])):(ge=T.get(ze,ze+1),ie=T.get(ze+1,ze),tr=(U[ze]-_e)*(U[ze]-_e)+pt[ze]*pt[ze]-Qe*Qe,Gr=(U[ze]-_e)*2*Qe,tr===0&&Gr===0&&(tr=It*Pe*(Math.abs(te)+Math.abs(Qe)+Math.abs(ge)+Math.abs(ie)+Math.abs(Hr))),qr=Vr(ge*Ir-Hr*Te+Qe*Je,ge*sr-Hr*Je-Qe*Te,tr,Gr),T.set(ze,Q-1,qr[0]),T.set(ze,Q,qr[1]),Math.abs(ge)>Math.abs(Hr)+Math.abs(Qe)?(T.set(ze+1,Q-1,(-Te-te*T.get(ze,Q-1)+Qe*T.get(ze,Q))/ge),T.set(ze+1,Q,(-Je-te*T.get(ze,Q)-Qe*T.get(ze,Q-1))/ge)):(qr=Vr(-Ir-ie*T.get(ze,Q-1),-sr-ie*T.get(ze,Q),Hr,Qe),T.set(ze+1,Q-1,qr[0]),T.set(ze+1,Q,qr[1]))),Ct=Math.max(Math.abs(T.get(ze,Q-1)),Math.abs(T.get(ze,Q))),It*Ct*Ct>1)for(ur=ze;ur<=Q;ur++)T.set(ur,Q-1,T.get(ur,Q-1)/Ct),T.set(ur,Q,T.get(ur,Q)/Ct)}for(ze=0;ze<dt;ze++)if(ze<bt||ze>kt)for(ur=ze;ur<dt;ur++)I.set(ze,ur,T.get(ze,ur));for(ur=dt-1;ur>=bt;ur--)for(ze=bt;ze<=kt;ze++){for(Hr=0,Sr=bt;Sr<=Math.min(ur,kt);Sr++)Hr=Hr+I.get(ze,Sr)*T.get(Sr,ur);I.set(ze,ur,Hr)}}}function Vr(dt,pt,U,I){var T,Q;return Math.abs(U)>Math.abs(I)?(T=I/U,Q=U+T*I,[(dt+T*pt)/Q,(pt-T*dt)/Q]):(T=U/I,Q=I+T*U,[(T*dt+pt)/Q,(T*pt-dt)/Q])}var tn=function(){function dt(pt){if(m()(this,dt),pt=Jr.checkMatrix(pt),!pt.isSymmetric())throw new Error("Matrix is not symmetric");var U=pt,I=U.rows,T=new hr(I,I),Q=!0,bt,kt,It;for(kt=0;kt<I;kt++){var Kt=0;for(It=0;It<kt;It++){var Pe=0;for(bt=0;bt<It;bt++)Pe+=T.get(It,bt)*T.get(kt,bt);Pe=(U.get(kt,It)-Pe)/T.get(It,It),T.set(kt,It,Pe),Kt=Kt+Pe*Pe}for(Kt=U.get(kt,kt)-Kt,Q&=Kt>0,T.set(kt,kt,Math.sqrt(Math.max(Kt,0))),It=kt+1;It<I;It++)T.set(kt,It,0)}this.L=T,this.positiveDefinite=Boolean(Q)}return M()(dt,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(U){U=Jr.checkMatrix(U);var I=this.L,T=I.rows;if(U.rows!==T)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var Q=U.columns,bt=U.clone(),kt,It,Kt;for(Kt=0;Kt<T;Kt++)for(It=0;It<Q;It++){for(kt=0;kt<Kt;kt++)bt.set(Kt,It,bt.get(Kt,It)-bt.get(kt,It)*I.get(Kt,kt));bt.set(Kt,It,bt.get(Kt,It)/I.get(Kt,Kt))}for(Kt=T-1;Kt>=0;Kt--)for(It=0;It<Q;It++){for(kt=Kt+1;kt<T;kt++)bt.set(Kt,It,bt.get(Kt,It)-bt.get(kt,It)*I.get(kt,Kt));bt.set(Kt,It,bt.get(Kt,It)/I.get(Kt,Kt))}return bt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),dt}(),jr=M()(function dt(pt){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m()(this,dt),pt=Jr.checkMatrix(pt);var I=U.Y,T=U.scaleScores,Q=T===void 0?!1:T,bt=U.maxIterations,kt=bt===void 0?1e3:bt,It=U.terminationCriteria,Kt=It===void 0?1e-10:It,Pe;if(I){if(S(I)&&typeof I[0]=="number"?I=hr.columnVector(I):I=Jr.checkMatrix(I),I.rows!==pt.rows)throw new Error("Y should have the same number of rows as X");Pe=I.getColumnVector(0)}else Pe=pt.getColumnVector(0);for(var _e=1,Qe,Ir,sr,Hr,xn=0;xn<kt&&_e>Kt;xn++)sr=pt.transpose().mmul(Pe).div(Pe.transpose().mmul(Pe).get(0,0)),sr=sr.div(sr.norm()),Qe=pt.mmul(sr).div(sr.transpose().mmul(sr).get(0,0)),xn>0&&(_e=Qe.clone().sub(Hr).pow(2).sum()),Hr=Qe.clone(),I?(Ir=I.transpose().mmul(Qe).div(Qe.transpose().mmul(Qe).get(0,0)),Ir=Ir.div(Ir.norm()),Pe=I.mmul(Ir).div(Ir.transpose().mmul(Ir).get(0,0))):Pe=Qe;if(I){var ze=pt.transpose().mmul(Qe).div(Qe.transpose().mmul(Qe).get(0,0));ze=ze.div(ze.norm());var ur=pt.clone().sub(Qe.clone().mmul(ze.transpose())),Sr=Pe.transpose().mmul(Qe).div(Qe.transpose().mmul(Qe).get(0,0)),Nr=I.clone().sub(Qe.clone().mulS(Sr.get(0,0)).mmul(Ir.transpose()));this.t=Qe,this.p=ze.transpose(),this.w=sr.transpose(),this.q=Ir,this.u=Pe,this.s=Qe.transpose().mmul(Qe),this.xResidual=ur,this.yResidual=Nr,this.betas=Sr}else this.w=sr.transpose(),this.s=Qe.transpose().mmul(Qe).sqrt(),Q?this.t=Qe.clone().div(this.s.get(0,0)):this.t=Qe,this.xResidual=pt.sub(Qe.mmul(sr.transpose()))})},8874:function(Le){"use strict";Le.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Le,F,B){var P=B(8874),W=B(86851),R=Object.hasOwnProperty,L=Object.create(null);for(var k in P)R.call(P,k)&&(L[P[k]]=k);var N=Le.exports={to:{},get:{}};N.get=function(p){var m=p.substring(0,3).toLowerCase(),g,M;switch(m){case"hsl":g=N.get.hsl(p),M="hsl";break;case"hwb":g=N.get.hwb(p),M="hwb";break;default:g=N.get.rgb(p),M="rgb";break}return g?{model:M,value:g}:null},N.get.rgb=function(p){if(!p)return null;var m=/^#([a-f0-9]{3,4})$/i,g=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,M=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,_=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^(\w+)$/,O=[0,0,0,1],y,d,V;if(y=p.match(g)){for(V=y[2],y=y[1],d=0;d<3;d++){var q=d*2;O[d]=parseInt(y.slice(q,q+2),16)}V&&(O[3]=parseInt(V,16)/255)}else if(y=p.match(m)){for(y=y[1],V=y[3],d=0;d<3;d++)O[d]=parseInt(y[d]+y[d],16);V&&(O[3]=parseInt(V+V,16)/255)}else if(y=p.match(M)){for(d=0;d<3;d++)O[d]=parseInt(y[d+1],0);y[4]&&(y[5]?O[3]=parseFloat(y[4])*.01:O[3]=parseFloat(y[4]))}else if(y=p.match(_)){for(d=0;d<3;d++)O[d]=Math.round(parseFloat(y[d+1])*2.55);y[4]&&(y[5]?O[3]=parseFloat(y[4])*.01:O[3]=parseFloat(y[4]))}else return(y=p.match(S))?y[1]==="transparent"?[0,0,0,0]:R.call(P,y[1])?(O=P[y[1]],O[3]=1,O):null:null;for(d=0;d<3;d++)O[d]=E(O[d],0,255);return O[3]=E(O[3],0,1),O},N.get.hsl=function(p){if(!p)return null;var m=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=p.match(m);if(g){var M=parseFloat(g[4]),_=(parseFloat(g[1])%360+360)%360,S=E(parseFloat(g[2]),0,100),O=E(parseFloat(g[3]),0,100),y=E(isNaN(M)?1:M,0,1);return[_,S,O,y]}return null},N.get.hwb=function(p){if(!p)return null;var m=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=p.match(m);if(g){var M=parseFloat(g[4]),_=(parseFloat(g[1])%360+360)%360,S=E(parseFloat(g[2]),0,100),O=E(parseFloat(g[3]),0,100),y=E(isNaN(M)?1:M,0,1);return[_,S,O,y]}return null},N.to.hex=function(){var p=W(arguments);return"#"+b(p[0])+b(p[1])+b(p[2])+(p[3]<1?b(Math.round(p[3]*255)):"")},N.to.rgb=function(){var p=W(arguments);return p.length<4||p[3]===1?"rgb("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+")":"rgba("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+", "+p[3]+")"},N.to.rgb.percent=function(){var p=W(arguments),m=Math.round(p[0]/255*100),g=Math.round(p[1]/255*100),M=Math.round(p[2]/255*100);return p.length<4||p[3]===1?"rgb("+m+"%, "+g+"%, "+M+"%)":"rgba("+m+"%, "+g+"%, "+M+"%, "+p[3]+")"},N.to.hsl=function(){var p=W(arguments);return p.length<4||p[3]===1?"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)":"hsla("+p[0]+", "+p[1]+"%, "+p[2]+"%, "+p[3]+")"},N.to.hwb=function(){var p=W(arguments),m="";return p.length>=4&&p[3]!==1&&(m=", "+p[3]),"hwb("+p[0]+", "+p[1]+"%, "+p[2]+"%"+m+")"},N.to.keyword=function(p){return L[p.slice(0,3)]};function E(p,m,g){return Math.min(Math.max(m,p),g)}function b(p){var m=Math.round(p).toString(16).toUpperCase();return m.length<2?"0"+m:m}},6767:function(Le,F,B){"use strict";var P=B(19818),W=B(80978),R=[].slice,L=["keyword","gray","hex"],k={};Object.keys(W).forEach(function(S){k[R.call(W[S].labels).sort().join("")]=S});var N={};function E(S,O){if(!(this instanceof E))return new E(S,O);if(O&&O in L&&(O=null),O&&!(O in W))throw new Error("Unknown model: "+O);var y,d;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof E)this.model=S.model,this.color=S.color.slice(),this.valpha=S.valpha;else if(typeof S=="string"){var V=P.get(S);if(V===null)throw new Error("Unable to parse color from string: "+S);this.model=V.model,d=W[this.model].channels,this.color=V.value.slice(0,d),this.valpha=typeof V.value[d]=="number"?V.value[d]:1}else if(S.length){this.model=O||"rgb",d=W[this.model].channels;var q=R.call(S,0,d);this.color=_(q,d),this.valpha=typeof S[d]=="number"?S[d]:1}else if(typeof S=="number")S&=16777215,this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;var Y=Object.keys(S);"alpha"in S&&(Y.splice(Y.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);var X=Y.sort().join("");if(!(X in k))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=k[X];var H=W[this.model].labels,J=[];for(y=0;y<H.length;y++)J.push(S[H[y]]);this.color=_(J)}if(N[this.model])for(d=W[this.model].channels,y=0;y<d;y++){var nt=N[this.model][y];nt&&(this.color[y]=nt(this.color[y]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}E.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(S){var O=this.model in P.to?this:this.rgb();O=O.round(typeof S=="number"?S:1);var y=O.valpha===1?O.color:O.color.concat(this.valpha);return P.to[O.model](y)},percentString:function(S){var O=this.rgb().round(typeof S=="number"?S:1),y=O.valpha===1?O.color:O.color.concat(this.valpha);return P.to.rgb.percent(y)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var S={},O=W[this.model].channels,y=W[this.model].labels,d=0;d<O;d++)S[y[d]]=this.color[d];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray:function(){var S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject:function(){var S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round:function(S){return S=Math.max(S||0,0),new E(this.color.map(p(S)).concat(this.valpha),this.model)},alpha:function(S){return arguments.length?new E(this.color.concat(Math.max(0,Math.min(1,S))),this.model):this.valpha},red:m("rgb",0,g(255)),green:m("rgb",1,g(255)),blue:m("rgb",2,g(255)),hue:m(["hsl","hsv","hsl","hwb","hcg"],0,function(S){return(S%360+360)%360}),saturationl:m("hsl",1,g(100)),lightness:m("hsl",2,g(100)),saturationv:m("hsv",1,g(100)),value:m("hsv",2,g(100)),chroma:m("hcg",1,g(100)),gray:m("hcg",2,g(100)),white:m("hwb",1,g(100)),wblack:m("hwb",2,g(100)),cyan:m("cmyk",0,g(100)),magenta:m("cmyk",1,g(100)),yellow:m("cmyk",2,g(100)),black:m("cmyk",3,g(100)),x:m("xyz",0,g(100)),y:m("xyz",1,g(100)),z:m("xyz",2,g(100)),l:m("lab",0,g(100)),a:m("lab",1),b:m("lab",2),keyword:function(S){return arguments.length?new E(S):W[this.model].keyword(this.color)},hex:function(S){return arguments.length?new E(S):P.to.hex(this.rgb().round().color)},rgbNumber:function(){var S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity:function(){for(var S=this.rgb().color,O=[],y=0;y<S.length;y++){var d=S[y]/255;O[y]=d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4)}return .2126*O[0]+.7152*O[1]+.0722*O[2]},contrast:function(S){var O=this.luminosity(),y=S.luminosity();return O>y?(O+.05)/(y+.05):(y+.05)/(O+.05)},level:function(S){var O=this.contrast(S);return O>=7.1?"AAA":O>=4.5?"AA":""},isDark:function(){var S=this.rgb().color,O=(S[0]*299+S[1]*587+S[2]*114)/1e3;return O<128},isLight:function(){return!this.isDark()},negate:function(){for(var S=this.rgb(),O=0;O<3;O++)S.color[O]=255-S.color[O];return S},lighten:function(S){var O=this.hsl();return O.color[2]+=O.color[2]*S,O},darken:function(S){var O=this.hsl();return O.color[2]-=O.color[2]*S,O},saturate:function(S){var O=this.hsl();return O.color[1]+=O.color[1]*S,O},desaturate:function(S){var O=this.hsl();return O.color[1]-=O.color[1]*S,O},whiten:function(S){var O=this.hwb();return O.color[1]+=O.color[1]*S,O},blacken:function(S){var O=this.hwb();return O.color[2]+=O.color[2]*S,O},grayscale:function(){var S=this.rgb().color,O=S[0]*.3+S[1]*.59+S[2]*.11;return E.rgb(O,O,O)},fade:function(S){return this.alpha(this.valpha-this.valpha*S)},opaquer:function(S){return this.alpha(this.valpha+this.valpha*S)},rotate:function(S){var O=this.hsl(),y=O.color[0];return y=(y+S)%360,y=y<0?360+y:y,O.color[0]=y,O},mix:function(S,O){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);var y=S.rgb(),d=this.rgb(),V=O===void 0?.5:O,q=2*V-1,Y=y.alpha()-d.alpha(),X=((q*Y===-1?q:(q+Y)/(1+q*Y))+1)/2,H=1-X;return E.rgb(X*y.red()+H*d.red(),X*y.green()+H*d.green(),X*y.blue()+H*d.blue(),y.alpha()*V+d.alpha()*(1-V))}},Object.keys(W).forEach(function(S){if(L.indexOf(S)===-1){var O=W[S].channels;E.prototype[S]=function(){if(this.model===S)return new E(this);if(arguments.length)return new E(arguments,S);var y=typeof arguments[O]=="number"?O:this.valpha;return new E(M(W[this.model][S].raw(this.color)).concat(y),S)},E[S]=function(y){return typeof y=="number"&&(y=_(R.call(arguments),O)),new E(y,S)}}});function b(S,O){return Number(S.toFixed(O))}function p(S){return function(O){return b(O,S)}}function m(S,O,y){return S=Array.isArray(S)?S:[S],S.forEach(function(d){(N[d]||(N[d]=[]))[O]=y}),S=S[0],function(d){var V;return arguments.length?(y&&(d=y(d)),V=this[S](),V.color[O]=d,V):(V=this[S]().color[O],y&&(V=y(V)),V)}}function g(S){return function(O){return Math.max(0,Math.min(S,O))}}function M(S){return Array.isArray(S)?S:[S]}function _(S,O){for(var y=0;y<O;y++)typeof S[y]!="number"&&(S[y]=0);return S}Le.exports=E},12956:function(Le,F,B){var P=B(58900),W={};for(var R in P)P.hasOwnProperty(R)&&(W[P[R]]=R);var L=Le.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in L)if(L.hasOwnProperty(k)){if(!("channels"in L[k]))throw new Error("missing channels property: "+k);if(!("labels"in L[k]))throw new Error("missing channel labels property: "+k);if(L[k].labels.length!==L[k].channels)throw new Error("channel and label counts mismatch: "+k);var N=L[k].channels,E=L[k].labels;delete L[k].channels,delete L[k].labels,Object.defineProperty(L[k],"channels",{value:N}),Object.defineProperty(L[k],"labels",{value:E})}L.rgb.hsl=function(p){var m=p[0]/255,g=p[1]/255,M=p[2]/255,_=Math.min(m,g,M),S=Math.max(m,g,M),O=S-_,y,d,V;return S===_?y=0:m===S?y=(g-M)/O:g===S?y=2+(M-m)/O:M===S&&(y=4+(m-g)/O),y=Math.min(y*60,360),y<0&&(y+=360),V=(_+S)/2,S===_?d=0:V<=.5?d=O/(S+_):d=O/(2-S-_),[y,d*100,V*100]},L.rgb.hsv=function(p){var m,g,M,_,S,O=p[0]/255,y=p[1]/255,d=p[2]/255,V=Math.max(O,y,d),q=V-Math.min(O,y,d),Y=function(X){return(V-X)/6/q+1/2};return q===0?_=S=0:(S=q/V,m=Y(O),g=Y(y),M=Y(d),O===V?_=M-g:y===V?_=1/3+m-M:d===V&&(_=2/3+g-m),_<0?_+=1:_>1&&(_-=1)),[_*360,S*100,V*100]},L.rgb.hwb=function(p){var m=p[0],g=p[1],M=p[2],_=L.rgb.hsl(p)[0],S=1/255*Math.min(m,Math.min(g,M));return M=1-1/255*Math.max(m,Math.max(g,M)),[_,S*100,M*100]},L.rgb.cmyk=function(p){var m=p[0]/255,g=p[1]/255,M=p[2]/255,_,S,O,y;return y=Math.min(1-m,1-g,1-M),_=(1-m-y)/(1-y)||0,S=(1-g-y)/(1-y)||0,O=(1-M-y)/(1-y)||0,[_*100,S*100,O*100,y*100]};function b(p,m){return Math.pow(p[0]-m[0],2)+Math.pow(p[1]-m[1],2)+Math.pow(p[2]-m[2],2)}L.rgb.keyword=function(p){var m=W[p];if(m)return m;var g=1/0,M;for(var _ in P)if(P.hasOwnProperty(_)){var S=P[_],O=b(p,S);O<g&&(g=O,M=_)}return M},L.keyword.rgb=function(p){return P[p]},L.rgb.xyz=function(p){var m=p[0]/255,g=p[1]/255,M=p[2]/255;m=m>.04045?Math.pow((m+.055)/1.055,2.4):m/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,M=M>.04045?Math.pow((M+.055)/1.055,2.4):M/12.92;var _=m*.4124+g*.3576+M*.1805,S=m*.2126+g*.7152+M*.0722,O=m*.0193+g*.1192+M*.9505;return[_*100,S*100,O*100]},L.rgb.lab=function(p){var m=L.rgb.xyz(p),g=m[0],M=m[1],_=m[2],S,O,y;return g/=95.047,M/=100,_/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,S=116*M-16,O=500*(g-M),y=200*(M-_),[S,O,y]},L.hsl.rgb=function(p){var m=p[0]/360,g=p[1]/100,M=p[2]/100,_,S,O,y,d;if(g===0)return d=M*255,[d,d,d];M<.5?S=M*(1+g):S=M+g-M*g,_=2*M-S,y=[0,0,0];for(var V=0;V<3;V++)O=m+1/3*-(V-1),O<0&&O++,O>1&&O--,6*O<1?d=_+(S-_)*6*O:2*O<1?d=S:3*O<2?d=_+(S-_)*(2/3-O)*6:d=_,y[V]=d*255;return y},L.hsl.hsv=function(p){var m=p[0],g=p[1]/100,M=p[2]/100,_=g,S=Math.max(M,.01),O,y;return M*=2,g*=M<=1?M:2-M,_*=S<=1?S:2-S,y=(M+g)/2,O=M===0?2*_/(S+_):2*g/(M+g),[m,O*100,y*100]},L.hsv.rgb=function(p){var m=p[0]/60,g=p[1]/100,M=p[2]/100,_=Math.floor(m)%6,S=m-Math.floor(m),O=255*M*(1-g),y=255*M*(1-g*S),d=255*M*(1-g*(1-S));switch(M*=255,_){case 0:return[M,d,O];case 1:return[y,M,O];case 2:return[O,M,d];case 3:return[O,y,M];case 4:return[d,O,M];case 5:return[M,O,y]}},L.hsv.hsl=function(p){var m=p[0],g=p[1]/100,M=p[2]/100,_=Math.max(M,.01),S,O,y;return y=(2-g)*M,S=(2-g)*_,O=g*_,O/=S<=1?S:2-S,O=O||0,y/=2,[m,O*100,y*100]},L.hwb.rgb=function(p){var m=p[0]/360,g=p[1]/100,M=p[2]/100,_=g+M,S,O,y,d;_>1&&(g/=_,M/=_),S=Math.floor(6*m),O=1-M,y=6*m-S,S&1&&(y=1-y),d=g+y*(O-g);var V,q,Y;switch(S){default:case 6:case 0:V=O,q=d,Y=g;break;case 1:V=d,q=O,Y=g;break;case 2:V=g,q=O,Y=d;break;case 3:V=g,q=d,Y=O;break;case 4:V=d,q=g,Y=O;break;case 5:V=O,q=g,Y=d;break}return[V*255,q*255,Y*255]},L.cmyk.rgb=function(p){var m=p[0]/100,g=p[1]/100,M=p[2]/100,_=p[3]/100,S,O,y;return S=1-Math.min(1,m*(1-_)+_),O=1-Math.min(1,g*(1-_)+_),y=1-Math.min(1,M*(1-_)+_),[S*255,O*255,y*255]},L.xyz.rgb=function(p){var m=p[0]/100,g=p[1]/100,M=p[2]/100,_,S,O;return _=m*3.2406+g*-1.5372+M*-.4986,S=m*-.9689+g*1.8758+M*.0415,O=m*.0557+g*-.204+M*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_*12.92,S=S>.0031308?1.055*Math.pow(S,1/2.4)-.055:S*12.92,O=O>.0031308?1.055*Math.pow(O,1/2.4)-.055:O*12.92,_=Math.min(Math.max(0,_),1),S=Math.min(Math.max(0,S),1),O=Math.min(Math.max(0,O),1),[_*255,S*255,O*255]},L.xyz.lab=function(p){var m=p[0],g=p[1],M=p[2],_,S,O;return m/=95.047,g/=100,M/=108.883,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,_=116*g-16,S=500*(m-g),O=200*(g-M),[_,S,O]},L.lab.xyz=function(p){var m=p[0],g=p[1],M=p[2],_,S,O;S=(m+16)/116,_=g/500+S,O=S-M/200;var y=Math.pow(S,3),d=Math.pow(_,3),V=Math.pow(O,3);return S=y>.008856?y:(S-16/116)/7.787,_=d>.008856?d:(_-16/116)/7.787,O=V>.008856?V:(O-16/116)/7.787,_*=95.047,S*=100,O*=108.883,[_,S,O]},L.lab.lch=function(p){var m=p[0],g=p[1],M=p[2],_,S,O;return _=Math.atan2(M,g),S=_*360/2/Math.PI,S<0&&(S+=360),O=Math.sqrt(g*g+M*M),[m,O,S]},L.lch.lab=function(p){var m=p[0],g=p[1],M=p[2],_,S,O;return O=M/360*2*Math.PI,_=g*Math.cos(O),S=g*Math.sin(O),[m,_,S]},L.rgb.ansi16=function(p){var m=p[0],g=p[1],M=p[2],_=1 in arguments?arguments[1]:L.rgb.hsv(p)[2];if(_=Math.round(_/50),_===0)return 30;var S=30+(Math.round(M/255)<<2|Math.round(g/255)<<1|Math.round(m/255));return _===2&&(S+=60),S},L.hsv.ansi16=function(p){return L.rgb.ansi16(L.hsv.rgb(p),p[2])},L.rgb.ansi256=function(p){var m=p[0],g=p[1],M=p[2];if(m===g&&g===M)return m<8?16:m>248?231:Math.round((m-8)/247*24)+232;var _=16+36*Math.round(m/255*5)+6*Math.round(g/255*5)+Math.round(M/255*5);return _},L.ansi16.rgb=function(p){var m=p%10;if(m===0||m===7)return p>50&&(m+=3.5),m=m/10.5*255,[m,m,m];var g=(~~(p>50)+1)*.5,M=(m&1)*g*255,_=(m>>1&1)*g*255,S=(m>>2&1)*g*255;return[M,_,S]},L.ansi256.rgb=function(p){if(p>=232){var m=(p-232)*10+8;return[m,m,m]}p-=16;var g,M=Math.floor(p/36)/5*255,_=Math.floor((g=p%36)/6)/5*255,S=g%6/5*255;return[M,_,S]},L.rgb.hex=function(p){var m=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),g=m.toString(16).toUpperCase();return"000000".substring(g.length)+g},L.hex.rgb=function(p){var m=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!m)return[0,0,0];var g=m[0];m[0].length===3&&(g=g.split("").map(function(y){return y+y}).join(""));var M=parseInt(g,16),_=M>>16&255,S=M>>8&255,O=M&255;return[_,S,O]},L.rgb.hcg=function(p){var m=p[0]/255,g=p[1]/255,M=p[2]/255,_=Math.max(Math.max(m,g),M),S=Math.min(Math.min(m,g),M),O=_-S,y,d;return O<1?y=S/(1-O):y=0,O<=0?d=0:_===m?d=(g-M)/O%6:_===g?d=2+(M-m)/O:d=4+(m-g)/O+4,d/=6,d%=1,[d*360,O*100,y*100]},L.hsl.hcg=function(p){var m=p[1]/100,g=p[2]/100,M=1,_=0;return g<.5?M=2*m*g:M=2*m*(1-g),M<1&&(_=(g-.5*M)/(1-M)),[p[0],M*100,_*100]},L.hsv.hcg=function(p){var m=p[1]/100,g=p[2]/100,M=m*g,_=0;return M<1&&(_=(g-M)/(1-M)),[p[0],M*100,_*100]},L.hcg.rgb=function(p){var m=p[0]/360,g=p[1]/100,M=p[2]/100;if(g===0)return[M*255,M*255,M*255];var _=[0,0,0],S=m%1*6,O=S%1,y=1-O,d=0;switch(Math.floor(S)){case 0:_[0]=1,_[1]=O,_[2]=0;break;case 1:_[0]=y,_[1]=1,_[2]=0;break;case 2:_[0]=0,_[1]=1,_[2]=O;break;case 3:_[0]=0,_[1]=y,_[2]=1;break;case 4:_[0]=O,_[1]=0,_[2]=1;break;default:_[0]=1,_[1]=0,_[2]=y}return d=(1-g)*M,[(g*_[0]+d)*255,(g*_[1]+d)*255,(g*_[2]+d)*255]},L.hcg.hsv=function(p){var m=p[1]/100,g=p[2]/100,M=m+g*(1-m),_=0;return M>0&&(_=m/M),[p[0],_*100,M*100]},L.hcg.hsl=function(p){var m=p[1]/100,g=p[2]/100,M=g*(1-m)+.5*m,_=0;return M>0&&M<.5?_=m/(2*M):M>=.5&&M<1&&(_=m/(2*(1-M))),[p[0],_*100,M*100]},L.hcg.hwb=function(p){var m=p[1]/100,g=p[2]/100,M=m+g*(1-m);return[p[0],(M-m)*100,(1-M)*100]},L.hwb.hcg=function(p){var m=p[1]/100,g=p[2]/100,M=1-g,_=M-m,S=0;return _<1&&(S=(M-_)/(1-_)),[p[0],_*100,S*100]},L.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},L.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},L.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},L.gray.hsl=L.gray.hsv=function(p){return[0,0,p[0]]},L.gray.hwb=function(p){return[0,100,p[0]]},L.gray.cmyk=function(p){return[0,0,0,p[0]]},L.gray.lab=function(p){return[p[0],0,0]},L.gray.hex=function(p){var m=Math.round(p[0]/100*255)&255,g=(m<<16)+(m<<8)+m,M=g.toString(16).toUpperCase();return"000000".substring(M.length)+M},L.rgb.gray=function(p){var m=(p[0]+p[1]+p[2])/3;return[m/255*100]}},80978:function(Le,F,B){var P=B(12956),W=B(87774),R={},L=Object.keys(P);function k(E){var b=function(p){return p==null?p:(arguments.length>1&&(p=Array.prototype.slice.call(arguments)),E(p))};return"conversion"in E&&(b.conversion=E.conversion),b}function N(E){var b=function(p){if(p==null)return p;arguments.length>1&&(p=Array.prototype.slice.call(arguments));var m=E(p);if(typeof m=="object")for(var g=m.length,M=0;M<g;M++)m[M]=Math.round(m[M]);return m};return"conversion"in E&&(b.conversion=E.conversion),b}L.forEach(function(E){R[E]={},Object.defineProperty(R[E],"channels",{value:P[E].channels}),Object.defineProperty(R[E],"labels",{value:P[E].labels});var b=W(E),p=Object.keys(b);p.forEach(function(m){var g=b[m];R[E][m]=N(g),R[E][m].raw=k(g)})}),Le.exports=R},87774:function(Le,F,B){var P=B(12956);function W(){for(var N={},E=Object.keys(P),b=E.length,p=0;p<b;p++)N[E[p]]={distance:-1,parent:null};return N}function R(N){var E=W(),b=[N];for(E[N].distance=0;b.length;)for(var p=b.pop(),m=Object.keys(P[p]),g=m.length,M=0;M<g;M++){var _=m[M],S=E[_];S.distance===-1&&(S.distance=E[p].distance+1,S.parent=p,b.unshift(_))}return E}function L(N,E){return function(b){return E(N(b))}}function k(N,E){for(var b=[E[N].parent,N],p=P[E[N].parent][N],m=E[N].parent;E[m].parent;)b.unshift(E[m].parent),p=L(P[E[m].parent][m],p),m=E[m].parent;return p.conversion=b,p}Le.exports=function(N){for(var E=R(N),b={},p=Object.keys(E),m=p.length,g=0;g<m;g++){var M=p[g],_=E[M];_.parent!==null&&(b[M]=k(M,E))}return b}},58900:function(Le){"use strict";Le.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},71829:function(Le,F,B){"use strict";B.r(F),B.d(F,{quadtree:function(){return P.Z}});var P=B(47148)},47148:function(Le,F,B){"use strict";B.d(F,{Z:function(){return q}});function P(J){const nt=+this._x.call(null,J),tt=+this._y.call(null,J);return W(this.cover(nt,tt),nt,tt,J)}function W(J,nt,tt,at){if(isNaN(nt)||isNaN(tt))return J;var ct,ht=J._root,Lt={data:at},St=J._x0,Zt=J._y0,Ut=J._x1,Ot=J._y1,Z,st,Et,Bt,Pt,Ht,le,ye;if(!ht)return J._root=Lt,J;for(;ht.length;)if((Pt=nt>=(Z=(St+Ut)/2))?St=Z:Ut=Z,(Ht=tt>=(st=(Zt+Ot)/2))?Zt=st:Ot=st,ct=ht,!(ht=ht[le=Ht<<1|Pt]))return ct[le]=Lt,J;if(Et=+J._x.call(null,ht.data),Bt=+J._y.call(null,ht.data),nt===Et&&tt===Bt)return Lt.next=ht,ct?ct[le]=Lt:J._root=Lt,J;do ct=ct?ct[le]=new Array(4):J._root=new Array(4),(Pt=nt>=(Z=(St+Ut)/2))?St=Z:Ut=Z,(Ht=tt>=(st=(Zt+Ot)/2))?Zt=st:Ot=st;while((le=Ht<<1|Pt)===(ye=(Bt>=st)<<1|Et>=Z));return ct[ye]=ht,ct[le]=Lt,J}function R(J){var nt,tt,at=J.length,ct,ht,Lt=new Array(at),St=new Array(at),Zt=1/0,Ut=1/0,Ot=-1/0,Z=-1/0;for(tt=0;tt<at;++tt)isNaN(ct=+this._x.call(null,nt=J[tt]))||isNaN(ht=+this._y.call(null,nt))||(Lt[tt]=ct,St[tt]=ht,ct<Zt&&(Zt=ct),ct>Ot&&(Ot=ct),ht<Ut&&(Ut=ht),ht>Z&&(Z=ht));if(Zt>Ot||Ut>Z)return this;for(this.cover(Zt,Ut).cover(Ot,Z),tt=0;tt<at;++tt)W(this,Lt[tt],St[tt],J[tt]);return this}function L(J,nt){if(isNaN(J=+J)||isNaN(nt=+nt))return this;var tt=this._x0,at=this._y0,ct=this._x1,ht=this._y1;if(isNaN(tt))ct=(tt=Math.floor(J))+1,ht=(at=Math.floor(nt))+1;else{for(var Lt=ct-tt||1,St=this._root,Zt,Ut;tt>J||J>=ct||at>nt||nt>=ht;)switch(Ut=(nt<at)<<1|J<tt,Zt=new Array(4),Zt[Ut]=St,St=Zt,Lt*=2,Ut){case 0:ct=tt+Lt,ht=at+Lt;break;case 1:tt=ct-Lt,ht=at+Lt;break;case 2:ct=tt+Lt,at=ht-Lt;break;case 3:tt=ct-Lt,at=ht-Lt;break}this._root&&this._root.length&&(this._root=St)}return this._x0=tt,this._y0=at,this._x1=ct,this._y1=ht,this}function k(){var J=[];return this.visit(function(nt){if(!nt.length)do J.push(nt.data);while(nt=nt.next)}),J}function N(J){return arguments.length?this.cover(+J[0][0],+J[0][1]).cover(+J[1][0],+J[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function E(J,nt,tt,at,ct){this.node=J,this.x0=nt,this.y0=tt,this.x1=at,this.y1=ct}function b(J,nt,tt){var at,ct=this._x0,ht=this._y0,Lt,St,Zt,Ut,Ot=this._x1,Z=this._y1,st=[],Et=this._root,Bt,Pt;for(Et&&st.push(new E(Et,ct,ht,Ot,Z)),tt==null?tt=1/0:(ct=J-tt,ht=nt-tt,Ot=J+tt,Z=nt+tt,tt*=tt);Bt=st.pop();)if(!(!(Et=Bt.node)||(Lt=Bt.x0)>Ot||(St=Bt.y0)>Z||(Zt=Bt.x1)<ct||(Ut=Bt.y1)<ht))if(Et.length){var Ht=(Lt+Zt)/2,le=(St+Ut)/2;st.push(new E(Et[3],Ht,le,Zt,Ut),new E(Et[2],Lt,le,Ht,Ut),new E(Et[1],Ht,St,Zt,le),new E(Et[0],Lt,St,Ht,le)),(Pt=(nt>=le)<<1|J>=Ht)&&(Bt=st[st.length-1],st[st.length-1]=st[st.length-1-Pt],st[st.length-1-Pt]=Bt)}else{var ye=J-+this._x.call(null,Et.data),Gt=nt-+this._y.call(null,Et.data),zt=ye*ye+Gt*Gt;if(zt<tt){var ue=Math.sqrt(tt=zt);ct=J-ue,ht=nt-ue,Ot=J+ue,Z=nt+ue,at=Et.data}}return at}function p(J){if(isNaN(Ot=+this._x.call(null,J))||isNaN(Z=+this._y.call(null,J)))return this;var nt,tt=this._root,at,ct,ht,Lt=this._x0,St=this._y0,Zt=this._x1,Ut=this._y1,Ot,Z,st,Et,Bt,Pt,Ht,le;if(!tt)return this;if(tt.length)for(;;){if((Bt=Ot>=(st=(Lt+Zt)/2))?Lt=st:Zt=st,(Pt=Z>=(Et=(St+Ut)/2))?St=Et:Ut=Et,nt=tt,!(tt=tt[Ht=Pt<<1|Bt]))return this;if(!tt.length)break;(nt[Ht+1&3]||nt[Ht+2&3]||nt[Ht+3&3])&&(at=nt,le=Ht)}for(;tt.data!==J;)if(ct=tt,!(tt=tt.next))return this;return(ht=tt.next)&&delete tt.next,ct?(ht?ct.next=ht:delete ct.next,this):nt?(ht?nt[Ht]=ht:delete nt[Ht],(tt=nt[0]||nt[1]||nt[2]||nt[3])&&tt===(nt[3]||nt[2]||nt[1]||nt[0])&&!tt.length&&(at?at[le]=tt:this._root=tt),this):(this._root=ht,this)}function m(J){for(var nt=0,tt=J.length;nt<tt;++nt)this.remove(J[nt]);return this}function g(){return this._root}function M(){var J=0;return this.visit(function(nt){if(!nt.length)do++J;while(nt=nt.next)}),J}function _(J){var nt=[],tt,at=this._root,ct,ht,Lt,St,Zt;for(at&&nt.push(new E(at,this._x0,this._y0,this._x1,this._y1));tt=nt.pop();)if(!J(at=tt.node,ht=tt.x0,Lt=tt.y0,St=tt.x1,Zt=tt.y1)&&at.length){var Ut=(ht+St)/2,Ot=(Lt+Zt)/2;(ct=at[3])&&nt.push(new E(ct,Ut,Ot,St,Zt)),(ct=at[2])&&nt.push(new E(ct,ht,Ot,Ut,Zt)),(ct=at[1])&&nt.push(new E(ct,Ut,Lt,St,Ot)),(ct=at[0])&&nt.push(new E(ct,ht,Lt,Ut,Ot))}return this}function S(J){var nt=[],tt=[],at;for(this._root&&nt.push(new E(this._root,this._x0,this._y0,this._x1,this._y1));at=nt.pop();){var ct=at.node;if(ct.length){var ht,Lt=at.x0,St=at.y0,Zt=at.x1,Ut=at.y1,Ot=(Lt+Zt)/2,Z=(St+Ut)/2;(ht=ct[0])&&nt.push(new E(ht,Lt,St,Ot,Z)),(ht=ct[1])&&nt.push(new E(ht,Ot,St,Zt,Z)),(ht=ct[2])&&nt.push(new E(ht,Lt,Z,Ot,Ut)),(ht=ct[3])&&nt.push(new E(ht,Ot,Z,Zt,Ut))}tt.push(at)}for(;at=tt.pop();)J(at.node,at.x0,at.y0,at.x1,at.y1);return this}function O(J){return J[0]}function y(J){return arguments.length?(this._x=J,this):this._x}function d(J){return J[1]}function V(J){return arguments.length?(this._y=J,this):this._y}function q(J,nt,tt){var at=new Y(nt==null?O:nt,tt==null?d:tt,NaN,NaN,NaN,NaN);return J==null?at:at.addAll(J)}function Y(J,nt,tt,at,ct,ht){this._x=J,this._y=nt,this._x0=tt,this._y0=at,this._x1=ct,this._y1=ht,this._root=void 0}function X(J){for(var nt={data:J.data},tt=nt;J=J.next;)tt=tt.next={data:J.data};return nt}var H=q.prototype=Y.prototype;H.copy=function(){var J=new Y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),nt=this._root,tt,at;if(!nt)return J;if(!nt.length)return J._root=X(nt),J;for(tt=[{source:nt,target:J._root=new Array(4)}];nt=tt.pop();)for(var ct=0;ct<4;++ct)(at=nt.source[ct])&&(at.length?tt.push({source:at,target:nt.target[ct]=new Array(4)}):nt.target[ct]=X(at));return J},H.add=P,H.addAll=R,H.cover=L,H.data=k,H.extent=N,H.find=b,H.remove=p,H.removeAll=m,H.root=g,H.size=M,H.visit=_,H.visitAfter=S,H.x=y,H.y=V},35374:function(Le,F,B){"use strict";B.d(F,{HT:function(){return O}});var P=0,W=0,R=0,L=1e3,k,N,E=0,b=0,p=0,m=typeof performance=="object"&&performance.now?performance:Date,g=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(X){setTimeout(X,17)};function M(){return b||(g(_),b=m.now()+p)}function _(){b=0}function S(){this._call=this._time=this._next=null}S.prototype=O.prototype={constructor:S,restart:function(X,H,J){if(typeof X!="function")throw new TypeError("callback is not a function");J=(J==null?M():+J)+(H==null?0:+H),!this._next&&N!==this&&(N?N._next=this:k=this,N=this),this._call=X,this._time=J,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}};function O(X,H,J){var nt=new S;return nt.restart(X,H,J),nt}function y(){M(),++P;for(var X=k,H;X;)(H=b-X._time)>=0&&X._call.call(null,H),X=X._next;--P}function d(){b=(E=m.now())+p,P=W=0;try{y()}finally{P=0,q(),b=0}}function V(){var X=m.now(),H=X-E;H>L&&(p-=H,E=X)}function q(){for(var X,H=k,J,nt=1/0;H;)H._call?(nt>H._time&&(nt=H._time),X=H,H=H._next):(J=H._next,H._next=null,H=X?X._next=J:k=J);N=X,Y(nt)}function Y(X){if(!P){W&&(W=clearTimeout(W));var H=X-b;H>24?(X<1/0&&(W=setTimeout(d,X-m.now()-p)),R&&(R=clearInterval(R))):(R||(E=m.now(),R=setInterval(V,L)),P=1,g(d))}}},31969:function(Le,F,B){"use strict";B.r(F),B.d(F,{BRIDGE_GRAPH_NAME:function(){return k},GraphType:function(){return b},HierarchyNodeType:function(){return p},InclusionType:function(){return E},LAYOUT_CONFIG:function(){return P},NodeType:function(){return N},ROOT_NAME:function(){return L},buildGraph:function(){return fr},flatGraph:function(){return Lr},getEdges:function(){return kr},mergeConfig:function(){return W}});const P={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function W(v={},A=P){var z,K,it,ut;const vt=JSON.parse(JSON.stringify(A)),yt=((z=v==null?void 0:v.graph)===null||z===void 0?void 0:z.meta)||{},_t=((K=v==null?void 0:v.subScene)===null||K===void 0?void 0:K.meta)||{},Rt=((it=v==null?void 0:v.nodeSize)===null||it===void 0?void 0:it.meta)||{},Qt=((ut=v==null?void 0:v.nodeSize)===null||ut===void 0?void 0:ut.node)||{},Vt=vt.nodeSize.bridge;return{graph:{meta:Object.assign(vt.graph.meta,yt)},subScene:{meta:Object.assign(vt.subScene.meta,_t)},nodeSize:{meta:Object.assign(vt.nodeSize.meta,Rt),node:Object.assign(vt.nodeSize.node,Qt),bridge:Vt}}}function R(v){return`\u25EC${v}\u25EC`}const L=R("ROOT"),k=R("BRIDGE_GRAPH");var N,E,b,p;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(N||(N={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(E||(E={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(b||(b={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(p||(p={}));var m=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof B.g!="undefined"?B.g:typeof self!="undefined"?self:{};function g(v,A){return v(A={exports:{}},A.exports),A.exports}var M=function(){this.__data__=[],this.size=0},_=function(v,A){return v===A||v!=v&&A!=A},S=function(v,A){for(var z=v.length;z--;)if(_(v[z][0],A))return z;return-1},O=Array.prototype.splice,y=function(v){var A=this.__data__,z=S(A,v);return!(z<0)&&(z==A.length-1?A.pop():O.call(A,z,1),--this.size,!0)},d=function(v){var A=this.__data__,z=S(A,v);return z<0?void 0:A[z][1]},V=function(v){return S(this.__data__,v)>-1},q=function(v,A){var z=this.__data__,K=S(z,v);return K<0?(++this.size,z.push([v,A])):z[K][1]=A,this};function Y(v){var A=-1,z=v==null?0:v.length;for(this.clear();++A<z;){var K=v[A];this.set(K[0],K[1])}}Y.prototype.clear=M,Y.prototype.delete=y,Y.prototype.get=d,Y.prototype.has=V,Y.prototype.set=q;var X=Y,H=function(){this.__data__=new X,this.size=0},J=function(v){var A=this.__data__,z=A.delete(v);return this.size=A.size,z},nt=function(v){return this.__data__.get(v)},tt=function(v){return this.__data__.has(v)},at=typeof m=="object"&&m&&m.Object===Object&&m,ct=typeof self=="object"&&self&&self.Object===Object&&self,ht=at||ct||Function("return this")(),Lt=ht.Symbol,St=Object.prototype,Zt=St.hasOwnProperty,Ut=St.toString,Ot=Lt?Lt.toStringTag:void 0,Z=function(v){var A=Zt.call(v,Ot),z=v[Ot];try{v[Ot]=void 0;var K=!0}catch(ut){}var it=Ut.call(v);return K&&(A?v[Ot]=z:delete v[Ot]),it},st=Object.prototype.toString,Et=function(v){return st.call(v)},Bt=Lt?Lt.toStringTag:void 0,Pt=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":Bt&&Bt in Object(v)?Z(v):Et(v)},Ht=function(v){var A=typeof v;return v!=null&&(A=="object"||A=="function")},le,ye=function(v){if(!Ht(v))return!1;var A=Pt(v);return A=="[object Function]"||A=="[object GeneratorFunction]"||A=="[object AsyncFunction]"||A=="[object Proxy]"},Gt=ht["__core-js_shared__"],zt=(le=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"",ue=function(v){return!!zt&&zt in v},we=Function.prototype.toString,de=function(v){if(v!=null){try{return we.call(v)}catch(A){}try{return v+""}catch(A){}}return""},Mt=/^\[object .+?Constructor\]$/,ee=Function.prototype,ce=Object.prototype,At=ee.toString,Wt=ce.hasOwnProperty,fe=RegExp("^"+At.call(Wt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=function(v){return!(!Ht(v)||ue(v))&&(ye(v)?fe:Mt).test(de(v))},Be=function(v,A){return v==null?void 0:v[A]},_r=function(v,A){var z=Be(v,A);return Ge(z)?z:void 0},Ft=_r(ht,"Map"),hr=_r(Object,"create"),rn=function(){this.__data__=hr?hr(null):{},this.size=0},pn=function(v){var A=this.has(v)&&delete this.__data__[v];return this.size-=A?1:0,A},Sn=Object.prototype.hasOwnProperty,Bn=function(v){var A=this.__data__;if(hr){var z=A[v];return z==="__lodash_hash_undefined__"?void 0:z}return Sn.call(A,v)?A[v]:void 0},Kn=Object.prototype.hasOwnProperty,Nn=function(v){var A=this.__data__;return hr?A[v]!==void 0:Kn.call(A,v)},ra=function(v,A){var z=this.__data__;return this.size+=this.has(v)?0:1,z[v]=hr&&A===void 0?"__lodash_hash_undefined__":A,this};function Ea(v){var A=-1,z=v==null?0:v.length;for(this.clear();++A<z;){var K=v[A];this.set(K[0],K[1])}}Ea.prototype.clear=rn,Ea.prototype.delete=pn,Ea.prototype.get=Bn,Ea.prototype.has=Nn,Ea.prototype.set=ra;var na=Ea,ir=function(){this.size=0,this.__data__={hash:new na,map:new(Ft||X),string:new na}},Tr=function(v){var A=typeof v;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?v!=="__proto__":v===null},Jr=function(v,A){var z=v.__data__;return Tr(A)?z[typeof A=="string"?"string":"hash"]:z.map},vn=function(v){var A=Jr(this,v).delete(v);return this.size-=A?1:0,A},Tn=function(v){return Jr(this,v).get(v)},In=function(v){return Jr(this,v).has(v)},kn=function(v,A){var z=Jr(this,v),K=z.size;return z.set(v,A),this.size+=z.size==K?0:1,this};function Zn(v){var A=-1,z=v==null?0:v.length;for(this.clear();++A<z;){var K=v[A];this.set(K[0],K[1])}}Zn.prototype.clear=ir,Zn.prototype.delete=vn,Zn.prototype.get=Tn,Zn.prototype.has=In,Zn.prototype.set=kn;var Yn=Zn,Ra=function(v,A){var z=this.__data__;if(z instanceof X){var K=z.__data__;if(!Ft||K.length<199)return K.push([v,A]),this.size=++z.size,this;z=this.__data__=new Yn(K)}return z.set(v,A),this.size=z.size,this};function gn(v){var A=this.__data__=new X(v);this.size=A.size}gn.prototype.clear=H,gn.prototype.delete=J,gn.prototype.get=nt,gn.prototype.has=tt,gn.prototype.set=Ra;var zn=gn,Un=function(v,A){for(var z=-1,K=v==null?0:v.length;++z<K&&A(v[z],z,v)!==!1;);return v},_n=function(){try{var v=_r(Object,"defineProperty");return v({},"",{}),v}catch(A){}}(),aa=function(v,A,z){A=="__proto__"&&_n?_n(v,A,{configurable:!0,enumerable:!0,value:z,writable:!0}):v[A]=z},$=Object.prototype.hasOwnProperty,Re=function(v,A,z){var K=v[A];$.call(v,A)&&_(K,z)&&(z!==void 0||A in v)||aa(v,A,z)},be=function(v,A,z,K){var it=!z;z||(z={});for(var ut=-1,vt=A.length;++ut<vt;){var yt=A[ut],_t=K?K(z[yt],v[yt],yt,z,v):void 0;_t===void 0&&(_t=v[yt]),it?aa(z,yt,_t):Re(z,yt,_t)}return z},Ke=function(v,A){for(var z=-1,K=Array(v);++z<v;)K[z]=A(z);return K},Ze=function(v){return v!=null&&typeof v=="object"},Cr=function(v){return Ze(v)&&Pt(v)=="[object Arguments]"},Mr=Object.prototype,Vr=Mr.hasOwnProperty,tn=Mr.propertyIsEnumerable,jr=Cr(function(){return arguments}())?Cr:function(v){return Ze(v)&&Vr.call(v,"callee")&&!tn.call(v,"callee")},dt=Array.isArray,pt=function(){return!1},U=g(function(v,A){var z=A&&!A.nodeType&&A,K=z&&v&&!v.nodeType&&v,it=K&&K.exports===z?ht.Buffer:void 0,ut=(it?it.isBuffer:void 0)||pt;v.exports=ut}),I=/^(?:0|[1-9]\d*)$/,T=function(v,A){var z=typeof v;return!!(A=A==null?9007199254740991:A)&&(z=="number"||z!="symbol"&&I.test(v))&&v>-1&&v%1==0&&v<A},Q=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},bt={};bt["[object Float32Array]"]=bt["[object Float64Array]"]=bt["[object Int8Array]"]=bt["[object Int16Array]"]=bt["[object Int32Array]"]=bt["[object Uint8Array]"]=bt["[object Uint8ClampedArray]"]=bt["[object Uint16Array]"]=bt["[object Uint32Array]"]=!0,bt["[object Arguments]"]=bt["[object Array]"]=bt["[object ArrayBuffer]"]=bt["[object Boolean]"]=bt["[object DataView]"]=bt["[object Date]"]=bt["[object Error]"]=bt["[object Function]"]=bt["[object Map]"]=bt["[object Number]"]=bt["[object Object]"]=bt["[object RegExp]"]=bt["[object Set]"]=bt["[object String]"]=bt["[object WeakMap]"]=!1;var kt=function(v){return Ze(v)&&Q(v.length)&&!!bt[Pt(v)]},It=function(v){return function(A){return v(A)}},Kt=g(function(v,A){var z=A&&!A.nodeType&&A,K=z&&v&&!v.nodeType&&v,it=K&&K.exports===z&&at.process,ut=function(){try{var vt=K&&K.require&&K.require("util").types;return vt||it&&it.binding&&it.binding("util")}catch(yt){}}();v.exports=ut}),Pe=Kt&&Kt.isTypedArray,_e=Pe?It(Pe):kt,Qe=Object.prototype.hasOwnProperty,Ir=function(v,A){var z=dt(v),K=!z&&jr(v),it=!z&&!K&&U(v),ut=!z&&!K&&!it&&_e(v),vt=z||K||it||ut,yt=vt?Ke(v.length,String):[],_t=yt.length;for(var Rt in v)!A&&!Qe.call(v,Rt)||vt&&(Rt=="length"||it&&(Rt=="offset"||Rt=="parent")||ut&&(Rt=="buffer"||Rt=="byteLength"||Rt=="byteOffset")||T(Rt,_t))||yt.push(Rt);return yt},sr=Object.prototype,Hr=function(v){var A=v&&v.constructor;return v===(typeof A=="function"&&A.prototype||sr)},xn=function(v,A){return function(z){return v(A(z))}},ze=xn(Object.keys,Object),ur=Object.prototype.hasOwnProperty,Sr=function(v){if(!Hr(v))return ze(v);var A=[];for(var z in Object(v))ur.call(v,z)&&z!="constructor"&&A.push(z);return A},Nr=function(v){return v!=null&&Q(v.length)&&!ye(v)},$t=function(v){return Nr(v)?Ir(v):Sr(v)},Ct=function(v,A){return v&&be(A,$t(A),v)},te=function(v){var A=[];if(v!=null)for(var z in Object(v))A.push(z);return A},ge=Object.prototype.hasOwnProperty,ie=function(v){if(!Ht(v))return te(v);var A=Hr(v),z=[];for(var K in v)(K!="constructor"||!A&&ge.call(v,K))&&z.push(K);return z},Te=function(v){return Nr(v)?Ir(v,!0):ie(v)},Je=function(v,A){return v&&be(A,Te(A),v)},tr=g(function(v,A){var z=A&&!A.nodeType&&A,K=z&&v&&!v.nodeType&&v,it=K&&K.exports===z?ht.Buffer:void 0,ut=it?it.allocUnsafe:void 0;v.exports=function(vt,yt){if(yt)return vt.slice();var _t=vt.length,Rt=ut?ut(_t):new vt.constructor(_t);return vt.copy(Rt),Rt}}),Gr=function(v,A){var z=-1,K=v.length;for(A||(A=Array(K));++z<K;)A[z]=v[z];return A},cn=function(v,A){for(var z=-1,K=v==null?0:v.length,it=0,ut=[];++z<K;){var vt=v[z];A(vt,z,v)&&(ut[it++]=vt)}return ut},qr=function(){return[]},Fn=Object.prototype.propertyIsEnumerable,Mn=Object.getOwnPropertySymbols,ia=Mn?function(v){return v==null?[]:(v=Object(v),cn(Mn(v),function(A){return Fn.call(v,A)}))}:qr,Sa=function(v,A){return be(v,ia(v),A)},Ca=function(v,A){for(var z=-1,K=A.length,it=v.length;++z<K;)v[it+z]=A[z];return v},ca=xn(Object.getPrototypeOf,Object),ho=Object.getOwnPropertySymbols?function(v){for(var A=[];v;)Ca(A,ia(v)),v=ca(v);return A}:qr,qa=function(v,A){return be(v,ho(v),A)},Ha=function(v,A,z){var K=A(v);return dt(v)?K:Ca(K,z(v))},Ni=function(v){return Ha(v,$t,ia)},qo=function(v){return Ha(v,Te,ho)},Pi=_r(ht,"DataView"),zi=_r(ht,"Promise"),ua=_r(ht,"Set"),ro=_r(ht,"WeakMap"),zo=de(Pi),Da=de(Ft),Co=de(zi),To=de(ua),Io=de(ro),bi=Pt;(Pi&&bi(new Pi(new ArrayBuffer(1)))!="[object DataView]"||Ft&&bi(new Ft)!="[object Map]"||zi&&bi(zi.resolve())!="[object Promise]"||ua&&bi(new ua)!="[object Set]"||ro&&bi(new ro)!="[object WeakMap]")&&(bi=function(v){var A=Pt(v),z=A=="[object Object]"?v.constructor:void 0,K=z?de(z):"";if(K)switch(K){case zo:return"[object DataView]";case Da:return"[object Map]";case Co:return"[object Promise]";case To:return"[object Set]";case Io:return"[object WeakMap]"}return A});var Ui=bi,Eo=Object.prototype.hasOwnProperty,os=function(v){var A=v.length,z=new v.constructor(A);return A&&typeof v[0]=="string"&&Eo.call(v,"index")&&(z.index=v.index,z.input=v.input),z},ai=ht.Uint8Array,xi=function(v){var A=new v.constructor(v.byteLength);return new ai(A).set(new ai(v)),A},mn=function(v,A){var z=A?xi(v.buffer):v.buffer;return new v.constructor(z,v.byteOffset,v.byteLength)},Oo=/\w*$/,wo=function(v){var A=new v.constructor(v.source,Oo.exec(v));return A.lastIndex=v.lastIndex,A},no=Lt?Lt.prototype:void 0,Lo=no?no.valueOf:void 0,Uo=function(v){return Lo?Object(Lo.call(v)):{}},ss=function(v,A){var z=A?xi(v.buffer):v.buffer;return new v.constructor(z,v.byteOffset,v.length)},wn=function(v,A,z){var K=v.constructor;switch(A){case"[object ArrayBuffer]":return xi(v);case"[object Boolean]":case"[object Date]":return new K(+v);case"[object DataView]":return mn(v,z);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ss(v,z);case"[object Map]":return new K;case"[object Number]":case"[object String]":return new K(v);case"[object RegExp]":return wo(v);case"[object Set]":return new K;case"[object Symbol]":return Uo(v)}},Ja=Object.create,Ki=function(){function v(){}return function(A){if(!Ht(A))return{};if(Ja)return Ja(A);v.prototype=A;var z=new v;return v.prototype=void 0,z}}(),Ka=function(v){return typeof v.constructor!="function"||Hr(v)?{}:Ki(ca(v))},_o=function(v){return Ze(v)&&Ui(v)=="[object Map]"},Jo=Kt&&Kt.isMap,ki=Jo?It(Jo):_o,Wo=function(v){return Ze(v)&&Ui(v)=="[object Set]"},Xo=Kt&&Kt.isSet,So=Xo?It(Xo):Wo,ga={};ga["[object Arguments]"]=ga["[object Array]"]=ga["[object ArrayBuffer]"]=ga["[object DataView]"]=ga["[object Boolean]"]=ga["[object Date]"]=ga["[object Float32Array]"]=ga["[object Float64Array]"]=ga["[object Int8Array]"]=ga["[object Int16Array]"]=ga["[object Int32Array]"]=ga["[object Map]"]=ga["[object Number]"]=ga["[object Object]"]=ga["[object RegExp]"]=ga["[object Set]"]=ga["[object String]"]=ga["[object Symbol]"]=ga["[object Uint8Array]"]=ga["[object Uint8ClampedArray]"]=ga["[object Uint16Array]"]=ga["[object Uint32Array]"]=!0,ga["[object Error]"]=ga["[object Function]"]=ga["[object WeakMap]"]=!1;var us=function v(A,z,K,it,ut,vt){var yt,_t=1&z,Rt=2&z,Qt=4&z;if(K&&(yt=ut?K(A,it,ut,vt):K(A)),yt!==void 0)return yt;if(!Ht(A))return A;var Vt=dt(A);if(Vt){if(yt=os(A),!_t)return Gr(A,yt)}else{var xe=Ui(A),ke=xe=="[object Function]"||xe=="[object GeneratorFunction]";if(U(A))return tr(A,_t);if(xe=="[object Object]"||xe=="[object Arguments]"||ke&&!ut){if(yt=Rt||ke?{}:Ka(A),!_t)return Rt?qa(A,Je(yt,A)):Sa(A,Ct(yt,A))}else{if(!ga[xe])return ut?A:{};yt=wn(A,xe,_t)}}vt||(vt=new zn);var dr=vt.get(A);if(dr)return dr;vt.set(A,yt),So(A)?A.forEach(function(Ve){yt.add(v(Ve,z,K,Ve,A,vt))}):ki(A)&&A.forEach(function(Ve,je){yt.set(je,v(Ve,z,K,je,A,vt))});var Xe=Vt?void 0:(Qt?Rt?qo:Ni:Rt?Te:$t)(A);return Un(Xe||A,function(Ve,je){Xe&&(Ve=A[je=Ve]),Re(yt,je,v(Ve,z,K,je,A,vt))}),yt},Zi=function(v){return us(v,4)},Ri=function(v){return function(){return v}},vo=function(v){return function(A,z,K){for(var it=-1,ut=Object(A),vt=K(A),yt=vt.length;yt--;){var _t=vt[v?yt:++it];if(z(ut[_t],_t,ut)===!1)break}return A}}(),Yo=function(v,A){return v&&vo(v,A,$t)},Ei=function(v,A){return function(z,K){if(z==null)return z;if(!Nr(z))return v(z,K);for(var it=z.length,ut=A?it:-1,vt=Object(z);(A?ut--:++ut<it)&&K(vt[ut],ut,vt)!==!1;);return z}}(Yo),Wi=function(v){return v},Za=function(v){return typeof v=="function"?v:Wi},Vo=function(v,A){return(dt(v)?Un:Ei)(v,Za(A))},Xi=Vo,jo=function(v,A){var z=[];return Ei(v,function(K,it,ut){A(K,it,ut)&&z.push(K)}),z},ao=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Yi=function(v){return this.__data__.has(v)};function io(v){var A=-1,z=v==null?0:v.length;for(this.__data__=new Yn;++A<z;)this.add(v[A])}io.prototype.add=io.prototype.push=ao,io.prototype.has=Yi;var go=io,po=function(v,A){for(var z=-1,K=v==null?0:v.length;++z<K;)if(A(v[z],z,v))return!0;return!1},$i=function(v,A){return v.has(A)},la=function(v,A,z,K,it,ut){var vt=1&z,yt=v.length,_t=A.length;if(yt!=_t&&!(vt&&_t>yt))return!1;var Rt=ut.get(v),Qt=ut.get(A);if(Rt&&Qt)return Rt==A&&Qt==v;var Vt=-1,xe=!0,ke=2&z?new go:void 0;for(ut.set(v,A),ut.set(A,v);++Vt<yt;){var dr=v[Vt],Xe=A[Vt];if(K)var Ve=vt?K(Xe,dr,Vt,A,v,ut):K(dr,Xe,Vt,v,A,ut);if(Ve!==void 0){if(Ve)continue;xe=!1;break}if(ke){if(!po(A,function(je,Br){if(!$i(ke,Br)&&(dr===je||it(dr,je,z,K,ut)))return ke.push(Br)})){xe=!1;break}}else if(dr!==Xe&&!it(dr,Xe,z,K,ut)){xe=!1;break}}return ut.delete(v),ut.delete(A),xe},ti=function(v){var A=-1,z=Array(v.size);return v.forEach(function(K,it){z[++A]=[it,K]}),z},gi=function(v){var A=-1,z=Array(v.size);return v.forEach(function(K){z[++A]=K}),z},ta=Lt?Lt.prototype:void 0,Qi=ta?ta.valueOf:void 0,yo=function(v,A,z,K,it,ut,vt){switch(z){case"[object DataView]":if(v.byteLength!=A.byteLength||v.byteOffset!=A.byteOffset)return!1;v=v.buffer,A=A.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=A.byteLength||!ut(new ai(v),new ai(A)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+v,+A);case"[object Error]":return v.name==A.name&&v.message==A.message;case"[object RegExp]":case"[object String]":return v==A+"";case"[object Map]":var yt=ti;case"[object Set]":var _t=1&K;if(yt||(yt=gi),v.size!=A.size&&!_t)return!1;var Rt=vt.get(v);if(Rt)return Rt==A;K|=2,vt.set(v,A);var Qt=la(yt(v),yt(A),K,it,ut,vt);return vt.delete(v),Qt;case"[object Symbol]":if(Qi)return Qi.call(v)==Qi.call(A)}return!1},ii=Object.prototype.hasOwnProperty,Mo=function(v,A,z,K,it,ut){var vt=1&z,yt=Ni(v),_t=yt.length;if(_t!=Ni(A).length&&!vt)return!1;for(var Rt=_t;Rt--;){var Qt=yt[Rt];if(!(vt?Qt in A:ii.call(A,Qt)))return!1}var Vt=ut.get(v),xe=ut.get(A);if(Vt&&xe)return Vt==A&&xe==v;var ke=!0;ut.set(v,A),ut.set(A,v);for(var dr=vt;++Rt<_t;){var Xe=v[Qt=yt[Rt]],Ve=A[Qt];if(K)var je=vt?K(Ve,Xe,Qt,A,v,ut):K(Xe,Ve,Qt,v,A,ut);if(!(je===void 0?Xe===Ve||it(Xe,Ve,z,K,ut):je)){ke=!1;break}dr||(dr=Qt=="constructor")}if(ke&&!dr){var Br=v.constructor,Qr=A.constructor;Br==Qr||!("constructor"in v)||!("constructor"in A)||typeof Br=="function"&&Br instanceof Br&&typeof Qr=="function"&&Qr instanceof Qr||(ke=!1)}return ut.delete(v),ut.delete(A),ke},Bi=Object.prototype.hasOwnProperty,Fi=function(v,A,z,K,it,ut){var vt=dt(v),yt=dt(A),_t=vt?"[object Array]":Ui(v),Rt=yt?"[object Array]":Ui(A),Qt=(_t=_t=="[object Arguments]"?"[object Object]":_t)=="[object Object]",Vt=(Rt=Rt=="[object Arguments]"?"[object Object]":Rt)=="[object Object]",xe=_t==Rt;if(xe&&U(v)){if(!U(A))return!1;vt=!0,Qt=!1}if(xe&&!Qt)return ut||(ut=new zn),vt||_e(v)?la(v,A,z,K,it,ut):yo(v,A,_t,z,K,it,ut);if(!(1&z)){var ke=Qt&&Bi.call(v,"__wrapped__"),dr=Vt&&Bi.call(A,"__wrapped__");if(ke||dr){var Xe=ke?v.value():v,Ve=dr?A.value():A;return ut||(ut=new zn),it(Xe,Ve,z,K,ut)}}return!!xe&&(ut||(ut=new zn),Mo(v,A,z,K,it,ut))},Do=function v(A,z,K,it,ut){return A===z||(A==null||z==null||!Ze(A)&&!Ze(z)?A!=A&&z!=z:Fi(A,z,K,it,v,ut))},fs=function(v,A,z,K){var it=z.length,ut=it,vt=!K;if(v==null)return!ut;for(v=Object(v);it--;){var yt=z[it];if(vt&&yt[2]?yt[1]!==v[yt[0]]:!(yt[0]in v))return!1}for(;++it<ut;){var _t=(yt=z[it])[0],Rt=v[_t],Qt=yt[1];if(vt&&yt[2]){if(Rt===void 0&&!(_t in v))return!1}else{var Vt=new zn;if(K)var xe=K(Rt,Qt,_t,v,A,Vt);if(!(xe===void 0?Do(Qt,Rt,3,K,Vt):xe))return!1}}return!0},No=function(v){return v==v&&!Ht(v)},Ho=function(v){for(var A=$t(v),z=A.length;z--;){var K=A[z],it=v[K];A[z]=[K,it,No(it)]}return A},Ns=function(v,A){return function(z){return z!=null&&z[v]===A&&(A!==void 0||v in Object(z))}},Ps=function(v){var A=Ho(v);return A.length==1&&A[0][2]?Ns(A[0][0],A[0][1]):function(z){return z===v||fs(z,v,A)}},$n=function(v){return typeof v=="symbol"||Ze(v)&&Pt(v)=="[object Symbol]"},xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,De=function(v,A){if(dt(v))return!1;var z=typeof v;return!(z!="number"&&z!="symbol"&&z!="boolean"&&v!=null&&!$n(v))||pe.test(v)||!xt.test(v)||A!=null&&v in Object(A)};function $e(v,A){if(typeof v!="function"||A!=null&&typeof A!="function")throw new TypeError("Expected a function");var z=function(){var K=arguments,it=A?A.apply(this,K):K[0],ut=z.cache;if(ut.has(it))return ut.get(it);var vt=v.apply(this,K);return z.cache=ut.set(it,vt)||ut,vt};return z.cache=new($e.Cache||Yn),z}$e.Cache=Yn;var br=$e,zr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,un=/\\(\\)?/g,ha=function(v){var A=br(v,function(K){return z.size===500&&z.clear(),K}),z=A.cache;return A}(function(v){var A=[];return v.charCodeAt(0)===46&&A.push(""),v.replace(zr,function(z,K,it,ut){A.push(it?ut.replace(un,"$1"):K||z)}),A}),Xa=function(v,A){for(var z=-1,K=v==null?0:v.length,it=Array(K);++z<K;)it[z]=A(v[z],z,v);return it},Ci=Lt?Lt.prototype:void 0,Vi=Ci?Ci.toString:void 0,ps=function v(A){if(typeof A=="string")return A;if(dt(A))return Xa(A,v)+"";if($n(A))return Vi?Vi.call(A):"";var z=A+"";return z=="0"&&1/A==-1/0?"-0":z},wi=function(v){return v==null?"":ps(v)},oo=function(v,A){return dt(v)?v:De(v,A)?[v]:ha(wi(v))},cs=function(v){if(typeof v=="string"||$n(v))return v;var A=v+"";return A=="0"&&1/v==-1/0?"-0":A},ks=function(v,A){for(var z=0,K=(A=oo(A,v)).length;v!=null&&z<K;)v=v[cs(A[z++])];return z&&z==K?v:void 0},Qu=function(v,A,z){var K=v==null?void 0:ks(v,A);return K===void 0?z:K},qs=function(v,A){return v!=null&&A in Object(v)},Js=function(v,A,z){for(var K=-1,it=(A=oo(A,v)).length,ut=!1;++K<it;){var vt=cs(A[K]);if(!(ut=v!=null&&z(v,vt)))break;v=v[vt]}return ut||++K!=it?ut:!!(it=v==null?0:v.length)&&Q(it)&&T(vt,it)&&(dt(v)||jr(v))},Rs=function(v,A){return v!=null&&Js(v,A,qs)},Nf=function(v,A){return De(v)&&No(A)?Ns(cs(v),A):function(z){var K=Qu(z,v);return K===void 0&&K===A?Rs(z,v):Do(A,K,3)}},Po=function(v){return function(A){return A==null?void 0:A[v]}},ys=function(v){return function(A){return ks(A,v)}},ms=function(v){return De(v)?Po(cs(v)):ys(v)},mo=function(v){return typeof v=="function"?v:v==null?Wi:typeof v=="object"?dt(v)?Nf(v[0],v[1]):Ps(v):ms(v)},Pf=function(v,A){return(dt(v)?cn:jo)(v,mo(A))},_c=Object.prototype.hasOwnProperty,tu=function(v,A){return v!=null&&_c.call(v,A)},bu=function(v,A){return v!=null&&Js(v,A,tu)},Sc=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Nr(v)&&(dt(v)||typeof v=="string"||typeof v.splice=="function"||U(v)||_e(v)||jr(v)))return!v.length;var A=Ui(v);if(A=="[object Map]"||A=="[object Set]")return!v.size;if(Hr(v))return!Sr(v).length;for(var z in v)if(Sc.call(v,z))return!1;return!0},D=function(v){return v===void 0},ft=function(v,A){var z=-1,K=Nr(v)?Array(v.length):[];return Ei(v,function(it,ut,vt){K[++z]=A(it,ut,vt)}),K},mt=function(v,A){return(dt(v)?Xa:ft)(v,mo(A))},Tt=function(v,A,z,K){var it=-1,ut=v==null?0:v.length;for(K&&ut&&(z=v[++it]);++it<ut;)z=A(z,v[it],it,v);return z},Xt=function(v,A,z,K,it){return it(v,function(ut,vt,yt){z=K?(K=!1,ut):A(z,ut,vt,yt)}),z},Yt=function(v,A,z){var K=dt(v)?Tt:Xt,it=arguments.length<3;return K(v,mo(A),z,it,Ei)},ne=function(v){return typeof v=="string"||!dt(v)&&Ze(v)&&Pt(v)=="[object String]"},he=Po("length"),Se=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ue=function(v){return Se.test(v)},cr="[\\ud800-\\udfff]",gr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",lr="\\ud83c[\\udffb-\\udfff]",Pr="[^\\ud800-\\udfff]",$r="(?:\\ud83c[\\udde6-\\uddff]){2}",xr="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="(?:"+gr+"|"+lr+")?",qn="[\\ufe0e\\ufe0f]?"+ln+("(?:\\u200d(?:"+[Pr,$r,xr].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*"),ea="(?:"+[Pr+gr+"?",gr,$r,xr,cr].join("|")+")",jn=RegExp(lr+"(?="+lr+")|"+ea+qn,"g"),Ln=function(v){for(var A=jn.lastIndex=0;jn.test(v);)++A;return A},Wn=function(v){return Ue(v)?Ln(v):he(v)},li=function(v){if(v==null)return 0;if(Nr(v))return ne(v)?Wn(v):v.length;var A=Ui(v);return A=="[object Map]"||A=="[object Set]"?v.size:Sr(v).length},oi=function(v,A,z){var K=dt(v),it=K||U(v)||_e(v);if(A=mo(A),z==null){var ut=v&&v.constructor;z=it?K?new ut:[]:Ht(v)&&ye(ut)?Ki(ca(v)):{}}return(it?Un:Yo)(v,function(vt,yt,_t){return A(z,vt,yt,_t)}),z},ei=Lt?Lt.isConcatSpreadable:void 0,si=function(v){return dt(v)||jr(v)||!!(ei&&v&&v[ei])},ui=function v(A,z,K,it,ut){var vt=-1,yt=A.length;for(K||(K=si),ut||(ut=[]);++vt<yt;){var _t=A[vt];z>0&&K(_t)?z>1?v(_t,z-1,K,it,ut):Ca(ut,_t):it||(ut[ut.length]=_t)}return ut},pi=function(v,A,z){switch(z.length){case 0:return v.call(A);case 1:return v.call(A,z[0]);case 2:return v.call(A,z[0],z[1]);case 3:return v.call(A,z[0],z[1],z[2])}return v.apply(A,z)},Ti=Math.max,pa=function(v,A,z){return A=Ti(A===void 0?v.length-1:A,0),function(){for(var K=arguments,it=-1,ut=Ti(K.length-A,0),vt=Array(ut);++it<ut;)vt[it]=K[A+it];it=-1;for(var yt=Array(A+1);++it<A;)yt[it]=K[it];return yt[A]=z(vt),pi(v,this,yt)}},ka=_n?function(v,A){return _n(v,"toString",{configurable:!0,enumerable:!1,value:Ri(A),writable:!0})}:Wi,bs=Date.now,ts=function(v){var A=0,z=0;return function(){var K=bs(),it=16-(K-z);if(z=K,it>0){if(++A>=800)return arguments[0]}else A=0;return v.apply(void 0,arguments)}}(ka),ko=function(v,A){return ts(pa(v,A,Wi),v+"")},eu=function(v,A,z,K){for(var it=v.length,ut=z+(K?1:-1);K?ut--:++ut<it;)if(A(v[ut],ut,v))return ut;return-1},Mc=function(v){return v!=v},ll=function(v,A,z){for(var K=z-1,it=v.length;++K<it;)if(v[K]===A)return K;return-1},hl=function(v,A,z){return A==A?ll(v,A,z):eu(v,Mc,z)},Ac=function(v,A){return!!(v!=null&&v.length)&&hl(v,A,0)>-1},oh=function(v,A,z){for(var K=-1,it=v==null?0:v.length;++K<it;)if(z(A,v[K]))return!0;return!1},Cc=function(){},qu=ua&&1/gi(new ua([,-0]))[1]==1/0?function(v){return new ua(v)}:Cc,dl=function(v,A,z){var K=-1,it=Ac,ut=v.length,vt=!0,yt=[],_t=yt;if(z)vt=!1,it=oh;else if(ut>=200){var Rt=A?null:qu(v);if(Rt)return gi(Rt);vt=!1,it=$i,_t=new go}else _t=A?[]:yt;t:for(;++K<ut;){var Qt=v[K],Vt=A?A(Qt):Qt;if(Qt=z||Qt!==0?Qt:0,vt&&Vt==Vt){for(var xe=_t.length;xe--;)if(_t[xe]===Vt)continue t;A&&_t.push(Vt),yt.push(Qt)}else it(_t,Vt,z)||(_t!==yt&&_t.push(Vt),yt.push(Qt))}return yt},Tc=function(v){return Ze(v)&&Nr(v)},vl=ko(function(v){return dl(ui(v,1,Tc,!0))}),sh=function(v,A){return Xa(A,function(z){return v[z]})},ru,gl=function(v){return v==null?[]:sh(v,$t(v))};try{ru={clone:Zi,constant:Ri,each:Xi,filter:Pf,has:bu,isArray:dt,isEmpty:h,isFunction:ye,isUndefined:D,keys:$t,map:mt,reduce:Yt,size:li,transform:oi,union:vl,values:gl}}catch(v){}ru||(ru=window._);var on=ru,xu=ya;function ya(v){this._isDirected=!on.has(v,"directed")||v.directed,this._isMultigraph=!!on.has(v,"multigraph")&&v.multigraph,this._isCompound=!!on.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=on.constant(void 0),this._defaultEdgeLabelFn=on.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Ic(v,A){v[A]?v[A]++:v[A]=1}function kf(v,A){--v[A]||delete v[A]}function nu(v,A,z,K){var it=""+A,ut=""+z;if(!v&&it>ut){var vt=it;it=ut,ut=vt}return it+""+ut+""+(on.isUndefined(K)?"\0":K)}function Oc(v,A,z,K){var it=""+A,ut=""+z;if(!v&&it>ut){var vt=it;it=ut,ut=vt}var yt={v:it,w:ut};return K&&(yt.name=K),yt}function Lc(v,A){return nu(v,A.v,A.w,A.name)}ya.prototype._nodeCount=0,ya.prototype._edgeCount=0,ya.prototype.isDirected=function(){return this._isDirected},ya.prototype.isMultigraph=function(){return this._isMultigraph},ya.prototype.isCompound=function(){return this._isCompound},ya.prototype.setGraph=function(v){return this._label=v,this},ya.prototype.graph=function(){return this._label},ya.prototype.setDefaultNodeLabel=function(v){return on.isFunction(v)||(v=on.constant(v)),this._defaultNodeLabelFn=v,this},ya.prototype.nodeCount=function(){return this._nodeCount},ya.prototype.nodes=function(){return on.keys(this._nodes)},ya.prototype.sources=function(){var v=this;return on.filter(this.nodes(),function(A){return on.isEmpty(v._in[A])})},ya.prototype.sinks=function(){var v=this;return on.filter(this.nodes(),function(A){return on.isEmpty(v._out[A])})},ya.prototype.setNodes=function(v,A){var z=arguments,K=this;return on.each(v,function(it){z.length>1?K.setNode(it,A):K.setNode(it)}),this},ya.prototype.setNode=function(v,A){return on.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=A),this):(this._nodes[v]=arguments.length>1?A:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},ya.prototype.node=function(v){return this._nodes[v]},ya.prototype.hasNode=function(v){return on.has(this._nodes,v)},ya.prototype.removeNode=function(v){var A=this;if(on.has(this._nodes,v)){var z=function(K){A.removeEdge(A._edgeObjs[K])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],on.each(this.children(v),function(K){A.setParent(K)}),delete this._children[v]),on.each(on.keys(this._in[v]),z),delete this._in[v],delete this._preds[v],on.each(on.keys(this._out[v]),z),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},ya.prototype.setParent=function(v,A){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(on.isUndefined(A))A="\0";else{for(var z=A+="";!on.isUndefined(z);z=this.parent(z))if(z===v)throw new Error("Setting "+A+" as parent of "+v+" would create a cycle");this.setNode(A)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=A,this._children[A][v]=!0,this},ya.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},ya.prototype.parent=function(v){if(this._isCompound){var A=this._parent[v];if(A!=="\0")return A}},ya.prototype.children=function(v){if(on.isUndefined(v)&&(v="\0"),this._isCompound){var A=this._children[v];if(A)return on.keys(A)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},ya.prototype.predecessors=function(v){var A=this._preds[v];if(A)return on.keys(A)},ya.prototype.successors=function(v){var A=this._sucs[v];if(A)return on.keys(A)},ya.prototype.neighbors=function(v){var A=this.predecessors(v);if(A)return on.union(A,this.successors(v))},ya.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},ya.prototype.filterNodes=function(v){var A=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});A.setGraph(this.graph());var z=this;on.each(this._nodes,function(ut,vt){v(vt)&&A.setNode(vt,ut)}),on.each(this._edgeObjs,function(ut){A.hasNode(ut.v)&&A.hasNode(ut.w)&&A.setEdge(ut,z.edge(ut))});var K={};function it(ut){var vt=z.parent(ut);return vt===void 0||A.hasNode(vt)?(K[ut]=vt,vt):vt in K?K[vt]:it(vt)}return this._isCompound&&on.each(A.nodes(),function(ut){A.setParent(ut,it(ut))}),A},ya.prototype.setDefaultEdgeLabel=function(v){return on.isFunction(v)||(v=on.constant(v)),this._defaultEdgeLabelFn=v,this},ya.prototype.edgeCount=function(){return this._edgeCount},ya.prototype.edges=function(){return on.values(this._edgeObjs)},ya.prototype.setPath=function(v,A){var z=this,K=arguments;return on.reduce(v,function(it,ut){return K.length>1?z.setEdge(it,ut,A):z.setEdge(it,ut),ut}),this},ya.prototype.setEdge=function(){var v,A,z,K,it=!1,ut=arguments[0];typeof ut=="object"&&ut!==null&&"v"in ut?(v=ut.v,A=ut.w,z=ut.name,arguments.length===2&&(K=arguments[1],it=!0)):(v=ut,A=arguments[1],z=arguments[3],arguments.length>2&&(K=arguments[2],it=!0)),v=""+v,A=""+A,on.isUndefined(z)||(z=""+z);var vt=nu(this._isDirected,v,A,z);if(on.has(this._edgeLabels,vt))return it&&(this._edgeLabels[vt]=K),this;if(!on.isUndefined(z)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(A),this._edgeLabels[vt]=it?K:this._defaultEdgeLabelFn(v,A,z);var yt=Oc(this._isDirected,v,A,z);return v=yt.v,A=yt.w,Object.freeze(yt),this._edgeObjs[vt]=yt,Ic(this._preds[A],v),Ic(this._sucs[v],A),this._in[A][vt]=yt,this._out[v][vt]=yt,this._edgeCount++,this},ya.prototype.edge=function(v,A,z){var K=arguments.length===1?Lc(this._isDirected,arguments[0]):nu(this._isDirected,v,A,z);return this._edgeLabels[K]},ya.prototype.hasEdge=function(v,A,z){var K=arguments.length===1?Lc(this._isDirected,arguments[0]):nu(this._isDirected,v,A,z);return on.has(this._edgeLabels,K)},ya.prototype.removeEdge=function(v,A,z){var K=arguments.length===1?Lc(this._isDirected,arguments[0]):nu(this._isDirected,v,A,z),it=this._edgeObjs[K];return it&&(v=it.v,A=it.w,delete this._edgeLabels[K],delete this._edgeObjs[K],kf(this._preds[A],v),kf(this._sucs[v],A),delete this._in[A][K],delete this._out[v][K],this._edgeCount--),this},ya.prototype.inEdges=function(v,A){var z=this._in[v];if(z){var K=on.values(z);return A?on.filter(K,function(it){return it.v===A}):K}},ya.prototype.outEdges=function(v,A){var z=this._out[v];if(z){var K=on.values(z);return A?on.filter(K,function(it){return it.w===A}):K}},ya.prototype.nodeEdges=function(v,A){var z=this.inEdges(v,A);if(z)return z.concat(this.outEdges(v,A))};var Rf={Graph:xu,version:"2.1.8"},pl={write:function(v){var A={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:yl(v),edges:es(v)};return on.isUndefined(v.graph())||(A.value=on.clone(v.graph())),A},read:function(v){var A=new xu(v.options).setGraph(v.value);return on.each(v.nodes,function(z){A.setNode(z.v,z.value),z.parent&&A.setParent(z.v,z.parent)}),on.each(v.edges,function(z){A.setEdge({v:z.v,w:z.w,name:z.name},z.value)}),A}};function yl(v){return on.map(v.nodes(),function(A){var z=v.node(A),K=v.parent(A),it={v:A};return on.isUndefined(z)||(it.value=z),on.isUndefined(K)||(it.parent=K),it})}function es(v){return on.map(v.edges(),function(A){var z=v.edge(A),K={v:A.v,w:A.w};return on.isUndefined(A.name)||(K.name=A.name),on.isUndefined(z)||(K.value=z),K})}var Dc=function(v){var A,z={},K=[];function it(ut){on.has(z,ut)||(z[ut]=!0,A.push(ut),on.each(v.successors(ut),it),on.each(v.predecessors(ut),it))}return on.each(v.nodes(),function(ut){A=[],it(ut),A.length&&K.push(A)}),K},Bs=_i;function _i(){this._arr=[],this._keyIndices={}}_i.prototype.size=function(){return this._arr.length},_i.prototype.keys=function(){return this._arr.map(function(v){return v.key})},_i.prototype.has=function(v){return on.has(this._keyIndices,v)},_i.prototype.priority=function(v){var A=this._keyIndices[v];if(A!==void 0)return this._arr[A].priority},_i.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},_i.prototype.add=function(v,A){var z=this._keyIndices;if(v=String(v),!on.has(z,v)){var K=this._arr,it=K.length;return z[v]=it,K.push({key:v,priority:A}),this._decrease(it),!0}return!1},_i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},_i.prototype.decrease=function(v,A){var z=this._keyIndices[v];if(A>this._arr[z].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[z].priority+" New: "+A);this._arr[z].priority=A,this._decrease(z)},_i.prototype._heapify=function(v){var A=this._arr,z=2*v,K=z+1,it=v;z<A.length&&(it=A[z].priority<A[it].priority?z:it,K<A.length&&(it=A[K].priority<A[it].priority?K:it),it!==v&&(this._swap(v,it),this._heapify(it)))},_i.prototype._decrease=function(v){for(var A,z=this._arr,K=z[v].priority;v!==0&&!(z[A=v>>1].priority<K);)this._swap(v,A),v=A},_i.prototype._swap=function(v,A){var z=this._arr,K=this._keyIndices,it=z[v],ut=z[A];z[v]=ut,z[A]=it,K[ut.key]=v,K[it.key]=A};var Fs=function(v,A,z,K){return function(it,ut,vt,yt){var _t,Rt,Qt={},Vt=new Bs,xe=function(ke){var dr=ke.v!==_t?ke.v:ke.w,Xe=Qt[dr],Ve=vt(ke),je=Rt.distance+Ve;if(Ve<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ke+" Weight: "+Ve);je<Xe.distance&&(Xe.distance=je,Xe.predecessor=_t,Vt.decrease(dr,je))};for(it.nodes().forEach(function(ke){var dr=ke===ut?0:Number.POSITIVE_INFINITY;Qt[ke]={distance:dr},Vt.add(ke,dr)});Vt.size()>0&&(_t=Vt.removeMin(),(Rt=Qt[_t]).distance!==Number.POSITIVE_INFINITY);)yt(_t).forEach(xe);return Qt}(v,String(A),z||xs,K||function(it){return v.outEdges(it)})},xs=on.constant(1),Bf=function(v,A,z){return on.transform(v.nodes(),function(K,it){K[it]=Fs(v,it,A,z)},{})},Nc=function(v){var A=0,z=[],K={},it=[];function ut(vt){var yt=K[vt]={onStack:!0,lowlink:A,index:A++};if(z.push(vt),v.successors(vt).forEach(function(Qt){on.has(K,Qt)?K[Qt].onStack&&(yt.lowlink=Math.min(yt.lowlink,K[Qt].index)):(ut(Qt),yt.lowlink=Math.min(yt.lowlink,K[Qt].lowlink))}),yt.lowlink===yt.index){var _t,Rt=[];do _t=z.pop(),K[_t].onStack=!1,Rt.push(_t);while(vt!==_t);it.push(Rt)}}return v.nodes().forEach(function(vt){on.has(K,vt)||ut(vt)}),it},ml=function(v){return on.filter(Nc(v),function(A){return A.length>1||A.length===1&&v.hasEdge(A[0],A[0])})},bl=function(v,A,z){return function(K,it,ut){var vt={},yt=K.nodes();return yt.forEach(function(_t){vt[_t]={},vt[_t][_t]={distance:0},yt.forEach(function(Rt){_t!==Rt&&(vt[_t][Rt]={distance:Number.POSITIVE_INFINITY})}),ut(_t).forEach(function(Rt){var Qt=Rt.v===_t?Rt.w:Rt.v,Vt=it(Rt);vt[_t][Qt]={distance:Vt,predecessor:_t}})}),yt.forEach(function(_t){var Rt=vt[_t];yt.forEach(function(Qt){var Vt=vt[Qt];yt.forEach(function(xe){var ke=Vt[_t],dr=Rt[xe],Xe=Vt[xe],Ve=ke.distance+dr.distance;Ve<Xe.distance&&(Xe.distance=Ve,Xe.predecessor=dr.predecessor)})})}),vt}(v,A||xl,z||function(K){return v.outEdges(K)})},xl=on.constant(1),Ff=El;function El(v){var A={},z={},K=[];if(on.each(v.sinks(),function it(ut){if(on.has(z,ut))throw new Gf;on.has(A,ut)||(z[ut]=!0,A[ut]=!0,on.each(v.predecessors(ut),it),delete z[ut],K.push(ut))}),on.size(A)!==v.nodeCount())throw new Gf;return K}function Gf(){}El.CycleException=Gf,Gf.prototype=new Error;var wl=function(v,A,z){on.isArray(A)||(A=[A]);var K=(v.isDirected()?v.successors:v.neighbors).bind(v),it=[],ut={};return on.each(A,function(vt){if(!v.hasNode(vt))throw new Error("Graph does not have node: "+vt);Pc(v,vt,z==="post",ut,K,it)}),it};function Pc(v,A,z,K,it,ut){on.has(K,A)||(K[A]=!0,z||ut.push(A),on.each(it(A),function(vt){Pc(v,vt,z,K,it,ut)}),z&&ut.push(A))}var Ju,kc={Graph:Rf.Graph,json:pl,alg:{components:Dc,dijkstra:Fs,dijkstraAll:Bf,findCycles:ml,floydWarshall:bl,isAcyclic:function(v){try{Ff(v)}catch(A){if(A instanceof Ff.CycleException)return!1;throw A}return!0},postorder:function(v,A){return wl(v,A,"post")},preorder:function(v,A){return wl(v,A,"pre")},prim:function(v,A){var z,K=new xu,it={},ut=new Bs;function vt(_t){var Rt=_t.v===z?_t.w:_t.v,Qt=ut.priority(Rt);if(Qt!==void 0){var Vt=A(_t);Vt<Qt&&(it[Rt]=z,ut.decrease(Rt,Vt))}}if(v.nodeCount()===0)return K;on.each(v.nodes(),function(_t){ut.add(_t,Number.POSITIVE_INFINITY),K.setNode(_t)}),ut.decrease(v.nodes()[0],0);for(var yt=!1;ut.size()>0;){if(z=ut.removeMin(),on.has(it,z))K.setEdge(z,it[z]);else{if(yt)throw new Error("Input graph is not connected: "+v);yt=!0}v.nodeEdges(z).forEach(vt)}return K},tarjan:Nc,topsort:Ff},version:Rf.version};try{Ju=kc}catch(v){}Ju||(Ju=window.graphlib);var Ko=Ju,Rc=function(v){return us(v,5)},tf=function(v,A,z){if(!Ht(z))return!1;var K=typeof A;return!!(K=="number"?Nr(z)&&T(A,z.length):K=="string"&&A in z)&&_(z[A],v)},_l=Object.prototype,uh=_l.hasOwnProperty,Bc=ko(function(v,A){v=Object(v);var z=-1,K=A.length,it=K>2?A[2]:void 0;for(it&&tf(A[0],A[1],it)&&(K=1);++z<K;)for(var ut=A[z],vt=Te(ut),yt=-1,_t=vt.length;++yt<_t;){var Rt=vt[yt],Qt=v[Rt];(Qt===void 0||_(Qt,_l[Rt])&&!uh.call(v,Rt))&&(v[Rt]=ut[Rt])}return v}),ef=function(v){return function(A,z,K){var it=Object(A);if(!Nr(A)){var ut=mo(z);A=$t(A),z=function(yt){return ut(it[yt],yt,it)}}var vt=v(A,z,K);return vt>-1?it[ut?A[vt]:vt]:void 0}},fh=/^\s+|\s+$/g,Fc=/^[-+]0x[0-9a-f]+$/i,Gc=/^0b[01]+$/i,Sl=/^0o[0-7]+$/i,rf=parseInt,Eu=function(v){if(typeof v=="number")return v;if($n(v))return NaN;if(Ht(v)){var A=typeof v.valueOf=="function"?v.valueOf():v;v=Ht(A)?A+"":A}if(typeof v!="string")return v===0?v:+v;v=v.replace(fh,"");var z=Gc.test(v);return z||Sl.test(v)?rf(v.slice(2),z?2:8):Fc.test(v)?NaN:+v},au=function(v){return v?(v=Eu(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},wu=function(v){var A=au(v),z=A%1;return A==A?z?A-z:A:0},nf=Math.max,ls=ef(function(v,A,z){var K=v==null?0:v.length;if(!K)return-1;var it=z==null?0:wu(z);return it<0&&(it=nf(K+it,0)),eu(v,mo(A),it)}),Ml=function(v){return v!=null&&v.length?ui(v,1):[]},_u=function(v,A){return v==null?v:vo(v,Za(A),Te)},ch=function(v){var A=v==null?0:v.length;return A?v[A-1]:void 0},lh=function(v,A){var z={};return A=mo(A),Yo(v,function(K,it,ut){aa(z,it,A(K,it,ut))}),z},zf=function(v,A,z){for(var K=-1,it=v.length;++K<it;){var ut=v[K],vt=A(ut);if(vt!=null&&(yt===void 0?vt==vt&&!$n(vt):z(vt,yt)))var yt=vt,_t=ut}return _t},zc=function(v,A){return v>A},hh=function(v){return v&&v.length?zf(v,Wi,zc):void 0},af=function(v,A,z){(z!==void 0&&!_(v[A],z)||z===void 0&&!(A in v))&&aa(v,A,z)},Al=Function.prototype,dh=Object.prototype,Cl=Al.toString,Tl=dh.hasOwnProperty,of=Cl.call(Object),Su=function(v){if(!Ze(v)||Pt(v)!="[object Object]")return!1;var A=ca(v);if(A===null)return!0;var z=Tl.call(A,"constructor")&&A.constructor;return typeof z=="function"&&z instanceof z&&Cl.call(z)==of},Mu=function(v,A){if((A!=="constructor"||typeof v[A]!="function")&&A!="__proto__")return v[A]},Uf=function(v){return be(v,Te(v))},Wf=function(v,A,z,K,it,ut,vt){var yt=Mu(v,z),_t=Mu(A,z),Rt=vt.get(_t);if(Rt)af(v,z,Rt);else{var Qt=ut?ut(yt,_t,z+"",v,A,vt):void 0,Vt=Qt===void 0;if(Vt){var xe=dt(_t),ke=!xe&&U(_t),dr=!xe&&!ke&&_e(_t);Qt=_t,xe||ke||dr?dt(yt)?Qt=yt:Tc(yt)?Qt=Gr(yt):ke?(Vt=!1,Qt=tr(_t,!0)):dr?(Vt=!1,Qt=ss(_t,!0)):Qt=[]:Su(_t)||jr(_t)?(Qt=yt,jr(yt)?Qt=Uf(yt):Ht(yt)&&!ye(yt)||(Qt=Ka(_t))):Vt=!1}Vt&&(vt.set(_t,Qt),it(Qt,_t,K,ut,vt),vt.delete(_t)),af(v,z,Qt)}},Gi=function v(A,z,K,it,ut){A!==z&&vo(z,function(vt,yt){if(ut||(ut=new zn),Ht(vt))Wf(A,z,yt,K,v,it,ut);else{var _t=it?it(Mu(A,yt),vt,yt+"",A,z,ut):void 0;_t===void 0&&(_t=vt),af(A,yt,_t)}},Te)},iu=function(v){return ko(function(A,z){var K=-1,it=z.length,ut=it>1?z[it-1]:void 0,vt=it>2?z[2]:void 0;for(ut=v.length>3&&typeof ut=="function"?(it--,ut):void 0,vt&&tf(z[0],z[1],vt)&&(ut=it<3?void 0:ut,it=1),A=Object(A);++K<it;){var yt=z[K];yt&&v(A,yt,K,ut)}return A})}(function(v,A,z){Gi(v,A,z)}),Il=function(v,A){return v<A},ou=function(v){return v&&v.length?zf(v,Wi,Il):void 0},sf=function(v,A){return v&&v.length?zf(v,mo(A),Il):void 0},Zo=function(){return ht.Date.now()},Es=function(v,A,z,K){if(!Ht(v))return v;for(var it=-1,ut=(A=oo(A,v)).length,vt=ut-1,yt=v;yt!=null&&++it<ut;){var _t=cs(A[it]),Rt=z;if(_t==="__proto__"||_t==="constructor"||_t==="prototype")return v;if(it!=vt){var Qt=yt[_t];(Rt=K?K(Qt,_t,yt):void 0)===void 0&&(Rt=Ht(Qt)?Qt:T(A[it+1])?[]:{})}Re(yt,_t,Rt),yt=yt[_t]}return v},Xf=function(v,A,z){for(var K=-1,it=A.length,ut={};++K<it;){var vt=A[K],yt=ks(v,vt);z(yt,vt)&&Es(ut,oo(vt,v),yt)}return ut},Yf=function(v,A){return Xf(v,A,function(z,K){return Rs(v,K)})},Uc=function(v){return ts(pa(v,void 0,Ml),v+"")}(function(v,A){return v==null?{}:Yf(v,A)}),Ro=Math.ceil,uf=Math.max,ff=function(v,A,z,K){for(var it=-1,ut=uf(Ro((A-v)/(z||1)),0),vt=Array(ut);ut--;)vt[K?ut:++it]=v,v+=z;return vt},Vf=function(v){return function(A,z,K){return K&&typeof K!="number"&&tf(A,z,K)&&(z=K=void 0),A=au(A),z===void 0?(z=A,A=0):z=au(z),K=K===void 0?A<z?1:-1:au(K),ff(A,z,K,v)}}(),Wc=function(v,A){var z=v.length;for(v.sort(A);z--;)v[z]=v[z].value;return v},Ol=function(v,A){if(v!==A){var z=v!==void 0,K=v===null,it=v==v,ut=$n(v),vt=A!==void 0,yt=A===null,_t=A==A,Rt=$n(A);if(!yt&&!Rt&&!ut&&v>A||ut&&vt&&_t&&!yt&&!Rt||K&&vt&&_t||!z&&_t||!it)return 1;if(!K&&!ut&&!Rt&&v<A||Rt&&z&&it&&!K&&!ut||yt&&z&&it||!vt&&it||!_t)return-1}return 0},Ll=function(v,A,z){for(var K=-1,it=v.criteria,ut=A.criteria,vt=it.length,yt=z.length;++K<vt;){var _t=Ol(it[K],ut[K]);if(_t)return K>=yt?_t:_t*(z[K]=="desc"?-1:1)}return v.index-A.index},cf=function(v,A,z){A=A.length?Xa(A,function(ut){return dt(ut)?function(vt){return ks(vt,ut.length===1?ut[0]:ut)}:ut}):[Wi];var K=-1;A=Xa(A,It(mo));var it=ft(v,function(ut,vt,yt){return{criteria:Xa(A,function(_t){return _t(ut)}),index:++K,value:ut}});return Wc(it,function(ut,vt){return Ll(ut,vt,z)})},jf=ko(function(v,A){if(v==null)return[];var z=A.length;return z>1&&tf(v,A[0],A[1])?A=[]:z>2&&tf(A[0],A[1],A[2])&&(A=[A[0]]),cf(v,ui(A,1),[])}),Dl=0,vh=function(v){var A=++Dl;return wi(v)+A},Nl=function(v,A,z){for(var K=-1,it=v.length,ut=A.length,vt={};++K<it;){var yt=K<ut?A[K]:void 0;z(vt,v[K],yt)}return vt},Au,Hf=function(v,A){return Nl(v||[],A||[],Re)};try{Au={cloneDeep:Rc,constant:Ri,defaults:Bc,each:Xi,filter:Pf,find:ls,flatten:Ml,forEach:Vo,forIn:_u,has:bu,isUndefined:D,last:ch,map:mt,mapValues:lh,max:hh,merge:iu,min:ou,minBy:sf,now:Zo,pick:Uc,range:Vf,reduce:Yt,sortBy:jf,uniqueId:vh,values:gl,zipObject:Hf}}catch(v){}Au||(Au=window._);var Ie=Au,gh=lf;function lf(){var v={};v._next=v._prev=v,this._sentinel=v}function hf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function Xc(v,A){if(v!=="_next"&&v!=="_prev")return A}lf.prototype.dequeue=function(){var v=this._sentinel,A=v._prev;if(A!==v)return hf(A),A},lf.prototype.enqueue=function(v){var A=this._sentinel;v._prev&&v._next&&hf(v),v._next=A._next,A._next._prev=v,A._next=v,v._prev=A},lf.prototype.toString=function(){for(var v=[],A=this._sentinel,z=A._prev;z!==A;)v.push(JSON.stringify(z,Xc)),z=z._prev;return"["+v.join(", ")+"]"};var Yc=Ko.Graph,Vc=function(v,A){if(v.nodeCount()<=1)return[];var z=function(it,ut){var vt=new Yc,yt=0,_t=0;Ie.forEach(it.nodes(),function(Vt){vt.setNode(Vt,{v:Vt,in:0,out:0})}),Ie.forEach(it.edges(),function(Vt){var xe=vt.edge(Vt.v,Vt.w)||0,ke=ut(Vt),dr=xe+ke;vt.setEdge(Vt.v,Vt.w,dr),_t=Math.max(_t,vt.node(Vt.v).out+=ke),yt=Math.max(yt,vt.node(Vt.w).in+=ke)});var Rt=Ie.range(_t+yt+3).map(function(){return new gh}),Qt=yt+1;return Ie.forEach(vt.nodes(),function(Vt){Kf(Rt,Qt,vt.node(Vt))}),{graph:vt,buckets:Rt,zeroIdx:Qt}}(v,A||Pl),K=function(it,ut,vt){for(var yt,_t=[],Rt=ut[ut.length-1],Qt=ut[0];it.nodeCount();){for(;yt=Qt.dequeue();)su(it,ut,vt,yt);for(;yt=Rt.dequeue();)su(it,ut,vt,yt);if(it.nodeCount()){for(var Vt=ut.length-2;Vt>0;--Vt)if(yt=ut[Vt].dequeue()){_t=_t.concat(su(it,ut,vt,yt,!0));break}}}return _t}(z.graph,z.buckets,z.zeroIdx);return Ie.flatten(Ie.map(K,function(it){return v.outEdges(it.v,it.w)}),!0)},Pl=Ie.constant(1);function su(v,A,z,K,it){var ut=it?[]:void 0;return Ie.forEach(v.inEdges(K.v),function(vt){var yt=v.edge(vt),_t=v.node(vt.v);it&&ut.push({v:vt.v,w:vt.w}),_t.out-=yt,Kf(A,z,_t)}),Ie.forEach(v.outEdges(K.v),function(vt){var yt=v.edge(vt),_t=vt.w,Rt=v.node(_t);Rt.in-=yt,Kf(A,z,Rt)}),v.removeNode(K.v),ut}function Kf(v,A,z){z.out?z.in?v[z.out-z.in+A].enqueue(z):v[v.length-1].enqueue(z):v[0].enqueue(z)}var df={run:function(v){var A=v.graph().acyclicer==="greedy"?Vc(v,function(z){return function(K){return z.edge(K).weight}}(v)):function(z){var K=[],it={},ut={};function vt(yt){Ie.has(ut,yt)||(ut[yt]=!0,it[yt]=!0,Ie.forEach(z.outEdges(yt),function(_t){Ie.has(it,_t.w)?K.push(_t):vt(_t.w)}),delete it[yt])}return Ie.forEach(z.nodes(),vt),K}(v);Ie.forEach(A,function(z){var K=v.edge(z);v.removeEdge(z),K.forwardName=z.name,K.reversed=!0,v.setEdge(z.w,z.v,K,Ie.uniqueId("rev"))})},undo:function(v){Ie.forEach(v.edges(),function(A){var z=v.edge(A);if(z.reversed){v.removeEdge(A);var K=z.forwardName;delete z.reversed,delete z.forwardName,v.setEdge(A.w,A.v,z,K)}})}},Cu=Ko.Graph,Ii={addDummyNode:Tu,simplify:function(v){var A=new Cu().setGraph(v.graph());return Ie.forEach(v.nodes(),function(z){A.setNode(z,v.node(z))}),Ie.forEach(v.edges(),function(z){var K=A.edge(z.v,z.w)||{weight:0,minlen:1},it=v.edge(z);A.setEdge(z.v,z.w,{weight:K.weight+it.weight,minlen:Math.max(K.minlen,it.minlen)})}),A},asNonCompoundGraph:function(v){var A=new Cu({multigraph:v.isMultigraph()}).setGraph(v.graph());return Ie.forEach(v.nodes(),function(z){v.children(z).length||A.setNode(z,v.node(z))}),Ie.forEach(v.edges(),function(z){A.setEdge(z,v.edge(z))}),A},successorWeights:function(v){var A=Ie.map(v.nodes(),function(z){var K={};return Ie.forEach(v.outEdges(z),function(it){K[it.w]=(K[it.w]||0)+v.edge(it).weight}),K});return Ie.zipObject(v.nodes(),A)},predecessorWeights:function(v){var A=Ie.map(v.nodes(),function(z){var K={};return Ie.forEach(v.inEdges(z),function(it){K[it.v]=(K[it.v]||0)+v.edge(it).weight}),K});return Ie.zipObject(v.nodes(),A)},intersectRect:function(v,A){var z,K,it=v.x,ut=v.y,vt=A.x-it,yt=A.y-ut,_t=v.width/2,Rt=v.height/2;if(!vt&&!yt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(yt)*_t>Math.abs(vt)*Rt?(yt<0&&(Rt=-Rt),z=Rt*vt/yt,K=Rt):(vt<0&&(_t=-_t),z=_t,K=_t*yt/vt),{x:it+z,y:ut+K}},buildLayerMatrix:function(v){var A=Ie.map(Ie.range(jc(v)+1),function(){return[]});return Ie.forEach(v.nodes(),function(z){var K=v.node(z),it=K.rank;Ie.isUndefined(it)||(A[it][K.order]=z)}),A},normalizeRanks:function(v){var A=Ie.min(Ie.map(v.nodes(),function(z){return v.node(z).rank}));Ie.forEach(v.nodes(),function(z){var K=v.node(z);Ie.has(K,"rank")&&(K.rank-=A)})},removeEmptyRanks:function(v){var A=Ie.min(Ie.map(v.nodes(),function(ut){return v.node(ut).rank})),z=[];Ie.forEach(v.nodes(),function(ut){var vt=v.node(ut).rank-A;z[vt]||(z[vt]=[]),z[vt].push(ut)});var K=0,it=v.graph().nodeRankFactor;Ie.forEach(z,function(ut,vt){Ie.isUndefined(ut)&&vt%it!=0?--K:K&&Ie.forEach(ut,function(yt){v.node(yt).rank+=K})})},addBorderNode:function(v,A,z,K){var it={width:0,height:0};return arguments.length>=4&&(it.rank=z,it.order=K),Tu(v,"border",it,A)},maxRank:jc,partition:function(v,A){var z={lhs:[],rhs:[]};return Ie.forEach(v,function(K){A(K)?z.lhs.push(K):z.rhs.push(K)}),z},time:function(v,A){var z=Ie.now();try{return A()}finally{console.log(v+" time: "+(Ie.now()-z)+"ms")}},notime:function(v,A){return A()}};function Tu(v,A,z,K){var it;do it=Ie.uniqueId(K);while(v.hasNode(it));return z.dummy=A,v.setNode(it,z),it}function jc(v){return Ie.max(Ie.map(v.nodes(),function(A){var z=v.node(A).rank;if(!Ie.isUndefined(z))return z}))}var Gs={run:function(v){v.graph().dummyChains=[],Ie.forEach(v.edges(),function(A){(function(z,K){var it,ut,vt,yt=K.v,_t=z.node(yt).rank,Rt=K.w,Qt=z.node(Rt).rank,Vt=K.name,xe=z.edge(K),ke=xe.labelRank;if(Qt!==_t+1){for(z.removeEdge(K),vt=0,++_t;_t<Qt;++vt,++_t)xe.points=[],ut={width:0,height:0,edgeLabel:xe,edgeObj:K,rank:_t},it=Ii.addDummyNode(z,"edge",ut,"_d"),_t===ke&&(ut.width=xe.width,ut.height=xe.height,ut.dummy="edge-label",ut.labelpos=xe.labelpos),z.setEdge(yt,it,{weight:xe.weight},Vt),vt===0&&z.graph().dummyChains.push(it),yt=it;z.setEdge(yt,Rt,{weight:xe.weight},Vt)}})(v,A)})},undo:function(v){Ie.forEach(v.graph().dummyChains,function(A){var z,K=v.node(A),it=K.edgeLabel;for(v.setEdge(K.edgeObj,it);K.dummy;)z=v.successors(A)[0],v.removeNode(A),it.points.push({x:K.x,y:K.y}),K.dummy==="edge-label"&&(it.x=K.x,it.y=K.y,it.width=K.width,it.height=K.height),A=z,K=v.node(A)})}},hs=function(v){var A={};Ie.forEach(v.sources(),function z(K){var it=v.node(K);if(Ie.has(A,K))return it.rank;A[K]=!0;var ut=Ie.min(Ie.map(v.outEdges(K),function(vt){return z(vt.w)-v.edge(vt).minlen}));return ut!==Number.POSITIVE_INFINITY&&ut!=null||(ut=0),it.rank=ut})},Iu=function(v,A){return v.node(A.w).rank-v.node(A.v).rank-v.edge(A).minlen},uu=Ko.Graph,ws=Iu,Ou=function(v){var A,z,K=new uu({directed:!1}),it=v.nodes()[0],ut=v.nodeCount();for(K.setNode(it,{});fu(K,v)<ut;)A=zs(K,v),z=K.hasNode(A.v)?ws(v,A):-ws(v,A),_s(K,v,z);return K};function fu(v,A){return Ie.forEach(v.nodes(),function z(K){Ie.forEach(A.nodeEdges(K),function(it){var ut=it.v,vt=K===ut?it.w:ut;v.hasNode(vt)||ws(A,it)||(v.setNode(vt,{}),v.setEdge(K,vt,{}),z(vt))})}),v.nodeCount()}function zs(v,A){return Ie.minBy(A.edges(),function(z){if(v.hasNode(z.v)!==v.hasNode(z.w))return ws(A,z)})}function _s(v,A,z){Ie.forEach(v.nodes(),function(K){A.node(K).rank+=z})}var Zf=Iu,$f=hs,Lu=Ko.alg.preorder,Qf=Ko.alg.postorder,qf=Ii.simplify,Du=$o;function $o(v){v=qf(v),$f(v);var A,z=Ou(v);for(tc(z),Jf(z,v);A=ec(z);)cu(z,v,A,kl(z,v,A))}function Jf(v,A){var z=Qf(v,v.nodes());z=z.slice(0,z.length-1),Ie.forEach(z,function(K){(function(it,ut,vt){var yt=it.node(vt).parent;it.edge(vt,yt).cutvalue=Ss(it,ut,vt)})(v,A,K)})}function Ss(v,A,z){var K=v.node(z).parent,it=!0,ut=A.edge(z,K),vt=0;return ut||(it=!1,ut=A.edge(K,z)),vt=ut.weight,Ie.forEach(A.nodeEdges(z),function(yt){var _t,Rt,Qt=yt.v===z,Vt=Qt?yt.w:yt.v;if(Vt!==K){var xe=Qt===it,ke=A.edge(yt).weight;if(vt+=xe?ke:-ke,_t=z,Rt=Vt,v.hasEdge(_t,Rt)){var dr=v.edge(z,Vt).cutvalue;vt+=xe?-dr:dr}}}),vt}function tc(v,A){arguments.length<2&&(A=v.nodes()[0]),Hc(v,{},1,A)}function Hc(v,A,z,K,it){var ut=z,vt=v.node(K);return A[K]=!0,Ie.forEach(v.neighbors(K),function(yt){Ie.has(A,yt)||(z=Hc(v,A,z,yt,K))}),vt.low=ut,vt.lim=z++,it?vt.parent=it:delete vt.parent,z}function ec(v){return Ie.find(v.edges(),function(A){return v.edge(A).cutvalue<0})}function kl(v,A,z){var K=z.v,it=z.w;A.hasEdge(K,it)||(K=z.w,it=z.v);var ut=v.node(K),vt=v.node(it),yt=ut,_t=!1;ut.lim>vt.lim&&(yt=vt,_t=!0);var Rt=Ie.filter(A.edges(),function(Qt){return _t===Kc(v,v.node(Qt.v),yt)&&_t!==Kc(v,v.node(Qt.w),yt)});return Ie.minBy(Rt,function(Qt){return Zf(A,Qt)})}function cu(v,A,z,K){var it=z.v,ut=z.w;v.removeEdge(it,ut),v.setEdge(K.v,K.w,{}),tc(v),Jf(v,A),function(vt,yt){var _t=Ie.find(vt.nodes(),function(Qt){return!yt.node(Qt).parent}),Rt=Lu(vt,_t);Rt=Rt.slice(1),Ie.forEach(Rt,function(Qt){var Vt=vt.node(Qt).parent,xe=yt.edge(Qt,Vt),ke=!1;xe||(xe=yt.edge(Vt,Qt),ke=!0),yt.node(Qt).rank=yt.node(Vt).rank+(ke?xe.minlen:-xe.minlen)})}(v,A)}function Kc(v,A,z){return z.low<=A.lim&&A.lim<=z.lim}$o.initLowLimValues=tc,$o.initCutValues=Jf,$o.calcCutValue=Ss,$o.leaveEdge=ec,$o.enterEdge=kl,$o.exchangeEdges=cu;var rc=hs,ph=function(v){switch(v.graph().ranker){case"network-simplex":Bl(v);break;case"tight-tree":(function(A){rc(A),Ou(A)})(v);break;case"longest-path":Rl(v);break;default:Bl(v)}},Rl=rc;function Bl(v){Du(v)}var yh=function(v){var A=function(z){var K={},it=0;function ut(vt){var yt=it;Ie.forEach(z.children(vt),ut),K[vt]={low:yt,lim:it++}}return Ie.forEach(z.children(),ut),K}(v);Ie.forEach(v.graph().dummyChains,function(z){for(var K=v.node(z),it=K.edgeObj,ut=function(Vt,xe,ke,dr){var Xe,Ve,je=[],Br=[],Qr=Math.min(xe[ke].low,xe[dr].low),Xr=Math.max(xe[ke].lim,xe[dr].lim);Xe=ke;do Xe=Vt.parent(Xe),je.push(Xe);while(Xe&&(xe[Xe].low>Qr||Xr>xe[Xe].lim));for(Ve=Xe,Xe=dr;(Xe=Vt.parent(Xe))!==Ve;)Br.push(Xe);return{path:je.concat(Br.reverse()),lca:Ve}}(v,A,it.v,it.w),vt=ut.path,yt=ut.lca,_t=0,Rt=vt[_t],Qt=!0;z!==it.w;){if(K=v.node(z),Qt){for(;(Rt=vt[_t])!==yt&&v.node(Rt).maxRank<K.rank;)_t++;Rt===yt&&(Qt=!1)}if(!Qt){for(;_t<vt.length-1&&v.node(Rt=vt[_t+1]).minRank<=K.rank;)_t++;Rt=vt[_t]}v.setParent(z,Rt),z=v.successors(z)[0]}})},Fl={run:function(v){var A=Ii.addDummyNode(v,"root",{},"_root"),z=function(vt){var yt={};function _t(Rt,Qt){var Vt=vt.children(Rt);Vt&&Vt.length&&Ie.forEach(Vt,function(xe){_t(xe,Qt+1)}),yt[Rt]=Qt}return Ie.forEach(vt.children(),function(Rt){_t(Rt,1)}),yt}(v),K=Ie.max(Ie.values(z))-1,it=2*K+1;v.graph().nestingRoot=A,Ie.forEach(v.edges(),function(vt){v.edge(vt).minlen*=it});var ut=function(vt){return Ie.reduce(vt.edges(),function(yt,_t){return yt+vt.edge(_t).weight},0)}(v)+1;Ie.forEach(v.children(),function(vt){Gl(v,A,it,ut,K,z,vt)}),v.graph().nodeRankFactor=it},cleanup:function(v){var A=v.graph();v.removeNode(A.nestingRoot),delete A.nestingRoot,Ie.forEach(v.edges(),function(z){v.edge(z).nestingEdge&&v.removeEdge(z)})}};function Gl(v,A,z,K,it,ut,vt){var yt=v.children(vt);if(yt.length){var _t=Ii.addBorderNode(v,"_bt"),Rt=Ii.addBorderNode(v,"_bb"),Qt=v.node(vt);v.setParent(_t,vt),Qt.borderTop=_t,v.setParent(Rt,vt),Qt.borderBottom=Rt,Ie.forEach(yt,function(Vt){Gl(v,A,z,K,it,ut,Vt);var xe=v.node(Vt),ke=xe.borderTop?xe.borderTop:Vt,dr=xe.borderBottom?xe.borderBottom:Vt,Xe=xe.borderTop?K:2*K,Ve=ke!==dr?1:it-ut[vt]+1;v.setEdge(_t,ke,{weight:Xe,minlen:Ve,nestingEdge:!0}),v.setEdge(dr,Rt,{weight:Xe,minlen:Ve,nestingEdge:!0})}),v.parent(vt)||v.setEdge(A,_t,{weight:0,minlen:it+ut[vt]})}else vt!==A&&v.setEdge(A,vt,{weight:0,minlen:z})}var mh=function(v){Ie.forEach(v.children(),function A(z){var K=v.children(z),it=v.node(z);if(K.length&&Ie.forEach(K,A),Ie.has(it,"minRank")){it.borderLeft=[],it.borderRight=[];for(var ut=it.minRank,vt=it.maxRank+1;ut<vt;++ut)zl(v,"borderLeft","_bl",z,it,ut),zl(v,"borderRight","_br",z,it,ut)}})};function zl(v,A,z,K,it,ut){var vt={width:0,height:0,rank:ut,borderType:A},yt=it[A][ut-1],_t=Ii.addDummyNode(v,"border",vt,z);it[A][ut]=_t,v.setParent(_t,K),yt&&v.setEdge(yt,_t,{weight:1})}var vf={adjust:function(v){var A=v.graph().rankdir.toLowerCase();A!=="lr"&&A!=="rl"||Ul(v)},undo:function(v){var A=v.graph().rankdir.toLowerCase();A!=="bt"&&A!=="rl"||function(z){Ie.forEach(z.nodes(),function(K){Zc(z.node(K))}),Ie.forEach(z.edges(),function(K){var it=z.edge(K);Ie.forEach(it.points,Zc),Ie.has(it,"y")&&Zc(it)})}(v),A!=="lr"&&A!=="rl"||(function(z){Ie.forEach(z.nodes(),function(K){lu(z.node(K))}),Ie.forEach(z.edges(),function(K){var it=z.edge(K);Ie.forEach(it.points,lu),Ie.has(it,"x")&&lu(it)})}(v),Ul(v))}};function Ul(v){Ie.forEach(v.nodes(),function(A){Nu(v.node(A))}),Ie.forEach(v.edges(),function(A){Nu(v.edge(A))})}function Nu(v){var A=v.width;v.width=v.height,v.height=A}function Zc(v){v.y=-v.y}function lu(v){var A=v.x;v.x=v.y,v.y=A}var nc=function(v){var A={},z=Ie.filter(v.nodes(),function(yt){return!v.children(yt).length}),K=Ie.max(Ie.map(z,function(yt){return v.node(yt).rank})),it=Ie.map(Ie.range(K+1),function(){return[]});function ut(yt){if(!Ie.has(A,yt)){A[yt]=!0;var _t=v.node(yt);it[_t.rank].push(yt),Ie.forEach(v.successors(yt),ut)}}var vt=Ie.sortBy(z,function(yt){return v.node(yt).rank});return Ie.forEach(vt,ut),it},ac=function(v,A){for(var z=0,K=1;K<A.length;++K)z+=gf(v,A[K-1],A[K]);return z};function gf(v,A,z){for(var K=Ie.zipObject(z,Ie.map(z,function(Rt,Qt){return Qt})),it=Ie.flatten(Ie.map(A,function(Rt){return Ie.sortBy(Ie.map(v.outEdges(Rt),function(Qt){return{pos:K[Qt.w],weight:v.edge(Qt).weight}}),"pos")}),!0),ut=1;ut<z.length;)ut<<=1;var vt=2*ut-1;ut-=1;var yt=Ie.map(new Array(vt),function(){return 0}),_t=0;return Ie.forEach(it.forEach(function(Rt){var Qt=Rt.pos+ut;yt[Qt]+=Rt.weight;for(var Vt=0;Qt>0;)Qt%2&&(Vt+=yt[Qt+1]),yt[Qt=Qt-1>>1]+=Rt.weight;_t+=Rt.weight*Vt})),_t}var Us=function(v,A){return Ie.map(A,function(z){var K=v.inEdges(z);if(K.length){var it=Ie.reduce(K,function(ut,vt){var yt=v.edge(vt),_t=v.node(vt.v);return{sum:ut.sum+yt.weight*_t.order,weight:ut.weight+yt.weight}},{sum:0,weight:0});return{v:z,barycenter:it.sum/it.weight,weight:it.weight}}return{v:z}})},Pu=function(v,A){var z={};return Ie.forEach(v,function(K,it){var ut=z[K.v]={indegree:0,in:[],out:[],vs:[K.v],i:it};Ie.isUndefined(K.barycenter)||(ut.barycenter=K.barycenter,ut.weight=K.weight)}),Ie.forEach(A.edges(),function(K){var it=z[K.v],ut=z[K.w];Ie.isUndefined(it)||Ie.isUndefined(ut)||(ut.indegree++,it.out.push(z[K.w]))}),function(K){var it=[];function ut(_t){return function(Rt){Rt.merged||(Ie.isUndefined(Rt.barycenter)||Ie.isUndefined(_t.barycenter)||Rt.barycenter>=_t.barycenter)&&function(Qt,Vt){var xe=0,ke=0;Qt.weight&&(xe+=Qt.barycenter*Qt.weight,ke+=Qt.weight),Vt.weight&&(xe+=Vt.barycenter*Vt.weight,ke+=Vt.weight),Qt.vs=Vt.vs.concat(Qt.vs),Qt.barycenter=xe/ke,Qt.weight=ke,Qt.i=Math.min(Vt.i,Qt.i),Vt.merged=!0}(_t,Rt)}}function vt(_t){return function(Rt){Rt.in.push(_t),--Rt.indegree==0&&K.push(Rt)}}for(;K.length;){var yt=K.pop();it.push(yt),Ie.forEach(yt.in.reverse(),ut(yt)),Ie.forEach(yt.out,vt(yt))}return Ie.map(Ie.filter(it,function(_t){return!_t.merged}),function(_t){return Ie.pick(_t,["vs","i","barycenter","weight"])})}(Ie.filter(z,function(K){return!K.indegree}))},ku=function(v,A){var z=Ii.partition(v,function(Vt){return Ie.has(Vt,"barycenter")}),K=z.lhs,it=Ie.sortBy(z.rhs,function(Vt){return-Vt.i}),ut=[],vt=0,yt=0,_t=0;K.sort((Rt=!!A,function(Vt,xe){return Vt.barycenter<xe.barycenter?-1:Vt.barycenter>xe.barycenter?1:Rt?xe.i-Vt.i:Vt.i-xe.i})),_t=pf(ut,it,_t),Ie.forEach(K,function(Vt){_t+=Vt.vs.length,ut.push(Vt.vs),vt+=Vt.barycenter*Vt.weight,yt+=Vt.weight,_t=pf(ut,it,_t)});var Rt,Qt={vs:Ie.flatten(ut,!0)};return yt&&(Qt.barycenter=vt/yt,Qt.weight=yt),Qt};function pf(v,A,z){for(var K;A.length&&(K=Ie.last(A)).i<=z;)A.pop(),v.push(K.vs),z++;return z}var ic=function v(A,z,K,it){var ut=A.children(z),vt=A.node(z),yt=vt?vt.borderLeft:void 0,_t=vt?vt.borderRight:void 0,Rt={};yt&&(ut=Ie.filter(ut,function(Xe){return Xe!==yt&&Xe!==_t}));var Qt=Us(A,ut);Ie.forEach(Qt,function(Xe){if(A.children(Xe.v).length){var Ve=v(A,Xe.v,K,it);Rt[Xe.v]=Ve,Ie.has(Ve,"barycenter")&&(je=Xe,Br=Ve,Ie.isUndefined(je.barycenter)?(je.barycenter=Br.barycenter,je.weight=Br.weight):(je.barycenter=(je.barycenter*je.weight+Br.barycenter*Br.weight)/(je.weight+Br.weight),je.weight+=Br.weight))}var je,Br});var Vt=Pu(Qt,K);(function(Xe,Ve){Ie.forEach(Xe,function(je){je.vs=Ie.flatten(je.vs.map(function(Br){return Ve[Br]?Ve[Br].vs:Br}),!0)})})(Vt,Rt);var xe=ku(Vt,it);if(yt&&(xe.vs=Ie.flatten([yt,xe.vs,_t],!0),A.predecessors(yt).length)){var ke=A.node(A.predecessors(yt)[0]),dr=A.node(A.predecessors(_t)[0]);Ie.has(xe,"barycenter")||(xe.barycenter=0,xe.weight=0),xe.barycenter=(xe.barycenter*xe.weight+ke.order+dr.order)/(xe.weight+2),xe.weight+=2}return xe},oc=Ko.Graph,yf=function(v,A,z){var K=function(ut){for(var vt;ut.hasNode(vt=Ie.uniqueId("_root")););return vt}(v),it=new oc({compound:!0}).setGraph({root:K}).setDefaultNodeLabel(function(ut){return v.node(ut)});return Ie.forEach(v.nodes(),function(ut){var vt=v.node(ut),yt=v.parent(ut);(vt.rank===A||vt.minRank<=A&&A<=vt.maxRank)&&(it.setNode(ut),it.setParent(ut,yt||K),Ie.forEach(v[z](ut),function(_t){var Rt=_t.v===ut?_t.w:_t.v,Qt=it.edge(Rt,ut),Vt=Ie.isUndefined(Qt)?0:Qt.weight;it.setEdge(Rt,ut,{weight:v.edge(_t).weight+Vt})}),Ie.has(vt,"minRank")&&it.setNode(ut,{borderLeft:vt.borderLeft[A],borderRight:vt.borderRight[A]}))}),it},sc=function(v,A,z){var K,it={};Ie.forEach(z,function(ut){for(var vt,yt,_t=v.parent(ut);_t;){if((vt=v.parent(_t))?(yt=it[vt],it[vt]=_t):(yt=K,K=_t),yt&&yt!==_t)return void A.setEdge(yt,_t);_t=vt}})},uc=Ko.Graph,mf=function(v){var A=Ii.maxRank(v),z=Ru(v,Ie.range(1,A+1),"inEdges"),K=Ru(v,Ie.range(A-1,-1,-1),"outEdges"),it=nc(v);Fu(v,it);for(var ut,vt=Number.POSITIVE_INFINITY,yt=0,_t=0;_t<4;++yt,++_t){Bu(yt%2?z:K,yt%4>=2),it=Ii.buildLayerMatrix(v);var Rt=ac(v,it);Rt<vt&&(_t=0,ut=Ie.cloneDeep(it),vt=Rt)}Fu(v,ut)};function Ru(v,A,z){return Ie.map(A,function(K){return yf(v,K,z)})}function Bu(v,A){var z=new uc;Ie.forEach(v,function(K){var it=K.graph().root,ut=ic(K,it,z,A);Ie.forEach(ut.vs,function(vt,yt){K.node(vt).order=yt}),sc(K,z,ut.vs)})}function Fu(v,A){Ie.forEach(A,function(z){Ie.forEach(z,function(K,it){v.node(K).order=it})})}var Wl=Ko.Graph,bf=function(v){var A,z=Ii.buildLayerMatrix(v),K=Ie.merge(hu(v,z),Xl(v,z)),it={};Ie.forEach(["u","d"],function(vt){A=vt==="u"?z:Ie.values(z).reverse(),Ie.forEach(["l","r"],function(yt){yt==="r"&&(A=Ie.map(A,function(Vt){return Ie.values(Vt).reverse()}));var _t=(vt==="u"?v.predecessors:v.successors).bind(v),Rt=Yl(v,A,K,_t),Qt=jh(v,A,Rt.root,Rt.align,yt==="r");yt==="r"&&(Qt=Ie.mapValues(Qt,function(Vt){return-Vt})),it[vt+yt]=Qt})});var ut=Ms(v,it);return Vl(it,ut),jl(it,v.graph().align)};function hu(v,A){var z={};return Ie.reduce(A,function(K,it){var ut=0,vt=0,yt=K.length,_t=Ie.last(it);return Ie.forEach(it,function(Rt,Qt){var Vt=function(ke,dr){if(ke.node(dr).dummy)return Ie.find(ke.predecessors(dr),function(Xe){return ke.node(Xe).dummy})}(v,Rt),xe=Vt?v.node(Vt).order:yt;(Vt||Rt===_t)&&(Ie.forEach(it.slice(vt,Qt+1),function(ke){Ie.forEach(v.predecessors(ke),function(dr){var Xe=v.node(dr),Ve=Xe.order;!(Ve<ut||xe<Ve)||Xe.dummy&&v.node(ke).dummy||xf(z,dr,ke)})}),vt=Qt+1,ut=xe)}),it}),z}function Xl(v,A){var z={};function K(it,ut,vt,yt,_t){var Rt;Ie.forEach(Ie.range(ut,vt),function(Qt){Rt=it[Qt],v.node(Rt).dummy&&Ie.forEach(v.predecessors(Rt),function(Vt){var xe=v.node(Vt);xe.dummy&&(xe.order<yt||xe.order>_t)&&xf(z,Vt,Rt)})})}return Ie.reduce(A,function(it,ut){var vt,yt=-1,_t=0;return Ie.forEach(ut,function(Rt,Qt){if(v.node(Rt).dummy==="border"){var Vt=v.predecessors(Rt);Vt.length&&(vt=v.node(Vt[0]).order,K(ut,_t,Qt,yt,vt),_t=Qt,yt=vt)}K(ut,_t,ut.length,vt,it.length)}),ut}),z}function xf(v,A,z){if(A>z){var K=A;A=z,z=K}var it=v[A];it||(v[A]=it={}),it[z]=!0}function bh(v,A,z){if(A>z){var K=A;A=z,z=K}return Ie.has(v[A],z)}function Yl(v,A,z,K){var it={},ut={},vt={};return Ie.forEach(A,function(yt){Ie.forEach(yt,function(_t,Rt){it[_t]=_t,ut[_t]=_t,vt[_t]=Rt})}),Ie.forEach(A,function(yt){var _t=-1;Ie.forEach(yt,function(Rt){var Qt=K(Rt);if(Qt.length)for(var Vt=((Qt=Ie.sortBy(Qt,function(Xe){return vt[Xe]})).length-1)/2,xe=Math.floor(Vt),ke=Math.ceil(Vt);xe<=ke;++xe){var dr=Qt[xe];ut[Rt]===Rt&&_t<vt[dr]&&!bh(z,Rt,dr)&&(ut[dr]=Rt,ut[Rt]=it[Rt]=it[dr],_t=vt[dr])}})}),{root:it,align:ut}}function jh(v,A,z,K,it){var ut={},vt=function(Rt,Qt,Vt,xe){var ke=new Wl,dr=Rt.graph(),Xe=function(Ve,je,Br){return function(Qr,Xr,yn){var dn,An=Qr.node(Xr),Gn=Qr.node(yn),Pn=0;if(Pn+=An.width/2,Ie.has(An,"labelpos"))switch(An.labelpos.toLowerCase()){case"l":dn=-An.width/2;break;case"r":dn=An.width/2}if(dn&&(Pn+=Br?dn:-dn),dn=0,Pn+=(An.dummy?je:Ve)/2,Pn+=(Gn.dummy?je:Ve)/2,Pn+=Gn.width/2,Ie.has(Gn,"labelpos"))switch(Gn.labelpos.toLowerCase()){case"l":dn=Gn.width/2;break;case"r":dn=-Gn.width/2}return dn&&(Pn+=Br?dn:-dn),dn=0,Pn}}(dr.nodesep,dr.edgesep,xe);return Ie.forEach(Qt,function(Ve){var je;Ie.forEach(Ve,function(Br){var Qr=Vt[Br];if(ke.setNode(Qr),je){var Xr=Vt[je],yn=ke.edge(Xr,Qr);ke.setEdge(Xr,Qr,Math.max(Xe(Rt,Br,je),yn||0))}je=Br})}),ke}(v,A,z,it),yt=it?"borderLeft":"borderRight";function _t(Rt,Qt){for(var Vt=vt.nodes(),xe=Vt.pop(),ke={};xe;)ke[xe]?Rt(xe):(ke[xe]=!0,Vt.push(xe),Vt=Vt.concat(Qt(xe))),xe=Vt.pop()}return _t(function(Rt){ut[Rt]=vt.inEdges(Rt).reduce(function(Qt,Vt){return Math.max(Qt,ut[Vt.v]+vt.edge(Vt))},0)},vt.predecessors.bind(vt)),_t(function(Rt){var Qt=vt.outEdges(Rt).reduce(function(xe,ke){return Math.min(xe,ut[ke.w]-vt.edge(ke))},Number.POSITIVE_INFINITY),Vt=v.node(Rt);Qt!==Number.POSITIVE_INFINITY&&Vt.borderType!==yt&&(ut[Rt]=Math.max(ut[Rt],Qt))},vt.successors.bind(vt)),Ie.forEach(K,function(Rt){ut[Rt]=ut[z[Rt]]}),ut}function Ms(v,A){return Ie.minBy(Ie.values(A),function(z){var K=Number.NEGATIVE_INFINITY,it=Number.POSITIVE_INFINITY;return Ie.forIn(z,function(ut,vt){var yt=function(_t,Rt){return _t.node(Rt).width}(v,vt)/2;K=Math.max(ut+yt,K),it=Math.min(ut-yt,it)}),K-it})}function Vl(v,A){var z=Ie.values(A),K=Ie.min(z),it=Ie.max(z);Ie.forEach(["u","d"],function(ut){Ie.forEach(["l","r"],function(vt){var yt,_t=ut+vt,Rt=v[_t];if(Rt!==A){var Qt=Ie.values(Rt);(yt=vt==="l"?K-Ie.min(Qt):it-Ie.max(Qt))&&(v[_t]=Ie.mapValues(Rt,function(Vt){return Vt+yt}))}})})}function jl(v,A){return Ie.mapValues(v.ul,function(z,K){if(A)return v[A.toLowerCase()][K];var it=Ie.sortBy(Ie.map(v,K));return(it[1]+it[2])/2})}var Hl=bf,Kl=function(v){(function(A){var z=Ii.buildLayerMatrix(A),K=A.graph().ranksep,it=0;Ie.forEach(z,function(ut){var vt=Ie.max(Ie.map(ut,function(yt){return A.node(yt).height}));Ie.forEach(ut,function(yt){A.node(yt).y=it+vt/2}),it+=vt+K})})(v=Ii.asNonCompoundGraph(v)),Ie.forEach(Hl(v),function(A,z){v.node(z).x=A})},$c=Ii.normalizeRanks,xh=Ii.removeEmptyRanks,qi=Ii,Qc=Ko.Graph,Gu=function(v,A){var z=A&&A.debugTiming?qi.time:qi.notime;z("layout",function(){var K=z("  buildLayoutGraph",function(){return function(it){var ut=new Qc({multigraph:!0,compound:!0}),vt=du(it.graph());return ut.setGraph(Ie.merge({},Zl,Ba(vt,As),Ie.pick(vt,fc))),Ie.forEach(it.nodes(),function(yt){var _t=du(it.node(yt));ut.setNode(yt,Ie.defaults(Ba(_t,Ef),rs)),ut.setParent(yt,it.parent(yt))}),Ie.forEach(it.edges(),function(yt){var _t=du(it.edge(yt));ut.setEdge(yt,Ie.merge({},Cs,Ba(_t,so),Ie.pick(_t,hi)))}),ut}(v)});z("  runLayout",function(){(function(it,ut){ut("    makeSpaceForEdgeLabels",function(){(function(vt){var yt=vt.graph();yt.ranksep/=2,Ie.forEach(vt.edges(),function(_t){var Rt=vt.edge(_t);Rt.minlen*=2,Rt.labelpos.toLowerCase()!=="c"&&(yt.rankdir==="TB"||yt.rankdir==="BT"?Rt.width+=Rt.labeloffset:Rt.height+=Rt.labeloffset)})})(it)}),ut("    removeSelfEdges",function(){(function(vt){Ie.forEach(vt.edges(),function(yt){if(yt.v===yt.w){var _t=vt.node(yt.v);_t.selfEdges||(_t.selfEdges=[]),_t.selfEdges.push({e:yt,label:vt.edge(yt)}),vt.removeEdge(yt)}})})(it)}),ut("    acyclic",function(){df.run(it)}),ut("    nestingGraph.run",function(){Fl.run(it)}),ut("    rank",function(){ph(qi.asNonCompoundGraph(it))}),ut("    injectEdgeLabelProxies",function(){(function(vt){Ie.forEach(vt.edges(),function(yt){var _t=vt.edge(yt);if(_t.width&&_t.height){var Rt=vt.node(yt.v),Qt={rank:(vt.node(yt.w).rank-Rt.rank)/2+Rt.rank,e:yt};qi.addDummyNode(vt,"edge-proxy",Qt,"_ep")}})})(it)}),ut("    removeEmptyRanks",function(){xh(it)}),ut("    nestingGraph.cleanup",function(){Fl.cleanup(it)}),ut("    normalizeRanks",function(){$c(it)}),ut("    assignRankMinMax",function(){(function(vt){var yt=0;Ie.forEach(vt.nodes(),function(_t){var Rt=vt.node(_t);Rt.borderTop&&(Rt.minRank=vt.node(Rt.borderTop).rank,Rt.maxRank=vt.node(Rt.borderBottom).rank,yt=Ie.max(yt,Rt.maxRank))}),vt.graph().maxRank=yt})(it)}),ut("    removeEdgeLabelProxies",function(){(function(vt){Ie.forEach(vt.nodes(),function(yt){var _t=vt.node(yt);_t.dummy==="edge-proxy"&&(vt.edge(_t.e).labelRank=_t.rank,vt.removeNode(yt))})})(it)}),ut("    normalize.run",function(){Gs.run(it)}),ut("    parentDummyChains",function(){yh(it)}),ut("    addBorderSegments",function(){mh(it)}),ut("    order",function(){mf(it)}),ut("    insertSelfEdges",function(){(function(vt){var yt=qi.buildLayerMatrix(vt);Ie.forEach(yt,function(_t){var Rt=0;Ie.forEach(_t,function(Qt,Vt){var xe=vt.node(Qt);xe.order=Vt+Rt,Ie.forEach(xe.selfEdges,function(ke){qi.addDummyNode(vt,"selfedge",{width:ke.label.width,height:ke.label.height,rank:xe.rank,order:Vt+ ++Rt,e:ke.e,label:ke.label},"_se")}),delete xe.selfEdges})})})(it)}),ut("    adjustCoordinateSystem",function(){vf.adjust(it)}),ut("    position",function(){Kl(it)}),ut("    positionSelfEdges",function(){(function(vt){Ie.forEach(vt.nodes(),function(yt){var _t=vt.node(yt);if(_t.dummy==="selfedge"){var Rt=vt.node(_t.e.v),Qt=Rt.x+Rt.width/2,Vt=Rt.y,xe=_t.x-Qt,ke=Rt.height/2;vt.setEdge(_t.e,_t.label),vt.removeNode(yt),_t.label.points=[{x:Qt+2*xe/3,y:Vt-ke},{x:Qt+5*xe/6,y:Vt-ke},{x:Qt+xe,y:Vt},{x:Qt+5*xe/6,y:Vt+ke},{x:Qt+2*xe/3,y:Vt+ke}],_t.label.x=_t.x,_t.label.y=_t.y}})})(it)}),ut("    removeBorderNodes",function(){(function(vt){Ie.forEach(vt.nodes(),function(yt){if(vt.children(yt).length){var _t=vt.node(yt),Rt=vt.node(_t.borderTop),Qt=vt.node(_t.borderBottom),Vt=vt.node(Ie.last(_t.borderLeft)),xe=vt.node(Ie.last(_t.borderRight));_t.width=Math.abs(xe.x-Vt.x),_t.height=Math.abs(Qt.y-Rt.y),_t.x=Vt.x+_t.width/2,_t.y=Rt.y+_t.height/2}}),Ie.forEach(vt.nodes(),function(yt){vt.node(yt).dummy==="border"&&vt.removeNode(yt)})})(it)}),ut("    normalize.undo",function(){Gs.undo(it)}),ut("    fixupEdgeLabelCoords",function(){(function(vt){Ie.forEach(vt.edges(),function(yt){var _t=vt.edge(yt);if(Ie.has(_t,"x"))switch(_t.labelpos!=="l"&&_t.labelpos!=="r"||(_t.width-=_t.labeloffset),_t.labelpos){case"l":_t.x-=_t.width/2+_t.labeloffset;break;case"r":_t.x+=_t.width/2+_t.labeloffset}})})(it)}),ut("    undoCoordinateSystem",function(){vf.undo(it)}),ut("    translateGraph",function(){(function(vt){var yt=Number.POSITIVE_INFINITY,_t=0,Rt=Number.POSITIVE_INFINITY,Qt=0,Vt=vt.graph(),xe=Vt.marginx||0,ke=Vt.marginy||0;function dr(Xe){var Ve=Xe.x,je=Xe.y,Br=Xe.width,Qr=Xe.height;yt=Math.min(yt,Ve-Br/2),_t=Math.max(_t,Ve+Br/2),Rt=Math.min(Rt,je-Qr/2),Qt=Math.max(Qt,je+Qr/2)}Ie.forEach(vt.nodes(),function(Xe){dr(vt.node(Xe))}),Ie.forEach(vt.edges(),function(Xe){var Ve=vt.edge(Xe);Ie.has(Ve,"x")&&dr(Ve)}),yt-=xe,Rt-=ke,Ie.forEach(vt.nodes(),function(Xe){var Ve=vt.node(Xe);Ve.x-=yt,Ve.y-=Rt}),Ie.forEach(vt.edges(),function(Xe){var Ve=vt.edge(Xe);Ie.forEach(Ve.points,function(je){je.x-=yt,je.y-=Rt}),Ie.has(Ve,"x")&&(Ve.x-=yt),Ie.has(Ve,"y")&&(Ve.y-=Rt)}),Vt.width=_t-yt+xe,Vt.height=Qt-Rt+ke})(it)}),ut("    assignNodeIntersects",function(){(function(vt){Ie.forEach(vt.edges(),function(yt){var _t,Rt,Qt=vt.edge(yt),Vt=vt.node(yt.v),xe=vt.node(yt.w);Qt.points?(_t=Qt.points[0],Rt=Qt.points[Qt.points.length-1]):(Qt.points=[],_t=xe,Rt=Vt),Qt.points.unshift(qi.intersectRect(Vt,_t)),Qt.points.push(qi.intersectRect(xe,Rt))})})(it)}),ut("    reversePoints",function(){(function(vt){Ie.forEach(vt.edges(),function(yt){var _t=vt.edge(yt);_t.reversed&&_t.points.reverse()})})(it)}),ut("    acyclic.undo",function(){df.undo(it)})})(K,z)}),z("  updateInputGraph",function(){(function(it,ut){Ie.forEach(it.nodes(),function(vt){var yt=it.node(vt),_t=ut.node(vt);yt&&(yt.x=_t.x,yt.y=_t.y,ut.children(vt).length&&(yt.width=_t.width,yt.height=_t.height))}),Ie.forEach(it.edges(),function(vt){var yt=it.edge(vt),_t=ut.edge(vt);yt.points=_t.points,Ie.has(_t,"x")&&(yt.x=_t.x,yt.y=_t.y)}),it.graph().width=ut.graph().width,it.graph().height=ut.graph().height})(v,K)})})},As=["nodesep","edgesep","ranksep","marginx","marginy"],Zl={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},fc=["acyclicer","ranker","rankdir","align"],Ef=["width","height"],rs={width:0,height:0},so=["minlen","weight","width","height","labeloffset"],Cs={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},hi=["labelpos"];function Ba(v,A){return Ie.mapValues(Ie.pick(v,A),Number)}function du(v){var A={};return Ie.forEach(v,function(z,K){A[K.toLowerCase()]=z}),A}var zu=Ko.Graph,Eh={graphlib:Ko,layout:Gu,debug:{debugOrdering:function(v){var A=Ii.buildLayerMatrix(v),z=new zu({compound:!0,multigraph:!0}).setGraph({});return Ie.forEach(v.nodes(),function(K){z.setNode(K,{label:K}),z.setParent(K,"layer"+v.node(K).rank)}),Ie.forEach(v.edges(),function(K){z.setEdge(K.v,K.w,{},K.name)}),Ie.forEach(A,function(K,it){var ut="layer"+it;z.setNode(ut,{rank:"same"}),Ie.reduce(K,function(vt,yt){return z.setEdge(vt,yt,{style:"invis"}),yt})}),z}},util:{time:Ii.time,notime:Ii.notime},version:"0.8.5"},cc=Eh.graphlib,ji=Eh.layout;class $l{constructor(A){this.cardinality=1,this.include=E.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=N.NODE,this.name=A.name,this.attr=A.attr||{},this.inputs=A.inputs,this.path=A.path||[],this.width=A.width,this.height=A.height}}class Ql{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function wh(v){const A=new Ql;return v.nodes.map(z=>new $l(z)).forEach(z=>{A.nodes[z.name]=z,z.inputs.forEach(K=>{(function(it,ut,vt){vt.name!==ut.name&&it.edges.push(Object.assign(Object.assign({},vt.attr),{v:vt.name,w:ut.name}))})(A,z,K)})}),A}class Ws{constructor(A,z={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=E.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=N.META,this.path=[],this.name=A,this.metaGraph=Uu(A,b.META,z)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(A=>this.metaGraph.node(A))}leaves(){let A,z=[],K=[this];for(;K.length;){let it=K.shift();it.isGroupNode?(A=it.metaGraph,A.nodes().forEach(ut=>K.push(A.node(ut)))):z.push(it.name)}return z}}class ql{constructor(A,z){this.v=A,this.w=z,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(A,z){this.baseEdgeList.push(A)}}function qc(v,A={}){return new Ws(v,A)}function lc(v,A){return new ql(v,A)}function Uu(v,A,z){const K=z||{},it=new cc.Graph(K);return it.setGraph({name:v,rankdir:K.rankdir,type:A,align:K.align}),it}class Jc{constructor(A={}){this.graphOptions=A,this.index={},this.graphOptions.compound=!0,this.root=qc(L,this.graphOptions),this.index[L]=this.root}getNodeMap(){return this.index}node(A){return this.index[A]}setNode(A,z){this.index[A]=z}getBridgeGraph(A){const z=this.index[A];if(!z)throw Error("Could not find node in hierarchy: "+A);if(!("metaGraph"in z))return null;const K=z;if(K.bridgeGraph)return K.bridgeGraph;const it=Uu(k,b.BRIDGE,this.graphOptions);if(K.bridgeGraph=it,!z.parentNode||!("metaGraph"in z.parentNode))return it;const ut=z.parentNode;return[ut.metaGraph,this.getBridgeGraph(ut.name)].forEach(vt=>{vt.edges().filter(yt=>yt.v===A||yt.w===A).forEach(yt=>{const _t=yt.w===A;vt.edge(yt).baseEdgeList.forEach(Rt=>{const[Qt,Vt]=_t?[Rt.w,yt.v]:[Rt.v,yt.w],xe=this.getChildName(A,Qt),ke={v:_t?Vt:xe,w:_t?xe:Vt};let dr=it.edge(ke);dr||(dr=lc(ke.v,ke.w),dr.inbound=_t,it.setEdge(ke.v,ke.w,dr)),dr.addBaseEdge(Rt,this)})})}),it}getChildName(A,z){let K=this.index[z];for(;K;){if(K.parentNode&&K.parentNode.name===A)return K.name;K=K.parentNode}throw Error("Could not find immediate child for descendant: "+z)}getPredecessors(A){const z=this.index[A];if(!z)throw Error("Could not find node with name: "+A);return this.getOneWayEdges(z,!0)}getSuccessors(A){const z=this.index[A];if(!z)throw Error("Could not find node with name: "+A);return this.getOneWayEdges(z,!1)}getOneWayEdges(A,z){const K=[];if(!A.parentNode||!A.parentNode.isGroupNode)return K;const it=A.parentNode,ut=it.metaGraph,vt=this.getBridgeGraph(it.name);return tl(ut,A,z,K),tl(vt,A,z,K),K}}function Xs(v,A){const{rankDirection:z,align:K}=A,it=new Jc({rankdir:z,align:K});return function(ut,vt){Object.keys(vt.nodes).forEach(yt=>{const _t=vt.nodes[yt],Rt=_t.path;let Qt=ut.root;Qt.depth=Math.max(Rt.length,Qt.depth);for(let Vt=0;Vt<Rt.length&&(Qt.depth=Math.max(Qt.depth,Rt.length-Vt),Qt.cardinality+=_t.cardinality,Vt!==Rt.length-1);Vt++){const xe=Rt[Vt];let ke=ut.node(xe);ke||(ke=qc(xe,ut.graphOptions),ke.path=_t.path.slice(0,Vt+1),ke.parentNode=Qt,ut.setNode(xe,ke),Qt.metaGraph.setNode(xe,ke)),Qt=ke}ut.setNode(_t.name,_t),_t.parentNode=Qt,Qt.metaGraph.setNode(_t.name,_t)})}(it,v),function(ut,vt){const yt=ut.getNodeMap();let _t=[],Rt=[];const Qt=(Vt,xe)=>{let ke=0;for(;Vt;)xe[ke++]=Vt.name,Vt=Vt.parentNode;return ke-1};vt.edges.forEach(Vt=>{_t=[],Rt=[];let xe=Qt(vt.nodes[Vt.v],_t),ke=Qt(vt.nodes[Vt.w],Rt);for(;_t[xe]===Rt[ke];)if(xe--,ke--,xe<0||ke<0)throw Error("No difference found between ancestor paths.");const dr=yt[_t[xe+1]],Xe=_t[xe],Ve=Rt[ke];let je=dr.metaGraph.edge(Xe,Ve);je||(je=lc(Xe,Ve),dr.metaGraph.setEdge(Xe,Ve,je)),je.addBaseEdge(Vt,ut)})}(it,v),it}function tl(v,A,z,K){(z?v.inEdges(A.name):v.outEdges(A.name)).forEach(it=>{const ut=v.edge(it);K.push(ut)})}class hc{constructor(A){this.hierarchy=A,this.index={},this.hasSubHierarchy={},this.root=new Jt(this.hierarchy.root,this.hierarchy.graphOptions),this.index[A.root.name]=this.root,this.buildSubHierarchy(A.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(A){if(A in this.hasSubHierarchy)return;this.hasSubHierarchy[A]=!0;const z=this.index[A];if(z.node.type!==N.META)return;const K=z,it=K.node.metaGraph,ut=K.coreGraph;it.nodes().forEach(Qt=>{const Vt=this.getOrCreateRenderNodeByName(Qt);ut.setNode(Qt,Vt)}),it.edges().forEach(Qt=>{const Vt=it.edge(Qt),xe=new gt(Vt);ut.setEdge(Qt.v,Qt.w,xe)});const vt=K.node.parentNode;if(!vt)return;const yt=this.getRenderNodeByName(vt.name),_t=(Qt,...Vt)=>Vt.concat([Qt?"IN":"OUT"]).join("~~"),Rt=this.hierarchy.getBridgeGraph(A);Rt.edges().forEach(Qt=>{const Vt=Rt.edge(Qt),xe=!!it.node(Qt.w),[ke,dr]=xe?[Qt.w,Qt.v]:[Qt.v,Qt.w],Xe=yn=>{const dn=xe?{v:yn,w:A}:{v:A,w:yn};return yt.coreGraph.edge(dn)};let Ve=Xe(dr);Ve||(Ve=Xe(_t(xe,dr,vt.name)));const je=_t(xe,A),Br=_t(xe,dr,A);let Qr=ut.node(Br);if(!Qr){let yn=ut.node(je);if(!yn){const An={name:je,type:N.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:E.UNSPECIFIED,inbound:xe,attr:{}};yn=new wf(An),this.index[je]=yn,ut.setNode(je,yn)}const dn={name:Br,type:N.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:E.UNSPECIFIED,inbound:xe,attr:{}};Qr=new wf(dn),this.index[Br]=Qr,ut.setNode(Br,Qr),ut.setParent(Br,je),yn.node.cardinality++}const Xr=new gt(Vt);Xr.adjoiningMetaEdge=Ve,xe?ut.setEdge(Br,ke,Xr):ut.setEdge(ke,Br,Xr)})}getOrCreateRenderNodeByName(A){if(!A)return null;if(A in this.index)return this.index[A];const z=this.getNodeByName(A);return z?(this.index[A]=z.isGroupNode?new Jt(z,this.hierarchy.graphOptions):new wf(z),this.index[A]):null}getRenderNodeByName(A){return this.index[A]}getNodeByName(A){return this.hierarchy.node(A)}}class wf{constructor(A){this.node=A,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=A.width||0,this.height=A.height||0,this.displayName=A.name,this.attr=A.attr}}class gt{constructor(A){this.metaEdge=A,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Jt extends wf{constructor(A,z){super(A);const K=A.metaGraph.graph();z.compound=!0,this.coreGraph=Uu(K.name,b.CORE,z)}}function Ee(v,A){v.node.isGroupNode&&function(z,K){const it=W(K);z.coreGraph.nodes().map(ut=>z.coreGraph.node(ut)).forEach(ut=>{var vt,yt,_t,Rt,Qt,Vt;const{height:xe,width:ke}=ut;switch(ut.node.type){case N.NODE:Object.assign(ut,it.nodeSize.node),ut.height=xe||it.nodeSize.node.height,ut.width=ke||it.nodeSize.node.width;break;case N.BRIDGE:Object.assign(ut,it.nodeSize.bridge);break;case N.META:ut.expanded?Ee(ut,K):(Object.assign(ut,it.nodeSize.meta),ut.height=it.nodeSize.meta.height,ut.width=it.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ut.node.type)}if(!ut.expanded){const dr=ut.attr;(function(Xe,Ve=!1){if(Xe.coreBox.width=Xe.width,Xe.coreBox.height=Xe.height,!Ve){const je=`${Xe.displayName}`.length,Br=3;Xe.width=Math.max(Xe.coreBox.width,je*Br)}})(ut,K&&(ut.node.type===0&&!!(!((yt=(vt=K==null?void 0:K.nodeSize)===null||vt===void 0?void 0:vt.meta)===null||yt===void 0)&&yt.width)||ut.node.type===1&&(!!(!((Rt=(_t=K==null?void 0:K.nodeSize)===null||_t===void 0?void 0:_t.node)===null||Rt===void 0)&&Rt.width)||!!dr.width)||ut.node.type===2&&!!(!((Vt=(Qt=K==null?void 0:K.nodeSize)===null||Qt===void 0?void 0:Qt.bridge)===null||Vt===void 0)&&Vt.width)))}})}(v,A),v.node.type===N.META&&function(z,K){const it=W(K),ut=it.subScene.meta;Object.assign(z,ut);const{nodeSep:vt,rankSep:yt,edgeSep:_t,align:Rt}=it.graph.meta,Qt={nodesep:vt,ranksep:yt,edgesep:_t,align:Rt};Object.assign(z.coreBox,function(ke,dr){const{ranksep:Xe,nodesep:Ve,edgesep:je,align:Br}=dr;Object.assign(ke.graph(),{ranksep:Xe,nodesep:Ve,edgesep:je,align:Br});const Qr=[];if(ke.nodes().forEach(Gn=>{ke.node(Gn).node.type!==N.BRIDGE&&Qr.push(Gn)}),!Qr.length)return{width:0,height:0};ji(ke);let Xr=1/0,yn=1/0,dn=-1/0,An=-1/0;return Qr.forEach(Gn=>{const Pn=ke.node(Gn),Va=.5*Pn.width,Xn=Pn.x-Va,fi=Pn.x+Va;Xr=Xn<Xr?Xn:Xr,dn=fi>dn?fi:dn;const Fa=.5*Pn.height,da=Pn.y-Fa,Ya=Pn.y+Fa;yn=da<yn?da:yn,An=Ya>An?Ya:An}),ke.edges().forEach(Gn=>{const Pn=ke.edge(Gn),Va=ke.node(Pn.metaEdge.v),Xn=ke.node(Pn.metaEdge.w);if(Pn.points.length===3&&function(da){let Ya=ar(da[0],da[1]);for(let ci=1;ci<da.length-1;ci++){const Oi=ar(da[ci],da[ci+1]);if(Math.abs(Oi-Ya)>1)return!1;Ya=Oi}return!0}(Pn.points)){if(Va!=null){const da=Va.expanded?Va.x:Er(Va);Pn.points[0].x=da}if(Xn!=null){const da=Xn.expanded?Xn.x:Er(Xn);Pn.points[2].x=da}Pn.points=[Pn.points[0],Pn.points[1]]}const fi=Pn.points[Pn.points.length-2];Xn!=null&&(Pn.points[Pn.points.length-1]=nr(fi,Xn));const Fa=Pn.points[1];Va!=null&&(Pn.points[0]=nr(Fa,Va)),Pn.points.forEach(da=>{Xr=da.x<Xr?da.x:Xr,dn=da.x>dn?da.x:dn,yn=da.y<yn?da.y:yn,An=da.y>An?da.y:An})}),ke.nodes().forEach(Gn=>{const Pn=ke.node(Gn);Pn.x-=Xr,Pn.y-=yn}),ke.edges().forEach(Gn=>{ke.edge(Gn).points.forEach(Pn=>{Pn.x-=Xr,Pn.y-=yn})}),{width:dn-Xr,height:An-yn}}(z.coreGraph,Qt));let Vt=0;z.coreGraph.nodeCount()>0&&Vt++;const xe=Vt<=1?0:Vt;z.coreBox.width+=xe+xe,z.coreBox.height=ut.labelHeight+z.coreBox.height,z.width=z.coreBox.width+ut.paddingLeft+ut.paddingRight,z.height=z.paddingTop+z.coreBox.height+z.paddingBottom}(v,A)}function ar(v,A){const z=A.x-v.x,K=A.y-v.y;return 180*Math.atan(K/z)/Math.PI}function Er(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function nr(v,A){const z=A.expanded?A.x:Er(A),K=A.y,it=v.x-z,ut=v.y-K;let vt,yt,_t=A.expanded?A.width:A.coreBox.width,Rt=A.expanded?A.height:A.coreBox.height;return Math.abs(ut)*_t/2>Math.abs(it)*Rt/2?(ut<0&&(Rt=-Rt),vt=ut===0?0:Rt/2*it/ut,yt=Rt/2):(it<0&&(_t=-_t),vt=_t/2,yt=it===0?0:_t/2*ut/it),{x:z+vt,y:K+yt}}function fr(v,A,z){var K,it,ut,vt;const yt=v.nodes.filter((Vt,xe,ke)=>ke.findIndex(dr=>dr.id===Vt.id)!==xe).map(Vt=>Vt.id);if(yt.length)throw new Error(`Duplicated ids found: ${yt.join(", ")}`);const _t=function(Vt){const xe={nodes:[]},ke=Vt.compound,dr=Object.keys(ke||{}),Xe=new Map,Ve=(Br,Qr=[])=>{if(Xe.has(Br))return Xe.get(Br);for(let Xr=0;Xr<dr.length;Xr++){let yn=dr[Xr];if(ke&&ke[yn].indexOf(Br)!==-1)return Qr.unshift(yn),Ve(yn,Qr)}return Qr.length===0&&Xe.set(Br,Qr),Qr},je=Br=>Vt.edges.filter(Qr=>Qr.w===Br).map(Qr=>({name:Qr.v}));return Vt.nodes.forEach(Br=>{const Qr=Br.id,Xr=[...Ve(Qr),Qr];let yn=je(Qr);xe.nodes.push({name:Qr,path:Xr,inputs:yn,width:Br.width,height:Br.height,attr:Object.assign({},Br)})}),xe}(v),Rt=function(Vt,xe){const ke=(Xe,Ve)=>{for(let je of Ve.values())if(je.includes(Xe))return!0;return!1},dr=(Xe,Ve=[])=>{if(Object.keys(Xe).length===0)return[...new Set(Ve)];const je=new Map(Object.keys(Xe).map(Qr=>[Qr,Xe[Qr]])),Br={};for(let[Qr,Xr]of je)ke(Qr,je)?Br[Qr]=Xr:Ve=Ve.concat(Qr,Xr);return dr(Br,Ve)};return dr(Vt).filter(Xe=>xe.includes(Xe))}(v.compound||{},(A==null?void 0:A.expanded)||[]),Qt=function(Vt,xe){return function(ke){return new hc(ke)}(Xs(wh(Vt),xe))}(_t,{rankDirection:((it=(K=z==null?void 0:z.graph)===null||K===void 0?void 0:K.meta)===null||it===void 0?void 0:it.rankDir)||(A==null?void 0:A.rankDirection)||P.graph.meta.rankDir,align:((vt=(ut=z==null?void 0:z.graph)===null||ut===void 0?void 0:ut.meta)===null||vt===void 0?void 0:vt.align)||P.graph.meta.align});return function(Vt,xe){xe.forEach(ke=>{const dr=Vt.getRenderInfoNodes().find(je=>je.displayName===ke);let Xe=dr&&dr.node&&dr.node.name||"";const Ve=Vt.getRenderNodeByName(Xe);if(!Ve)throw new Error(`No nodes found: ${Xe}`);Ve.expanded=!0,Vt.buildSubHierarchy(Xe)})}(Qt,Rt),Ee(Qt.root,z),Fr(Qt.root)}function Lr(v,A=!1){const z=JSON.parse(JSON.stringify(v)),K={nodes:[z],edges:[...z.edges]};return z.nodes.forEach(function it(ut){(ut.type===0||ut.type===1)&&K.nodes.push(ut),ut.type===0&&(K.edges=K.edges.concat(ut.edges)),Array.isArray(ut.nodes)&&ut.nodes.forEach(it)}),A&&K.nodes.forEach(it=>{const ut=K.nodes.find(vt=>vt.id===it.parentNodeName);if(ut){const vt=ut.x-ut.width/2+ut.paddingLeft,yt=ut.y-ut.height/2+ut.labelHeight+ut.paddingTop;ut.id!==L&&(it.x+=vt,it.y+=yt),it.type===0&&it.edges.forEach(_t=>{_t.points.forEach(Rt=>{Rt.x+=it.x-it.width/2+it.paddingLeft,Rt.y+=it.y-it.height/2+it.labelHeight+it.paddingTop})})}}),K}function kr(v,A,z,K){var it,ut;let vt=[];const yt=((it=z.find(Vt=>Vt.id===v))===null||it===void 0?void 0:it.path)||[],_t=((ut=z.find(Vt=>Vt.id===A))===null||ut===void 0?void 0:ut.path)||[],Rt=[L,...yt].slice(0,yt.length).reverse(),Qt=[L,..._t].slice(0,_t.length);return Rt.forEach(Vt=>{const xe=z.find(ke=>ke.id===Vt);vt=vt.concat(xe.edges.filter(ke=>ke.baseEdgeList.some(dr=>dr.v===((K==null?void 0:K.v)||v)&&dr.w===((K==null?void 0:K.w)||A))))}),Qt.filter(Vt=>!Rt.includes(Vt)).forEach(Vt=>{const xe=z.find(ke=>ke.id===Vt);vt=vt.concat(xe.edges.filter(ke=>ke.baseEdgeList.some(dr=>dr.v===((K==null?void 0:K.v)||v)&&dr.w===((K==null?void 0:K.w)||A))))}),vt}function Fr(v){const A=v.coreGraph.nodes().map(K=>v.coreGraph.node(K));return Object.assign(Object.assign({},Rr(v)),{expanded:v.expanded,nodes:v.expanded?(z=A,z.map(K=>K.node.type===N.META?Fr(K):Rr(K))):[],edges:v.expanded?Wr(v):[]});var z}function Rr(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function Wr(v){return v.coreGraph.edges().map(A=>({renderInfoEdge:v.coreGraph.edge(A),edge:A})).filter(({renderInfoEdge:A})=>A.metaEdge).map(({edge:A,renderInfoEdge:z})=>{const K=function(it,ut){const vt=ut.points.map(yt=>Object.assign({},yt));if(ut.adjoiningMetaEdge){const yt=ut.adjoiningMetaEdge.points,_t=ut.metaEdge.inbound,Rt=_t?yt[yt.length-1]:yt[0],Qt=vt[_t?0:vt.length-1],Vt=it.x-it.width/2,xe=it.y-it.height/2,ke=Rt.x-Vt,dr=Rt.y-xe,Xe=-it.paddingLeft,Ve=-(it.paddingTop+it.labelHeight);Qt.x=ke+Xe,Qt.y=dr+Ve}return vt}(v,z);return{adjoiningEdge:z.adjoiningMetaEdge?{w:z.adjoiningMetaEdge.metaEdge.w,v:z.adjoiningMetaEdge.metaEdge.v}:null,inbound:z.metaEdge.inbound,w:A.w,v:A.v,points:K,weight:z.weight,baseEdgeList:z.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},49685:function(Le,F,B){"use strict";B.r(F),B.d(F,{ARRAY_TYPE:function(){return W},EPSILON:function(){return P},RANDOM:function(){return R},equals:function(){return E},setMatrixArrayType:function(){return L},toRadian:function(){return N}});var P=1e-6,W=typeof Float32Array!="undefined"?Float32Array:Array,R=Math.random;function L(b){W=b}var k=Math.PI/180;function N(b){return b*k}function E(b,p){return Math.abs(b-p)<=P*Math.max(1,Math.abs(b),Math.abs(p))}Math.hypot||(Math.hypot=function(){for(var b=0,p=arguments.length;p--;)b+=arguments[p]*arguments[p];return Math.sqrt(b)})},58204:function(Le,F,B){"use strict";B.r(F),B.d(F,{glMatrix:function(){return E},mat2:function(){return P},mat2d:function(){return W},mat3:function(){return pn},mat4:function(){return R},quat:function(){return k},quat2:function(){return N},vec2:function(){return Sc},vec3:function(){return Sr},vec4:function(){return L}});var P={};B.r(P),B.d(P,{LDU:function(){return tt},add:function(){return at},adjoint:function(){return y},clone:function(){return p},copy:function(){return m},create:function(){return b},determinant:function(){return d},equals:function(){return Lt},exactEquals:function(){return ht},frob:function(){return nt},fromRotation:function(){return X},fromScaling:function(){return H},fromValues:function(){return M},identity:function(){return g},invert:function(){return O},mul:function(){return Ut},multiply:function(){return V},multiplyScalar:function(){return St},multiplyScalarAndAdd:function(){return Zt},rotate:function(){return q},scale:function(){return Y},set:function(){return _},str:function(){return J},sub:function(){return Ot},subtract:function(){return ct},transpose:function(){return S}});var W={};B.r(W),B.d(W,{add:function(){return Wt},clone:function(){return st},copy:function(){return Et},create:function(){return Z},determinant:function(){return ye},equals:function(){return Ft},exactEquals:function(){return _r},frob:function(){return At},fromRotation:function(){return de},fromScaling:function(){return Mt},fromTranslation:function(){return ee},fromValues:function(){return Pt},identity:function(){return Bt},invert:function(){return le},mul:function(){return hr},multiply:function(){return Gt},multiplyScalar:function(){return Ge},multiplyScalarAndAdd:function(){return Be},rotate:function(){return zt},scale:function(){return ue},set:function(){return Ht},str:function(){return ce},sub:function(){return rn},subtract:function(){return fe},translate:function(){return we}});var R={};B.r(R),B.d(R,{add:function(){return _e},adjoint:function(){return Tr},clone:function(){return Bn},copy:function(){return Kn},create:function(){return Sn},determinant:function(){return Jr},equals:function(){return xn},exactEquals:function(){return Hr},frob:function(){return Pe},fromQuat:function(){return tn},fromQuat2:function(){return be},fromRotation:function(){return Un},fromRotationTranslation:function(){return Re},fromRotationTranslationScale:function(){return Mr},fromRotationTranslationScaleOrigin:function(){return Vr},fromScaling:function(){return zn},fromTranslation:function(){return gn},fromValues:function(){return Nn},fromXRotation:function(){return _n},fromYRotation:function(){return aa},fromZRotation:function(){return $},frustum:function(){return jr},getRotation:function(){return Cr},getScaling:function(){return Ze},getTranslation:function(){return Ke},identity:function(){return Ea},invert:function(){return ir},lookAt:function(){return kt},mul:function(){return ze},multiply:function(){return vn},multiplyScalar:function(){return Ir},multiplyScalarAndAdd:function(){return sr},ortho:function(){return Q},orthoNO:function(){return T},orthoZO:function(){return bt},perspective:function(){return pt},perspectiveFromFieldOfView:function(){return I},perspectiveNO:function(){return dt},perspectiveZO:function(){return U},rotate:function(){return kn},rotateX:function(){return Zn},rotateY:function(){return Yn},rotateZ:function(){return Ra},scale:function(){return In},set:function(){return ra},str:function(){return Kt},sub:function(){return ur},subtract:function(){return Qe},targetTo:function(){return It},translate:function(){return Tn},transpose:function(){return na}});var L={};B.r(L),B.d(L,{add:function(){return ie},ceil:function(){return Gr},clone:function(){return $t},copy:function(){return te},create:function(){return Nr},cross:function(){return zi},dist:function(){return ai},distance:function(){return Ca},div:function(){return os},divide:function(){return tr},dot:function(){return Pi},equals:function(){return bi},exactEquals:function(){return Io},floor:function(){return cn},forEach:function(){return wo},fromValues:function(){return Ct},inverse:function(){return Ni},len:function(){return mn},length:function(){return ho},lerp:function(){return ua},max:function(){return Fn},min:function(){return qr},mul:function(){return Eo},multiply:function(){return Je},negate:function(){return Ha},normalize:function(){return qo},random:function(){return ro},round:function(){return Mn},scale:function(){return ia},scaleAndAdd:function(){return Sa},set:function(){return ge},sqrDist:function(){return xi},sqrLen:function(){return Oo},squaredDistance:function(){return ca},squaredLength:function(){return qa},str:function(){return To},sub:function(){return Ui},subtract:function(){return Te},transformMat4:function(){return zo},transformQuat:function(){return Da},zero:function(){return Co}});var k={};B.r(k),B.d(k,{add:function(){return Xi},calculateW:function(){return Jo},clone:function(){return Ei},conjugate:function(){return Zi},copy:function(){return Za},create:function(){return no},dot:function(){return Yi},equals:function(){return ta},exactEquals:function(){return gi},exp:function(){return ki},fromEuler:function(){return vo},fromMat3:function(){return Ri},fromValues:function(){return Wi},getAngle:function(){return wn},getAxisAngle:function(){return ss},identity:function(){return Lo},invert:function(){return us},len:function(){return po},length:function(){return go},lerp:function(){return io},ln:function(){return Wo},mul:function(){return jo},multiply:function(){return Ja},normalize:function(){return ti},pow:function(){return Xo},random:function(){return ga},rotateX:function(){return Ki},rotateY:function(){return Ka},rotateZ:function(){return _o},rotationTo:function(){return Qi},scale:function(){return ao},set:function(){return Vo},setAxes:function(){return ii},setAxisAngle:function(){return Uo},slerp:function(){return So},sqlerp:function(){return yo},sqrLen:function(){return la},squaredLength:function(){return $i},str:function(){return Yo}});var N={};B.r(N),B.d(N,{add:function(){return oo},clone:function(){return Bi},conjugate:function(){return Nf},copy:function(){return Ps},create:function(){return Mo},dot:function(){return qs},equals:function(){return bu},exactEquals:function(){return tu},fromMat4:function(){return Ns},fromRotation:function(){return Ho},fromRotationTranslation:function(){return fs},fromRotationTranslationValues:function(){return Do},fromTranslation:function(){return No},fromValues:function(){return Fi},getDual:function(){return De},getReal:function(){return pe},getTranslation:function(){return zr},identity:function(){return $n},invert:function(){return Rs},len:function(){return ys},length:function(){return Po},lerp:function(){return Js},mul:function(){return ks},multiply:function(){return cs},normalize:function(){return Pf},rotateAroundAxis:function(){return wi},rotateByQuatAppend:function(){return Vi},rotateByQuatPrepend:function(){return ps},rotateX:function(){return ha},rotateY:function(){return Xa},rotateZ:function(){return Ci},scale:function(){return Qu},set:function(){return xt},setDual:function(){return br},setReal:function(){return $e},sqrLen:function(){return mo},squaredLength:function(){return ms},str:function(){return _c},translate:function(){return un}});var E=B(49685);function b(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function p(h){var D=new E.ARRAY_TYPE(4);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D}function m(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h}function g(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function M(h,D,ft,mt){var Tt=new E.ARRAY_TYPE(4);return Tt[0]=h,Tt[1]=D,Tt[2]=ft,Tt[3]=mt,Tt}function _(h,D,ft,mt,Tt){return h[0]=D,h[1]=ft,h[2]=mt,h[3]=Tt,h}function S(h,D){if(h===D){var ft=D[1];h[1]=D[2],h[2]=ft}else h[0]=D[0],h[1]=D[2],h[2]=D[1],h[3]=D[3];return h}function O(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=ft*Xt-Tt*mt;return Yt?(Yt=1/Yt,h[0]=Xt*Yt,h[1]=-mt*Yt,h[2]=-Tt*Yt,h[3]=ft*Yt,h):null}function y(h,D){var ft=D[0];return h[0]=D[3],h[1]=-D[1],h[2]=-D[2],h[3]=ft,h}function d(h){return h[0]*h[3]-h[2]*h[1]}function V(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=ft[0],he=ft[1],Se=ft[2],Ue=ft[3];return h[0]=mt*ne+Xt*he,h[1]=Tt*ne+Yt*he,h[2]=mt*Se+Xt*Ue,h[3]=Tt*Se+Yt*Ue,h}function q(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=Math.sin(ft),he=Math.cos(ft);return h[0]=mt*he+Xt*ne,h[1]=Tt*he+Yt*ne,h[2]=mt*-ne+Xt*he,h[3]=Tt*-ne+Yt*he,h}function Y(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=ft[0],he=ft[1];return h[0]=mt*ne,h[1]=Tt*ne,h[2]=Xt*he,h[3]=Yt*he,h}function X(h,D){var ft=Math.sin(D),mt=Math.cos(D);return h[0]=mt,h[1]=ft,h[2]=-ft,h[3]=mt,h}function H(h,D){return h[0]=D[0],h[1]=0,h[2]=0,h[3]=D[1],h}function J(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function nt(h){return Math.hypot(h[0],h[1],h[2],h[3])}function tt(h,D,ft,mt){return h[2]=mt[2]/mt[0],ft[0]=mt[0],ft[1]=mt[1],ft[3]=mt[3]-h[2]*ft[1],[h,D,ft]}function at(h,D,ft){return h[0]=D[0]+ft[0],h[1]=D[1]+ft[1],h[2]=D[2]+ft[2],h[3]=D[3]+ft[3],h}function ct(h,D,ft){return h[0]=D[0]-ft[0],h[1]=D[1]-ft[1],h[2]=D[2]-ft[2],h[3]=D[3]-ft[3],h}function ht(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]}function Lt(h,D){var ft=h[0],mt=h[1],Tt=h[2],Xt=h[3],Yt=D[0],ne=D[1],he=D[2],Se=D[3];return Math.abs(ft-Yt)<=E.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Yt))&&Math.abs(mt-ne)<=E.EPSILON*Math.max(1,Math.abs(mt),Math.abs(ne))&&Math.abs(Tt-he)<=E.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(he))&&Math.abs(Xt-Se)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Se))}function St(h,D,ft){return h[0]=D[0]*ft,h[1]=D[1]*ft,h[2]=D[2]*ft,h[3]=D[3]*ft,h}function Zt(h,D,ft,mt){return h[0]=D[0]+ft[0]*mt,h[1]=D[1]+ft[1]*mt,h[2]=D[2]+ft[2]*mt,h[3]=D[3]+ft[3]*mt,h}var Ut=V,Ot=ct;function Z(){var h=new E.ARRAY_TYPE(6);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function st(h){var D=new E.ARRAY_TYPE(6);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D[4]=h[4],D[5]=h[5],D}function Et(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=D[4],h[5]=D[5],h}function Bt(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function Pt(h,D,ft,mt,Tt,Xt){var Yt=new E.ARRAY_TYPE(6);return Yt[0]=h,Yt[1]=D,Yt[2]=ft,Yt[3]=mt,Yt[4]=Tt,Yt[5]=Xt,Yt}function Ht(h,D,ft,mt,Tt,Xt,Yt){return h[0]=D,h[1]=ft,h[2]=mt,h[3]=Tt,h[4]=Xt,h[5]=Yt,h}function le(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=D[4],ne=D[5],he=ft*Xt-mt*Tt;return he?(he=1/he,h[0]=Xt*he,h[1]=-mt*he,h[2]=-Tt*he,h[3]=ft*he,h[4]=(Tt*ne-Xt*Yt)*he,h[5]=(mt*Yt-ft*ne)*he,h):null}function ye(h){return h[0]*h[3]-h[1]*h[2]}function Gt(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=D[4],he=D[5],Se=ft[0],Ue=ft[1],cr=ft[2],gr=ft[3],lr=ft[4],Pr=ft[5];return h[0]=mt*Se+Xt*Ue,h[1]=Tt*Se+Yt*Ue,h[2]=mt*cr+Xt*gr,h[3]=Tt*cr+Yt*gr,h[4]=mt*lr+Xt*Pr+ne,h[5]=Tt*lr+Yt*Pr+he,h}function zt(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=D[4],he=D[5],Se=Math.sin(ft),Ue=Math.cos(ft);return h[0]=mt*Ue+Xt*Se,h[1]=Tt*Ue+Yt*Se,h[2]=mt*-Se+Xt*Ue,h[3]=Tt*-Se+Yt*Ue,h[4]=ne,h[5]=he,h}function ue(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=D[4],he=D[5],Se=ft[0],Ue=ft[1];return h[0]=mt*Se,h[1]=Tt*Se,h[2]=Xt*Ue,h[3]=Yt*Ue,h[4]=ne,h[5]=he,h}function we(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=D[4],he=D[5],Se=ft[0],Ue=ft[1];return h[0]=mt,h[1]=Tt,h[2]=Xt,h[3]=Yt,h[4]=mt*Se+Xt*Ue+ne,h[5]=Tt*Se+Yt*Ue+he,h}function de(h,D){var ft=Math.sin(D),mt=Math.cos(D);return h[0]=mt,h[1]=ft,h[2]=-ft,h[3]=mt,h[4]=0,h[5]=0,h}function Mt(h,D){return h[0]=D[0],h[1]=0,h[2]=0,h[3]=D[1],h[4]=0,h[5]=0,h}function ee(h,D){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=D[0],h[5]=D[1],h}function ce(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function At(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function Wt(h,D,ft){return h[0]=D[0]+ft[0],h[1]=D[1]+ft[1],h[2]=D[2]+ft[2],h[3]=D[3]+ft[3],h[4]=D[4]+ft[4],h[5]=D[5]+ft[5],h}function fe(h,D,ft){return h[0]=D[0]-ft[0],h[1]=D[1]-ft[1],h[2]=D[2]-ft[2],h[3]=D[3]-ft[3],h[4]=D[4]-ft[4],h[5]=D[5]-ft[5],h}function Ge(h,D,ft){return h[0]=D[0]*ft,h[1]=D[1]*ft,h[2]=D[2]*ft,h[3]=D[3]*ft,h[4]=D[4]*ft,h[5]=D[5]*ft,h}function Be(h,D,ft,mt){return h[0]=D[0]+ft[0]*mt,h[1]=D[1]+ft[1]*mt,h[2]=D[2]+ft[2]*mt,h[3]=D[3]+ft[3]*mt,h[4]=D[4]+ft[4]*mt,h[5]=D[5]+ft[5]*mt,h}function _r(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]&&h[4]===D[4]&&h[5]===D[5]}function Ft(h,D){var ft=h[0],mt=h[1],Tt=h[2],Xt=h[3],Yt=h[4],ne=h[5],he=D[0],Se=D[1],Ue=D[2],cr=D[3],gr=D[4],lr=D[5];return Math.abs(ft-he)<=E.EPSILON*Math.max(1,Math.abs(ft),Math.abs(he))&&Math.abs(mt-Se)<=E.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Se))&&Math.abs(Tt-Ue)<=E.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(Ue))&&Math.abs(Xt-cr)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(cr))&&Math.abs(Yt-gr)<=E.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(gr))&&Math.abs(ne-lr)<=E.EPSILON*Math.max(1,Math.abs(ne),Math.abs(lr))}var hr=Gt,rn=fe,pn=B(35600);function Sn(){var h=new E.ARRAY_TYPE(16);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function Bn(h){var D=new E.ARRAY_TYPE(16);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D[4]=h[4],D[5]=h[5],D[6]=h[6],D[7]=h[7],D[8]=h[8],D[9]=h[9],D[10]=h[10],D[11]=h[11],D[12]=h[12],D[13]=h[13],D[14]=h[14],D[15]=h[15],D}function Kn(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=D[4],h[5]=D[5],h[6]=D[6],h[7]=D[7],h[8]=D[8],h[9]=D[9],h[10]=D[10],h[11]=D[11],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15],h}function Nn(h,D,ft,mt,Tt,Xt,Yt,ne,he,Se,Ue,cr,gr,lr,Pr,$r){var xr=new E.ARRAY_TYPE(16);return xr[0]=h,xr[1]=D,xr[2]=ft,xr[3]=mt,xr[4]=Tt,xr[5]=Xt,xr[6]=Yt,xr[7]=ne,xr[8]=he,xr[9]=Se,xr[10]=Ue,xr[11]=cr,xr[12]=gr,xr[13]=lr,xr[14]=Pr,xr[15]=$r,xr}function ra(h,D,ft,mt,Tt,Xt,Yt,ne,he,Se,Ue,cr,gr,lr,Pr,$r,xr){return h[0]=D,h[1]=ft,h[2]=mt,h[3]=Tt,h[4]=Xt,h[5]=Yt,h[6]=ne,h[7]=he,h[8]=Se,h[9]=Ue,h[10]=cr,h[11]=gr,h[12]=lr,h[13]=Pr,h[14]=$r,h[15]=xr,h}function Ea(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function na(h,D){if(h===D){var ft=D[1],mt=D[2],Tt=D[3],Xt=D[6],Yt=D[7],ne=D[11];h[1]=D[4],h[2]=D[8],h[3]=D[12],h[4]=ft,h[6]=D[9],h[7]=D[13],h[8]=mt,h[9]=Xt,h[11]=D[14],h[12]=Tt,h[13]=Yt,h[14]=ne}else h[0]=D[0],h[1]=D[4],h[2]=D[8],h[3]=D[12],h[4]=D[1],h[5]=D[5],h[6]=D[9],h[7]=D[13],h[8]=D[2],h[9]=D[6],h[10]=D[10],h[11]=D[14],h[12]=D[3],h[13]=D[7],h[14]=D[11],h[15]=D[15];return h}function ir(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=D[4],ne=D[5],he=D[6],Se=D[7],Ue=D[8],cr=D[9],gr=D[10],lr=D[11],Pr=D[12],$r=D[13],xr=D[14],ln=D[15],qn=ft*ne-mt*Yt,ea=ft*he-Tt*Yt,jn=ft*Se-Xt*Yt,Ln=mt*he-Tt*ne,Wn=mt*Se-Xt*ne,li=Tt*Se-Xt*he,oi=Ue*$r-cr*Pr,ei=Ue*xr-gr*Pr,si=Ue*ln-lr*Pr,ui=cr*xr-gr*$r,pi=cr*ln-lr*$r,Ti=gr*ln-lr*xr,pa=qn*Ti-ea*pi+jn*ui+Ln*si-Wn*ei+li*oi;return pa?(pa=1/pa,h[0]=(ne*Ti-he*pi+Se*ui)*pa,h[1]=(Tt*pi-mt*Ti-Xt*ui)*pa,h[2]=($r*li-xr*Wn+ln*Ln)*pa,h[3]=(gr*Wn-cr*li-lr*Ln)*pa,h[4]=(he*si-Yt*Ti-Se*ei)*pa,h[5]=(ft*Ti-Tt*si+Xt*ei)*pa,h[6]=(xr*jn-Pr*li-ln*ea)*pa,h[7]=(Ue*li-gr*jn+lr*ea)*pa,h[8]=(Yt*pi-ne*si+Se*oi)*pa,h[9]=(mt*si-ft*pi-Xt*oi)*pa,h[10]=(Pr*Wn-$r*jn+ln*qn)*pa,h[11]=(cr*jn-Ue*Wn-lr*qn)*pa,h[12]=(ne*ei-Yt*ui-he*oi)*pa,h[13]=(ft*ui-mt*ei+Tt*oi)*pa,h[14]=($r*ea-Pr*Ln-xr*qn)*pa,h[15]=(Ue*Ln-cr*ea+gr*qn)*pa,h):null}function Tr(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=D[4],ne=D[5],he=D[6],Se=D[7],Ue=D[8],cr=D[9],gr=D[10],lr=D[11],Pr=D[12],$r=D[13],xr=D[14],ln=D[15];return h[0]=ne*(gr*ln-lr*xr)-cr*(he*ln-Se*xr)+$r*(he*lr-Se*gr),h[1]=-(mt*(gr*ln-lr*xr)-cr*(Tt*ln-Xt*xr)+$r*(Tt*lr-Xt*gr)),h[2]=mt*(he*ln-Se*xr)-ne*(Tt*ln-Xt*xr)+$r*(Tt*Se-Xt*he),h[3]=-(mt*(he*lr-Se*gr)-ne*(Tt*lr-Xt*gr)+cr*(Tt*Se-Xt*he)),h[4]=-(Yt*(gr*ln-lr*xr)-Ue*(he*ln-Se*xr)+Pr*(he*lr-Se*gr)),h[5]=ft*(gr*ln-lr*xr)-Ue*(Tt*ln-Xt*xr)+Pr*(Tt*lr-Xt*gr),h[6]=-(ft*(he*ln-Se*xr)-Yt*(Tt*ln-Xt*xr)+Pr*(Tt*Se-Xt*he)),h[7]=ft*(he*lr-Se*gr)-Yt*(Tt*lr-Xt*gr)+Ue*(Tt*Se-Xt*he),h[8]=Yt*(cr*ln-lr*$r)-Ue*(ne*ln-Se*$r)+Pr*(ne*lr-Se*cr),h[9]=-(ft*(cr*ln-lr*$r)-Ue*(mt*ln-Xt*$r)+Pr*(mt*lr-Xt*cr)),h[10]=ft*(ne*ln-Se*$r)-Yt*(mt*ln-Xt*$r)+Pr*(mt*Se-Xt*ne),h[11]=-(ft*(ne*lr-Se*cr)-Yt*(mt*lr-Xt*cr)+Ue*(mt*Se-Xt*ne)),h[12]=-(Yt*(cr*xr-gr*$r)-Ue*(ne*xr-he*$r)+Pr*(ne*gr-he*cr)),h[13]=ft*(cr*xr-gr*$r)-Ue*(mt*xr-Tt*$r)+Pr*(mt*gr-Tt*cr),h[14]=-(ft*(ne*xr-he*$r)-Yt*(mt*xr-Tt*$r)+Pr*(mt*he-Tt*ne)),h[15]=ft*(ne*gr-he*cr)-Yt*(mt*gr-Tt*cr)+Ue*(mt*he-Tt*ne),h}function Jr(h){var D=h[0],ft=h[1],mt=h[2],Tt=h[3],Xt=h[4],Yt=h[5],ne=h[6],he=h[7],Se=h[8],Ue=h[9],cr=h[10],gr=h[11],lr=h[12],Pr=h[13],$r=h[14],xr=h[15],ln=D*Yt-ft*Xt,qn=D*ne-mt*Xt,ea=D*he-Tt*Xt,jn=ft*ne-mt*Yt,Ln=ft*he-Tt*Yt,Wn=mt*he-Tt*ne,li=Se*Pr-Ue*lr,oi=Se*$r-cr*lr,ei=Se*xr-gr*lr,si=Ue*$r-cr*Pr,ui=Ue*xr-gr*Pr,pi=cr*xr-gr*$r;return ln*pi-qn*ui+ea*si+jn*ei-Ln*oi+Wn*li}function vn(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=D[4],he=D[5],Se=D[6],Ue=D[7],cr=D[8],gr=D[9],lr=D[10],Pr=D[11],$r=D[12],xr=D[13],ln=D[14],qn=D[15],ea=ft[0],jn=ft[1],Ln=ft[2],Wn=ft[3];return h[0]=ea*mt+jn*ne+Ln*cr+Wn*$r,h[1]=ea*Tt+jn*he+Ln*gr+Wn*xr,h[2]=ea*Xt+jn*Se+Ln*lr+Wn*ln,h[3]=ea*Yt+jn*Ue+Ln*Pr+Wn*qn,ea=ft[4],jn=ft[5],Ln=ft[6],Wn=ft[7],h[4]=ea*mt+jn*ne+Ln*cr+Wn*$r,h[5]=ea*Tt+jn*he+Ln*gr+Wn*xr,h[6]=ea*Xt+jn*Se+Ln*lr+Wn*ln,h[7]=ea*Yt+jn*Ue+Ln*Pr+Wn*qn,ea=ft[8],jn=ft[9],Ln=ft[10],Wn=ft[11],h[8]=ea*mt+jn*ne+Ln*cr+Wn*$r,h[9]=ea*Tt+jn*he+Ln*gr+Wn*xr,h[10]=ea*Xt+jn*Se+Ln*lr+Wn*ln,h[11]=ea*Yt+jn*Ue+Ln*Pr+Wn*qn,ea=ft[12],jn=ft[13],Ln=ft[14],Wn=ft[15],h[12]=ea*mt+jn*ne+Ln*cr+Wn*$r,h[13]=ea*Tt+jn*he+Ln*gr+Wn*xr,h[14]=ea*Xt+jn*Se+Ln*lr+Wn*ln,h[15]=ea*Yt+jn*Ue+Ln*Pr+Wn*qn,h}function Tn(h,D,ft){var mt=ft[0],Tt=ft[1],Xt=ft[2],Yt,ne,he,Se,Ue,cr,gr,lr,Pr,$r,xr,ln;return D===h?(h[12]=D[0]*mt+D[4]*Tt+D[8]*Xt+D[12],h[13]=D[1]*mt+D[5]*Tt+D[9]*Xt+D[13],h[14]=D[2]*mt+D[6]*Tt+D[10]*Xt+D[14],h[15]=D[3]*mt+D[7]*Tt+D[11]*Xt+D[15]):(Yt=D[0],ne=D[1],he=D[2],Se=D[3],Ue=D[4],cr=D[5],gr=D[6],lr=D[7],Pr=D[8],$r=D[9],xr=D[10],ln=D[11],h[0]=Yt,h[1]=ne,h[2]=he,h[3]=Se,h[4]=Ue,h[5]=cr,h[6]=gr,h[7]=lr,h[8]=Pr,h[9]=$r,h[10]=xr,h[11]=ln,h[12]=Yt*mt+Ue*Tt+Pr*Xt+D[12],h[13]=ne*mt+cr*Tt+$r*Xt+D[13],h[14]=he*mt+gr*Tt+xr*Xt+D[14],h[15]=Se*mt+lr*Tt+ln*Xt+D[15]),h}function In(h,D,ft){var mt=ft[0],Tt=ft[1],Xt=ft[2];return h[0]=D[0]*mt,h[1]=D[1]*mt,h[2]=D[2]*mt,h[3]=D[3]*mt,h[4]=D[4]*Tt,h[5]=D[5]*Tt,h[6]=D[6]*Tt,h[7]=D[7]*Tt,h[8]=D[8]*Xt,h[9]=D[9]*Xt,h[10]=D[10]*Xt,h[11]=D[11]*Xt,h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15],h}function kn(h,D,ft,mt){var Tt=mt[0],Xt=mt[1],Yt=mt[2],ne=Math.hypot(Tt,Xt,Yt),he,Se,Ue,cr,gr,lr,Pr,$r,xr,ln,qn,ea,jn,Ln,Wn,li,oi,ei,si,ui,pi,Ti,pa,ka;return ne<E.EPSILON?null:(ne=1/ne,Tt*=ne,Xt*=ne,Yt*=ne,he=Math.sin(ft),Se=Math.cos(ft),Ue=1-Se,cr=D[0],gr=D[1],lr=D[2],Pr=D[3],$r=D[4],xr=D[5],ln=D[6],qn=D[7],ea=D[8],jn=D[9],Ln=D[10],Wn=D[11],li=Tt*Tt*Ue+Se,oi=Xt*Tt*Ue+Yt*he,ei=Yt*Tt*Ue-Xt*he,si=Tt*Xt*Ue-Yt*he,ui=Xt*Xt*Ue+Se,pi=Yt*Xt*Ue+Tt*he,Ti=Tt*Yt*Ue+Xt*he,pa=Xt*Yt*Ue-Tt*he,ka=Yt*Yt*Ue+Se,h[0]=cr*li+$r*oi+ea*ei,h[1]=gr*li+xr*oi+jn*ei,h[2]=lr*li+ln*oi+Ln*ei,h[3]=Pr*li+qn*oi+Wn*ei,h[4]=cr*si+$r*ui+ea*pi,h[5]=gr*si+xr*ui+jn*pi,h[6]=lr*si+ln*ui+Ln*pi,h[7]=Pr*si+qn*ui+Wn*pi,h[8]=cr*Ti+$r*pa+ea*ka,h[9]=gr*Ti+xr*pa+jn*ka,h[10]=lr*Ti+ln*pa+Ln*ka,h[11]=Pr*Ti+qn*pa+Wn*ka,D!==h&&(h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h)}function Zn(h,D,ft){var mt=Math.sin(ft),Tt=Math.cos(ft),Xt=D[4],Yt=D[5],ne=D[6],he=D[7],Se=D[8],Ue=D[9],cr=D[10],gr=D[11];return D!==h&&(h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h[4]=Xt*Tt+Se*mt,h[5]=Yt*Tt+Ue*mt,h[6]=ne*Tt+cr*mt,h[7]=he*Tt+gr*mt,h[8]=Se*Tt-Xt*mt,h[9]=Ue*Tt-Yt*mt,h[10]=cr*Tt-ne*mt,h[11]=gr*Tt-he*mt,h}function Yn(h,D,ft){var mt=Math.sin(ft),Tt=Math.cos(ft),Xt=D[0],Yt=D[1],ne=D[2],he=D[3],Se=D[8],Ue=D[9],cr=D[10],gr=D[11];return D!==h&&(h[4]=D[4],h[5]=D[5],h[6]=D[6],h[7]=D[7],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h[0]=Xt*Tt-Se*mt,h[1]=Yt*Tt-Ue*mt,h[2]=ne*Tt-cr*mt,h[3]=he*Tt-gr*mt,h[8]=Xt*mt+Se*Tt,h[9]=Yt*mt+Ue*Tt,h[10]=ne*mt+cr*Tt,h[11]=he*mt+gr*Tt,h}function Ra(h,D,ft){var mt=Math.sin(ft),Tt=Math.cos(ft),Xt=D[0],Yt=D[1],ne=D[2],he=D[3],Se=D[4],Ue=D[5],cr=D[6],gr=D[7];return D!==h&&(h[8]=D[8],h[9]=D[9],h[10]=D[10],h[11]=D[11],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h[0]=Xt*Tt+Se*mt,h[1]=Yt*Tt+Ue*mt,h[2]=ne*Tt+cr*mt,h[3]=he*Tt+gr*mt,h[4]=Se*Tt-Xt*mt,h[5]=Ue*Tt-Yt*mt,h[6]=cr*Tt-ne*mt,h[7]=gr*Tt-he*mt,h}function gn(h,D){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=D[0],h[13]=D[1],h[14]=D[2],h[15]=1,h}function zn(h,D){return h[0]=D[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=D[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=D[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Un(h,D,ft){var mt=ft[0],Tt=ft[1],Xt=ft[2],Yt=Math.hypot(mt,Tt,Xt),ne,he,Se;return Yt<E.EPSILON?null:(Yt=1/Yt,mt*=Yt,Tt*=Yt,Xt*=Yt,ne=Math.sin(D),he=Math.cos(D),Se=1-he,h[0]=mt*mt*Se+he,h[1]=Tt*mt*Se+Xt*ne,h[2]=Xt*mt*Se-Tt*ne,h[3]=0,h[4]=mt*Tt*Se-Xt*ne,h[5]=Tt*Tt*Se+he,h[6]=Xt*Tt*Se+mt*ne,h[7]=0,h[8]=mt*Xt*Se+Tt*ne,h[9]=Tt*Xt*Se-mt*ne,h[10]=Xt*Xt*Se+he,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function _n(h,D){var ft=Math.sin(D),mt=Math.cos(D);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=mt,h[6]=ft,h[7]=0,h[8]=0,h[9]=-ft,h[10]=mt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function aa(h,D){var ft=Math.sin(D),mt=Math.cos(D);return h[0]=mt,h[1]=0,h[2]=-ft,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=ft,h[9]=0,h[10]=mt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function $(h,D){var ft=Math.sin(D),mt=Math.cos(D);return h[0]=mt,h[1]=ft,h[2]=0,h[3]=0,h[4]=-ft,h[5]=mt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Re(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=mt+mt,he=Tt+Tt,Se=Xt+Xt,Ue=mt*ne,cr=mt*he,gr=mt*Se,lr=Tt*he,Pr=Tt*Se,$r=Xt*Se,xr=Yt*ne,ln=Yt*he,qn=Yt*Se;return h[0]=1-(lr+$r),h[1]=cr+qn,h[2]=gr-ln,h[3]=0,h[4]=cr-qn,h[5]=1-(Ue+$r),h[6]=Pr+xr,h[7]=0,h[8]=gr+ln,h[9]=Pr-xr,h[10]=1-(Ue+lr),h[11]=0,h[12]=ft[0],h[13]=ft[1],h[14]=ft[2],h[15]=1,h}function be(h,D){var ft=new E.ARRAY_TYPE(3),mt=-D[0],Tt=-D[1],Xt=-D[2],Yt=D[3],ne=D[4],he=D[5],Se=D[6],Ue=D[7],cr=mt*mt+Tt*Tt+Xt*Xt+Yt*Yt;return cr>0?(ft[0]=(ne*Yt+Ue*mt+he*Xt-Se*Tt)*2/cr,ft[1]=(he*Yt+Ue*Tt+Se*mt-ne*Xt)*2/cr,ft[2]=(Se*Yt+Ue*Xt+ne*Tt-he*mt)*2/cr):(ft[0]=(ne*Yt+Ue*mt+he*Xt-Se*Tt)*2,ft[1]=(he*Yt+Ue*Tt+Se*mt-ne*Xt)*2,ft[2]=(Se*Yt+Ue*Xt+ne*Tt-he*mt)*2),Re(h,D,ft),h}function Ke(h,D){return h[0]=D[12],h[1]=D[13],h[2]=D[14],h}function Ze(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[4],Yt=D[5],ne=D[6],he=D[8],Se=D[9],Ue=D[10];return h[0]=Math.hypot(ft,mt,Tt),h[1]=Math.hypot(Xt,Yt,ne),h[2]=Math.hypot(he,Se,Ue),h}function Cr(h,D){var ft=new E.ARRAY_TYPE(3);Ze(ft,D);var mt=1/ft[0],Tt=1/ft[1],Xt=1/ft[2],Yt=D[0]*mt,ne=D[1]*Tt,he=D[2]*Xt,Se=D[4]*mt,Ue=D[5]*Tt,cr=D[6]*Xt,gr=D[8]*mt,lr=D[9]*Tt,Pr=D[10]*Xt,$r=Yt+Ue+Pr,xr=0;return $r>0?(xr=Math.sqrt($r+1)*2,h[3]=.25*xr,h[0]=(cr-lr)/xr,h[1]=(gr-he)/xr,h[2]=(ne-Se)/xr):Yt>Ue&&Yt>Pr?(xr=Math.sqrt(1+Yt-Ue-Pr)*2,h[3]=(cr-lr)/xr,h[0]=.25*xr,h[1]=(ne+Se)/xr,h[2]=(gr+he)/xr):Ue>Pr?(xr=Math.sqrt(1+Ue-Yt-Pr)*2,h[3]=(gr-he)/xr,h[0]=(ne+Se)/xr,h[1]=.25*xr,h[2]=(cr+lr)/xr):(xr=Math.sqrt(1+Pr-Yt-Ue)*2,h[3]=(ne-Se)/xr,h[0]=(gr+he)/xr,h[1]=(cr+lr)/xr,h[2]=.25*xr),h}function Mr(h,D,ft,mt){var Tt=D[0],Xt=D[1],Yt=D[2],ne=D[3],he=Tt+Tt,Se=Xt+Xt,Ue=Yt+Yt,cr=Tt*he,gr=Tt*Se,lr=Tt*Ue,Pr=Xt*Se,$r=Xt*Ue,xr=Yt*Ue,ln=ne*he,qn=ne*Se,ea=ne*Ue,jn=mt[0],Ln=mt[1],Wn=mt[2];return h[0]=(1-(Pr+xr))*jn,h[1]=(gr+ea)*jn,h[2]=(lr-qn)*jn,h[3]=0,h[4]=(gr-ea)*Ln,h[5]=(1-(cr+xr))*Ln,h[6]=($r+ln)*Ln,h[7]=0,h[8]=(lr+qn)*Wn,h[9]=($r-ln)*Wn,h[10]=(1-(cr+Pr))*Wn,h[11]=0,h[12]=ft[0],h[13]=ft[1],h[14]=ft[2],h[15]=1,h}function Vr(h,D,ft,mt,Tt){var Xt=D[0],Yt=D[1],ne=D[2],he=D[3],Se=Xt+Xt,Ue=Yt+Yt,cr=ne+ne,gr=Xt*Se,lr=Xt*Ue,Pr=Xt*cr,$r=Yt*Ue,xr=Yt*cr,ln=ne*cr,qn=he*Se,ea=he*Ue,jn=he*cr,Ln=mt[0],Wn=mt[1],li=mt[2],oi=Tt[0],ei=Tt[1],si=Tt[2],ui=(1-($r+ln))*Ln,pi=(lr+jn)*Ln,Ti=(Pr-ea)*Ln,pa=(lr-jn)*Wn,ka=(1-(gr+ln))*Wn,bs=(xr+qn)*Wn,ts=(Pr+ea)*li,ko=(xr-qn)*li,eu=(1-(gr+$r))*li;return h[0]=ui,h[1]=pi,h[2]=Ti,h[3]=0,h[4]=pa,h[5]=ka,h[6]=bs,h[7]=0,h[8]=ts,h[9]=ko,h[10]=eu,h[11]=0,h[12]=ft[0]+oi-(ui*oi+pa*ei+ts*si),h[13]=ft[1]+ei-(pi*oi+ka*ei+ko*si),h[14]=ft[2]+si-(Ti*oi+bs*ei+eu*si),h[15]=1,h}function tn(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=ft+ft,ne=mt+mt,he=Tt+Tt,Se=ft*Yt,Ue=mt*Yt,cr=mt*ne,gr=Tt*Yt,lr=Tt*ne,Pr=Tt*he,$r=Xt*Yt,xr=Xt*ne,ln=Xt*he;return h[0]=1-cr-Pr,h[1]=Ue+ln,h[2]=gr-xr,h[3]=0,h[4]=Ue-ln,h[5]=1-Se-Pr,h[6]=lr+$r,h[7]=0,h[8]=gr+xr,h[9]=lr-$r,h[10]=1-Se-cr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function jr(h,D,ft,mt,Tt,Xt,Yt){var ne=1/(ft-D),he=1/(Tt-mt),Se=1/(Xt-Yt);return h[0]=Xt*2*ne,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt*2*he,h[6]=0,h[7]=0,h[8]=(ft+D)*ne,h[9]=(Tt+mt)*he,h[10]=(Yt+Xt)*Se,h[11]=-1,h[12]=0,h[13]=0,h[14]=Yt*Xt*2*Se,h[15]=0,h}function dt(h,D,ft,mt,Tt){var Xt=1/Math.tan(D/2),Yt;return h[0]=Xt/ft,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Tt!=null&&Tt!==1/0?(Yt=1/(mt-Tt),h[10]=(Tt+mt)*Yt,h[14]=2*Tt*mt*Yt):(h[10]=-1,h[14]=-2*mt),h}var pt=dt;function U(h,D,ft,mt,Tt){var Xt=1/Math.tan(D/2),Yt;return h[0]=Xt/ft,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Tt!=null&&Tt!==1/0?(Yt=1/(mt-Tt),h[10]=Tt*Yt,h[14]=Tt*mt*Yt):(h[10]=-1,h[14]=-mt),h}function I(h,D,ft,mt){var Tt=Math.tan(D.upDegrees*Math.PI/180),Xt=Math.tan(D.downDegrees*Math.PI/180),Yt=Math.tan(D.leftDegrees*Math.PI/180),ne=Math.tan(D.rightDegrees*Math.PI/180),he=2/(Yt+ne),Se=2/(Tt+Xt);return h[0]=he,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Se,h[6]=0,h[7]=0,h[8]=-((Yt-ne)*he*.5),h[9]=(Tt-Xt)*Se*.5,h[10]=mt/(ft-mt),h[11]=-1,h[12]=0,h[13]=0,h[14]=mt*ft/(ft-mt),h[15]=0,h}function T(h,D,ft,mt,Tt,Xt,Yt){var ne=1/(D-ft),he=1/(mt-Tt),Se=1/(Xt-Yt);return h[0]=-2*ne,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*he,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Se,h[11]=0,h[12]=(D+ft)*ne,h[13]=(Tt+mt)*he,h[14]=(Yt+Xt)*Se,h[15]=1,h}var Q=T;function bt(h,D,ft,mt,Tt,Xt,Yt){var ne=1/(D-ft),he=1/(mt-Tt),Se=1/(Xt-Yt);return h[0]=-2*ne,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*he,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Se,h[11]=0,h[12]=(D+ft)*ne,h[13]=(Tt+mt)*he,h[14]=Xt*Se,h[15]=1,h}function kt(h,D,ft,mt){var Tt,Xt,Yt,ne,he,Se,Ue,cr,gr,lr,Pr=D[0],$r=D[1],xr=D[2],ln=mt[0],qn=mt[1],ea=mt[2],jn=ft[0],Ln=ft[1],Wn=ft[2];return Math.abs(Pr-jn)<E.EPSILON&&Math.abs($r-Ln)<E.EPSILON&&Math.abs(xr-Wn)<E.EPSILON?Ea(h):(Ue=Pr-jn,cr=$r-Ln,gr=xr-Wn,lr=1/Math.hypot(Ue,cr,gr),Ue*=lr,cr*=lr,gr*=lr,Tt=qn*gr-ea*cr,Xt=ea*Ue-ln*gr,Yt=ln*cr-qn*Ue,lr=Math.hypot(Tt,Xt,Yt),lr?(lr=1/lr,Tt*=lr,Xt*=lr,Yt*=lr):(Tt=0,Xt=0,Yt=0),ne=cr*Yt-gr*Xt,he=gr*Tt-Ue*Yt,Se=Ue*Xt-cr*Tt,lr=Math.hypot(ne,he,Se),lr?(lr=1/lr,ne*=lr,he*=lr,Se*=lr):(ne=0,he=0,Se=0),h[0]=Tt,h[1]=ne,h[2]=Ue,h[3]=0,h[4]=Xt,h[5]=he,h[6]=cr,h[7]=0,h[8]=Yt,h[9]=Se,h[10]=gr,h[11]=0,h[12]=-(Tt*Pr+Xt*$r+Yt*xr),h[13]=-(ne*Pr+he*$r+Se*xr),h[14]=-(Ue*Pr+cr*$r+gr*xr),h[15]=1,h)}function It(h,D,ft,mt){var Tt=D[0],Xt=D[1],Yt=D[2],ne=mt[0],he=mt[1],Se=mt[2],Ue=Tt-ft[0],cr=Xt-ft[1],gr=Yt-ft[2],lr=Ue*Ue+cr*cr+gr*gr;lr>0&&(lr=1/Math.sqrt(lr),Ue*=lr,cr*=lr,gr*=lr);var Pr=he*gr-Se*cr,$r=Se*Ue-ne*gr,xr=ne*cr-he*Ue;return lr=Pr*Pr+$r*$r+xr*xr,lr>0&&(lr=1/Math.sqrt(lr),Pr*=lr,$r*=lr,xr*=lr),h[0]=Pr,h[1]=$r,h[2]=xr,h[3]=0,h[4]=cr*xr-gr*$r,h[5]=gr*Pr-Ue*xr,h[6]=Ue*$r-cr*Pr,h[7]=0,h[8]=Ue,h[9]=cr,h[10]=gr,h[11]=0,h[12]=Tt,h[13]=Xt,h[14]=Yt,h[15]=1,h}function Kt(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Pe(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function _e(h,D,ft){return h[0]=D[0]+ft[0],h[1]=D[1]+ft[1],h[2]=D[2]+ft[2],h[3]=D[3]+ft[3],h[4]=D[4]+ft[4],h[5]=D[5]+ft[5],h[6]=D[6]+ft[6],h[7]=D[7]+ft[7],h[8]=D[8]+ft[8],h[9]=D[9]+ft[9],h[10]=D[10]+ft[10],h[11]=D[11]+ft[11],h[12]=D[12]+ft[12],h[13]=D[13]+ft[13],h[14]=D[14]+ft[14],h[15]=D[15]+ft[15],h}function Qe(h,D,ft){return h[0]=D[0]-ft[0],h[1]=D[1]-ft[1],h[2]=D[2]-ft[2],h[3]=D[3]-ft[3],h[4]=D[4]-ft[4],h[5]=D[5]-ft[5],h[6]=D[6]-ft[6],h[7]=D[7]-ft[7],h[8]=D[8]-ft[8],h[9]=D[9]-ft[9],h[10]=D[10]-ft[10],h[11]=D[11]-ft[11],h[12]=D[12]-ft[12],h[13]=D[13]-ft[13],h[14]=D[14]-ft[14],h[15]=D[15]-ft[15],h}function Ir(h,D,ft){return h[0]=D[0]*ft,h[1]=D[1]*ft,h[2]=D[2]*ft,h[3]=D[3]*ft,h[4]=D[4]*ft,h[5]=D[5]*ft,h[6]=D[6]*ft,h[7]=D[7]*ft,h[8]=D[8]*ft,h[9]=D[9]*ft,h[10]=D[10]*ft,h[11]=D[11]*ft,h[12]=D[12]*ft,h[13]=D[13]*ft,h[14]=D[14]*ft,h[15]=D[15]*ft,h}function sr(h,D,ft,mt){return h[0]=D[0]+ft[0]*mt,h[1]=D[1]+ft[1]*mt,h[2]=D[2]+ft[2]*mt,h[3]=D[3]+ft[3]*mt,h[4]=D[4]+ft[4]*mt,h[5]=D[5]+ft[5]*mt,h[6]=D[6]+ft[6]*mt,h[7]=D[7]+ft[7]*mt,h[8]=D[8]+ft[8]*mt,h[9]=D[9]+ft[9]*mt,h[10]=D[10]+ft[10]*mt,h[11]=D[11]+ft[11]*mt,h[12]=D[12]+ft[12]*mt,h[13]=D[13]+ft[13]*mt,h[14]=D[14]+ft[14]*mt,h[15]=D[15]+ft[15]*mt,h}function Hr(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]&&h[4]===D[4]&&h[5]===D[5]&&h[6]===D[6]&&h[7]===D[7]&&h[8]===D[8]&&h[9]===D[9]&&h[10]===D[10]&&h[11]===D[11]&&h[12]===D[12]&&h[13]===D[13]&&h[14]===D[14]&&h[15]===D[15]}function xn(h,D){var ft=h[0],mt=h[1],Tt=h[2],Xt=h[3],Yt=h[4],ne=h[5],he=h[6],Se=h[7],Ue=h[8],cr=h[9],gr=h[10],lr=h[11],Pr=h[12],$r=h[13],xr=h[14],ln=h[15],qn=D[0],ea=D[1],jn=D[2],Ln=D[3],Wn=D[4],li=D[5],oi=D[6],ei=D[7],si=D[8],ui=D[9],pi=D[10],Ti=D[11],pa=D[12],ka=D[13],bs=D[14],ts=D[15];return Math.abs(ft-qn)<=E.EPSILON*Math.max(1,Math.abs(ft),Math.abs(qn))&&Math.abs(mt-ea)<=E.EPSILON*Math.max(1,Math.abs(mt),Math.abs(ea))&&Math.abs(Tt-jn)<=E.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(jn))&&Math.abs(Xt-Ln)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ln))&&Math.abs(Yt-Wn)<=E.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Wn))&&Math.abs(ne-li)<=E.EPSILON*Math.max(1,Math.abs(ne),Math.abs(li))&&Math.abs(he-oi)<=E.EPSILON*Math.max(1,Math.abs(he),Math.abs(oi))&&Math.abs(Se-ei)<=E.EPSILON*Math.max(1,Math.abs(Se),Math.abs(ei))&&Math.abs(Ue-si)<=E.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(si))&&Math.abs(cr-ui)<=E.EPSILON*Math.max(1,Math.abs(cr),Math.abs(ui))&&Math.abs(gr-pi)<=E.EPSILON*Math.max(1,Math.abs(gr),Math.abs(pi))&&Math.abs(lr-Ti)<=E.EPSILON*Math.max(1,Math.abs(lr),Math.abs(Ti))&&Math.abs(Pr-pa)<=E.EPSILON*Math.max(1,Math.abs(Pr),Math.abs(pa))&&Math.abs($r-ka)<=E.EPSILON*Math.max(1,Math.abs($r),Math.abs(ka))&&Math.abs(xr-bs)<=E.EPSILON*Math.max(1,Math.abs(xr),Math.abs(bs))&&Math.abs(ln-ts)<=E.EPSILON*Math.max(1,Math.abs(ln),Math.abs(ts))}var ze=vn,ur=Qe,Sr=B(77160);function Nr(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function $t(h){var D=new E.ARRAY_TYPE(4);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D}function Ct(h,D,ft,mt){var Tt=new E.ARRAY_TYPE(4);return Tt[0]=h,Tt[1]=D,Tt[2]=ft,Tt[3]=mt,Tt}function te(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h}function ge(h,D,ft,mt,Tt){return h[0]=D,h[1]=ft,h[2]=mt,h[3]=Tt,h}function ie(h,D,ft){return h[0]=D[0]+ft[0],h[1]=D[1]+ft[1],h[2]=D[2]+ft[2],h[3]=D[3]+ft[3],h}function Te(h,D,ft){return h[0]=D[0]-ft[0],h[1]=D[1]-ft[1],h[2]=D[2]-ft[2],h[3]=D[3]-ft[3],h}function Je(h,D,ft){return h[0]=D[0]*ft[0],h[1]=D[1]*ft[1],h[2]=D[2]*ft[2],h[3]=D[3]*ft[3],h}function tr(h,D,ft){return h[0]=D[0]/ft[0],h[1]=D[1]/ft[1],h[2]=D[2]/ft[2],h[3]=D[3]/ft[3],h}function Gr(h,D){return h[0]=Math.ceil(D[0]),h[1]=Math.ceil(D[1]),h[2]=Math.ceil(D[2]),h[3]=Math.ceil(D[3]),h}function cn(h,D){return h[0]=Math.floor(D[0]),h[1]=Math.floor(D[1]),h[2]=Math.floor(D[2]),h[3]=Math.floor(D[3]),h}function qr(h,D,ft){return h[0]=Math.min(D[0],ft[0]),h[1]=Math.min(D[1],ft[1]),h[2]=Math.min(D[2],ft[2]),h[3]=Math.min(D[3],ft[3]),h}function Fn(h,D,ft){return h[0]=Math.max(D[0],ft[0]),h[1]=Math.max(D[1],ft[1]),h[2]=Math.max(D[2],ft[2]),h[3]=Math.max(D[3],ft[3]),h}function Mn(h,D){return h[0]=Math.round(D[0]),h[1]=Math.round(D[1]),h[2]=Math.round(D[2]),h[3]=Math.round(D[3]),h}function ia(h,D,ft){return h[0]=D[0]*ft,h[1]=D[1]*ft,h[2]=D[2]*ft,h[3]=D[3]*ft,h}function Sa(h,D,ft,mt){return h[0]=D[0]+ft[0]*mt,h[1]=D[1]+ft[1]*mt,h[2]=D[2]+ft[2]*mt,h[3]=D[3]+ft[3]*mt,h}function Ca(h,D){var ft=D[0]-h[0],mt=D[1]-h[1],Tt=D[2]-h[2],Xt=D[3]-h[3];return Math.hypot(ft,mt,Tt,Xt)}function ca(h,D){var ft=D[0]-h[0],mt=D[1]-h[1],Tt=D[2]-h[2],Xt=D[3]-h[3];return ft*ft+mt*mt+Tt*Tt+Xt*Xt}function ho(h){var D=h[0],ft=h[1],mt=h[2],Tt=h[3];return Math.hypot(D,ft,mt,Tt)}function qa(h){var D=h[0],ft=h[1],mt=h[2],Tt=h[3];return D*D+ft*ft+mt*mt+Tt*Tt}function Ha(h,D){return h[0]=-D[0],h[1]=-D[1],h[2]=-D[2],h[3]=-D[3],h}function Ni(h,D){return h[0]=1/D[0],h[1]=1/D[1],h[2]=1/D[2],h[3]=1/D[3],h}function qo(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=ft*ft+mt*mt+Tt*Tt+Xt*Xt;return Yt>0&&(Yt=1/Math.sqrt(Yt)),h[0]=ft*Yt,h[1]=mt*Yt,h[2]=Tt*Yt,h[3]=Xt*Yt,h}function Pi(h,D){return h[0]*D[0]+h[1]*D[1]+h[2]*D[2]+h[3]*D[3]}function zi(h,D,ft,mt){var Tt=ft[0]*mt[1]-ft[1]*mt[0],Xt=ft[0]*mt[2]-ft[2]*mt[0],Yt=ft[0]*mt[3]-ft[3]*mt[0],ne=ft[1]*mt[2]-ft[2]*mt[1],he=ft[1]*mt[3]-ft[3]*mt[1],Se=ft[2]*mt[3]-ft[3]*mt[2],Ue=D[0],cr=D[1],gr=D[2],lr=D[3];return h[0]=cr*Se-gr*he+lr*ne,h[1]=-(Ue*Se)+gr*Yt-lr*Xt,h[2]=Ue*he-cr*Yt+lr*Tt,h[3]=-(Ue*ne)+cr*Xt-gr*Tt,h}function ua(h,D,ft,mt){var Tt=D[0],Xt=D[1],Yt=D[2],ne=D[3];return h[0]=Tt+mt*(ft[0]-Tt),h[1]=Xt+mt*(ft[1]-Xt),h[2]=Yt+mt*(ft[2]-Yt),h[3]=ne+mt*(ft[3]-ne),h}function ro(h,D){D=D||1;var ft,mt,Tt,Xt,Yt,ne;do ft=E.RANDOM()*2-1,mt=E.RANDOM()*2-1,Yt=ft*ft+mt*mt;while(Yt>=1);do Tt=E.RANDOM()*2-1,Xt=E.RANDOM()*2-1,ne=Tt*Tt+Xt*Xt;while(ne>=1);var he=Math.sqrt((1-Yt)/ne);return h[0]=D*ft,h[1]=D*mt,h[2]=D*Tt*he,h[3]=D*Xt*he,h}function zo(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3];return h[0]=ft[0]*mt+ft[4]*Tt+ft[8]*Xt+ft[12]*Yt,h[1]=ft[1]*mt+ft[5]*Tt+ft[9]*Xt+ft[13]*Yt,h[2]=ft[2]*mt+ft[6]*Tt+ft[10]*Xt+ft[14]*Yt,h[3]=ft[3]*mt+ft[7]*Tt+ft[11]*Xt+ft[15]*Yt,h}function Da(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=ft[0],ne=ft[1],he=ft[2],Se=ft[3],Ue=Se*mt+ne*Xt-he*Tt,cr=Se*Tt+he*mt-Yt*Xt,gr=Se*Xt+Yt*Tt-ne*mt,lr=-Yt*mt-ne*Tt-he*Xt;return h[0]=Ue*Se+lr*-Yt+cr*-he-gr*-ne,h[1]=cr*Se+lr*-ne+gr*-Yt-Ue*-he,h[2]=gr*Se+lr*-he+Ue*-ne-cr*-Yt,h[3]=D[3],h}function Co(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function To(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Io(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]}function bi(h,D){var ft=h[0],mt=h[1],Tt=h[2],Xt=h[3],Yt=D[0],ne=D[1],he=D[2],Se=D[3];return Math.abs(ft-Yt)<=E.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Yt))&&Math.abs(mt-ne)<=E.EPSILON*Math.max(1,Math.abs(mt),Math.abs(ne))&&Math.abs(Tt-he)<=E.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(he))&&Math.abs(Xt-Se)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Se))}var Ui=Te,Eo=Je,os=tr,ai=Ca,xi=ca,mn=ho,Oo=qa,wo=function(){var h=Nr();return function(D,ft,mt,Tt,Xt,Yt){var ne,he;for(ft||(ft=4),mt||(mt=0),Tt?he=Math.min(Tt*ft+mt,D.length):he=D.length,ne=mt;ne<he;ne+=ft)h[0]=D[ne],h[1]=D[ne+1],h[2]=D[ne+2],h[3]=D[ne+3],Xt(h,h,Yt),D[ne]=h[0],D[ne+1]=h[1],D[ne+2]=h[2],D[ne+3]=h[3];return D}}();function no(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Lo(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Uo(h,D,ft){ft=ft*.5;var mt=Math.sin(ft);return h[0]=mt*D[0],h[1]=mt*D[1],h[2]=mt*D[2],h[3]=Math.cos(ft),h}function ss(h,D){var ft=Math.acos(D[3])*2,mt=Math.sin(ft/2);return mt>E.EPSILON?(h[0]=D[0]/mt,h[1]=D[1]/mt,h[2]=D[2]/mt):(h[0]=1,h[1]=0,h[2]=0),ft}function wn(h,D){var ft=Yi(h,D);return Math.acos(2*ft*ft-1)}function Ja(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=ft[0],he=ft[1],Se=ft[2],Ue=ft[3];return h[0]=mt*Ue+Yt*ne+Tt*Se-Xt*he,h[1]=Tt*Ue+Yt*he+Xt*ne-mt*Se,h[2]=Xt*Ue+Yt*Se+mt*he-Tt*ne,h[3]=Yt*Ue-mt*ne-Tt*he-Xt*Se,h}function Ki(h,D,ft){ft*=.5;var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=Math.sin(ft),he=Math.cos(ft);return h[0]=mt*he+Yt*ne,h[1]=Tt*he+Xt*ne,h[2]=Xt*he-Tt*ne,h[3]=Yt*he-mt*ne,h}function Ka(h,D,ft){ft*=.5;var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=Math.sin(ft),he=Math.cos(ft);return h[0]=mt*he-Xt*ne,h[1]=Tt*he+Yt*ne,h[2]=Xt*he+mt*ne,h[3]=Yt*he-Tt*ne,h}function _o(h,D,ft){ft*=.5;var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=Math.sin(ft),he=Math.cos(ft);return h[0]=mt*he+Tt*ne,h[1]=Tt*he-mt*ne,h[2]=Xt*he+Yt*ne,h[3]=Yt*he-Xt*ne,h}function Jo(h,D){var ft=D[0],mt=D[1],Tt=D[2];return h[0]=ft,h[1]=mt,h[2]=Tt,h[3]=Math.sqrt(Math.abs(1-ft*ft-mt*mt-Tt*Tt)),h}function ki(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=Math.sqrt(ft*ft+mt*mt+Tt*Tt),ne=Math.exp(Xt),he=Yt>0?ne*Math.sin(Yt)/Yt:0;return h[0]=ft*he,h[1]=mt*he,h[2]=Tt*he,h[3]=ne*Math.cos(Yt),h}function Wo(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=Math.sqrt(ft*ft+mt*mt+Tt*Tt),ne=Yt>0?Math.atan2(Yt,Xt)/Yt:0;return h[0]=ft*ne,h[1]=mt*ne,h[2]=Tt*ne,h[3]=.5*Math.log(ft*ft+mt*mt+Tt*Tt+Xt*Xt),h}function Xo(h,D,ft){return Wo(h,D),ao(h,h,ft),ki(h,h),h}function So(h,D,ft,mt){var Tt=D[0],Xt=D[1],Yt=D[2],ne=D[3],he=ft[0],Se=ft[1],Ue=ft[2],cr=ft[3],gr,lr,Pr,$r,xr;return lr=Tt*he+Xt*Se+Yt*Ue+ne*cr,lr<0&&(lr=-lr,he=-he,Se=-Se,Ue=-Ue,cr=-cr),1-lr>E.EPSILON?(gr=Math.acos(lr),Pr=Math.sin(gr),$r=Math.sin((1-mt)*gr)/Pr,xr=Math.sin(mt*gr)/Pr):($r=1-mt,xr=mt),h[0]=$r*Tt+xr*he,h[1]=$r*Xt+xr*Se,h[2]=$r*Yt+xr*Ue,h[3]=$r*ne+xr*cr,h}function ga(h){var D=E.RANDOM(),ft=E.RANDOM(),mt=E.RANDOM(),Tt=Math.sqrt(1-D),Xt=Math.sqrt(D);return h[0]=Tt*Math.sin(2*Math.PI*ft),h[1]=Tt*Math.cos(2*Math.PI*ft),h[2]=Xt*Math.sin(2*Math.PI*mt),h[3]=Xt*Math.cos(2*Math.PI*mt),h}function us(h,D){var ft=D[0],mt=D[1],Tt=D[2],Xt=D[3],Yt=ft*ft+mt*mt+Tt*Tt+Xt*Xt,ne=Yt?1/Yt:0;return h[0]=-ft*ne,h[1]=-mt*ne,h[2]=-Tt*ne,h[3]=Xt*ne,h}function Zi(h,D){return h[0]=-D[0],h[1]=-D[1],h[2]=-D[2],h[3]=D[3],h}function Ri(h,D){var ft=D[0]+D[4]+D[8],mt;if(ft>0)mt=Math.sqrt(ft+1),h[3]=.5*mt,mt=.5/mt,h[0]=(D[5]-D[7])*mt,h[1]=(D[6]-D[2])*mt,h[2]=(D[1]-D[3])*mt;else{var Tt=0;D[4]>D[0]&&(Tt=1),D[8]>D[Tt*3+Tt]&&(Tt=2);var Xt=(Tt+1)%3,Yt=(Tt+2)%3;mt=Math.sqrt(D[Tt*3+Tt]-D[Xt*3+Xt]-D[Yt*3+Yt]+1),h[Tt]=.5*mt,mt=.5/mt,h[3]=(D[Xt*3+Yt]-D[Yt*3+Xt])*mt,h[Xt]=(D[Xt*3+Tt]+D[Tt*3+Xt])*mt,h[Yt]=(D[Yt*3+Tt]+D[Tt*3+Yt])*mt}return h}function vo(h,D,ft,mt){var Tt=.5*Math.PI/180;D*=Tt,ft*=Tt,mt*=Tt;var Xt=Math.sin(D),Yt=Math.cos(D),ne=Math.sin(ft),he=Math.cos(ft),Se=Math.sin(mt),Ue=Math.cos(mt);return h[0]=Xt*he*Ue-Yt*ne*Se,h[1]=Yt*ne*Ue+Xt*he*Se,h[2]=Yt*he*Se-Xt*ne*Ue,h[3]=Yt*he*Ue+Xt*ne*Se,h}function Yo(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Ei=$t,Wi=Ct,Za=te,Vo=ge,Xi=ie,jo=Ja,ao=ia,Yi=Pi,io=ua,go=ho,po=go,$i=qa,la=$i,ti=qo,gi=Io,ta=bi,Qi=function(){var h=Sr.create(),D=Sr.fromValues(1,0,0),ft=Sr.fromValues(0,1,0);return function(mt,Tt,Xt){var Yt=Sr.dot(Tt,Xt);return Yt<-.999999?(Sr.cross(h,D,Tt),Sr.len(h)<1e-6&&Sr.cross(h,ft,Tt),Sr.normalize(h,h),Uo(mt,h,Math.PI),mt):Yt>.999999?(mt[0]=0,mt[1]=0,mt[2]=0,mt[3]=1,mt):(Sr.cross(h,Tt,Xt),mt[0]=h[0],mt[1]=h[1],mt[2]=h[2],mt[3]=1+Yt,ti(mt,mt))}}(),yo=function(){var h=no(),D=no();return function(ft,mt,Tt,Xt,Yt,ne){return So(h,mt,Yt,ne),So(D,Tt,Xt,ne),So(ft,h,D,2*ne*(1-ne)),ft}}(),ii=function(){var h=pn.create();return function(D,ft,mt,Tt){return h[0]=mt[0],h[3]=mt[1],h[6]=mt[2],h[1]=Tt[0],h[4]=Tt[1],h[7]=Tt[2],h[2]=-ft[0],h[5]=-ft[1],h[8]=-ft[2],ti(D,Ri(D,h))}}();function Mo(){var h=new E.ARRAY_TYPE(8);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Bi(h){var D=new E.ARRAY_TYPE(8);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D[4]=h[4],D[5]=h[5],D[6]=h[6],D[7]=h[7],D}function Fi(h,D,ft,mt,Tt,Xt,Yt,ne){var he=new E.ARRAY_TYPE(8);return he[0]=h,he[1]=D,he[2]=ft,he[3]=mt,he[4]=Tt,he[5]=Xt,he[6]=Yt,he[7]=ne,he}function Do(h,D,ft,mt,Tt,Xt,Yt){var ne=new E.ARRAY_TYPE(8);ne[0]=h,ne[1]=D,ne[2]=ft,ne[3]=mt;var he=Tt*.5,Se=Xt*.5,Ue=Yt*.5;return ne[4]=he*mt+Se*ft-Ue*D,ne[5]=Se*mt+Ue*h-he*ft,ne[6]=Ue*mt+he*D-Se*h,ne[7]=-he*h-Se*D-Ue*ft,ne}function fs(h,D,ft){var mt=ft[0]*.5,Tt=ft[1]*.5,Xt=ft[2]*.5,Yt=D[0],ne=D[1],he=D[2],Se=D[3];return h[0]=Yt,h[1]=ne,h[2]=he,h[3]=Se,h[4]=mt*Se+Tt*he-Xt*ne,h[5]=Tt*Se+Xt*Yt-mt*he,h[6]=Xt*Se+mt*ne-Tt*Yt,h[7]=-mt*Yt-Tt*ne-Xt*he,h}function No(h,D){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=D[0]*.5,h[5]=D[1]*.5,h[6]=D[2]*.5,h[7]=0,h}function Ho(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Ns(h,D){var ft=no();Cr(ft,D);var mt=new E.ARRAY_TYPE(3);return Ke(mt,D),fs(h,ft,mt),h}function Ps(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=D[4],h[5]=D[5],h[6]=D[6],h[7]=D[7],h}function $n(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function xt(h,D,ft,mt,Tt,Xt,Yt,ne,he){return h[0]=D,h[1]=ft,h[2]=mt,h[3]=Tt,h[4]=Xt,h[5]=Yt,h[6]=ne,h[7]=he,h}var pe=Za;function De(h,D){return h[0]=D[4],h[1]=D[5],h[2]=D[6],h[3]=D[7],h}var $e=Za;function br(h,D){return h[4]=D[0],h[5]=D[1],h[6]=D[2],h[7]=D[3],h}function zr(h,D){var ft=D[4],mt=D[5],Tt=D[6],Xt=D[7],Yt=-D[0],ne=-D[1],he=-D[2],Se=D[3];return h[0]=(ft*Se+Xt*Yt+mt*he-Tt*ne)*2,h[1]=(mt*Se+Xt*ne+Tt*Yt-ft*he)*2,h[2]=(Tt*Se+Xt*he+ft*ne-mt*Yt)*2,h}function un(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=ft[0]*.5,he=ft[1]*.5,Se=ft[2]*.5,Ue=D[4],cr=D[5],gr=D[6],lr=D[7];return h[0]=mt,h[1]=Tt,h[2]=Xt,h[3]=Yt,h[4]=Yt*ne+Tt*Se-Xt*he+Ue,h[5]=Yt*he+Xt*ne-mt*Se+cr,h[6]=Yt*Se+mt*he-Tt*ne+gr,h[7]=-mt*ne-Tt*he-Xt*Se+lr,h}function ha(h,D,ft){var mt=-D[0],Tt=-D[1],Xt=-D[2],Yt=D[3],ne=D[4],he=D[5],Se=D[6],Ue=D[7],cr=ne*Yt+Ue*mt+he*Xt-Se*Tt,gr=he*Yt+Ue*Tt+Se*mt-ne*Xt,lr=Se*Yt+Ue*Xt+ne*Tt-he*mt,Pr=Ue*Yt-ne*mt-he*Tt-Se*Xt;return Ki(h,D,ft),mt=h[0],Tt=h[1],Xt=h[2],Yt=h[3],h[4]=cr*Yt+Pr*mt+gr*Xt-lr*Tt,h[5]=gr*Yt+Pr*Tt+lr*mt-cr*Xt,h[6]=lr*Yt+Pr*Xt+cr*Tt-gr*mt,h[7]=Pr*Yt-cr*mt-gr*Tt-lr*Xt,h}function Xa(h,D,ft){var mt=-D[0],Tt=-D[1],Xt=-D[2],Yt=D[3],ne=D[4],he=D[5],Se=D[6],Ue=D[7],cr=ne*Yt+Ue*mt+he*Xt-Se*Tt,gr=he*Yt+Ue*Tt+Se*mt-ne*Xt,lr=Se*Yt+Ue*Xt+ne*Tt-he*mt,Pr=Ue*Yt-ne*mt-he*Tt-Se*Xt;return Ka(h,D,ft),mt=h[0],Tt=h[1],Xt=h[2],Yt=h[3],h[4]=cr*Yt+Pr*mt+gr*Xt-lr*Tt,h[5]=gr*Yt+Pr*Tt+lr*mt-cr*Xt,h[6]=lr*Yt+Pr*Xt+cr*Tt-gr*mt,h[7]=Pr*Yt-cr*mt-gr*Tt-lr*Xt,h}function Ci(h,D,ft){var mt=-D[0],Tt=-D[1],Xt=-D[2],Yt=D[3],ne=D[4],he=D[5],Se=D[6],Ue=D[7],cr=ne*Yt+Ue*mt+he*Xt-Se*Tt,gr=he*Yt+Ue*Tt+Se*mt-ne*Xt,lr=Se*Yt+Ue*Xt+ne*Tt-he*mt,Pr=Ue*Yt-ne*mt-he*Tt-Se*Xt;return _o(h,D,ft),mt=h[0],Tt=h[1],Xt=h[2],Yt=h[3],h[4]=cr*Yt+Pr*mt+gr*Xt-lr*Tt,h[5]=gr*Yt+Pr*Tt+lr*mt-cr*Xt,h[6]=lr*Yt+Pr*Xt+cr*Tt-gr*mt,h[7]=Pr*Yt-cr*mt-gr*Tt-lr*Xt,h}function Vi(h,D,ft){var mt=ft[0],Tt=ft[1],Xt=ft[2],Yt=ft[3],ne=D[0],he=D[1],Se=D[2],Ue=D[3];return h[0]=ne*Yt+Ue*mt+he*Xt-Se*Tt,h[1]=he*Yt+Ue*Tt+Se*mt-ne*Xt,h[2]=Se*Yt+Ue*Xt+ne*Tt-he*mt,h[3]=Ue*Yt-ne*mt-he*Tt-Se*Xt,ne=D[4],he=D[5],Se=D[6],Ue=D[7],h[4]=ne*Yt+Ue*mt+he*Xt-Se*Tt,h[5]=he*Yt+Ue*Tt+Se*mt-ne*Xt,h[6]=Se*Yt+Ue*Xt+ne*Tt-he*mt,h[7]=Ue*Yt-ne*mt-he*Tt-Se*Xt,h}function ps(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=ft[0],he=ft[1],Se=ft[2],Ue=ft[3];return h[0]=mt*Ue+Yt*ne+Tt*Se-Xt*he,h[1]=Tt*Ue+Yt*he+Xt*ne-mt*Se,h[2]=Xt*Ue+Yt*Se+mt*he-Tt*ne,h[3]=Yt*Ue-mt*ne-Tt*he-Xt*Se,ne=ft[4],he=ft[5],Se=ft[6],Ue=ft[7],h[4]=mt*Ue+Yt*ne+Tt*Se-Xt*he,h[5]=Tt*Ue+Yt*he+Xt*ne-mt*Se,h[6]=Xt*Ue+Yt*Se+mt*he-Tt*ne,h[7]=Yt*Ue-mt*ne-Tt*he-Xt*Se,h}function wi(h,D,ft,mt){if(Math.abs(mt)<E.EPSILON)return Ps(h,D);var Tt=Math.hypot(ft[0],ft[1],ft[2]);mt=mt*.5;var Xt=Math.sin(mt),Yt=Xt*ft[0]/Tt,ne=Xt*ft[1]/Tt,he=Xt*ft[2]/Tt,Se=Math.cos(mt),Ue=D[0],cr=D[1],gr=D[2],lr=D[3];h[0]=Ue*Se+lr*Yt+cr*he-gr*ne,h[1]=cr*Se+lr*ne+gr*Yt-Ue*he,h[2]=gr*Se+lr*he+Ue*ne-cr*Yt,h[3]=lr*Se-Ue*Yt-cr*ne-gr*he;var Pr=D[4],$r=D[5],xr=D[6],ln=D[7];return h[4]=Pr*Se+ln*Yt+$r*he-xr*ne,h[5]=$r*Se+ln*ne+xr*Yt-Pr*he,h[6]=xr*Se+ln*he+Pr*ne-$r*Yt,h[7]=ln*Se-Pr*Yt-$r*ne-xr*he,h}function oo(h,D,ft){return h[0]=D[0]+ft[0],h[1]=D[1]+ft[1],h[2]=D[2]+ft[2],h[3]=D[3]+ft[3],h[4]=D[4]+ft[4],h[5]=D[5]+ft[5],h[6]=D[6]+ft[6],h[7]=D[7]+ft[7],h}function cs(h,D,ft){var mt=D[0],Tt=D[1],Xt=D[2],Yt=D[3],ne=ft[4],he=ft[5],Se=ft[6],Ue=ft[7],cr=D[4],gr=D[5],lr=D[6],Pr=D[7],$r=ft[0],xr=ft[1],ln=ft[2],qn=ft[3];return h[0]=mt*qn+Yt*$r+Tt*ln-Xt*xr,h[1]=Tt*qn+Yt*xr+Xt*$r-mt*ln,h[2]=Xt*qn+Yt*ln+mt*xr-Tt*$r,h[3]=Yt*qn-mt*$r-Tt*xr-Xt*ln,h[4]=mt*Ue+Yt*ne+Tt*Se-Xt*he+cr*qn+Pr*$r+gr*ln-lr*xr,h[5]=Tt*Ue+Yt*he+Xt*ne-mt*Se+gr*qn+Pr*xr+lr*$r-cr*ln,h[6]=Xt*Ue+Yt*Se+mt*he-Tt*ne+lr*qn+Pr*ln+cr*xr-gr*$r,h[7]=Yt*Ue-mt*ne-Tt*he-Xt*Se+Pr*qn-cr*$r-gr*xr-lr*ln,h}var ks=cs;function Qu(h,D,ft){return h[0]=D[0]*ft,h[1]=D[1]*ft,h[2]=D[2]*ft,h[3]=D[3]*ft,h[4]=D[4]*ft,h[5]=D[5]*ft,h[6]=D[6]*ft,h[7]=D[7]*ft,h}var qs=Yi;function Js(h,D,ft,mt){var Tt=1-mt;return qs(D,ft)<0&&(mt=-mt),h[0]=D[0]*Tt+ft[0]*mt,h[1]=D[1]*Tt+ft[1]*mt,h[2]=D[2]*Tt+ft[2]*mt,h[3]=D[3]*Tt+ft[3]*mt,h[4]=D[4]*Tt+ft[4]*mt,h[5]=D[5]*Tt+ft[5]*mt,h[6]=D[6]*Tt+ft[6]*mt,h[7]=D[7]*Tt+ft[7]*mt,h}function Rs(h,D){var ft=ms(D);return h[0]=-D[0]/ft,h[1]=-D[1]/ft,h[2]=-D[2]/ft,h[3]=D[3]/ft,h[4]=-D[4]/ft,h[5]=-D[5]/ft,h[6]=-D[6]/ft,h[7]=D[7]/ft,h}function Nf(h,D){return h[0]=-D[0],h[1]=-D[1],h[2]=-D[2],h[3]=D[3],h[4]=-D[4],h[5]=-D[5],h[6]=-D[6],h[7]=D[7],h}var Po=go,ys=Po,ms=$i,mo=ms;function Pf(h,D){var ft=ms(D);if(ft>0){ft=Math.sqrt(ft);var mt=D[0]/ft,Tt=D[1]/ft,Xt=D[2]/ft,Yt=D[3]/ft,ne=D[4],he=D[5],Se=D[6],Ue=D[7],cr=mt*ne+Tt*he+Xt*Se+Yt*Ue;h[0]=mt,h[1]=Tt,h[2]=Xt,h[3]=Yt,h[4]=(ne-mt*cr)/ft,h[5]=(he-Tt*cr)/ft,h[6]=(Se-Xt*cr)/ft,h[7]=(Ue-Yt*cr)/ft}return h}function _c(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function tu(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]&&h[4]===D[4]&&h[5]===D[5]&&h[6]===D[6]&&h[7]===D[7]}function bu(h,D){var ft=h[0],mt=h[1],Tt=h[2],Xt=h[3],Yt=h[4],ne=h[5],he=h[6],Se=h[7],Ue=D[0],cr=D[1],gr=D[2],lr=D[3],Pr=D[4],$r=D[5],xr=D[6],ln=D[7];return Math.abs(ft-Ue)<=E.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Ue))&&Math.abs(mt-cr)<=E.EPSILON*Math.max(1,Math.abs(mt),Math.abs(cr))&&Math.abs(Tt-gr)<=E.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(gr))&&Math.abs(Xt-lr)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(lr))&&Math.abs(Yt-Pr)<=E.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Pr))&&Math.abs(ne-$r)<=E.EPSILON*Math.max(1,Math.abs(ne),Math.abs($r))&&Math.abs(he-xr)<=E.EPSILON*Math.max(1,Math.abs(he),Math.abs(xr))&&Math.abs(Se-ln)<=E.EPSILON*Math.max(1,Math.abs(Se),Math.abs(ln))}var Sc=B(31437)},35600:function(Le,F,B){"use strict";B.r(F),B.d(F,{add:function(){return at},adjoint:function(){return g},clone:function(){return L},copy:function(){return k},create:function(){return W},determinant:function(){return M},equals:function(){return Zt},exactEquals:function(){return St},frob:function(){return tt},fromMat2d:function(){return Y},fromMat4:function(){return R},fromQuat:function(){return X},fromRotation:function(){return V},fromScaling:function(){return q},fromTranslation:function(){return d},fromValues:function(){return N},identity:function(){return b},invert:function(){return m},mul:function(){return Ut},multiply:function(){return _},multiplyScalar:function(){return ht},multiplyScalarAndAdd:function(){return Lt},normalFromMat4:function(){return H},projection:function(){return J},rotate:function(){return O},scale:function(){return y},set:function(){return E},str:function(){return nt},sub:function(){return Ot},subtract:function(){return ct},translate:function(){return S},transpose:function(){return p}});var P=B(49685);function W(){var Z=new P.ARRAY_TYPE(9);return P.ARRAY_TYPE!=Float32Array&&(Z[1]=0,Z[2]=0,Z[3]=0,Z[5]=0,Z[6]=0,Z[7]=0),Z[0]=1,Z[4]=1,Z[8]=1,Z}function R(Z,st){return Z[0]=st[0],Z[1]=st[1],Z[2]=st[2],Z[3]=st[4],Z[4]=st[5],Z[5]=st[6],Z[6]=st[8],Z[7]=st[9],Z[8]=st[10],Z}function L(Z){var st=new P.ARRAY_TYPE(9);return st[0]=Z[0],st[1]=Z[1],st[2]=Z[2],st[3]=Z[3],st[4]=Z[4],st[5]=Z[5],st[6]=Z[6],st[7]=Z[7],st[8]=Z[8],st}function k(Z,st){return Z[0]=st[0],Z[1]=st[1],Z[2]=st[2],Z[3]=st[3],Z[4]=st[4],Z[5]=st[5],Z[6]=st[6],Z[7]=st[7],Z[8]=st[8],Z}function N(Z,st,Et,Bt,Pt,Ht,le,ye,Gt){var zt=new P.ARRAY_TYPE(9);return zt[0]=Z,zt[1]=st,zt[2]=Et,zt[3]=Bt,zt[4]=Pt,zt[5]=Ht,zt[6]=le,zt[7]=ye,zt[8]=Gt,zt}function E(Z,st,Et,Bt,Pt,Ht,le,ye,Gt,zt){return Z[0]=st,Z[1]=Et,Z[2]=Bt,Z[3]=Pt,Z[4]=Ht,Z[5]=le,Z[6]=ye,Z[7]=Gt,Z[8]=zt,Z}function b(Z){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function p(Z,st){if(Z===st){var Et=st[1],Bt=st[2],Pt=st[5];Z[1]=st[3],Z[2]=st[6],Z[3]=Et,Z[5]=st[7],Z[6]=Bt,Z[7]=Pt}else Z[0]=st[0],Z[1]=st[3],Z[2]=st[6],Z[3]=st[1],Z[4]=st[4],Z[5]=st[7],Z[6]=st[2],Z[7]=st[5],Z[8]=st[8];return Z}function m(Z,st){var Et=st[0],Bt=st[1],Pt=st[2],Ht=st[3],le=st[4],ye=st[5],Gt=st[6],zt=st[7],ue=st[8],we=ue*le-ye*zt,de=-ue*Ht+ye*Gt,Mt=zt*Ht-le*Gt,ee=Et*we+Bt*de+Pt*Mt;return ee?(ee=1/ee,Z[0]=we*ee,Z[1]=(-ue*Bt+Pt*zt)*ee,Z[2]=(ye*Bt-Pt*le)*ee,Z[3]=de*ee,Z[4]=(ue*Et-Pt*Gt)*ee,Z[5]=(-ye*Et+Pt*Ht)*ee,Z[6]=Mt*ee,Z[7]=(-zt*Et+Bt*Gt)*ee,Z[8]=(le*Et-Bt*Ht)*ee,Z):null}function g(Z,st){var Et=st[0],Bt=st[1],Pt=st[2],Ht=st[3],le=st[4],ye=st[5],Gt=st[6],zt=st[7],ue=st[8];return Z[0]=le*ue-ye*zt,Z[1]=Pt*zt-Bt*ue,Z[2]=Bt*ye-Pt*le,Z[3]=ye*Gt-Ht*ue,Z[4]=Et*ue-Pt*Gt,Z[5]=Pt*Ht-Et*ye,Z[6]=Ht*zt-le*Gt,Z[7]=Bt*Gt-Et*zt,Z[8]=Et*le-Bt*Ht,Z}function M(Z){var st=Z[0],Et=Z[1],Bt=Z[2],Pt=Z[3],Ht=Z[4],le=Z[5],ye=Z[6],Gt=Z[7],zt=Z[8];return st*(zt*Ht-le*Gt)+Et*(-zt*Pt+le*ye)+Bt*(Gt*Pt-Ht*ye)}function _(Z,st,Et){var Bt=st[0],Pt=st[1],Ht=st[2],le=st[3],ye=st[4],Gt=st[5],zt=st[6],ue=st[7],we=st[8],de=Et[0],Mt=Et[1],ee=Et[2],ce=Et[3],At=Et[4],Wt=Et[5],fe=Et[6],Ge=Et[7],Be=Et[8];return Z[0]=de*Bt+Mt*le+ee*zt,Z[1]=de*Pt+Mt*ye+ee*ue,Z[2]=de*Ht+Mt*Gt+ee*we,Z[3]=ce*Bt+At*le+Wt*zt,Z[4]=ce*Pt+At*ye+Wt*ue,Z[5]=ce*Ht+At*Gt+Wt*we,Z[6]=fe*Bt+Ge*le+Be*zt,Z[7]=fe*Pt+Ge*ye+Be*ue,Z[8]=fe*Ht+Ge*Gt+Be*we,Z}function S(Z,st,Et){var Bt=st[0],Pt=st[1],Ht=st[2],le=st[3],ye=st[4],Gt=st[5],zt=st[6],ue=st[7],we=st[8],de=Et[0],Mt=Et[1];return Z[0]=Bt,Z[1]=Pt,Z[2]=Ht,Z[3]=le,Z[4]=ye,Z[5]=Gt,Z[6]=de*Bt+Mt*le+zt,Z[7]=de*Pt+Mt*ye+ue,Z[8]=de*Ht+Mt*Gt+we,Z}function O(Z,st,Et){var Bt=st[0],Pt=st[1],Ht=st[2],le=st[3],ye=st[4],Gt=st[5],zt=st[6],ue=st[7],we=st[8],de=Math.sin(Et),Mt=Math.cos(Et);return Z[0]=Mt*Bt+de*le,Z[1]=Mt*Pt+de*ye,Z[2]=Mt*Ht+de*Gt,Z[3]=Mt*le-de*Bt,Z[4]=Mt*ye-de*Pt,Z[5]=Mt*Gt-de*Ht,Z[6]=zt,Z[7]=ue,Z[8]=we,Z}function y(Z,st,Et){var Bt=Et[0],Pt=Et[1];return Z[0]=Bt*st[0],Z[1]=Bt*st[1],Z[2]=Bt*st[2],Z[3]=Pt*st[3],Z[4]=Pt*st[4],Z[5]=Pt*st[5],Z[6]=st[6],Z[7]=st[7],Z[8]=st[8],Z}function d(Z,st){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=st[0],Z[7]=st[1],Z[8]=1,Z}function V(Z,st){var Et=Math.sin(st),Bt=Math.cos(st);return Z[0]=Bt,Z[1]=Et,Z[2]=0,Z[3]=-Et,Z[4]=Bt,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function q(Z,st){return Z[0]=st[0],Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=st[1],Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function Y(Z,st){return Z[0]=st[0],Z[1]=st[1],Z[2]=0,Z[3]=st[2],Z[4]=st[3],Z[5]=0,Z[6]=st[4],Z[7]=st[5],Z[8]=1,Z}function X(Z,st){var Et=st[0],Bt=st[1],Pt=st[2],Ht=st[3],le=Et+Et,ye=Bt+Bt,Gt=Pt+Pt,zt=Et*le,ue=Bt*le,we=Bt*ye,de=Pt*le,Mt=Pt*ye,ee=Pt*Gt,ce=Ht*le,At=Ht*ye,Wt=Ht*Gt;return Z[0]=1-we-ee,Z[3]=ue-Wt,Z[6]=de+At,Z[1]=ue+Wt,Z[4]=1-zt-ee,Z[7]=Mt-ce,Z[2]=de-At,Z[5]=Mt+ce,Z[8]=1-zt-we,Z}function H(Z,st){var Et=st[0],Bt=st[1],Pt=st[2],Ht=st[3],le=st[4],ye=st[5],Gt=st[6],zt=st[7],ue=st[8],we=st[9],de=st[10],Mt=st[11],ee=st[12],ce=st[13],At=st[14],Wt=st[15],fe=Et*ye-Bt*le,Ge=Et*Gt-Pt*le,Be=Et*zt-Ht*le,_r=Bt*Gt-Pt*ye,Ft=Bt*zt-Ht*ye,hr=Pt*zt-Ht*Gt,rn=ue*ce-we*ee,pn=ue*At-de*ee,Sn=ue*Wt-Mt*ee,Bn=we*At-de*ce,Kn=we*Wt-Mt*ce,Nn=de*Wt-Mt*At,ra=fe*Nn-Ge*Kn+Be*Bn+_r*Sn-Ft*pn+hr*rn;return ra?(ra=1/ra,Z[0]=(ye*Nn-Gt*Kn+zt*Bn)*ra,Z[1]=(Gt*Sn-le*Nn-zt*pn)*ra,Z[2]=(le*Kn-ye*Sn+zt*rn)*ra,Z[3]=(Pt*Kn-Bt*Nn-Ht*Bn)*ra,Z[4]=(Et*Nn-Pt*Sn+Ht*pn)*ra,Z[5]=(Bt*Sn-Et*Kn-Ht*rn)*ra,Z[6]=(ce*hr-At*Ft+Wt*_r)*ra,Z[7]=(At*Be-ee*hr-Wt*Ge)*ra,Z[8]=(ee*Ft-ce*Be+Wt*fe)*ra,Z):null}function J(Z,st,Et){return Z[0]=2/st,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=-2/Et,Z[5]=0,Z[6]=-1,Z[7]=1,Z[8]=1,Z}function nt(Z){return"mat3("+Z[0]+", "+Z[1]+", "+Z[2]+", "+Z[3]+", "+Z[4]+", "+Z[5]+", "+Z[6]+", "+Z[7]+", "+Z[8]+")"}function tt(Z){return Math.hypot(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8])}function at(Z,st,Et){return Z[0]=st[0]+Et[0],Z[1]=st[1]+Et[1],Z[2]=st[2]+Et[2],Z[3]=st[3]+Et[3],Z[4]=st[4]+Et[4],Z[5]=st[5]+Et[5],Z[6]=st[6]+Et[6],Z[7]=st[7]+Et[7],Z[8]=st[8]+Et[8],Z}function ct(Z,st,Et){return Z[0]=st[0]-Et[0],Z[1]=st[1]-Et[1],Z[2]=st[2]-Et[2],Z[3]=st[3]-Et[3],Z[4]=st[4]-Et[4],Z[5]=st[5]-Et[5],Z[6]=st[6]-Et[6],Z[7]=st[7]-Et[7],Z[8]=st[8]-Et[8],Z}function ht(Z,st,Et){return Z[0]=st[0]*Et,Z[1]=st[1]*Et,Z[2]=st[2]*Et,Z[3]=st[3]*Et,Z[4]=st[4]*Et,Z[5]=st[5]*Et,Z[6]=st[6]*Et,Z[7]=st[7]*Et,Z[8]=st[8]*Et,Z}function Lt(Z,st,Et,Bt){return Z[0]=st[0]+Et[0]*Bt,Z[1]=st[1]+Et[1]*Bt,Z[2]=st[2]+Et[2]*Bt,Z[3]=st[3]+Et[3]*Bt,Z[4]=st[4]+Et[4]*Bt,Z[5]=st[5]+Et[5]*Bt,Z[6]=st[6]+Et[6]*Bt,Z[7]=st[7]+Et[7]*Bt,Z[8]=st[8]+Et[8]*Bt,Z}function St(Z,st){return Z[0]===st[0]&&Z[1]===st[1]&&Z[2]===st[2]&&Z[3]===st[3]&&Z[4]===st[4]&&Z[5]===st[5]&&Z[6]===st[6]&&Z[7]===st[7]&&Z[8]===st[8]}function Zt(Z,st){var Et=Z[0],Bt=Z[1],Pt=Z[2],Ht=Z[3],le=Z[4],ye=Z[5],Gt=Z[6],zt=Z[7],ue=Z[8],we=st[0],de=st[1],Mt=st[2],ee=st[3],ce=st[4],At=st[5],Wt=st[6],fe=st[7],Ge=st[8];return Math.abs(Et-we)<=P.EPSILON*Math.max(1,Math.abs(Et),Math.abs(we))&&Math.abs(Bt-de)<=P.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(de))&&Math.abs(Pt-Mt)<=P.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(Mt))&&Math.abs(Ht-ee)<=P.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(ee))&&Math.abs(le-ce)<=P.EPSILON*Math.max(1,Math.abs(le),Math.abs(ce))&&Math.abs(ye-At)<=P.EPSILON*Math.max(1,Math.abs(ye),Math.abs(At))&&Math.abs(Gt-Wt)<=P.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Wt))&&Math.abs(zt-fe)<=P.EPSILON*Math.max(1,Math.abs(zt),Math.abs(fe))&&Math.abs(ue-Ge)<=P.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ge))}var Ut=_,Ot=ct},31437:function(Le,F,B){"use strict";B.r(F),B.d(F,{add:function(){return E},angle:function(){return Z},ceil:function(){return g},clone:function(){return R},copy:function(){return k},create:function(){return W},cross:function(){return at},dist:function(){return zt},distance:function(){return V},div:function(){return Gt},divide:function(){return m},dot:function(){return tt},equals:function(){return Pt},exactEquals:function(){return Bt},floor:function(){return M},forEach:function(){return de},fromValues:function(){return L},inverse:function(){return J},len:function(){return Ht},length:function(){return Y},lerp:function(){return ct},max:function(){return S},min:function(){return _},mul:function(){return ye},multiply:function(){return p},negate:function(){return H},normalize:function(){return nt},random:function(){return ht},rotate:function(){return Ot},round:function(){return O},scale:function(){return y},scaleAndAdd:function(){return d},set:function(){return N},sqrDist:function(){return ue},sqrLen:function(){return we},squaredDistance:function(){return q},squaredLength:function(){return X},str:function(){return Et},sub:function(){return le},subtract:function(){return b},transformMat2:function(){return Lt},transformMat2d:function(){return St},transformMat3:function(){return Zt},transformMat4:function(){return Ut},zero:function(){return st}});var P=B(49685);function W(){var Mt=new P.ARRAY_TYPE(2);return P.ARRAY_TYPE!=Float32Array&&(Mt[0]=0,Mt[1]=0),Mt}function R(Mt){var ee=new P.ARRAY_TYPE(2);return ee[0]=Mt[0],ee[1]=Mt[1],ee}function L(Mt,ee){var ce=new P.ARRAY_TYPE(2);return ce[0]=Mt,ce[1]=ee,ce}function k(Mt,ee){return Mt[0]=ee[0],Mt[1]=ee[1],Mt}function N(Mt,ee,ce){return Mt[0]=ee,Mt[1]=ce,Mt}function E(Mt,ee,ce){return Mt[0]=ee[0]+ce[0],Mt[1]=ee[1]+ce[1],Mt}function b(Mt,ee,ce){return Mt[0]=ee[0]-ce[0],Mt[1]=ee[1]-ce[1],Mt}function p(Mt,ee,ce){return Mt[0]=ee[0]*ce[0],Mt[1]=ee[1]*ce[1],Mt}function m(Mt,ee,ce){return Mt[0]=ee[0]/ce[0],Mt[1]=ee[1]/ce[1],Mt}function g(Mt,ee){return Mt[0]=Math.ceil(ee[0]),Mt[1]=Math.ceil(ee[1]),Mt}function M(Mt,ee){return Mt[0]=Math.floor(ee[0]),Mt[1]=Math.floor(ee[1]),Mt}function _(Mt,ee,ce){return Mt[0]=Math.min(ee[0],ce[0]),Mt[1]=Math.min(ee[1],ce[1]),Mt}function S(Mt,ee,ce){return Mt[0]=Math.max(ee[0],ce[0]),Mt[1]=Math.max(ee[1],ce[1]),Mt}function O(Mt,ee){return Mt[0]=Math.round(ee[0]),Mt[1]=Math.round(ee[1]),Mt}function y(Mt,ee,ce){return Mt[0]=ee[0]*ce,Mt[1]=ee[1]*ce,Mt}function d(Mt,ee,ce,At){return Mt[0]=ee[0]+ce[0]*At,Mt[1]=ee[1]+ce[1]*At,Mt}function V(Mt,ee){var ce=ee[0]-Mt[0],At=ee[1]-Mt[1];return Math.hypot(ce,At)}function q(Mt,ee){var ce=ee[0]-Mt[0],At=ee[1]-Mt[1];return ce*ce+At*At}function Y(Mt){var ee=Mt[0],ce=Mt[1];return Math.hypot(ee,ce)}function X(Mt){var ee=Mt[0],ce=Mt[1];return ee*ee+ce*ce}function H(Mt,ee){return Mt[0]=-ee[0],Mt[1]=-ee[1],Mt}function J(Mt,ee){return Mt[0]=1/ee[0],Mt[1]=1/ee[1],Mt}function nt(Mt,ee){var ce=ee[0],At=ee[1],Wt=ce*ce+At*At;return Wt>0&&(Wt=1/Math.sqrt(Wt)),Mt[0]=ee[0]*Wt,Mt[1]=ee[1]*Wt,Mt}function tt(Mt,ee){return Mt[0]*ee[0]+Mt[1]*ee[1]}function at(Mt,ee,ce){var At=ee[0]*ce[1]-ee[1]*ce[0];return Mt[0]=Mt[1]=0,Mt[2]=At,Mt}function ct(Mt,ee,ce,At){var Wt=ee[0],fe=ee[1];return Mt[0]=Wt+At*(ce[0]-Wt),Mt[1]=fe+At*(ce[1]-fe),Mt}function ht(Mt,ee){ee=ee||1;var ce=P.RANDOM()*2*Math.PI;return Mt[0]=Math.cos(ce)*ee,Mt[1]=Math.sin(ce)*ee,Mt}function Lt(Mt,ee,ce){var At=ee[0],Wt=ee[1];return Mt[0]=ce[0]*At+ce[2]*Wt,Mt[1]=ce[1]*At+ce[3]*Wt,Mt}function St(Mt,ee,ce){var At=ee[0],Wt=ee[1];return Mt[0]=ce[0]*At+ce[2]*Wt+ce[4],Mt[1]=ce[1]*At+ce[3]*Wt+ce[5],Mt}function Zt(Mt,ee,ce){var At=ee[0],Wt=ee[1];return Mt[0]=ce[0]*At+ce[3]*Wt+ce[6],Mt[1]=ce[1]*At+ce[4]*Wt+ce[7],Mt}function Ut(Mt,ee,ce){var At=ee[0],Wt=ee[1];return Mt[0]=ce[0]*At+ce[4]*Wt+ce[12],Mt[1]=ce[1]*At+ce[5]*Wt+ce[13],Mt}function Ot(Mt,ee,ce,At){var Wt=ee[0]-ce[0],fe=ee[1]-ce[1],Ge=Math.sin(At),Be=Math.cos(At);return Mt[0]=Wt*Be-fe*Ge+ce[0],Mt[1]=Wt*Ge+fe*Be+ce[1],Mt}function Z(Mt,ee){var ce=Mt[0],At=Mt[1],Wt=ee[0],fe=ee[1],Ge=Math.sqrt(ce*ce+At*At)*Math.sqrt(Wt*Wt+fe*fe),Be=Ge&&(ce*Wt+At*fe)/Ge;return Math.acos(Math.min(Math.max(Be,-1),1))}function st(Mt){return Mt[0]=0,Mt[1]=0,Mt}function Et(Mt){return"vec2("+Mt[0]+", "+Mt[1]+")"}function Bt(Mt,ee){return Mt[0]===ee[0]&&Mt[1]===ee[1]}function Pt(Mt,ee){var ce=Mt[0],At=Mt[1],Wt=ee[0],fe=ee[1];return Math.abs(ce-Wt)<=P.EPSILON*Math.max(1,Math.abs(ce),Math.abs(Wt))&&Math.abs(At-fe)<=P.EPSILON*Math.max(1,Math.abs(At),Math.abs(fe))}var Ht=Y,le=b,ye=p,Gt=m,zt=V,ue=q,we=X,de=function(){var Mt=W();return function(ee,ce,At,Wt,fe,Ge){var Be,_r;for(ce||(ce=2),At||(At=0),Wt?_r=Math.min(Wt*ce+At,ee.length):_r=ee.length,Be=At;Be<_r;Be+=ce)Mt[0]=ee[Be],Mt[1]=ee[Be+1],fe(Mt,Mt,Ge),ee[Be]=Mt[0],ee[Be+1]=Mt[1];return ee}}()},77160:function(Le,F,B){"use strict";B.r(F),B.d(F,{add:function(){return b},angle:function(){return Bt},bezier:function(){return Lt},ceil:function(){return M},clone:function(){return R},copy:function(){return N},create:function(){return W},cross:function(){return at},dist:function(){return we},distance:function(){return q},div:function(){return ue},divide:function(){return g},dot:function(){return tt},equals:function(){return ye},exactEquals:function(){return le},floor:function(){return _},forEach:function(){return ce},fromValues:function(){return k},hermite:function(){return ht},inverse:function(){return J},len:function(){return Mt},length:function(){return L},lerp:function(){return ct},max:function(){return O},min:function(){return S},mul:function(){return zt},multiply:function(){return m},negate:function(){return H},normalize:function(){return nt},random:function(){return St},rotateX:function(){return Z},rotateY:function(){return st},rotateZ:function(){return Et},round:function(){return y},scale:function(){return d},scaleAndAdd:function(){return V},set:function(){return E},sqrDist:function(){return de},sqrLen:function(){return ee},squaredDistance:function(){return Y},squaredLength:function(){return X},str:function(){return Ht},sub:function(){return Gt},subtract:function(){return p},transformMat3:function(){return Ut},transformMat4:function(){return Zt},transformQuat:function(){return Ot},zero:function(){return Pt}});var P=B(49685);function W(){var At=new P.ARRAY_TYPE(3);return P.ARRAY_TYPE!=Float32Array&&(At[0]=0,At[1]=0,At[2]=0),At}function R(At){var Wt=new P.ARRAY_TYPE(3);return Wt[0]=At[0],Wt[1]=At[1],Wt[2]=At[2],Wt}function L(At){var Wt=At[0],fe=At[1],Ge=At[2];return Math.hypot(Wt,fe,Ge)}function k(At,Wt,fe){var Ge=new P.ARRAY_TYPE(3);return Ge[0]=At,Ge[1]=Wt,Ge[2]=fe,Ge}function N(At,Wt){return At[0]=Wt[0],At[1]=Wt[1],At[2]=Wt[2],At}function E(At,Wt,fe,Ge){return At[0]=Wt,At[1]=fe,At[2]=Ge,At}function b(At,Wt,fe){return At[0]=Wt[0]+fe[0],At[1]=Wt[1]+fe[1],At[2]=Wt[2]+fe[2],At}function p(At,Wt,fe){return At[0]=Wt[0]-fe[0],At[1]=Wt[1]-fe[1],At[2]=Wt[2]-fe[2],At}function m(At,Wt,fe){return At[0]=Wt[0]*fe[0],At[1]=Wt[1]*fe[1],At[2]=Wt[2]*fe[2],At}function g(At,Wt,fe){return At[0]=Wt[0]/fe[0],At[1]=Wt[1]/fe[1],At[2]=Wt[2]/fe[2],At}function M(At,Wt){return At[0]=Math.ceil(Wt[0]),At[1]=Math.ceil(Wt[1]),At[2]=Math.ceil(Wt[2]),At}function _(At,Wt){return At[0]=Math.floor(Wt[0]),At[1]=Math.floor(Wt[1]),At[2]=Math.floor(Wt[2]),At}function S(At,Wt,fe){return At[0]=Math.min(Wt[0],fe[0]),At[1]=Math.min(Wt[1],fe[1]),At[2]=Math.min(Wt[2],fe[2]),At}function O(At,Wt,fe){return At[0]=Math.max(Wt[0],fe[0]),At[1]=Math.max(Wt[1],fe[1]),At[2]=Math.max(Wt[2],fe[2]),At}function y(At,Wt){return At[0]=Math.round(Wt[0]),At[1]=Math.round(Wt[1]),At[2]=Math.round(Wt[2]),At}function d(At,Wt,fe){return At[0]=Wt[0]*fe,At[1]=Wt[1]*fe,At[2]=Wt[2]*fe,At}function V(At,Wt,fe,Ge){return At[0]=Wt[0]+fe[0]*Ge,At[1]=Wt[1]+fe[1]*Ge,At[2]=Wt[2]+fe[2]*Ge,At}function q(At,Wt){var fe=Wt[0]-At[0],Ge=Wt[1]-At[1],Be=Wt[2]-At[2];return Math.hypot(fe,Ge,Be)}function Y(At,Wt){var fe=Wt[0]-At[0],Ge=Wt[1]-At[1],Be=Wt[2]-At[2];return fe*fe+Ge*Ge+Be*Be}function X(At){var Wt=At[0],fe=At[1],Ge=At[2];return Wt*Wt+fe*fe+Ge*Ge}function H(At,Wt){return At[0]=-Wt[0],At[1]=-Wt[1],At[2]=-Wt[2],At}function J(At,Wt){return At[0]=1/Wt[0],At[1]=1/Wt[1],At[2]=1/Wt[2],At}function nt(At,Wt){var fe=Wt[0],Ge=Wt[1],Be=Wt[2],_r=fe*fe+Ge*Ge+Be*Be;return _r>0&&(_r=1/Math.sqrt(_r)),At[0]=Wt[0]*_r,At[1]=Wt[1]*_r,At[2]=Wt[2]*_r,At}function tt(At,Wt){return At[0]*Wt[0]+At[1]*Wt[1]+At[2]*Wt[2]}function at(At,Wt,fe){var Ge=Wt[0],Be=Wt[1],_r=Wt[2],Ft=fe[0],hr=fe[1],rn=fe[2];return At[0]=Be*rn-_r*hr,At[1]=_r*Ft-Ge*rn,At[2]=Ge*hr-Be*Ft,At}function ct(At,Wt,fe,Ge){var Be=Wt[0],_r=Wt[1],Ft=Wt[2];return At[0]=Be+Ge*(fe[0]-Be),At[1]=_r+Ge*(fe[1]-_r),At[2]=Ft+Ge*(fe[2]-Ft),At}function ht(At,Wt,fe,Ge,Be,_r){var Ft=_r*_r,hr=Ft*(2*_r-3)+1,rn=Ft*(_r-2)+_r,pn=Ft*(_r-1),Sn=Ft*(3-2*_r);return At[0]=Wt[0]*hr+fe[0]*rn+Ge[0]*pn+Be[0]*Sn,At[1]=Wt[1]*hr+fe[1]*rn+Ge[1]*pn+Be[1]*Sn,At[2]=Wt[2]*hr+fe[2]*rn+Ge[2]*pn+Be[2]*Sn,At}function Lt(At,Wt,fe,Ge,Be,_r){var Ft=1-_r,hr=Ft*Ft,rn=_r*_r,pn=hr*Ft,Sn=3*_r*hr,Bn=3*rn*Ft,Kn=rn*_r;return At[0]=Wt[0]*pn+fe[0]*Sn+Ge[0]*Bn+Be[0]*Kn,At[1]=Wt[1]*pn+fe[1]*Sn+Ge[1]*Bn+Be[1]*Kn,At[2]=Wt[2]*pn+fe[2]*Sn+Ge[2]*Bn+Be[2]*Kn,At}function St(At,Wt){Wt=Wt||1;var fe=P.RANDOM()*2*Math.PI,Ge=P.RANDOM()*2-1,Be=Math.sqrt(1-Ge*Ge)*Wt;return At[0]=Math.cos(fe)*Be,At[1]=Math.sin(fe)*Be,At[2]=Ge*Wt,At}function Zt(At,Wt,fe){var Ge=Wt[0],Be=Wt[1],_r=Wt[2],Ft=fe[3]*Ge+fe[7]*Be+fe[11]*_r+fe[15];return Ft=Ft||1,At[0]=(fe[0]*Ge+fe[4]*Be+fe[8]*_r+fe[12])/Ft,At[1]=(fe[1]*Ge+fe[5]*Be+fe[9]*_r+fe[13])/Ft,At[2]=(fe[2]*Ge+fe[6]*Be+fe[10]*_r+fe[14])/Ft,At}function Ut(At,Wt,fe){var Ge=Wt[0],Be=Wt[1],_r=Wt[2];return At[0]=Ge*fe[0]+Be*fe[3]+_r*fe[6],At[1]=Ge*fe[1]+Be*fe[4]+_r*fe[7],At[2]=Ge*fe[2]+Be*fe[5]+_r*fe[8],At}function Ot(At,Wt,fe){var Ge=fe[0],Be=fe[1],_r=fe[2],Ft=fe[3],hr=Wt[0],rn=Wt[1],pn=Wt[2],Sn=Be*pn-_r*rn,Bn=_r*hr-Ge*pn,Kn=Ge*rn-Be*hr,Nn=Be*Kn-_r*Bn,ra=_r*Sn-Ge*Kn,Ea=Ge*Bn-Be*Sn,na=Ft*2;return Sn*=na,Bn*=na,Kn*=na,Nn*=2,ra*=2,Ea*=2,At[0]=hr+Sn+Nn,At[1]=rn+Bn+ra,At[2]=pn+Kn+Ea,At}function Z(At,Wt,fe,Ge){var Be=[],_r=[];return Be[0]=Wt[0]-fe[0],Be[1]=Wt[1]-fe[1],Be[2]=Wt[2]-fe[2],_r[0]=Be[0],_r[1]=Be[1]*Math.cos(Ge)-Be[2]*Math.sin(Ge),_r[2]=Be[1]*Math.sin(Ge)+Be[2]*Math.cos(Ge),At[0]=_r[0]+fe[0],At[1]=_r[1]+fe[1],At[2]=_r[2]+fe[2],At}function st(At,Wt,fe,Ge){var Be=[],_r=[];return Be[0]=Wt[0]-fe[0],Be[1]=Wt[1]-fe[1],Be[2]=Wt[2]-fe[2],_r[0]=Be[2]*Math.sin(Ge)+Be[0]*Math.cos(Ge),_r[1]=Be[1],_r[2]=Be[2]*Math.cos(Ge)-Be[0]*Math.sin(Ge),At[0]=_r[0]+fe[0],At[1]=_r[1]+fe[1],At[2]=_r[2]+fe[2],At}function Et(At,Wt,fe,Ge){var Be=[],_r=[];return Be[0]=Wt[0]-fe[0],Be[1]=Wt[1]-fe[1],Be[2]=Wt[2]-fe[2],_r[0]=Be[0]*Math.cos(Ge)-Be[1]*Math.sin(Ge),_r[1]=Be[0]*Math.sin(Ge)+Be[1]*Math.cos(Ge),_r[2]=Be[2],At[0]=_r[0]+fe[0],At[1]=_r[1]+fe[1],At[2]=_r[2]+fe[2],At}function Bt(At,Wt){var fe=At[0],Ge=At[1],Be=At[2],_r=Wt[0],Ft=Wt[1],hr=Wt[2],rn=Math.sqrt(fe*fe+Ge*Ge+Be*Be),pn=Math.sqrt(_r*_r+Ft*Ft+hr*hr),Sn=rn*pn,Bn=Sn&&tt(At,Wt)/Sn;return Math.acos(Math.min(Math.max(Bn,-1),1))}function Pt(At){return At[0]=0,At[1]=0,At[2]=0,At}function Ht(At){return"vec3("+At[0]+", "+At[1]+", "+At[2]+")"}function le(At,Wt){return At[0]===Wt[0]&&At[1]===Wt[1]&&At[2]===Wt[2]}function ye(At,Wt){var fe=At[0],Ge=At[1],Be=At[2],_r=Wt[0],Ft=Wt[1],hr=Wt[2];return Math.abs(fe-_r)<=P.EPSILON*Math.max(1,Math.abs(fe),Math.abs(_r))&&Math.abs(Ge-Ft)<=P.EPSILON*Math.max(1,Math.abs(Ge),Math.abs(Ft))&&Math.abs(Be-hr)<=P.EPSILON*Math.max(1,Math.abs(Be),Math.abs(hr))}var Gt=p,zt=m,ue=g,we=q,de=Y,Mt=L,ee=X,ce=function(){var At=W();return function(Wt,fe,Ge,Be,_r,Ft){var hr,rn;for(fe||(fe=3),Ge||(Ge=0),Be?rn=Math.min(Be*fe+Ge,Wt.length):rn=Wt.length,hr=Ge;hr<rn;hr+=fe)At[0]=Wt[hr],At[1]=Wt[hr+1],At[2]=Wt[hr+2],_r(At,At,Ft),Wt[hr]=At[0],Wt[hr+1]=At[1],Wt[hr+2]=At[2];return Wt}}()},38186:function(Le){var F=[],B=[],P="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function W(L,k){if(k=k||{},L===void 0)throw new Error(P);var N=k.prepend===!0?"prepend":"append",E=k.container!==void 0?k.container:document.querySelector("head"),b=F.indexOf(E);b===-1&&(b=F.push(E)-1,B[b]={});var p;return B[b]!==void 0&&B[b][N]!==void 0?p=B[b][N]:(p=B[b][N]=R(),N==="prepend"?E.insertBefore(p,E.childNodes[0]):E.appendChild(p)),L.charCodeAt(0)===65279&&(L=L.substr(1,L.length)),p.styleSheet?p.styleSheet.cssText+=L:p.textContent+=L,p}function R(){var L=document.createElement("style");return L.setAttribute("type","text/css"),L}Le.exports=W,Le.exports.insertCss=W},62705:function(Le,F,B){var P=B(55639),W=P.Symbol;Le.exports=W},44239:function(Le,F,B){var P=B(62705),W=B(89607),R=B(2333),L="[object Null]",k="[object Undefined]",N=P?P.toStringTag:void 0;function E(b){return b==null?b===void 0?k:L:N&&N in Object(b)?W(b):R(b)}Le.exports=E},38749:function(Le,F,B){var P=B(44239),W=B(41780),R=B(37005),L="[object Arguments]",k="[object Array]",N="[object Boolean]",E="[object Date]",b="[object Error]",p="[object Function]",m="[object Map]",g="[object Number]",M="[object Object]",_="[object RegExp]",S="[object Set]",O="[object String]",y="[object WeakMap]",d="[object ArrayBuffer]",V="[object DataView]",q="[object Float32Array]",Y="[object Float64Array]",X="[object Int8Array]",H="[object Int16Array]",J="[object Int32Array]",nt="[object Uint8Array]",tt="[object Uint8ClampedArray]",at="[object Uint16Array]",ct="[object Uint32Array]",ht={};ht[q]=ht[Y]=ht[X]=ht[H]=ht[J]=ht[nt]=ht[tt]=ht[at]=ht[ct]=!0,ht[L]=ht[k]=ht[d]=ht[N]=ht[V]=ht[E]=ht[b]=ht[p]=ht[m]=ht[g]=ht[M]=ht[_]=ht[S]=ht[O]=ht[y]=!1;function Lt(St){return R(St)&&W(St.length)&&!!ht[P(St)]}Le.exports=Lt},7518:function(Le){function F(B){return function(P){return B(P)}}Le.exports=F},31957:function(Le,F,B){var P=typeof B.g=="object"&&B.g&&B.g.Object===Object&&B.g;Le.exports=P},85924:function(Le,F,B){var P=B(5569),W=P(Object.getPrototypeOf,Object);Le.exports=W},89607:function(Le,F,B){var P=B(62705),W=Object.prototype,R=W.hasOwnProperty,L=W.toString,k=P?P.toStringTag:void 0;function N(E){var b=R.call(E,k),p=E[k];try{E[k]=void 0;var m=!0}catch(M){}var g=L.call(E);return m&&(b?E[k]=p:delete E[k]),g}Le.exports=N},31167:function(Le,F,B){Le=B.nmd(Le);var P=B(31957),W=F&&!F.nodeType&&F,R=W&&!0&&Le&&!Le.nodeType&&Le,L=R&&R.exports===W,k=L&&P.process,N=function(){try{var E=R&&R.require&&R.require("util").types;return E||k&&k.binding&&k.binding("util")}catch(b){}}();Le.exports=N},2333:function(Le){var F=Object.prototype,B=F.toString;function P(W){return B.call(W)}Le.exports=P},5569:function(Le){function F(B,P){return function(W){return B(P(W))}}Le.exports=F},55639:function(Le,F,B){var P=B(31957),W=typeof self=="object"&&self&&self.Object===Object&&self,R=P||W||Function("return this")();Le.exports=R},1469:function(Le){var F=Array.isArray;Le.exports=F},41780:function(Le){var F=9007199254740991;function B(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=F}Le.exports=B},81763:function(Le,F,B){var P=B(44239),W=B(37005),R="[object Number]";function L(k){return typeof k=="number"||W(k)&&P(k)==R}Le.exports=L},37005:function(Le){function F(B){return B!=null&&typeof B=="object"}Le.exports=F},68630:function(Le,F,B){var P=B(44239),W=B(85924),R=B(37005),L="[object Object]",k=Function.prototype,N=Object.prototype,E=k.toString,b=N.hasOwnProperty,p=E.call(Object);function m(g){if(!R(g)||P(g)!=L)return!1;var M=W(g);if(M===null)return!0;var _=b.call(M,"constructor")&&M.constructor;return typeof _=="function"&&_ instanceof _&&E.call(_)==p}Le.exports=m},36719:function(Le,F,B){var P=B(38749),W=B(7518),R=B(31167),L=R&&R.isTypedArray,k=L?W(L):P;Le.exports=k},81550:function(Le){(function(F,B){Le.exports=B()})(this,function(){"use strict";var F=function(gt){return gt instanceof Uint8Array||gt instanceof Uint16Array||gt instanceof Uint32Array||gt instanceof Int8Array||gt instanceof Int16Array||gt instanceof Int32Array||gt instanceof Float32Array||gt instanceof Float64Array||gt instanceof Uint8ClampedArray},B=function(gt,Jt){for(var Ee=Object.keys(Jt),ar=0;ar<Ee.length;++ar)gt[Ee[ar]]=Jt[Ee[ar]];return gt},P=`
`;function W(gt){return typeof atob!="undefined"?atob(gt):"base64:"+gt}function R(gt){var Jt=new Error("(regl) "+gt);throw console.error(Jt),Jt}function L(gt,Jt){gt||R(Jt)}function k(gt){return gt?": "+gt:""}function N(gt,Jt,Ee){gt in Jt||R("unknown parameter ("+gt+")"+k(Ee)+". possible values: "+Object.keys(Jt).join())}function E(gt,Jt){F(gt)||R("invalid parameter type"+k(Jt)+". must be a typed array")}function b(gt,Jt){switch(Jt){case"number":return typeof gt=="number";case"object":return typeof gt=="object";case"string":return typeof gt=="string";case"boolean":return typeof gt=="boolean";case"function":return typeof gt=="function";case"undefined":return typeof gt=="undefined";case"symbol":return typeof gt=="symbol"}}function p(gt,Jt,Ee){b(gt,Jt)||R("invalid parameter type"+k(Ee)+". expected "+Jt+", got "+typeof gt)}function m(gt,Jt){gt>=0&&(gt|0)===gt||R("invalid parameter type, ("+gt+")"+k(Jt)+". must be a nonnegative integer")}function g(gt,Jt,Ee){Jt.indexOf(gt)<0&&R("invalid value"+k(Ee)+". must be one of: "+Jt)}var M=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function _(gt){Object.keys(gt).forEach(function(Jt){M.indexOf(Jt)<0&&R('invalid regl constructor argument "'+Jt+'". must be one of '+M)})}function S(gt,Jt){for(gt=gt+"";gt.length<Jt;)gt=" "+gt;return gt}function O(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(gt,Jt){this.number=gt,this.line=Jt,this.errors=[]}function d(gt,Jt,Ee){this.file=gt,this.line=Jt,this.message=Ee}function V(){var gt=new Error,Jt=(gt.stack||gt).toString(),Ee=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Jt);if(Ee)return Ee[1];var ar=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Jt);return ar?ar[1]:"unknown"}function q(){var gt=new Error,Jt=(gt.stack||gt).toString(),Ee=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Jt);if(Ee)return Ee[1];var ar=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Jt);return ar?ar[1]:"unknown"}function Y(gt,Jt){var Ee=gt.split(`
`),ar=1,Er=0,nr={unknown:new O,0:new O};nr.unknown.name=nr[0].name=Jt||V(),nr.unknown.lines.push(new y(0,""));for(var fr=0;fr<Ee.length;++fr){var Lr=Ee[fr],kr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Lr);if(kr)switch(kr[1]){case"line":var Fr=/(\d+)(\s+\d+)?/.exec(kr[2]);Fr&&(ar=Fr[1]|0,Fr[2]&&(Er=Fr[2]|0,Er in nr||(nr[Er]=new O)));break;case"define":var Rr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(kr[2]);Rr&&(nr[Er].name=Rr[1]?W(Rr[2]):Rr[2]);break}nr[Er].lines.push(new y(ar++,Lr))}return Object.keys(nr).forEach(function(Wr){var v=nr[Wr];v.lines.forEach(function(A){v.index[A.number]=A})}),nr}function X(gt){var Jt=[];return gt.split(`
`).forEach(function(Ee){if(!(Ee.length<5)){var ar=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ee);ar?Jt.push(new d(ar[1]|0,ar[2]|0,ar[3].trim())):Ee.length>0&&Jt.push(new d("unknown",0,Ee))}}),Jt}function H(gt,Jt){Jt.forEach(function(Ee){var ar=gt[Ee.file];if(ar){var Er=ar.index[Ee.line];if(Er){Er.errors.push(Ee),ar.hasErrors=!0;return}}gt.unknown.hasErrors=!0,gt.unknown.lines[0].errors.push(Ee)})}function J(gt,Jt,Ee,ar,Er){if(!gt.getShaderParameter(Jt,gt.COMPILE_STATUS)){var nr=gt.getShaderInfoLog(Jt),fr=ar===gt.FRAGMENT_SHADER?"fragment":"vertex";St(Ee,"string",fr+" shader source must be a string",Er);var Lr=Y(Ee,Er),kr=X(nr);H(Lr,kr),Object.keys(Lr).forEach(function(Fr){var Rr=Lr[Fr];if(!Rr.hasErrors)return;var Wr=[""],v=[""];function A(z,K){Wr.push(z),v.push(K||"")}A("file number "+Fr+": "+Rr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Rr.lines.forEach(function(z){if(z.errors.length>0){A(S(z.number,4)+"|  ","background-color:yellow; font-weight:bold"),A(z.line+P,"color:red; background-color:yellow; font-weight:bold");var K=0;z.errors.forEach(function(it){var ut=it.message,vt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ut);if(vt){var yt=vt[1];switch(ut=vt[2],yt){case"assign":yt="=";break}K=Math.max(z.line.indexOf(yt,K),0)}else K=0;A(S("| ",6)),A(S("^^^",K+3)+P,"font-weight:bold"),A(S("| ",6)),A(ut+P,"font-weight:bold")}),A(S("| ",6)+P)}else A(S(z.number,4)+"|  "),A(z.line+P,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=Wr.join("%c"),console.log.apply(console,v)):console.log(Wr.join(""))}),L.raise("Error compiling "+fr+" shader, "+Lr[0].name)}}function nt(gt,Jt,Ee,ar,Er){if(!gt.getProgramParameter(Jt,gt.LINK_STATUS)){var nr=gt.getProgramInfoLog(Jt),fr=Y(Ee,Er),Lr=Y(ar,Er),kr='Error linking program with vertex shader, "'+Lr[0].name+'", and fragment shader "'+fr[0].name+'"';typeof document!="undefined"?console.log("%c"+kr+P+"%c"+nr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(kr+P+nr),L.raise(kr)}}function tt(gt){gt._commandRef=V()}function at(gt,Jt,Ee,ar){tt(gt);function Er(kr){return kr?ar.id(kr):0}gt._fragId=Er(gt.static.frag),gt._vertId=Er(gt.static.vert);function nr(kr,Fr){Object.keys(Fr).forEach(function(Rr){kr[ar.id(Rr)]=!0})}var fr=gt._uniformSet={};nr(fr,Jt.static),nr(fr,Jt.dynamic);var Lr=gt._attributeSet={};nr(Lr,Ee.static),nr(Lr,Ee.dynamic),gt._hasCount="count"in gt.static||"count"in gt.dynamic||"elements"in gt.static||"elements"in gt.dynamic}function ct(gt,Jt){var Ee=q();R(gt+" in command "+(Jt||V())+(Ee==="unknown"?"":" called from "+Ee))}function ht(gt,Jt,Ee){gt||ct(Jt,Ee||V())}function Lt(gt,Jt,Ee,ar){gt in Jt||ct("unknown parameter ("+gt+")"+k(Ee)+". possible values: "+Object.keys(Jt).join(),ar||V())}function St(gt,Jt,Ee,ar){b(gt,Jt)||ct("invalid parameter type"+k(Ee)+". expected "+Jt+", got "+typeof gt,ar||V())}function Zt(gt){gt()}function Ut(gt,Jt,Ee){gt.texture?g(gt.texture._texture.internalformat,Jt,"unsupported texture format for attachment"):g(gt.renderbuffer._renderbuffer.format,Ee,"unsupported renderbuffer format for attachment")}var Ot=33071,Z=9728,st=9984,Et=9985,Bt=9986,Pt=9987,Ht=5120,le=5121,ye=5122,Gt=5123,zt=5124,ue=5125,we=5126,de=32819,Mt=32820,ee=33635,ce=34042,At=36193,Wt={};Wt[Ht]=Wt[le]=1,Wt[ye]=Wt[Gt]=Wt[At]=Wt[ee]=Wt[de]=Wt[Mt]=2,Wt[zt]=Wt[ue]=Wt[we]=Wt[ce]=4;function fe(gt,Jt){return gt===Mt||gt===de||gt===ee?2:gt===ce?4:Wt[gt]*Jt}function Ge(gt){return!(gt&gt-1)&&!!gt}function Be(gt,Jt,Ee){var ar,Er=Jt.width,nr=Jt.height,fr=Jt.channels;L(Er>0&&Er<=Ee.maxTextureSize&&nr>0&&nr<=Ee.maxTextureSize,"invalid texture shape"),(gt.wrapS!==Ot||gt.wrapT!==Ot)&&L(Ge(Er)&&Ge(nr),"incompatible wrap mode for texture, both width and height must be power of 2"),Jt.mipmask===1?Er!==1&&nr!==1&&L(gt.minFilter!==st&&gt.minFilter!==Bt&&gt.minFilter!==Et&&gt.minFilter!==Pt,"min filter requires mipmap"):(L(Ge(Er)&&Ge(nr),"texture must be a square power of 2 to support mipmapping"),L(Jt.mipmask===(Er<<1)-1,"missing or incomplete mipmap data")),Jt.type===we&&(Ee.extensions.indexOf("oes_texture_float_linear")<0&&L(gt.minFilter===Z&&gt.magFilter===Z,"filter not supported, must enable oes_texture_float_linear"),L(!gt.genMipmaps,"mipmap generation not supported with float textures"));var Lr=Jt.images;for(ar=0;ar<16;++ar)if(Lr[ar]){var kr=Er>>ar,Fr=nr>>ar;L(Jt.mipmask&1<<ar,"missing mipmap data");var Rr=Lr[ar];if(L(Rr.width===kr&&Rr.height===Fr,"invalid shape for mip images"),L(Rr.format===Jt.format&&Rr.internalformat===Jt.internalformat&&Rr.type===Jt.type,"incompatible type for mip image"),!Rr.compressed)if(Rr.data){var Wr=Math.ceil(fe(Rr.type,fr)*kr/Rr.unpackAlignment)*Rr.unpackAlignment;L(Rr.data.byteLength===Wr*Fr,"invalid data for image, buffer size is inconsistent with image format")}else Rr.element||Rr.copy}else gt.genMipmaps||L((Jt.mipmask&1<<ar)===0,"extra mipmap data");Jt.compressed&&L(!gt.genMipmaps,"mipmap generation for compressed images not supported")}function _r(gt,Jt,Ee,ar){var Er=gt.width,nr=gt.height,fr=gt.channels;L(Er>0&&Er<=ar.maxTextureSize&&nr>0&&nr<=ar.maxTextureSize,"invalid texture shape"),L(Er===nr,"cube map must be square"),L(Jt.wrapS===Ot&&Jt.wrapT===Ot,"wrap mode not supported by cube map");for(var Lr=0;Lr<Ee.length;++Lr){var kr=Ee[Lr];L(kr.width===Er&&kr.height===nr,"inconsistent cube map face shape"),Jt.genMipmaps&&(L(!kr.compressed,"can not generate mipmap for compressed textures"),L(kr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Fr=kr.images,Rr=0;Rr<16;++Rr){var Wr=Fr[Rr];if(Wr){var v=Er>>Rr,A=nr>>Rr;L(kr.mipmask&1<<Rr,"missing mipmap data"),L(Wr.width===v&&Wr.height===A,"invalid shape for mip images"),L(Wr.format===gt.format&&Wr.internalformat===gt.internalformat&&Wr.type===gt.type,"incompatible type for mip image"),Wr.compressed||(Wr.data?L(Wr.data.byteLength===v*A*Math.max(fe(Wr.type,fr),Wr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Wr.element||Wr.copy)}}}}var Ft=B(L,{optional:Zt,raise:R,commandRaise:ct,command:ht,parameter:N,commandParameter:Lt,constructor:_,type:p,commandType:St,isTypedArray:E,nni:m,oneOf:g,shaderError:J,linkError:nt,callSite:q,saveCommandRef:tt,saveDrawInfo:at,framebufferFormat:Ut,guessCommand:V,texture2D:Be,textureCube:_r}),hr=0,rn=0,pn=5,Sn=6;function Bn(gt,Jt){this.id=hr++,this.type=gt,this.data=Jt}function Kn(gt){return gt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Nn(gt){if(gt.length===0)return[];var Jt=gt.charAt(0),Ee=gt.charAt(gt.length-1);if(gt.length>1&&Jt===Ee&&(Jt==='"'||Jt==="'"))return['"'+Kn(gt.substr(1,gt.length-2))+'"'];var ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(gt);if(ar)return Nn(gt.substr(0,ar.index)).concat(Nn(ar[1])).concat(Nn(gt.substr(ar.index+ar[0].length)));var Er=gt.split(".");if(Er.length===1)return['"'+Kn(gt)+'"'];for(var nr=[],fr=0;fr<Er.length;++fr)nr=nr.concat(Nn(Er[fr]));return nr}function ra(gt){return"["+Nn(gt).join("][")+"]"}function Ea(gt,Jt){return new Bn(gt,ra(Jt+""))}function na(gt){return typeof gt=="function"&&!gt._reglType||gt instanceof Bn}function ir(gt,Jt){if(typeof gt=="function")return new Bn(rn,gt);if(typeof gt=="number"||typeof gt=="boolean")return new Bn(pn,gt);if(Array.isArray(gt))return new Bn(Sn,gt.map((Ee,ar)=>ir(Ee,Jt+"["+ar+"]")));if(gt instanceof Bn)return gt;Ft(!1,"invalid option type in uniform "+Jt)}var Tr={DynamicVariable:Bn,define:Ea,isDynamic:na,unbox:ir,accessor:ra},Jr={next:typeof requestAnimationFrame=="function"?function(gt){return requestAnimationFrame(gt)}:function(gt){return setTimeout(gt,16)},cancel:typeof cancelAnimationFrame=="function"?function(gt){return cancelAnimationFrame(gt)}:clearTimeout},vn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Tn(){var gt={"":0},Jt=[""];return{id:function(Ee){var ar=gt[Ee];return ar||(ar=gt[Ee]=Jt.length,Jt.push(Ee),ar)},str:function(Ee){return Jt[Ee]}}}function In(gt,Jt,Ee){var ar=document.createElement("canvas");B(ar.style,{border:0,margin:0,padding:0,top:0,left:0}),gt.appendChild(ar),gt===document.body&&(ar.style.position="absolute",B(gt.style,{margin:0,padding:0}));function Er(){var Lr=window.innerWidth,kr=window.innerHeight;if(gt!==document.body){var Fr=gt.getBoundingClientRect();Lr=Fr.right-Fr.left,kr=Fr.bottom-Fr.top}ar.width=Ee*Lr,ar.height=Ee*kr,B(ar.style,{width:Lr+"px",height:kr+"px"})}var nr;gt!==document.body&&typeof ResizeObserver=="function"?(nr=new ResizeObserver(function(){setTimeout(Er)}),nr.observe(gt)):window.addEventListener("resize",Er,!1);function fr(){nr?nr.disconnect():window.removeEventListener("resize",Er),gt.removeChild(ar)}return Er(),{canvas:ar,onDestroy:fr}}function kn(gt,Jt){function Ee(ar){try{return gt.getContext(ar,Jt)}catch(Er){return null}}return Ee("webgl")||Ee("experimental-webgl")||Ee("webgl-experimental")}function Zn(gt){return typeof gt.nodeName=="string"&&typeof gt.appendChild=="function"&&typeof gt.getBoundingClientRect=="function"}function Yn(gt){return typeof gt.drawArrays=="function"||typeof gt.drawElements=="function"}function Ra(gt){return typeof gt=="string"?gt.split():(Ft(Array.isArray(gt),"invalid extension array"),gt)}function gn(gt){return typeof gt=="string"?(Ft(typeof document!="undefined","not supported outside of DOM"),document.querySelector(gt)):gt}function zn(gt){var Jt=gt||{},Ee,ar,Er,nr,fr={},Lr=[],kr=[],Fr=typeof window=="undefined"?1:window.devicePixelRatio,Rr=!1,Wr=function(z){z&&Ft.raise(z)},v=function(){};if(typeof Jt=="string"?(Ft(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ee=document.querySelector(Jt),Ft(Ee,"invalid query string for element")):typeof Jt=="object"?Zn(Jt)?Ee=Jt:Yn(Jt)?(nr=Jt,Er=nr.canvas):(Ft.constructor(Jt),"gl"in Jt?nr=Jt.gl:"canvas"in Jt?Er=gn(Jt.canvas):"container"in Jt&&(ar=gn(Jt.container)),"attributes"in Jt&&(fr=Jt.attributes,Ft.type(fr,"object","invalid context attributes")),"extensions"in Jt&&(Lr=Ra(Jt.extensions)),"optionalExtensions"in Jt&&(kr=Ra(Jt.optionalExtensions)),"onDone"in Jt&&(Ft.type(Jt.onDone,"function","invalid or missing onDone callback"),Wr=Jt.onDone),"profile"in Jt&&(Rr=!!Jt.profile),"pixelRatio"in Jt&&(Fr=+Jt.pixelRatio,Ft(Fr>0,"invalid pixel ratio"))):Ft.raise("invalid arguments to regl"),Ee&&(Ee.nodeName.toLowerCase()==="canvas"?Er=Ee:ar=Ee),!nr){if(!Er){Ft(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var A=In(ar||document.body,Wr,Fr);if(!A)return null;Er=A.canvas,v=A.onDestroy}fr.premultipliedAlpha===void 0&&(fr.premultipliedAlpha=!0),nr=kn(Er,fr)}return nr?{gl:nr,canvas:Er,container:ar,extensions:Lr,optionalExtensions:kr,pixelRatio:Fr,profile:Rr,onDone:Wr,onDestroy:v}:(v(),Wr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Un(gt,Jt){var Ee={};function ar(fr){Ft.type(fr,"string","extension name must be string");var Lr=fr.toLowerCase(),kr;try{kr=Ee[Lr]=gt.getExtension(Lr)}catch(Fr){}return!!kr}for(var Er=0;Er<Jt.extensions.length;++Er){var nr=Jt.extensions[Er];if(!ar(nr))return Jt.onDestroy(),Jt.onDone('"'+nr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Jt.optionalExtensions.forEach(ar),{extensions:Ee,restore:function(){Object.keys(Ee).forEach(function(fr){if(Ee[fr]&&!ar(fr))throw new Error("(regl): error restoring extension "+fr)})}}}function _n(gt,Jt){for(var Ee=Array(gt),ar=0;ar<gt;++ar)Ee[ar]=Jt(ar);return Ee}var aa=5120,$=5121,Re=5122,be=5123,Ke=5124,Ze=5125,Cr=5126;function Mr(gt){for(var Jt=16;Jt<=1<<28;Jt*=16)if(gt<=Jt)return Jt;return 0}function Vr(gt){var Jt,Ee;return Jt=(gt>65535)<<4,gt>>>=Jt,Ee=(gt>255)<<3,gt>>>=Ee,Jt|=Ee,Ee=(gt>15)<<2,gt>>>=Ee,Jt|=Ee,Ee=(gt>3)<<1,gt>>>=Ee,Jt|=Ee,Jt|gt>>1}function tn(){var gt=_n(8,function(){return[]});function Jt(nr){var fr=Mr(nr),Lr=gt[Vr(fr)>>2];return Lr.length>0?Lr.pop():new ArrayBuffer(fr)}function Ee(nr){gt[Vr(nr.byteLength)>>2].push(nr)}function ar(nr,fr){var Lr=null;switch(nr){case aa:Lr=new Int8Array(Jt(fr),0,fr);break;case $:Lr=new Uint8Array(Jt(fr),0,fr);break;case Re:Lr=new Int16Array(Jt(2*fr),0,fr);break;case be:Lr=new Uint16Array(Jt(2*fr),0,fr);break;case Ke:Lr=new Int32Array(Jt(4*fr),0,fr);break;case Ze:Lr=new Uint32Array(Jt(4*fr),0,fr);break;case Cr:Lr=new Float32Array(Jt(4*fr),0,fr);break;default:return null}return Lr.length!==fr?Lr.subarray(0,fr):Lr}function Er(nr){Ee(nr.buffer)}return{alloc:Jt,free:Ee,allocType:ar,freeType:Er}}var jr=tn();jr.zero=tn();var dt=3408,pt=3410,U=3411,I=3412,T=3413,Q=3414,bt=3415,kt=33901,It=33902,Kt=3379,Pe=3386,_e=34921,Qe=36347,Ir=36348,sr=35661,Hr=35660,xn=34930,ze=36349,ur=34076,Sr=34024,Nr=7936,$t=7937,Ct=7938,te=35724,ge=34047,ie=36063,Te=34852,Je=3553,tr=34067,Gr=34069,cn=33984,qr=6408,Fn=5126,Mn=5121,ia=36160,Sa=36053,Ca=36064,ca=16384,ho=function(gt,Jt){var Ee=1;Jt.ext_texture_filter_anisotropic&&(Ee=gt.getParameter(ge));var ar=1,Er=1;Jt.webgl_draw_buffers&&(ar=gt.getParameter(Te),Er=gt.getParameter(ie));var nr=!!Jt.oes_texture_float;if(nr){var fr=gt.createTexture();gt.bindTexture(Je,fr),gt.texImage2D(Je,0,qr,1,1,0,qr,Fn,null);var Lr=gt.createFramebuffer();if(gt.bindFramebuffer(ia,Lr),gt.framebufferTexture2D(ia,Ca,Je,fr,0),gt.bindTexture(Je,null),gt.checkFramebufferStatus(ia)!==Sa)nr=!1;else{gt.viewport(0,0,1,1),gt.clearColor(1,0,0,1),gt.clear(ca);var kr=jr.allocType(Fn,4);gt.readPixels(0,0,1,1,qr,Fn,kr),gt.getError()?nr=!1:(gt.deleteFramebuffer(Lr),gt.deleteTexture(fr),nr=kr[0]===1),jr.freeType(kr)}}var Fr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Rr=!0;if(!Fr){var Wr=gt.createTexture(),v=jr.allocType(Mn,36);gt.activeTexture(cn),gt.bindTexture(tr,Wr),gt.texImage2D(Gr,0,qr,3,3,0,qr,Mn,v),jr.freeType(v),gt.bindTexture(tr,null),gt.deleteTexture(Wr),Rr=!gt.getError()}return{colorBits:[gt.getParameter(pt),gt.getParameter(U),gt.getParameter(I),gt.getParameter(T)],depthBits:gt.getParameter(Q),stencilBits:gt.getParameter(bt),subpixelBits:gt.getParameter(dt),extensions:Object.keys(Jt).filter(function(A){return!!Jt[A]}),maxAnisotropic:Ee,maxDrawbuffers:ar,maxColorAttachments:Er,pointSizeDims:gt.getParameter(kt),lineWidthDims:gt.getParameter(It),maxViewportDims:gt.getParameter(Pe),maxCombinedTextureUnits:gt.getParameter(sr),maxCubeMapSize:gt.getParameter(ur),maxRenderbufferSize:gt.getParameter(Sr),maxTextureUnits:gt.getParameter(xn),maxTextureSize:gt.getParameter(Kt),maxAttributes:gt.getParameter(_e),maxVertexUniforms:gt.getParameter(Qe),maxVertexTextureUnits:gt.getParameter(Hr),maxVaryingVectors:gt.getParameter(Ir),maxFragmentUniforms:gt.getParameter(ze),glsl:gt.getParameter(te),renderer:gt.getParameter($t),vendor:gt.getParameter(Nr),version:gt.getParameter(Ct),readFloat:nr,npotTextureCube:Rr}};function qa(gt){return!!gt&&typeof gt=="object"&&Array.isArray(gt.shape)&&Array.isArray(gt.stride)&&typeof gt.offset=="number"&&gt.shape.length===gt.stride.length&&(Array.isArray(gt.data)||F(gt.data))}var Ha=function(gt){return Object.keys(gt).map(function(Jt){return gt[Jt]})},Ni={shape:zo,flatten:ro};function qo(gt,Jt,Ee){for(var ar=0;ar<Jt;++ar)Ee[ar]=gt[ar]}function Pi(gt,Jt,Ee,ar){for(var Er=0,nr=0;nr<Jt;++nr)for(var fr=gt[nr],Lr=0;Lr<Ee;++Lr)ar[Er++]=fr[Lr]}function zi(gt,Jt,Ee,ar,Er,nr){for(var fr=nr,Lr=0;Lr<Jt;++Lr)for(var kr=gt[Lr],Fr=0;Fr<Ee;++Fr)for(var Rr=kr[Fr],Wr=0;Wr<ar;++Wr)Er[fr++]=Rr[Wr]}function ua(gt,Jt,Ee,ar,Er){for(var nr=1,fr=Ee+1;fr<Jt.length;++fr)nr*=Jt[fr];var Lr=Jt[Ee];if(Jt.length-Ee===4){var kr=Jt[Ee+1],Fr=Jt[Ee+2],Rr=Jt[Ee+3];for(fr=0;fr<Lr;++fr)zi(gt[fr],kr,Fr,Rr,ar,Er),Er+=nr}else for(fr=0;fr<Lr;++fr)ua(gt[fr],Jt,Ee+1,ar,Er),Er+=nr}function ro(gt,Jt,Ee,ar){var Er=1;if(Jt.length)for(var nr=0;nr<Jt.length;++nr)Er*=Jt[nr];else Er=0;var fr=ar||jr.allocType(Ee,Er);switch(Jt.length){case 0:break;case 1:qo(gt,Jt[0],fr);break;case 2:Pi(gt,Jt[0],Jt[1],fr);break;case 3:zi(gt,Jt[0],Jt[1],Jt[2],fr,0);break;default:ua(gt,Jt,0,fr,0)}return fr}function zo(gt){for(var Jt=[],Ee=gt;Ee.length;Ee=Ee[0])Jt.push(Ee.length);return Jt}var Da={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Co=5120,To=5122,Io=5124,bi=5121,Ui=5123,Eo=5125,os=5126,ai=5126,xi={int8:Co,int16:To,int32:Io,uint8:bi,uint16:Ui,uint32:Eo,float:os,float32:ai},mn=35048,Oo=35040,wo={dynamic:mn,stream:Oo,static:35044},no=Ni.flatten,Lo=Ni.shape,Uo=35044,ss=35040,wn=5121,Ja=5126,Ki=[];Ki[5120]=1,Ki[5122]=2,Ki[5124]=4,Ki[5121]=1,Ki[5123]=2,Ki[5125]=4,Ki[5126]=4;function Ka(gt){return Da[Object.prototype.toString.call(gt)]|0}function _o(gt,Jt){for(var Ee=0;Ee<Jt.length;++Ee)gt[Ee]=Jt[Ee]}function Jo(gt,Jt,Ee,ar,Er,nr,fr){for(var Lr=0,kr=0;kr<Ee;++kr)for(var Fr=0;Fr<ar;++Fr)gt[Lr++]=Jt[Er*kr+nr*Fr+fr]}function ki(gt,Jt,Ee,ar){var Er=0,nr={};function fr(K){this.id=Er++,this.buffer=gt.createBuffer(),this.type=K,this.usage=Uo,this.byteLength=0,this.dimension=1,this.dtype=wn,this.persistentData=null,Ee.profile&&(this.stats={size:0})}fr.prototype.bind=function(){gt.bindBuffer(this.type,this.buffer)},fr.prototype.destroy=function(){v(this)};var Lr=[];function kr(K,it){var ut=Lr.pop();return ut||(ut=new fr(K)),ut.bind(),Wr(ut,it,ss,0,1,!1),ut}function Fr(K){Lr.push(K)}function Rr(K,it,ut){K.byteLength=it.byteLength,gt.bufferData(K.type,it,ut)}function Wr(K,it,ut,vt,yt,_t){var Rt;if(K.usage=ut,Array.isArray(it)){if(K.dtype=vt||Ja,it.length>0){var Qt;if(Array.isArray(it[0])){Rt=Lo(it);for(var Vt=1,xe=1;xe<Rt.length;++xe)Vt*=Rt[xe];K.dimension=Vt,Qt=no(it,Rt,K.dtype),Rr(K,Qt,ut),_t?K.persistentData=Qt:jr.freeType(Qt)}else if(typeof it[0]=="number"){K.dimension=yt;var ke=jr.allocType(K.dtype,it.length);_o(ke,it),Rr(K,ke,ut),_t?K.persistentData=ke:jr.freeType(ke)}else F(it[0])?(K.dimension=it[0].length,K.dtype=vt||Ka(it[0])||Ja,Qt=no(it,[it.length,it[0].length],K.dtype),Rr(K,Qt,ut),_t?K.persistentData=Qt:jr.freeType(Qt)):Ft.raise("invalid buffer data")}}else if(F(it))K.dtype=vt||Ka(it),K.dimension=yt,Rr(K,it,ut),_t&&(K.persistentData=new Uint8Array(new Uint8Array(it.buffer)));else if(qa(it)){Rt=it.shape;var dr=it.stride,Xe=it.offset,Ve=0,je=0,Br=0,Qr=0;Rt.length===1?(Ve=Rt[0],je=1,Br=dr[0],Qr=0):Rt.length===2?(Ve=Rt[0],je=Rt[1],Br=dr[0],Qr=dr[1]):Ft.raise("invalid shape"),K.dtype=vt||Ka(it.data)||Ja,K.dimension=je;var Xr=jr.allocType(K.dtype,Ve*je);Jo(Xr,it.data,Ve,je,Br,Qr,Xe),Rr(K,Xr,ut),_t?K.persistentData=Xr:jr.freeType(Xr)}else it instanceof ArrayBuffer?(K.dtype=wn,K.dimension=yt,Rr(K,it,ut),_t&&(K.persistentData=new Uint8Array(new Uint8Array(it)))):Ft.raise("invalid buffer data")}function v(K){Jt.bufferCount--,ar(K);var it=K.buffer;Ft(it,"buffer must not be deleted already"),gt.deleteBuffer(it),K.buffer=null,delete nr[K.id]}function A(K,it,ut,vt){Jt.bufferCount++;var yt=new fr(it);nr[yt.id]=yt;function _t(Vt){var xe=Uo,ke=null,dr=0,Xe=0,Ve=1;return Array.isArray(Vt)||F(Vt)||qa(Vt)||Vt instanceof ArrayBuffer?ke=Vt:typeof Vt=="number"?dr=Vt|0:Vt&&(Ft.type(Vt,"object","buffer arguments must be an object, a number or an array"),"data"in Vt&&(Ft(ke===null||Array.isArray(ke)||F(ke)||qa(ke),"invalid data for buffer"),ke=Vt.data),"usage"in Vt&&(Ft.parameter(Vt.usage,wo,"invalid buffer usage"),xe=wo[Vt.usage]),"type"in Vt&&(Ft.parameter(Vt.type,xi,"invalid buffer type"),Xe=xi[Vt.type]),"dimension"in Vt&&(Ft.type(Vt.dimension,"number","invalid dimension"),Ve=Vt.dimension|0),"length"in Vt&&(Ft.nni(dr,"buffer length must be a nonnegative integer"),dr=Vt.length|0)),yt.bind(),ke?Wr(yt,ke,xe,Xe,Ve,vt):(dr&&gt.bufferData(yt.type,dr,xe),yt.dtype=Xe||wn,yt.usage=xe,yt.dimension=Ve,yt.byteLength=dr),Ee.profile&&(yt.stats.size=yt.byteLength*Ki[yt.dtype]),_t}function Rt(Vt,xe){Ft(xe+Vt.byteLength<=yt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Vt.byteLength+" starting from offset "+xe+" to a buffer of size "+yt.byteLength),gt.bufferSubData(yt.type,xe,Vt)}function Qt(Vt,xe){var ke=(xe||0)|0,dr;if(yt.bind(),F(Vt)||Vt instanceof ArrayBuffer)Rt(Vt,ke);else if(Array.isArray(Vt)){if(Vt.length>0)if(typeof Vt[0]=="number"){var Xe=jr.allocType(yt.dtype,Vt.length);_o(Xe,Vt),Rt(Xe,ke),jr.freeType(Xe)}else if(Array.isArray(Vt[0])||F(Vt[0])){dr=Lo(Vt);var Ve=no(Vt,dr,yt.dtype);Rt(Ve,ke),jr.freeType(Ve)}else Ft.raise("invalid buffer data")}else if(qa(Vt)){dr=Vt.shape;var je=Vt.stride,Br=0,Qr=0,Xr=0,yn=0;dr.length===1?(Br=dr[0],Qr=1,Xr=je[0],yn=0):dr.length===2?(Br=dr[0],Qr=dr[1],Xr=je[0],yn=je[1]):Ft.raise("invalid shape");var dn=Array.isArray(Vt.data)?yt.dtype:Ka(Vt.data),An=jr.allocType(dn,Br*Qr);Jo(An,Vt.data,Br,Qr,Xr,yn,Vt.offset),Rt(An,ke),jr.freeType(An)}else Ft.raise("invalid data for buffer subdata");return _t}return ut||_t(K),_t._reglType="buffer",_t._buffer=yt,_t.subdata=Qt,Ee.profile&&(_t.stats=yt.stats),_t.destroy=function(){v(yt)},_t}function z(){Ha(nr).forEach(function(K){K.buffer=gt.createBuffer(),gt.bindBuffer(K.type,K.buffer),gt.bufferData(K.type,K.persistentData||K.byteLength,K.usage)})}return Ee.profile&&(Jt.getTotalBufferSize=function(){var K=0;return Object.keys(nr).forEach(function(it){K+=nr[it].stats.size}),K}),{create:A,createStream:kr,destroyStream:Fr,clear:function(){Ha(nr).forEach(v),Lr.forEach(v)},getBuffer:function(K){return K&&K._buffer instanceof fr?K._buffer:null},restore:z,_initBuffer:Wr}}var Wo=0,Xo=0,So=1,ga=1,us=4,Zi=4,Ri={points:Wo,point:Xo,lines:So,line:ga,triangles:us,triangle:Zi,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},vo=0,Yo=1,Ei=4,Wi=5120,Za=5121,Vo=5122,Xi=5123,jo=5124,ao=5125,Yi=34963,io=35040,go=35044;function po(gt,Jt,Ee,ar){var Er={},nr=0,fr={uint8:Za,uint16:Xi};Jt.oes_element_index_uint&&(fr.uint32=ao);function Lr(z){this.id=nr++,Er[this.id]=this,this.buffer=z,this.primType=Ei,this.vertCount=0,this.type=0}Lr.prototype.bind=function(){this.buffer.bind()};var kr=[];function Fr(z){var K=kr.pop();return K||(K=new Lr(Ee.create(null,Yi,!0,!1)._buffer)),Wr(K,z,io,-1,-1,0,0),K}function Rr(z){kr.push(z)}function Wr(z,K,it,ut,vt,yt,_t){z.buffer.bind();var Rt;if(K){var Qt=_t;!_t&&(!F(K)||qa(K)&&!F(K.data))&&(Qt=Jt.oes_element_index_uint?ao:Xi),Ee._initBuffer(z.buffer,K,it,Qt,3)}else gt.bufferData(Yi,yt,it),z.buffer.dtype=Rt||Za,z.buffer.usage=it,z.buffer.dimension=3,z.buffer.byteLength=yt;if(Rt=_t,!_t){switch(z.buffer.dtype){case Za:case Wi:Rt=Za;break;case Xi:case Vo:Rt=Xi;break;case ao:case jo:Rt=ao;break;default:Ft.raise("unsupported type for element array")}z.buffer.dtype=Rt}z.type=Rt,Ft(Rt!==ao||!!Jt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Vt=vt;Vt<0&&(Vt=z.buffer.byteLength,Rt===Xi?Vt>>=1:Rt===ao&&(Vt>>=2)),z.vertCount=Vt;var xe=ut;if(ut<0){xe=Ei;var ke=z.buffer.dimension;ke===1&&(xe=vo),ke===2&&(xe=Yo),ke===3&&(xe=Ei)}z.primType=xe}function v(z){ar.elementsCount--,Ft(z.buffer!==null,"must not double destroy elements"),delete Er[z.id],z.buffer.destroy(),z.buffer=null}function A(z,K){var it=Ee.create(null,Yi,!0),ut=new Lr(it._buffer);ar.elementsCount++;function vt(yt){if(!yt)it(),ut.primType=Ei,ut.vertCount=0,ut.type=Za;else if(typeof yt=="number")it(yt),ut.primType=Ei,ut.vertCount=yt|0,ut.type=Za;else{var _t=null,Rt=go,Qt=-1,Vt=-1,xe=0,ke=0;Array.isArray(yt)||F(yt)||qa(yt)?_t=yt:(Ft.type(yt,"object","invalid arguments for elements"),"data"in yt&&(_t=yt.data,Ft(Array.isArray(_t)||F(_t)||qa(_t),"invalid data for element buffer")),"usage"in yt&&(Ft.parameter(yt.usage,wo,"invalid element buffer usage"),Rt=wo[yt.usage]),"primitive"in yt&&(Ft.parameter(yt.primitive,Ri,"invalid element buffer primitive"),Qt=Ri[yt.primitive]),"count"in yt&&(Ft(typeof yt.count=="number"&&yt.count>=0,"invalid vertex count for elements"),Vt=yt.count|0),"type"in yt&&(Ft.parameter(yt.type,fr,"invalid buffer type"),ke=fr[yt.type]),"length"in yt?xe=yt.length|0:(xe=Vt,ke===Xi||ke===Vo?xe*=2:(ke===ao||ke===jo)&&(xe*=4))),Wr(ut,_t,Rt,Qt,Vt,xe,ke)}return vt}return vt(z),vt._reglType="elements",vt._elements=ut,vt.subdata=function(yt,_t){return it.subdata(yt,_t),vt},vt.destroy=function(){v(ut)},vt}return{create:A,createStream:Fr,destroyStream:Rr,getElements:function(z){return typeof z=="function"&&z._elements instanceof Lr?z._elements:null},clear:function(){Ha(Er).forEach(v)}}}var $i=new Float32Array(1),la=new Uint32Array($i.buffer),ti=5123;function gi(gt){for(var Jt=jr.allocType(ti,gt.length),Ee=0;Ee<gt.length;++Ee)if(isNaN(gt[Ee]))Jt[Ee]=65535;else if(gt[Ee]===1/0)Jt[Ee]=31744;else if(gt[Ee]===-1/0)Jt[Ee]=64512;else{$i[0]=gt[Ee];var ar=la[0],Er=ar>>>31<<15,nr=(ar<<1>>>24)-127,fr=ar>>13&(1<<10)-1;if(nr<-24)Jt[Ee]=Er;else if(nr<-14){var Lr=-14-nr;Jt[Ee]=Er+(fr+(1<<10)>>Lr)}else nr>15?Jt[Ee]=Er+31744:Jt[Ee]=Er+(nr+15<<10)+fr}return Jt}function ta(gt){return Array.isArray(gt)||F(gt)}var Qi=function(gt){return!(gt&gt-1)&&!!gt},yo=34467,ii=3553,Mo=34067,Bi=34069,Fi=6408,Do=6406,fs=6407,No=6409,Ho=6410,Ns=32854,Ps=32855,$n=36194,xt=32819,pe=32820,De=33635,$e=34042,br=6402,zr=34041,un=35904,ha=35906,Xa=36193,Ci=33776,Vi=33777,ps=33778,wi=33779,oo=35986,cs=35987,ks=34798,Qu=35840,qs=35841,Js=35842,Rs=35843,Nf=36196,Po=5121,ys=5123,ms=5125,mo=5126,Pf=10242,_c=10243,tu=10497,bu=33071,Sc=33648,h=10240,D=10241,ft=9728,mt=9729,Tt=9984,Xt=9985,Yt=9986,ne=9987,he=33170,Se=4352,Ue=4353,cr=4354,gr=34046,lr=3317,Pr=37440,$r=37441,xr=37443,ln=37444,qn=33984,ea=[Tt,Yt,Xt,ne],jn=[0,No,Ho,fs,Fi],Ln={};Ln[No]=Ln[Do]=Ln[br]=1,Ln[zr]=Ln[Ho]=2,Ln[fs]=Ln[un]=3,Ln[Fi]=Ln[ha]=4;function Wn(gt){return"[object "+gt+"]"}var li=Wn("HTMLCanvasElement"),oi=Wn("OffscreenCanvas"),ei=Wn("CanvasRenderingContext2D"),si=Wn("ImageBitmap"),ui=Wn("HTMLImageElement"),pi=Wn("HTMLVideoElement"),Ti=Object.keys(Da).concat([li,oi,ei,si,ui,pi]),pa=[];pa[Po]=1,pa[mo]=4,pa[Xa]=2,pa[ys]=2,pa[ms]=4;var ka=[];ka[Ns]=2,ka[Ps]=2,ka[$n]=2,ka[zr]=4,ka[Ci]=.5,ka[Vi]=.5,ka[ps]=1,ka[wi]=1,ka[oo]=.5,ka[cs]=1,ka[ks]=1,ka[Qu]=.5,ka[qs]=.25,ka[Js]=.5,ka[Rs]=.25,ka[Nf]=.5;function bs(gt){return Array.isArray(gt)&&(gt.length===0||typeof gt[0]=="number")}function ts(gt){if(!Array.isArray(gt))return!1;var Jt=gt.length;return!(Jt===0||!ta(gt[0]))}function ko(gt){return Object.prototype.toString.call(gt)}function eu(gt){return ko(gt)===li}function Mc(gt){return ko(gt)===oi}function ll(gt){return ko(gt)===ei}function hl(gt){return ko(gt)===si}function Ac(gt){return ko(gt)===ui}function oh(gt){return ko(gt)===pi}function Cc(gt){if(!gt)return!1;var Jt=ko(gt);return Ti.indexOf(Jt)>=0?!0:bs(gt)||ts(gt)||qa(gt)}function qu(gt){return Da[Object.prototype.toString.call(gt)]|0}function dl(gt,Jt){var Ee=Jt.length;switch(gt.type){case Po:case ys:case ms:case mo:var ar=jr.allocType(gt.type,Ee);ar.set(Jt),gt.data=ar;break;case Xa:gt.data=gi(Jt);break;default:Ft.raise("unsupported texture type, must specify a typed array")}}function Tc(gt,Jt){return jr.allocType(gt.type===Xa?mo:gt.type,Jt)}function vl(gt,Jt){gt.type===Xa?(gt.data=gi(Jt),jr.freeType(Jt)):gt.data=Jt}function sh(gt,Jt,Ee,ar,Er,nr){for(var fr=gt.width,Lr=gt.height,kr=gt.channels,Fr=fr*Lr*kr,Rr=Tc(gt,Fr),Wr=0,v=0;v<Lr;++v)for(var A=0;A<fr;++A)for(var z=0;z<kr;++z)Rr[Wr++]=Jt[Ee*A+ar*v+Er*z+nr];vl(gt,Rr)}function ru(gt,Jt,Ee,ar,Er,nr){var fr;if(typeof ka[gt]!="undefined"?fr=ka[gt]:fr=Ln[gt]*pa[Jt],nr&&(fr*=6),Er){for(var Lr=0,kr=Ee;kr>=1;)Lr+=fr*kr*kr,kr/=2;return Lr}else return fr*Ee*ar}function gl(gt,Jt,Ee,ar,Er,nr,fr){var Lr={"don't care":Se,"dont care":Se,nice:cr,fast:Ue},kr={repeat:tu,clamp:bu,mirror:Sc},Fr={nearest:ft,linear:mt},Rr=B({mipmap:ne,"nearest mipmap nearest":Tt,"linear mipmap nearest":Xt,"nearest mipmap linear":Yt,"linear mipmap linear":ne},Fr),Wr={none:0,browser:ln},v={uint8:Po,rgba4:xt,rgb565:De,"rgb5 a1":pe},A={alpha:Do,luminance:No,"luminance alpha":Ho,rgb:fs,rgba:Fi,rgba4:Ns,"rgb5 a1":Ps,rgb565:$n},z={};Jt.ext_srgb&&(A.srgb=un,A.srgba=ha),Jt.oes_texture_float&&(v.float32=v.float=mo),Jt.oes_texture_half_float&&(v.float16=v["half float"]=Xa),Jt.webgl_depth_texture&&(B(A,{depth:br,"depth stencil":zr}),B(v,{uint16:ys,uint32:ms,"depth stencil":$e})),Jt.webgl_compressed_texture_s3tc&&B(z,{"rgb s3tc dxt1":Ci,"rgba s3tc dxt1":Vi,"rgba s3tc dxt3":ps,"rgba s3tc dxt5":wi}),Jt.webgl_compressed_texture_atc&&B(z,{"rgb atc":oo,"rgba atc explicit alpha":cs,"rgba atc interpolated alpha":ks}),Jt.webgl_compressed_texture_pvrtc&&B(z,{"rgb pvrtc 4bppv1":Qu,"rgb pvrtc 2bppv1":qs,"rgba pvrtc 4bppv1":Js,"rgba pvrtc 2bppv1":Rs}),Jt.webgl_compressed_texture_etc1&&(z["rgb etc1"]=Nf);var K=Array.prototype.slice.call(gt.getParameter(yo));Object.keys(z).forEach(function(me){var or=z[me];K.indexOf(or)>=0&&(A[me]=or)});var it=Object.keys(A);Ee.textureFormats=it;var ut=[];Object.keys(A).forEach(function(me){var or=A[me];ut[or]=me});var vt=[];Object.keys(v).forEach(function(me){var or=v[me];vt[or]=me});var yt=[];Object.keys(Fr).forEach(function(me){var or=Fr[me];yt[or]=me});var _t=[];Object.keys(Rr).forEach(function(me){var or=Rr[me];_t[or]=me});var Rt=[];Object.keys(kr).forEach(function(me){var or=kr[me];Rt[or]=me});var Qt=it.reduce(function(me,or){var rr=A[or];return rr===No||rr===Do||rr===No||rr===Ho||rr===br||rr===zr||Jt.ext_srgb&&(rr===un||rr===ha)?me[rr]=rr:rr===Ps||or.indexOf("rgba")>=0?me[rr]=Fi:me[rr]=fs,me},{});function Vt(){this.internalformat=Fi,this.format=Fi,this.type=Po,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ln,this.width=0,this.height=0,this.channels=0}function xe(me,or){me.internalformat=or.internalformat,me.format=or.format,me.type=or.type,me.compressed=or.compressed,me.premultiplyAlpha=or.premultiplyAlpha,me.flipY=or.flipY,me.unpackAlignment=or.unpackAlignment,me.colorSpace=or.colorSpace,me.width=or.width,me.height=or.height,me.channels=or.channels}function ke(me,or){if(!(typeof or!="object"||!or)){if("premultiplyAlpha"in or&&(Ft.type(or.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),me.premultiplyAlpha=or.premultiplyAlpha),"flipY"in or&&(Ft.type(or.flipY,"boolean","invalid texture flip"),me.flipY=or.flipY),"alignment"in or&&(Ft.oneOf(or.alignment,[1,2,4,8],"invalid texture unpack alignment"),me.unpackAlignment=or.alignment),"colorSpace"in or&&(Ft.parameter(or.colorSpace,Wr,"invalid colorSpace"),me.colorSpace=Wr[or.colorSpace]),"type"in or){var rr=or.type;Ft(Jt.oes_texture_float||!(rr==="float"||rr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ft(Jt.oes_texture_half_float||!(rr==="half float"||rr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ft(Jt.webgl_depth_texture||!(rr==="uint16"||rr==="uint32"||rr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ft.parameter(rr,v,"invalid texture type"),me.type=v[rr]}var sn=me.width,oa=me.height,oe=me.channels,jt=!1;"shape"in or?(Ft(Array.isArray(or.shape)&&or.shape.length>=2,"shape must be an array"),sn=or.shape[0],oa=or.shape[1],or.shape.length===3&&(oe=or.shape[2],Ft(oe>0&&oe<=4,"invalid number of channels"),jt=!0),Ft(sn>=0&&sn<=Ee.maxTextureSize,"invalid width"),Ft(oa>=0&&oa<=Ee.maxTextureSize,"invalid height")):("radius"in or&&(sn=oa=or.radius,Ft(sn>=0&&sn<=Ee.maxTextureSize,"invalid radius")),"width"in or&&(sn=or.width,Ft(sn>=0&&sn<=Ee.maxTextureSize,"invalid width")),"height"in or&&(oa=or.height,Ft(oa>=0&&oa<=Ee.maxTextureSize,"invalid height")),"channels"in or&&(oe=or.channels,Ft(oe>0&&oe<=4,"invalid number of channels"),jt=!0)),me.width=sn|0,me.height=oa|0,me.channels=oe|0;var Ae=!1;if("format"in or){var He=or.format;Ft(Jt.webgl_depth_texture||!(He==="depth"||He==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ft.parameter(He,A,"invalid texture format");var qe=me.internalformat=A[He];me.format=Qt[qe],He in v&&("type"in or||(me.type=v[He])),He in z&&(me.compressed=!0),Ae=!0}!jt&&Ae?me.channels=Ln[me.format]:jt&&!Ae?me.channels!==jn[me.format]&&(me.format=me.internalformat=jn[me.channels]):Ae&&jt&&Ft(me.channels===Ln[me.format],"number of channels inconsistent with specified format")}}function dr(me){gt.pixelStorei(Pr,me.flipY),gt.pixelStorei($r,me.premultiplyAlpha),gt.pixelStorei(xr,me.colorSpace),gt.pixelStorei(lr,me.unpackAlignment)}function Xe(){Vt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ve(me,or){var rr=null;if(Cc(or)?rr=or:or&&(Ft.type(or,"object","invalid pixel data type"),ke(me,or),"x"in or&&(me.xOffset=or.x|0),"y"in or&&(me.yOffset=or.y|0),Cc(or.data)&&(rr=or.data)),Ft(!me.compressed||rr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),or.copy){Ft(!rr,"can not specify copy and data field for the same texture");var sn=Er.viewportWidth,oa=Er.viewportHeight;me.width=me.width||sn-me.xOffset,me.height=me.height||oa-me.yOffset,me.needsCopy=!0,Ft(me.xOffset>=0&&me.xOffset<sn&&me.yOffset>=0&&me.yOffset<oa&&me.width>0&&me.width<=sn&&me.height>0&&me.height<=oa,"copy texture read out of bounds")}else if(!rr)me.width=me.width||1,me.height=me.height||1,me.channels=me.channels||4;else if(F(rr))me.channels=me.channels||4,me.data=rr,!("type"in or)&&me.type===Po&&(me.type=qu(rr));else if(bs(rr))me.channels=me.channels||4,dl(me,rr),me.alignment=1,me.needsFree=!0;else if(qa(rr)){var oe=rr.data;!Array.isArray(oe)&&me.type===Po&&(me.type=qu(oe));var jt=rr.shape,Ae=rr.stride,He,qe,Ne,Oe,We,se;jt.length===3?(Ne=jt[2],se=Ae[2]):(Ft(jt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ne=1,se=1),He=jt[0],qe=jt[1],Oe=Ae[0],We=Ae[1],me.alignment=1,me.width=He,me.height=qe,me.channels=Ne,me.format=me.internalformat=jn[Ne],me.needsFree=!0,sh(me,oe,Oe,We,se,rr.offset)}else if(eu(rr)||Mc(rr)||ll(rr))eu(rr)||Mc(rr)?me.element=rr:me.element=rr.canvas,me.width=me.element.width,me.height=me.element.height,me.channels=4;else if(hl(rr))me.element=rr,me.width=rr.width,me.height=rr.height,me.channels=4;else if(Ac(rr))me.element=rr,me.width=rr.naturalWidth,me.height=rr.naturalHeight,me.channels=4;else if(oh(rr))me.element=rr,me.width=rr.videoWidth,me.height=rr.videoHeight,me.channels=4;else if(ts(rr)){var Ce=me.width||rr[0].length,re=me.height||rr.length,Ye=me.channels;ta(rr[0][0])?Ye=Ye||rr[0][0].length:Ye=Ye||1;for(var er=Ni.shape(rr),mr=1,Ar=0;Ar<er.length;++Ar)mr*=er[Ar];var vr=Tc(me,mr);Ni.flatten(rr,er,"",vr),vl(me,vr),me.alignment=1,me.width=Ce,me.height=re,me.channels=Ye,me.format=me.internalformat=jn[Ye],me.needsFree=!0}me.type===mo?Ft(Ee.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):me.type===Xa&&Ft(Ee.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function je(me,or,rr){var sn=me.element,oa=me.data,oe=me.internalformat,jt=me.format,Ae=me.type,He=me.width,qe=me.height;dr(me),sn?gt.texImage2D(or,rr,jt,jt,Ae,sn):me.compressed?gt.compressedTexImage2D(or,rr,oe,He,qe,0,oa):me.needsCopy?(ar(),gt.copyTexImage2D(or,rr,jt,me.xOffset,me.yOffset,He,qe,0)):gt.texImage2D(or,rr,jt,He,qe,0,jt,Ae,oa||null)}function Br(me,or,rr,sn,oa){var oe=me.element,jt=me.data,Ae=me.internalformat,He=me.format,qe=me.type,Ne=me.width,Oe=me.height;dr(me),oe?gt.texSubImage2D(or,oa,rr,sn,He,qe,oe):me.compressed?gt.compressedTexSubImage2D(or,oa,rr,sn,Ae,Ne,Oe,jt):me.needsCopy?(ar(),gt.copyTexSubImage2D(or,oa,rr,sn,me.xOffset,me.yOffset,Ne,Oe)):gt.texSubImage2D(or,oa,rr,sn,Ne,Oe,He,qe,jt)}var Qr=[];function Xr(){return Qr.pop()||new Xe}function yn(me){me.needsFree&&jr.freeType(me.data),Xe.call(me),Qr.push(me)}function dn(){Vt.call(this),this.genMipmaps=!1,this.mipmapHint=Se,this.mipmask=0,this.images=Array(16)}function An(me,or,rr){var sn=me.images[0]=Xr();me.mipmask=1,sn.width=me.width=or,sn.height=me.height=rr,sn.channels=me.channels=4}function Gn(me,or){var rr=null;if(Cc(or))rr=me.images[0]=Xr(),xe(rr,me),Ve(rr,or),me.mipmask=1;else if(ke(me,or),Array.isArray(or.mipmap))for(var sn=or.mipmap,oa=0;oa<sn.length;++oa)rr=me.images[oa]=Xr(),xe(rr,me),rr.width>>=oa,rr.height>>=oa,Ve(rr,sn[oa]),me.mipmask|=1<<oa;else rr=me.images[0]=Xr(),xe(rr,me),Ve(rr,or),me.mipmask=1;xe(me,me.images[0]),me.compressed&&(me.internalformat===Ci||me.internalformat===Vi||me.internalformat===ps||me.internalformat===wi)&&Ft(me.width%4===0&&me.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Pn(me,or){for(var rr=me.images,sn=0;sn<rr.length;++sn){if(!rr[sn])return;je(rr[sn],or,sn)}}var Va=[];function Xn(){var me=Va.pop()||new dn;Vt.call(me),me.mipmask=0;for(var or=0;or<16;++or)me.images[or]=null;return me}function fi(me){for(var or=me.images,rr=0;rr<or.length;++rr)or[rr]&&yn(or[rr]),or[rr]=null;Va.push(me)}function Fa(){this.minFilter=ft,this.magFilter=ft,this.wrapS=bu,this.wrapT=bu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Se}function da(me,or){if("min"in or){var rr=or.min;Ft.parameter(rr,Rr),me.minFilter=Rr[rr],ea.indexOf(me.minFilter)>=0&&!("faces"in or)&&(me.genMipmaps=!0)}if("mag"in or){var sn=or.mag;Ft.parameter(sn,Fr),me.magFilter=Fr[sn]}var oa=me.wrapS,oe=me.wrapT;if("wrap"in or){var jt=or.wrap;typeof jt=="string"?(Ft.parameter(jt,kr),oa=oe=kr[jt]):Array.isArray(jt)&&(Ft.parameter(jt[0],kr),Ft.parameter(jt[1],kr),oa=kr[jt[0]],oe=kr[jt[1]])}else{if("wrapS"in or){var Ae=or.wrapS;Ft.parameter(Ae,kr),oa=kr[Ae]}if("wrapT"in or){var He=or.wrapT;Ft.parameter(He,kr),oe=kr[He]}}if(me.wrapS=oa,me.wrapT=oe,"anisotropic"in or){var qe=or.anisotropic;Ft(typeof qe=="number"&&qe>=1&&qe<=Ee.maxAnisotropic,"aniso samples must be between 1 and "),me.anisotropic=or.anisotropic}if("mipmap"in or){var Ne=!1;switch(typeof or.mipmap){case"string":Ft.parameter(or.mipmap,Lr,"invalid mipmap hint"),me.mipmapHint=Lr[or.mipmap],me.genMipmaps=!0,Ne=!0;break;case"boolean":Ne=me.genMipmaps=or.mipmap;break;case"object":Ft(Array.isArray(or.mipmap),"invalid mipmap type"),me.genMipmaps=!1,Ne=!0;break;default:Ft.raise("invalid mipmap type")}Ne&&!("min"in or)&&(me.minFilter=Tt)}}function Ya(me,or){gt.texParameteri(or,D,me.minFilter),gt.texParameteri(or,h,me.magFilter),gt.texParameteri(or,Pf,me.wrapS),gt.texParameteri(or,_c,me.wrapT),Jt.ext_texture_filter_anisotropic&&gt.texParameteri(or,gr,me.anisotropic),me.genMipmaps&&(gt.hint(he,me.mipmapHint),gt.generateMipmap(or))}var ci=0,Oi={},Hi=Ee.maxTextureUnits,Si=Array(Hi).map(function(){return null});function Qn(me){Vt.call(this),this.mipmask=0,this.internalformat=Fi,this.id=ci++,this.refCount=1,this.target=me,this.texture=gt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Fa,fr.profile&&(this.stats={size:0})}function Ji(me){gt.activeTexture(qn),gt.bindTexture(me.target,me.texture)}function wa(){var me=Si[0];me?gt.bindTexture(me.target,me.texture):gt.bindTexture(ii,null)}function Cn(me){var or=me.texture;Ft(or,"must not double destroy texture");var rr=me.unit,sn=me.target;rr>=0&&(gt.activeTexture(qn+rr),gt.bindTexture(sn,null),Si[rr]=null),gt.deleteTexture(or),me.texture=null,me.params=null,me.pixels=null,me.refCount=0,delete Oi[me.id],nr.textureCount--}B(Qn.prototype,{bind:function(){var me=this;me.bindCount+=1;var or=me.unit;if(or<0){for(var rr=0;rr<Hi;++rr){var sn=Si[rr];if(sn){if(sn.bindCount>0)continue;sn.unit=-1}Si[rr]=me,or=rr;break}or>=Hi&&Ft.raise("insufficient number of texture units"),fr.profile&&nr.maxTextureUnits<or+1&&(nr.maxTextureUnits=or+1),me.unit=or,gt.activeTexture(qn+or),gt.bindTexture(me.target,me.texture)}return or},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Cn(this)}});function fa(me,or){var rr=new Qn(ii);Oi[rr.id]=rr,nr.textureCount++;function sn(jt,Ae){var He=rr.texInfo;Fa.call(He);var qe=Xn();return typeof jt=="number"?typeof Ae=="number"?An(qe,jt|0,Ae|0):An(qe,jt|0,jt|0):jt?(Ft.type(jt,"object","invalid arguments to regl.texture"),da(He,jt),Gn(qe,jt)):An(qe,1,1),He.genMipmaps&&(qe.mipmask=(qe.width<<1)-1),rr.mipmask=qe.mipmask,xe(rr,qe),Ft.texture2D(He,qe,Ee),rr.internalformat=qe.internalformat,sn.width=qe.width,sn.height=qe.height,Ji(rr),Pn(qe,ii),Ya(He,ii),wa(),fi(qe),fr.profile&&(rr.stats.size=ru(rr.internalformat,rr.type,qe.width,qe.height,He.genMipmaps,!1)),sn.format=ut[rr.internalformat],sn.type=vt[rr.type],sn.mag=yt[He.magFilter],sn.min=_t[He.minFilter],sn.wrapS=Rt[He.wrapS],sn.wrapT=Rt[He.wrapT],sn}function oa(jt,Ae,He,qe){Ft(!!jt,"must specify image data");var Ne=Ae|0,Oe=He|0,We=qe|0,se=Xr();return xe(se,rr),se.width=0,se.height=0,Ve(se,jt),se.width=se.width||(rr.width>>We)-Ne,se.height=se.height||(rr.height>>We)-Oe,Ft(rr.type===se.type&&rr.format===se.format&&rr.internalformat===se.internalformat,"incompatible format for texture.subimage"),Ft(Ne>=0&&Oe>=0&&Ne+se.width<=rr.width&&Oe+se.height<=rr.height,"texture.subimage write out of bounds"),Ft(rr.mipmask&1<<We,"missing mipmap data"),Ft(se.data||se.element||se.needsCopy,"missing image data"),Ji(rr),Br(se,ii,Ne,Oe,We),wa(),yn(se),sn}function oe(jt,Ae){var He=jt|0,qe=Ae|0||He;if(He===rr.width&&qe===rr.height)return sn;sn.width=rr.width=He,sn.height=rr.height=qe,Ji(rr);for(var Ne=0;rr.mipmask>>Ne;++Ne){var Oe=He>>Ne,We=qe>>Ne;if(!Oe||!We)break;gt.texImage2D(ii,Ne,rr.format,Oe,We,0,rr.format,rr.type,null)}return wa(),fr.profile&&(rr.stats.size=ru(rr.internalformat,rr.type,He,qe,!1,!1)),sn}return sn(me,or),sn.subimage=oa,sn.resize=oe,sn._reglType="texture2d",sn._texture=rr,fr.profile&&(sn.stats=rr.stats),sn.destroy=function(){rr.decRef()},sn}function xa(me,or,rr,sn,oa,oe){var jt=new Qn(Mo);Oi[jt.id]=jt,nr.cubeCount++;var Ae=new Array(6);function He(Oe,We,se,Ce,re,Ye){var er,mr=jt.texInfo;for(Fa.call(mr),er=0;er<6;++er)Ae[er]=Xn();if(typeof Oe=="number"||!Oe){var Ar=Oe|0||1;for(er=0;er<6;++er)An(Ae[er],Ar,Ar)}else if(typeof Oe=="object")if(We)Gn(Ae[0],Oe),Gn(Ae[1],We),Gn(Ae[2],se),Gn(Ae[3],Ce),Gn(Ae[4],re),Gn(Ae[5],Ye);else if(da(mr,Oe),ke(jt,Oe),"faces"in Oe){var vr=Oe.faces;for(Ft(Array.isArray(vr)&&vr.length===6,"cube faces must be a length 6 array"),er=0;er<6;++er)Ft(typeof vr[er]=="object"&&!!vr[er],"invalid input for cube map face"),xe(Ae[er],jt),Gn(Ae[er],vr[er])}else for(er=0;er<6;++er)Gn(Ae[er],Oe);else Ft.raise("invalid arguments to cube map");for(xe(jt,Ae[0]),Ee.npotTextureCube||Ft(Qi(jt.width)&&Qi(jt.height),"your browser does not support non power or two texture dimensions"),mr.genMipmaps?jt.mipmask=(Ae[0].width<<1)-1:jt.mipmask=Ae[0].mipmask,Ft.textureCube(jt,mr,Ae,Ee),jt.internalformat=Ae[0].internalformat,He.width=Ae[0].width,He.height=Ae[0].height,Ji(jt),er=0;er<6;++er)Pn(Ae[er],Bi+er);for(Ya(mr,Mo),wa(),fr.profile&&(jt.stats.size=ru(jt.internalformat,jt.type,He.width,He.height,mr.genMipmaps,!0)),He.format=ut[jt.internalformat],He.type=vt[jt.type],He.mag=yt[mr.magFilter],He.min=_t[mr.minFilter],He.wrapS=Rt[mr.wrapS],He.wrapT=Rt[mr.wrapT],er=0;er<6;++er)fi(Ae[er]);return He}function qe(Oe,We,se,Ce,re){Ft(!!We,"must specify image data"),Ft(typeof Oe=="number"&&Oe===(Oe|0)&&Oe>=0&&Oe<6,"invalid face");var Ye=se|0,er=Ce|0,mr=re|0,Ar=Xr();return xe(Ar,jt),Ar.width=0,Ar.height=0,Ve(Ar,We),Ar.width=Ar.width||(jt.width>>mr)-Ye,Ar.height=Ar.height||(jt.height>>mr)-er,Ft(jt.type===Ar.type&&jt.format===Ar.format&&jt.internalformat===Ar.internalformat,"incompatible format for texture.subimage"),Ft(Ye>=0&&er>=0&&Ye+Ar.width<=jt.width&&er+Ar.height<=jt.height,"texture.subimage write out of bounds"),Ft(jt.mipmask&1<<mr,"missing mipmap data"),Ft(Ar.data||Ar.element||Ar.needsCopy,"missing image data"),Ji(jt),Br(Ar,Bi+Oe,Ye,er,mr),wa(),yn(Ar),He}function Ne(Oe){var We=Oe|0;if(We!==jt.width){He.width=jt.width=We,He.height=jt.height=We,Ji(jt);for(var se=0;se<6;++se)for(var Ce=0;jt.mipmask>>Ce;++Ce)gt.texImage2D(Bi+se,Ce,jt.format,We>>Ce,We>>Ce,0,jt.format,jt.type,null);return wa(),fr.profile&&(jt.stats.size=ru(jt.internalformat,jt.type,He.width,He.height,!1,!0)),He}}return He(me,or,rr,sn,oa,oe),He.subimage=qe,He.resize=Ne,He._reglType="textureCube",He._texture=jt,fr.profile&&(He.stats=jt.stats),He.destroy=function(){jt.decRef()},He}function Mi(){for(var me=0;me<Hi;++me)gt.activeTexture(qn+me),gt.bindTexture(ii,null),Si[me]=null;Ha(Oi).forEach(Cn),nr.cubeCount=0,nr.textureCount=0}fr.profile&&(nr.getTotalTextureSize=function(){var me=0;return Object.keys(Oi).forEach(function(or){me+=Oi[or].stats.size}),me});function Ys(){for(var me=0;me<Hi;++me){var or=Si[me];or&&(or.bindCount=0,or.unit=-1,Si[me]=null)}Ha(Oi).forEach(function(rr){rr.texture=gt.createTexture(),gt.bindTexture(rr.target,rr.texture);for(var sn=0;sn<32;++sn)if(rr.mipmask&1<<sn)if(rr.target===ii)gt.texImage2D(ii,sn,rr.internalformat,rr.width>>sn,rr.height>>sn,0,rr.internalformat,rr.type,null);else for(var oa=0;oa<6;++oa)gt.texImage2D(Bi+oa,sn,rr.internalformat,rr.width>>sn,rr.height>>sn,0,rr.internalformat,rr.type,null);Ya(rr.texInfo,rr.target)})}function dc(){for(var me=0;me<Hi;++me){var or=Si[me];or&&(or.bindCount=0,or.unit=-1,Si[me]=null),gt.activeTexture(qn+me),gt.bindTexture(ii,null),gt.bindTexture(Mo,null)}}return{create2D:fa,createCube:xa,clear:Mi,getTexture:function(me){return null},restore:Ys,refresh:dc}}var on=36161,xu=32854,ya=32855,Ic=36194,kf=33189,nu=36168,Oc=34041,Lc=35907,Rf=34836,pl=34842,yl=34843,es=[];es[xu]=2,es[ya]=2,es[Ic]=2,es[kf]=2,es[nu]=1,es[Oc]=4,es[Lc]=4,es[Rf]=16,es[pl]=8,es[yl]=6;function Dc(gt,Jt,Ee){return es[gt]*Jt*Ee}var Bs=function(gt,Jt,Ee,ar,Er){var nr={rgba4:xu,rgb565:Ic,"rgb5 a1":ya,depth:kf,stencil:nu,"depth stencil":Oc};Jt.ext_srgb&&(nr.srgba=Lc),Jt.ext_color_buffer_half_float&&(nr.rgba16f=pl,nr.rgb16f=yl),Jt.webgl_color_buffer_float&&(nr.rgba32f=Rf);var fr=[];Object.keys(nr).forEach(function(A){var z=nr[A];fr[z]=A});var Lr=0,kr={};function Fr(A){this.id=Lr++,this.refCount=1,this.renderbuffer=A,this.format=xu,this.width=0,this.height=0,Er.profile&&(this.stats={size:0})}Fr.prototype.decRef=function(){--this.refCount<=0&&Rr(this)};function Rr(A){var z=A.renderbuffer;Ft(z,"must not double destroy renderbuffer"),gt.bindRenderbuffer(on,null),gt.deleteRenderbuffer(z),A.renderbuffer=null,A.refCount=0,delete kr[A.id],ar.renderbufferCount--}function Wr(A,z){var K=new Fr(gt.createRenderbuffer());kr[K.id]=K,ar.renderbufferCount++;function it(vt,yt){var _t=0,Rt=0,Qt=xu;if(typeof vt=="object"&&vt){var Vt=vt;if("shape"in Vt){var xe=Vt.shape;Ft(Array.isArray(xe)&&xe.length>=2,"invalid renderbuffer shape"),_t=xe[0]|0,Rt=xe[1]|0}else"radius"in Vt&&(_t=Rt=Vt.radius|0),"width"in Vt&&(_t=Vt.width|0),"height"in Vt&&(Rt=Vt.height|0);"format"in Vt&&(Ft.parameter(Vt.format,nr,"invalid renderbuffer format"),Qt=nr[Vt.format])}else typeof vt=="number"?(_t=vt|0,typeof yt=="number"?Rt=yt|0:Rt=_t):vt?Ft.raise("invalid arguments to renderbuffer constructor"):_t=Rt=1;if(Ft(_t>0&&Rt>0&&_t<=Ee.maxRenderbufferSize&&Rt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),!(_t===K.width&&Rt===K.height&&Qt===K.format))return it.width=K.width=_t,it.height=K.height=Rt,K.format=Qt,gt.bindRenderbuffer(on,K.renderbuffer),gt.renderbufferStorage(on,Qt,_t,Rt),Ft(gt.getError()===0,"invalid render buffer format"),Er.profile&&(K.stats.size=Dc(K.format,K.width,K.height)),it.format=fr[K.format],it}function ut(vt,yt){var _t=vt|0,Rt=yt|0||_t;return _t===K.width&&Rt===K.height||(Ft(_t>0&&Rt>0&&_t<=Ee.maxRenderbufferSize&&Rt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),it.width=K.width=_t,it.height=K.height=Rt,gt.bindRenderbuffer(on,K.renderbuffer),gt.renderbufferStorage(on,K.format,_t,Rt),Ft(gt.getError()===0,"invalid render buffer format"),Er.profile&&(K.stats.size=Dc(K.format,K.width,K.height))),it}return it(A,z),it.resize=ut,it._reglType="renderbuffer",it._renderbuffer=K,Er.profile&&(it.stats=K.stats),it.destroy=function(){K.decRef()},it}Er.profile&&(ar.getTotalRenderbufferSize=function(){var A=0;return Object.keys(kr).forEach(function(z){A+=kr[z].stats.size}),A});function v(){Ha(kr).forEach(function(A){A.renderbuffer=gt.createRenderbuffer(),gt.bindRenderbuffer(on,A.renderbuffer),gt.renderbufferStorage(on,A.format,A.width,A.height)}),gt.bindRenderbuffer(on,null)}return{create:Wr,clear:function(){Ha(kr).forEach(Rr)},restore:v}},_i=36160,Fs=36161,xs=3553,Bf=34069,Nc=36064,ml=36096,bl=36128,xl=33306,Ff=36053,El=36054,Gf=36055,wl=36057,Pc=36061,Ju=36193,kc=5121,Ko=5126,Rc=6407,tf=6408,_l=6402,uh=[Rc,tf],Bc=[];Bc[tf]=4,Bc[Rc]=3;var ef=[];ef[kc]=1,ef[Ko]=4,ef[Ju]=2;var fh=32854,Fc=32855,Gc=36194,Sl=33189,rf=36168,Eu=34041,au=35907,wu=34836,nf=34842,ls=34843,Ml=[fh,Fc,Gc,au,nf,ls,wu],_u={};_u[Ff]="complete",_u[El]="incomplete attachment",_u[wl]="incomplete dimensions",_u[Gf]="incomplete, missing attachment",_u[Pc]="unsupported";function ch(gt,Jt,Ee,ar,Er,nr){var fr={cur:null,next:null,dirty:!1,setFBO:null},Lr=["rgba"],kr=["rgba4","rgb565","rgb5 a1"];Jt.ext_srgb&&kr.push("srgba"),Jt.ext_color_buffer_half_float&&kr.push("rgba16f","rgb16f"),Jt.webgl_color_buffer_float&&kr.push("rgba32f");var Fr=["uint8"];Jt.oes_texture_half_float&&Fr.push("half float","float16"),Jt.oes_texture_float&&Fr.push("float","float32");function Rr(Xe,Ve,je){this.target=Xe,this.texture=Ve,this.renderbuffer=je;var Br=0,Qr=0;Ve?(Br=Ve.width,Qr=Ve.height):je&&(Br=je.width,Qr=je.height),this.width=Br,this.height=Qr}function Wr(Xe){Xe&&(Xe.texture&&Xe.texture._texture.decRef(),Xe.renderbuffer&&Xe.renderbuffer._renderbuffer.decRef())}function v(Xe,Ve,je){if(Xe)if(Xe.texture){var Br=Xe.texture._texture,Qr=Math.max(1,Br.width),Xr=Math.max(1,Br.height);Ft(Qr===Ve&&Xr===je,"inconsistent width/height for supplied texture"),Br.refCount+=1}else{var yn=Xe.renderbuffer._renderbuffer;Ft(yn.width===Ve&&yn.height===je,"inconsistent width/height for renderbuffer"),yn.refCount+=1}}function A(Xe,Ve){Ve&&(Ve.texture?gt.framebufferTexture2D(_i,Xe,Ve.target,Ve.texture._texture.texture,0):gt.framebufferRenderbuffer(_i,Xe,Fs,Ve.renderbuffer._renderbuffer.renderbuffer))}function z(Xe){var Ve=xs,je=null,Br=null,Qr=Xe;typeof Xe=="object"&&(Qr=Xe.data,"target"in Xe&&(Ve=Xe.target|0)),Ft.type(Qr,"function","invalid attachment data");var Xr=Qr._reglType;return Xr==="texture2d"?(je=Qr,Ft(Ve===xs)):Xr==="textureCube"?(je=Qr,Ft(Ve>=Bf&&Ve<Bf+6,"invalid cube map target")):Xr==="renderbuffer"?(Br=Qr,Ve=Fs):Ft.raise("invalid regl object for attachment"),new Rr(Ve,je,Br)}function K(Xe,Ve,je,Br,Qr){if(je){var Xr=ar.create2D({width:Xe,height:Ve,format:Br,type:Qr});return Xr._texture.refCount=0,new Rr(xs,Xr,null)}else{var yn=Er.create({width:Xe,height:Ve,format:Br});return yn._renderbuffer.refCount=0,new Rr(Fs,null,yn)}}function it(Xe){return Xe&&(Xe.texture||Xe.renderbuffer)}function ut(Xe,Ve,je){Xe&&(Xe.texture?Xe.texture.resize(Ve,je):Xe.renderbuffer&&Xe.renderbuffer.resize(Ve,je),Xe.width=Ve,Xe.height=je)}var vt=0,yt={};function _t(){this.id=vt++,yt[this.id]=this,this.framebuffer=gt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Rt(Xe){Xe.colorAttachments.forEach(Wr),Wr(Xe.depthAttachment),Wr(Xe.stencilAttachment),Wr(Xe.depthStencilAttachment)}function Qt(Xe){var Ve=Xe.framebuffer;Ft(Ve,"must not double destroy framebuffer"),gt.deleteFramebuffer(Ve),Xe.framebuffer=null,nr.framebufferCount--,delete yt[Xe.id]}function Vt(Xe){var Ve;gt.bindFramebuffer(_i,Xe.framebuffer);var je=Xe.colorAttachments;for(Ve=0;Ve<je.length;++Ve)A(Nc+Ve,je[Ve]);for(Ve=je.length;Ve<Ee.maxColorAttachments;++Ve)gt.framebufferTexture2D(_i,Nc+Ve,xs,null,0);gt.framebufferTexture2D(_i,xl,xs,null,0),gt.framebufferTexture2D(_i,ml,xs,null,0),gt.framebufferTexture2D(_i,bl,xs,null,0),A(ml,Xe.depthAttachment),A(bl,Xe.stencilAttachment),A(xl,Xe.depthStencilAttachment);var Br=gt.checkFramebufferStatus(_i);!gt.isContextLost()&&Br!==Ff&&Ft.raise("framebuffer configuration not supported, status = "+_u[Br]),gt.bindFramebuffer(_i,fr.next?fr.next.framebuffer:null),fr.cur=fr.next,gt.getError()}function xe(Xe,Ve){var je=new _t;nr.framebufferCount++;function Br(Xr,yn){var dn;Ft(fr.next!==je,"can not update framebuffer which is currently in use");var An=0,Gn=0,Pn=!0,Va=!0,Xn=null,fi=!0,Fa="rgba",da="uint8",Ya=1,ci=null,Oi=null,Hi=null,Si=!1;if(typeof Xr=="number")An=Xr|0,Gn=yn|0||An;else if(!Xr)An=Gn=1;else{Ft.type(Xr,"object","invalid arguments for framebuffer");var Qn=Xr;if("shape"in Qn){var Ji=Qn.shape;Ft(Array.isArray(Ji)&&Ji.length>=2,"invalid shape for framebuffer"),An=Ji[0],Gn=Ji[1]}else"radius"in Qn&&(An=Gn=Qn.radius),"width"in Qn&&(An=Qn.width),"height"in Qn&&(Gn=Qn.height);("color"in Qn||"colors"in Qn)&&(Xn=Qn.color||Qn.colors,Array.isArray(Xn)&&Ft(Xn.length===1||Jt.webgl_draw_buffers,"multiple render targets not supported")),Xn||("colorCount"in Qn&&(Ya=Qn.colorCount|0,Ft(Ya>0,"invalid color buffer count")),"colorTexture"in Qn&&(fi=!!Qn.colorTexture,Fa="rgba4"),"colorType"in Qn&&(da=Qn.colorType,fi?(Ft(Jt.oes_texture_float||!(da==="float"||da==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ft(Jt.oes_texture_half_float||!(da==="half float"||da==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):da==="half float"||da==="float16"?(Ft(Jt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Fa="rgba16f"):(da==="float"||da==="float32")&&(Ft(Jt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Fa="rgba32f"),Ft.oneOf(da,Fr,"invalid color type")),"colorFormat"in Qn&&(Fa=Qn.colorFormat,Lr.indexOf(Fa)>=0?fi=!0:kr.indexOf(Fa)>=0?fi=!1:fi?Ft.oneOf(Qn.colorFormat,Lr,"invalid color format for texture"):Ft.oneOf(Qn.colorFormat,kr,"invalid color format for renderbuffer"))),("depthTexture"in Qn||"depthStencilTexture"in Qn)&&(Si=!!(Qn.depthTexture||Qn.depthStencilTexture),Ft(!Si||Jt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Qn&&(typeof Qn.depth=="boolean"?Pn=Qn.depth:(ci=Qn.depth,Va=!1)),"stencil"in Qn&&(typeof Qn.stencil=="boolean"?Va=Qn.stencil:(Oi=Qn.stencil,Pn=!1)),"depthStencil"in Qn&&(typeof Qn.depthStencil=="boolean"?Pn=Va=Qn.depthStencil:(Hi=Qn.depthStencil,Pn=!1,Va=!1))}var wa=null,Cn=null,fa=null,xa=null;if(Array.isArray(Xn))wa=Xn.map(z);else if(Xn)wa=[z(Xn)];else for(wa=new Array(Ya),dn=0;dn<Ya;++dn)wa[dn]=K(An,Gn,fi,Fa,da);Ft(Jt.webgl_draw_buffers||wa.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ft(wa.length<=Ee.maxColorAttachments,"too many color attachments, not supported"),An=An||wa[0].width,Gn=Gn||wa[0].height,ci?Cn=z(ci):Pn&&!Va&&(Cn=K(An,Gn,Si,"depth","uint32")),Oi?fa=z(Oi):Va&&!Pn&&(fa=K(An,Gn,!1,"stencil","uint8")),Hi?xa=z(Hi):!ci&&!Oi&&Va&&Pn&&(xa=K(An,Gn,Si,"depth stencil","depth stencil")),Ft(!!ci+!!Oi+!!Hi<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Mi=null;for(dn=0;dn<wa.length;++dn)if(v(wa[dn],An,Gn),Ft(!wa[dn]||wa[dn].texture&&uh.indexOf(wa[dn].texture._texture.format)>=0||wa[dn].renderbuffer&&Ml.indexOf(wa[dn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+dn+" is invalid"),wa[dn]&&wa[dn].texture){var Ys=Bc[wa[dn].texture._texture.format]*ef[wa[dn].texture._texture.type];Mi===null?Mi=Ys:Ft(Mi===Ys,"all color attachments much have the same number of bits per pixel.")}return v(Cn,An,Gn),Ft(!Cn||Cn.texture&&Cn.texture._texture.format===_l||Cn.renderbuffer&&Cn.renderbuffer._renderbuffer.format===Sl,"invalid depth attachment for framebuffer object"),v(fa,An,Gn),Ft(!fa||fa.renderbuffer&&fa.renderbuffer._renderbuffer.format===rf,"invalid stencil attachment for framebuffer object"),v(xa,An,Gn),Ft(!xa||xa.texture&&xa.texture._texture.format===Eu||xa.renderbuffer&&xa.renderbuffer._renderbuffer.format===Eu,"invalid depth-stencil attachment for framebuffer object"),Rt(je),je.width=An,je.height=Gn,je.colorAttachments=wa,je.depthAttachment=Cn,je.stencilAttachment=fa,je.depthStencilAttachment=xa,Br.color=wa.map(it),Br.depth=it(Cn),Br.stencil=it(fa),Br.depthStencil=it(xa),Br.width=je.width,Br.height=je.height,Vt(je),Br}function Qr(Xr,yn){Ft(fr.next!==je,"can not resize a framebuffer which is currently in use");var dn=Math.max(Xr|0,1),An=Math.max(yn|0||dn,1);if(dn===je.width&&An===je.height)return Br;for(var Gn=je.colorAttachments,Pn=0;Pn<Gn.length;++Pn)ut(Gn[Pn],dn,An);return ut(je.depthAttachment,dn,An),ut(je.stencilAttachment,dn,An),ut(je.depthStencilAttachment,dn,An),je.width=Br.width=dn,je.height=Br.height=An,Vt(je),Br}return Br(Xe,Ve),B(Br,{resize:Qr,_reglType:"framebuffer",_framebuffer:je,destroy:function(){Qt(je),Rt(je)},use:function(Xr){fr.setFBO({framebuffer:Br},Xr)}})}function ke(Xe){var Ve=Array(6);function je(Qr){var Xr;Ft(Ve.indexOf(fr.next)<0,"can not update framebuffer which is currently in use");var yn={color:null},dn=0,An=null,Gn="rgba",Pn="uint8",Va=1;if(typeof Qr=="number")dn=Qr|0;else if(!Qr)dn=1;else{Ft.type(Qr,"object","invalid arguments for framebuffer");var Xn=Qr;if("shape"in Xn){var fi=Xn.shape;Ft(Array.isArray(fi)&&fi.length>=2,"invalid shape for framebuffer"),Ft(fi[0]===fi[1],"cube framebuffer must be square"),dn=fi[0]}else"radius"in Xn&&(dn=Xn.radius|0),"width"in Xn?(dn=Xn.width|0,"height"in Xn&&Ft(Xn.height===dn,"must be square")):"height"in Xn&&(dn=Xn.height|0);("color"in Xn||"colors"in Xn)&&(An=Xn.color||Xn.colors,Array.isArray(An)&&Ft(An.length===1||Jt.webgl_draw_buffers,"multiple render targets not supported")),An||("colorCount"in Xn&&(Va=Xn.colorCount|0,Ft(Va>0,"invalid color buffer count")),"colorType"in Xn&&(Ft.oneOf(Xn.colorType,Fr,"invalid color type"),Pn=Xn.colorType),"colorFormat"in Xn&&(Gn=Xn.colorFormat,Ft.oneOf(Xn.colorFormat,Lr,"invalid color format for texture"))),"depth"in Xn&&(yn.depth=Xn.depth),"stencil"in Xn&&(yn.stencil=Xn.stencil),"depthStencil"in Xn&&(yn.depthStencil=Xn.depthStencil)}var Fa;if(An)if(Array.isArray(An))for(Fa=[],Xr=0;Xr<An.length;++Xr)Fa[Xr]=An[Xr];else Fa=[An];else{Fa=Array(Va);var da={radius:dn,format:Gn,type:Pn};for(Xr=0;Xr<Va;++Xr)Fa[Xr]=ar.createCube(da)}for(yn.color=Array(Fa.length),Xr=0;Xr<Fa.length;++Xr){var Ya=Fa[Xr];Ft(typeof Ya=="function"&&Ya._reglType==="textureCube","invalid cube map"),dn=dn||Ya.width,Ft(Ya.width===dn&&Ya.height===dn,"invalid cube map shape"),yn.color[Xr]={target:Bf,data:Fa[Xr]}}for(Xr=0;Xr<6;++Xr){for(var ci=0;ci<Fa.length;++ci)yn.color[ci].target=Bf+Xr;Xr>0&&(yn.depth=Ve[0].depth,yn.stencil=Ve[0].stencil,yn.depthStencil=Ve[0].depthStencil),Ve[Xr]?Ve[Xr](yn):Ve[Xr]=xe(yn)}return B(je,{width:dn,height:dn,color:Fa})}function Br(Qr){var Xr,yn=Qr|0;if(Ft(yn>0&&yn<=Ee.maxCubeMapSize,"invalid radius for cube fbo"),yn===je.width)return je;var dn=je.color;for(Xr=0;Xr<dn.length;++Xr)dn[Xr].resize(yn);for(Xr=0;Xr<6;++Xr)Ve[Xr].resize(yn);return je.width=je.height=yn,je}return je(Xe),B(je,{faces:Ve,resize:Br,_reglType:"framebufferCube",destroy:function(){Ve.forEach(function(Qr){Qr.destroy()})}})}function dr(){fr.cur=null,fr.next=null,fr.dirty=!0,Ha(yt).forEach(function(Xe){Xe.framebuffer=gt.createFramebuffer(),Vt(Xe)})}return B(fr,{getFramebuffer:function(Xe){if(typeof Xe=="function"&&Xe._reglType==="framebuffer"){var Ve=Xe._framebuffer;if(Ve instanceof _t)return Ve}return null},create:xe,createCube:ke,clear:function(){Ha(yt).forEach(Qt)},restore:dr})}var lh=5126,zf=34962;function zc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=lh,this.offset=0,this.stride=0,this.divisor=0}function hh(gt,Jt,Ee,ar,Er){for(var nr=Ee.maxAttributes,fr=new Array(nr),Lr=0;Lr<nr;++Lr)fr[Lr]=new zc;var kr=0,Fr={},Rr={Record:zc,scope:{},state:fr,currentVAO:null,targetVAO:null,restore:v()?yt:function(){},createVAO:_t,getVAO:z,destroyBuffer:Wr,setVAO:v()?K:it,clear:v()?ut:function(){}};function Wr(Rt){for(var Qt=0;Qt<fr.length;++Qt){var Vt=fr[Qt];Vt.buffer===Rt&&(gt.disableVertexAttribArray(Qt),Vt.buffer=null)}}function v(){return Jt.oes_vertex_array_object}function A(){return Jt.angle_instanced_arrays}function z(Rt){return typeof Rt=="function"&&Rt._vao?Rt._vao:null}function K(Rt){if(Rt!==Rr.currentVAO){var Qt=v();Rt?Qt.bindVertexArrayOES(Rt.vao):Qt.bindVertexArrayOES(null),Rr.currentVAO=Rt}}function it(Rt){if(Rt!==Rr.currentVAO){if(Rt)Rt.bindAttrs();else for(var Qt=A(),Vt=0;Vt<fr.length;++Vt){var xe=fr[Vt];xe.buffer?(gt.enableVertexAttribArray(Vt),gt.vertexAttribPointer(Vt,xe.size,xe.type,xe.normalized,xe.stride,xe.offfset),Qt&&xe.divisor&&Qt.vertexAttribDivisorANGLE(Vt,xe.divisor)):(gt.disableVertexAttribArray(Vt),gt.vertexAttrib4f(Vt,xe.x,xe.y,xe.z,xe.w))}Rr.currentVAO=Rt}}function ut(){Ha(Fr).forEach(function(Rt){Rt.destroy()})}function vt(){this.id=++kr,this.attributes=[];var Rt=v();Rt?this.vao=Rt.createVertexArrayOES():this.vao=null,Fr[this.id]=this,this.buffers=[]}vt.prototype.bindAttrs=function(){for(var Rt=A(),Qt=this.attributes,Vt=0;Vt<Qt.length;++Vt){var xe=Qt[Vt];xe.buffer?(gt.enableVertexAttribArray(Vt),gt.bindBuffer(zf,xe.buffer.buffer),gt.vertexAttribPointer(Vt,xe.size,xe.type,xe.normalized,xe.stride,xe.offset),Rt&&xe.divisor&&Rt.vertexAttribDivisorANGLE(Vt,xe.divisor)):(gt.disableVertexAttribArray(Vt),gt.vertexAttrib4f(Vt,xe.x,xe.y,xe.z,xe.w))}for(var ke=Qt.length;ke<nr;++ke)gt.disableVertexAttribArray(ke)},vt.prototype.refresh=function(){var Rt=v();Rt&&(Rt.bindVertexArrayOES(this.vao),this.bindAttrs(),Rr.currentVAO=this)},vt.prototype.destroy=function(){if(this.vao){var Rt=v();this===Rr.currentVAO&&(Rr.currentVAO=null,Rt.bindVertexArrayOES(null)),Rt.deleteVertexArrayOES(this.vao),this.vao=null}Fr[this.id]&&(delete Fr[this.id],ar.vaoCount-=1)};function yt(){var Rt=v();Rt&&Ha(Fr).forEach(function(Qt){Qt.refresh()})}function _t(Rt){var Qt=new vt;ar.vaoCount+=1;function Vt(xe){Ft(Array.isArray(xe),"arguments to vertex array constructor must be an array"),Ft(xe.length<nr,"too many attributes"),Ft(xe.length>0,"must specify at least one attribute");var ke={},dr=Qt.attributes;dr.length=xe.length;for(var Xe=0;Xe<xe.length;++Xe){var Ve=xe[Xe],je=dr[Xe]=new zc,Br=Ve.data||Ve;if(Array.isArray(Br)||F(Br)||qa(Br)){var Qr;Qt.buffers[Xe]&&(Qr=Qt.buffers[Xe],F(Br)&&Qr._buffer.byteLength>=Br.byteLength?Qr.subdata(Br):(Qr.destroy(),Qt.buffers[Xe]=null)),Qt.buffers[Xe]||(Qr=Qt.buffers[Xe]=Er.create(Ve,zf,!1,!0)),je.buffer=Er.getBuffer(Qr),je.size=je.buffer.dimension|0,je.normalized=!1,je.type=je.buffer.dtype,je.offset=0,je.stride=0,je.divisor=0,je.state=1,ke[Xe]=1}else Er.getBuffer(Ve)?(je.buffer=Er.getBuffer(Ve),je.size=je.buffer.dimension|0,je.normalized=!1,je.type=je.buffer.dtype,je.offset=0,je.stride=0,je.divisor=0,je.state=1):Er.getBuffer(Ve.buffer)?(je.buffer=Er.getBuffer(Ve.buffer),je.size=(+Ve.size||je.buffer.dimension)|0,je.normalized=!!Ve.normalized||!1,"type"in Ve?(Ft.parameter(Ve.type,xi,"invalid buffer type"),je.type=xi[Ve.type]):je.type=je.buffer.dtype,je.offset=(Ve.offset||0)|0,je.stride=(Ve.stride||0)|0,je.divisor=(Ve.divisor||0)|0,je.state=1,Ft(je.size>=1&&je.size<=4,"size must be between 1 and 4"),Ft(je.offset>=0,"invalid offset"),Ft(je.stride>=0&&je.stride<=255,"stride must be between 0 and 255"),Ft(je.divisor>=0,"divisor must be positive"),Ft(!je.divisor||!!Jt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ve?(Ft(Xe>0,"first attribute must not be a constant"),je.x=+Ve.x||0,je.y=+Ve.y||0,je.z=+Ve.z||0,je.w=+Ve.w||0,je.state=2):Ft(!1,"invalid attribute spec for location "+Xe)}for(var Xr=0;Xr<Qt.buffers.length;++Xr)!ke[Xr]&&Qt.buffers[Xr]&&(Qt.buffers[Xr].destroy(),Qt.buffers[Xr]=null);return Qt.refresh(),Vt}return Vt.destroy=function(){for(var xe=0;xe<Qt.buffers.length;++xe)Qt.buffers[xe]&&Qt.buffers[xe].destroy();Qt.buffers.length=0,Qt.destroy()},Vt._vao=Qt,Vt._reglType="vao",Vt(Rt)}return Rr}var af=35632,Al=35633,dh=35718,Cl=35721;function Tl(gt,Jt,Ee,ar){var Er={},nr={};function fr(K,it,ut,vt){this.name=K,this.id=it,this.location=ut,this.info=vt}function Lr(K,it){for(var ut=0;ut<K.length;++ut)if(K[ut].id===it.id){K[ut].location=it.location;return}K.push(it)}function kr(K,it,ut){var vt=K===af?Er:nr,yt=vt[it];if(!yt){var _t=Jt.str(it);yt=gt.createShader(K),gt.shaderSource(yt,_t),gt.compileShader(yt),Ft.shaderError(gt,yt,_t,K,ut),vt[it]=yt}return yt}var Fr={},Rr=[],Wr=0;function v(K,it){this.id=Wr++,this.fragId=K,this.vertId=it,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ar.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function A(K,it,ut){var vt,yt,_t=kr(af,K.fragId),Rt=kr(Al,K.vertId),Qt=K.program=gt.createProgram();if(gt.attachShader(Qt,_t),gt.attachShader(Qt,Rt),ut)for(vt=0;vt<ut.length;++vt){var Vt=ut[vt];gt.bindAttribLocation(Qt,Vt[0],Vt[1])}gt.linkProgram(Qt),Ft.linkError(gt,Qt,Jt.str(K.fragId),Jt.str(K.vertId),it);var xe=gt.getProgramParameter(Qt,dh);ar.profile&&(K.stats.uniformsCount=xe);var ke=K.uniforms;for(vt=0;vt<xe;++vt)if(yt=gt.getActiveUniform(Qt,vt),yt)if(yt.size>1)for(var dr=0;dr<yt.size;++dr){var Xe=yt.name.replace("[0]","["+dr+"]");Lr(ke,new fr(Xe,Jt.id(Xe),gt.getUniformLocation(Qt,Xe),yt))}else Lr(ke,new fr(yt.name,Jt.id(yt.name),gt.getUniformLocation(Qt,yt.name),yt));var Ve=gt.getProgramParameter(Qt,Cl);ar.profile&&(K.stats.attributesCount=Ve);var je=K.attributes;for(vt=0;vt<Ve;++vt)yt=gt.getActiveAttrib(Qt,vt),yt&&Lr(je,new fr(yt.name,Jt.id(yt.name),gt.getAttribLocation(Qt,yt.name),yt))}ar.profile&&(Ee.getMaxUniformsCount=function(){var K=0;return Rr.forEach(function(it){it.stats.uniformsCount>K&&(K=it.stats.uniformsCount)}),K},Ee.getMaxAttributesCount=function(){var K=0;return Rr.forEach(function(it){it.stats.attributesCount>K&&(K=it.stats.attributesCount)}),K});function z(){Er={},nr={};for(var K=0;K<Rr.length;++K)A(Rr[K],null,Rr[K].attributes.map(function(it){return[it.location,it.name]}))}return{clear:function(){var K=gt.deleteShader.bind(gt);Ha(Er).forEach(K),Er={},Ha(nr).forEach(K),nr={},Rr.forEach(function(it){gt.deleteProgram(it.program)}),Rr.length=0,Fr={},Ee.shaderCount=0},program:function(K,it,ut,vt){Ft.command(K>=0,"missing vertex shader",ut),Ft.command(it>=0,"missing fragment shader",ut);var yt=Fr[it];yt||(yt=Fr[it]={});var _t=yt[K];if(_t&&(_t.refCount++,!vt))return _t;var Rt=new v(it,K);return Ee.shaderCount++,A(Rt,ut,vt),_t||(yt[K]=Rt),Rr.push(Rt),B(Rt,{destroy:function(){if(Rt.refCount--,Rt.refCount<=0){gt.deleteProgram(Rt.program);var Qt=Rr.indexOf(Rt);Rr.splice(Qt,1),Ee.shaderCount--}yt[Rt.vertId].refCount<=0&&(gt.deleteShader(nr[Rt.vertId]),delete nr[Rt.vertId],delete Fr[Rt.fragId][Rt.vertId]),Object.keys(Fr[Rt.fragId]).length||(gt.deleteShader(Er[Rt.fragId]),delete Er[Rt.fragId],delete Fr[Rt.fragId])}})},restore:z,shader:kr,frag:-1,vert:-1}}var of=6408,Su=5121,Mu=3333,Uf=5126;function Wf(gt,Jt,Ee,ar,Er,nr,fr){function Lr(Rr){var Wr;Jt.next===null?(Ft(Er.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Wr=Su):(Ft(Jt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Wr=Jt.next.colorAttachments[0].texture._texture.type,nr.oes_texture_float?(Ft(Wr===Su||Wr===Uf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Wr===Uf&&Ft(fr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ft(Wr===Su,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,A=0,z=ar.framebufferWidth,K=ar.framebufferHeight,it=null;F(Rr)?it=Rr:Rr&&(Ft.type(Rr,"object","invalid arguments to regl.read()"),v=Rr.x|0,A=Rr.y|0,Ft(v>=0&&v<ar.framebufferWidth,"invalid x offset for regl.read"),Ft(A>=0&&A<ar.framebufferHeight,"invalid y offset for regl.read"),z=(Rr.width||ar.framebufferWidth-v)|0,K=(Rr.height||ar.framebufferHeight-A)|0,it=Rr.data||null),it&&(Wr===Su?Ft(it instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Wr===Uf&&Ft(it instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ft(z>0&&z+v<=ar.framebufferWidth,"invalid width for read pixels"),Ft(K>0&&K+A<=ar.framebufferHeight,"invalid height for read pixels"),Ee();var ut=z*K*4;return it||(Wr===Su?it=new Uint8Array(ut):Wr===Uf&&(it=it||new Float32Array(ut))),Ft.isTypedArray(it,"data buffer for regl.read() must be a typedarray"),Ft(it.byteLength>=ut,"data buffer for regl.read() too small"),gt.pixelStorei(Mu,4),gt.readPixels(v,A,z,K,of,Wr,it),it}function kr(Rr){var Wr;return Jt.setFBO({framebuffer:Rr.framebuffer},function(){Wr=Lr(Rr)}),Wr}function Fr(Rr){return!Rr||!("framebuffer"in Rr)?Lr(Rr):kr(Rr)}return Fr}function Gi(gt){return Array.prototype.slice.call(gt)}function iu(gt){return Gi(gt).join("")}function Il(){var gt=0,Jt=[],Ee=[];function ar(Wr){for(var v=0;v<Ee.length;++v)if(Ee[v]===Wr)return Jt[v];var A="g"+gt++;return Jt.push(A),Ee.push(Wr),A}function Er(){var Wr=[];function v(){Wr.push.apply(Wr,Gi(arguments))}var A=[];function z(){var K="v"+gt++;return A.push(K),arguments.length>0&&(Wr.push(K,"="),Wr.push.apply(Wr,Gi(arguments)),Wr.push(";")),K}return B(v,{def:z,toString:function(){return iu([A.length>0?"var "+A.join(",")+";":"",iu(Wr)])}})}function nr(){var Wr=Er(),v=Er(),A=Wr.toString,z=v.toString;function K(it,ut){v(it,ut,"=",Wr.def(it,ut),";")}return B(function(){Wr.apply(Wr,Gi(arguments))},{def:Wr.def,entry:Wr,exit:v,save:K,set:function(it,ut,vt){K(it,ut),Wr(it,ut,"=",vt,";")},toString:function(){return A()+z()}})}function fr(){var Wr=iu(arguments),v=nr(),A=nr(),z=v.toString,K=A.toString;return B(v,{then:function(){return v.apply(v,Gi(arguments)),this},else:function(){return A.apply(A,Gi(arguments)),this},toString:function(){var it=K();return it&&(it="else{"+it+"}"),iu(["if(",Wr,"){",z(),"}",it])}})}var Lr=Er(),kr={};function Fr(Wr,v){var A=[];function z(){var yt="a"+A.length;return A.push(yt),yt}v=v||0;for(var K=0;K<v;++K)z();var it=nr(),ut=it.toString,vt=kr[Wr]=B(it,{arg:z,toString:function(){return iu(["function(",A.join(),"){",ut(),"}"])}});return vt}function Rr(){var Wr=['"use strict";',Lr,"return {"];Object.keys(kr).forEach(function(z){Wr.push('"',z,'":',kr[z].toString(),",")}),Wr.push("}");var v=iu(Wr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),A=Function.apply(null,Jt.concat(v));return A.apply(null,Ee)}return{global:Lr,link:ar,block:Er,proc:Fr,scope:nr,cond:fr,compile:Rr}}var ou="xyzw".split(""),sf=5121,Zo=1,Es=2,Xf=0,Yf=1,Uc=2,Ro=3,uf=4,ff=5,Vf=6,Wc="dither",Ol="blend.enable",Ll="blend.color",cf="blend.equation",jf="blend.func",Dl="depth.enable",vh="depth.func",Nl="depth.range",Au="depth.mask",Hf="colorMask",Ie="cull.enable",gh="cull.face",lf="frontFace",hf="lineWidth",Xc="polygonOffset.enable",Yc="polygonOffset.offset",Vc="sample.alpha",Pl="sample.enable",su="sample.coverage",Kf="stencil.enable",df="stencil.mask",Cu="stencil.func",Ii="stencil.opFront",Tu="stencil.opBack",jc="scissor.enable",Gs="scissor.box",hs="viewport",Iu="profile",uu="framebuffer",ws="vert",Ou="frag",fu="elements",zs="primitive",_s="count",Zf="offset",$f="instances",Lu="vao",Qf="Width",qf="Height",Du=uu+Qf,$o=uu+qf,Jf=hs+Qf,Ss=hs+qf,tc="drawingBuffer",Hc=tc+Qf,ec=tc+qf,kl=[jf,cf,Cu,Ii,Tu,su,hs,Gs,Yc],cu=34962,Kc=34963,rc=35632,ph=35633,Rl=3553,Bl=34067,yh=2884,Fl=3042,Gl=3024,mh=2960,zl=2929,vf=3089,Ul=32823,Nu=32926,Zc=32928,lu=5126,nc=35664,ac=35665,gf=35666,Us=5124,Pu=35667,ku=35668,pf=35669,ic=35670,oc=35671,yf=35672,sc=35673,uc=35674,mf=35675,Ru=35676,Bu=35678,Fu=35680,Wl=4,bf=1028,hu=1029,Xl=2304,xf=2305,bh=32775,Yl=32776,jh=519,Ms=7680,Vl=0,jl=1,Hl=32774,Kl=513,$c=36160,xh=36064,qi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Gu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},As={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Zl={frag:rc,vert:ph},fc={cw:Xl,ccw:xf};function Ef(gt){return Array.isArray(gt)||F(gt)||qa(gt)}function rs(gt){return gt.sort(function(Jt,Ee){return Jt===hs?-1:Ee===hs?1:Jt<Ee?-1:1})}function so(gt,Jt,Ee,ar){this.thisDep=gt,this.contextDep=Jt,this.propDep=Ee,this.append=ar}function Cs(gt){return gt&&!(gt.thisDep||gt.contextDep||gt.propDep)}function hi(gt){return new so(!1,!1,!1,gt)}function Ba(gt,Jt){var Ee=gt.type;if(Ee===Xf){var ar=gt.data.length;return new so(!0,ar>=1,ar>=2,Jt)}else if(Ee===uf){var Er=gt.data;return new so(Er.thisDep,Er.contextDep,Er.propDep,Jt)}else{if(Ee===ff)return new so(!1,!1,!1,Jt);if(Ee===Vf){for(var nr=!1,fr=!1,Lr=!1,kr=0;kr<gt.data.length;++kr){var Fr=gt.data[kr];if(Fr.type===Yf)Lr=!0;else if(Fr.type===Uc)fr=!0;else if(Fr.type===Ro)nr=!0;else if(Fr.type===Xf){nr=!0;var Rr=Fr.data;Rr>=1&&(fr=!0),Rr>=2&&(Lr=!0)}else Fr.type===uf&&(nr=nr||Fr.data.thisDep,fr=fr||Fr.data.contextDep,Lr=Lr||Fr.data.propDep)}return new so(nr,fr,Lr,Jt)}else return new so(Ee===Ro,Ee===Uc,Ee===Yf,Jt)}}var du=new so(!1,!1,!1,function(){});function zu(gt,Jt,Ee,ar,Er,nr,fr,Lr,kr,Fr,Rr,Wr,v,A,z){var K=Fr.Record,it={add:32774,subtract:32778,"reverse subtract":32779};Ee.ext_blend_minmax&&(it.min=bh,it.max=Yl);var ut=Ee.angle_instanced_arrays,vt=Ee.webgl_draw_buffers,yt={dirty:!0,profile:z.profile},_t={},Rt=[],Qt={},Vt={};function xe(oe){return oe.replace(".","_")}function ke(oe,jt,Ae){var He=xe(oe);Rt.push(oe),_t[He]=yt[He]=!!Ae,Qt[He]=jt}function dr(oe,jt,Ae){var He=xe(oe);Rt.push(oe),Array.isArray(Ae)?(yt[He]=Ae.slice(),_t[He]=Ae.slice()):yt[He]=_t[He]=Ae,Vt[He]=jt}ke(Wc,Gl),ke(Ol,Fl),dr(Ll,"blendColor",[0,0,0,0]),dr(cf,"blendEquationSeparate",[Hl,Hl]),dr(jf,"blendFuncSeparate",[jl,Vl,jl,Vl]),ke(Dl,zl,!0),dr(vh,"depthFunc",Kl),dr(Nl,"depthRange",[0,1]),dr(Au,"depthMask",!0),dr(Hf,Hf,[!0,!0,!0,!0]),ke(Ie,yh),dr(gh,"cullFace",hu),dr(lf,lf,xf),dr(hf,hf,1),ke(Xc,Ul),dr(Yc,"polygonOffset",[0,0]),ke(Vc,Nu),ke(Pl,Zc),dr(su,"sampleCoverage",[1,!1]),ke(Kf,mh),dr(df,"stencilMask",-1),dr(Cu,"stencilFunc",[jh,0,-1]),dr(Ii,"stencilOpSeparate",[bf,Ms,Ms,Ms]),dr(Tu,"stencilOpSeparate",[hu,Ms,Ms,Ms]),ke(jc,vf),dr(Gs,"scissor",[0,0,gt.drawingBufferWidth,gt.drawingBufferHeight]),dr(hs,hs,[0,0,gt.drawingBufferWidth,gt.drawingBufferHeight]);var Xe={gl:gt,context:v,strings:Jt,next:_t,current:yt,draw:Wr,elements:nr,buffer:Er,shader:Rr,attributes:Fr.state,vao:Fr,uniforms:kr,framebuffer:Lr,extensions:Ee,timer:A,isBufferArgs:Ef},Ve={primTypes:Ri,compareFuncs:Gu,blendFuncs:qi,blendEquations:it,stencilOps:As,glTypes:xi,orientationType:fc};Ft.optional(function(){Xe.isArrayLike=ta}),vt&&(Ve.backBuffer=[hu],Ve.drawBuffer=_n(ar.maxDrawbuffers,function(oe){return oe===0?[0]:_n(oe,function(jt){return xh+jt})}));var je=0;function Br(){var oe=Il(),jt=oe.link,Ae=oe.global;oe.id=je++,oe.batchId="0";var He=jt(Xe),qe=oe.shared={props:"a0"};Object.keys(Xe).forEach(function(Ce){qe[Ce]=Ae.def(He,".",Ce)}),Ft.optional(function(){oe.CHECK=jt(Ft),oe.commandStr=Ft.guessCommand(),oe.command=jt(oe.commandStr),oe.assert=function(Ce,re,Ye){Ce("if(!(",re,"))",this.CHECK,".commandRaise(",jt(Ye),",",this.command,");")},Ve.invalidBlendCombinations=Qc});var Ne=oe.next={},Oe=oe.current={};Object.keys(Vt).forEach(function(Ce){Array.isArray(yt[Ce])&&(Ne[Ce]=Ae.def(qe.next,".",Ce),Oe[Ce]=Ae.def(qe.current,".",Ce))});var We=oe.constants={};Object.keys(Ve).forEach(function(Ce){We[Ce]=Ae.def(JSON.stringify(Ve[Ce]))}),oe.invoke=function(Ce,re){switch(re.type){case Xf:var Ye=["this",qe.context,qe.props,oe.batchId];return Ce.def(jt(re.data),".call(",Ye.slice(0,Math.max(re.data.length+1,4)),")");case Yf:return Ce.def(qe.props,re.data);case Uc:return Ce.def(qe.context,re.data);case Ro:return Ce.def("this",re.data);case uf:return re.data.append(oe,Ce),re.data.ref;case ff:return re.data.toString();case Vf:return re.data.map(function(er){return oe.invoke(Ce,er)})}},oe.attribCache={};var se={};return oe.scopeAttrib=function(Ce){var re=Jt.id(Ce);if(re in se)return se[re];var Ye=Fr.scope[re];Ye||(Ye=Fr.scope[re]=new K);var er=se[re]=jt(Ye);return er},oe}function Qr(oe){var jt=oe.static,Ae=oe.dynamic,He;if(Iu in jt){var qe=!!jt[Iu];He=hi(function(Oe,We){return qe}),He.enable=qe}else if(Iu in Ae){var Ne=Ae[Iu];He=Ba(Ne,function(Oe,We){return Oe.invoke(We,Ne)})}return He}function Xr(oe,jt){var Ae=oe.static,He=oe.dynamic;if(uu in Ae){var qe=Ae[uu];return qe?(qe=Lr.getFramebuffer(qe),Ft.command(qe,"invalid framebuffer object"),hi(function(Oe,We){var se=Oe.link(qe),Ce=Oe.shared;We.set(Ce.framebuffer,".next",se);var re=Ce.context;return We.set(re,"."+Du,se+".width"),We.set(re,"."+$o,se+".height"),se})):hi(function(Oe,We){var se=Oe.shared;We.set(se.framebuffer,".next","null");var Ce=se.context;return We.set(Ce,"."+Du,Ce+"."+Hc),We.set(Ce,"."+$o,Ce+"."+ec),"null"})}else if(uu in He){var Ne=He[uu];return Ba(Ne,function(Oe,We){var se=Oe.invoke(We,Ne),Ce=Oe.shared,re=Ce.framebuffer,Ye=We.def(re,".getFramebuffer(",se,")");Ft.optional(function(){Oe.assert(We,"!"+se+"||"+Ye,"invalid framebuffer object")}),We.set(re,".next",Ye);var er=Ce.context;return We.set(er,"."+Du,Ye+"?"+Ye+".width:"+er+"."+Hc),We.set(er,"."+$o,Ye+"?"+Ye+".height:"+er+"."+ec),Ye})}else return null}function yn(oe,jt,Ae){var He=oe.static,qe=oe.dynamic;function Ne(se){if(se in He){var Ce=He[se];Ft.commandType(Ce,"object","invalid "+se,Ae.commandStr);var re=!0,Ye=Ce.x|0,er=Ce.y|0,mr,Ar;return"width"in Ce?(mr=Ce.width|0,Ft.command(mr>=0,"invalid "+se,Ae.commandStr)):re=!1,"height"in Ce?(Ar=Ce.height|0,Ft.command(Ar>=0,"invalid "+se,Ae.commandStr)):re=!1,new so(!re&&jt&&jt.thisDep,!re&&jt&&jt.contextDep,!re&&jt&&jt.propDep,function(En,Jn){var hn=En.shared.context,On=mr;"width"in Ce||(On=Jn.def(hn,".",Du,"-",Ye));var Hn=Ar;return"height"in Ce||(Hn=Jn.def(hn,".",$o,"-",er)),[Ye,er,On,Hn]})}else if(se in qe){var vr=qe[se],Ur=Ba(vr,function(En,Jn){var hn=En.invoke(Jn,vr);Ft.optional(function(){En.assert(Jn,hn+"&&typeof "+hn+'==="object"',"invalid "+se)});var On=En.shared.context,Hn=Jn.def(hn,".x|0"),Ta=Jn.def(hn,".y|0"),ri=Jn.def('"width" in ',hn,"?",hn,".width|0:","(",On,".",Du,"-",Hn,")"),Bo=Jn.def('"height" in ',hn,"?",hn,".height|0:","(",On,".",$o,"-",Ta,")");return Ft.optional(function(){En.assert(Jn,ri+">=0&&"+Bo+">=0","invalid "+se)}),[Hn,Ta,ri,Bo]});return jt&&(Ur.thisDep=Ur.thisDep||jt.thisDep,Ur.contextDep=Ur.contextDep||jt.contextDep,Ur.propDep=Ur.propDep||jt.propDep),Ur}else return jt?new so(jt.thisDep,jt.contextDep,jt.propDep,function(En,Jn){var hn=En.shared.context;return[0,0,Jn.def(hn,".",Du),Jn.def(hn,".",$o)]}):null}var Oe=Ne(hs);if(Oe){var We=Oe;Oe=new so(Oe.thisDep,Oe.contextDep,Oe.propDep,function(se,Ce){var re=We.append(se,Ce),Ye=se.shared.context;return Ce.set(Ye,"."+Jf,re[2]),Ce.set(Ye,"."+Ss,re[3]),re})}return{viewport:Oe,scissor_box:Ne(Gs)}}function dn(oe,jt){var Ae=oe.static,He=typeof Ae[Ou]=="string"&&typeof Ae[ws]=="string";if(He){if(Object.keys(jt.dynamic).length>0)return null;var qe=jt.static,Ne=Object.keys(qe);if(Ne.length>0&&typeof qe[Ne[0]]=="number"){for(var Oe=[],We=0;We<Ne.length;++We)Ft(typeof qe[Ne[We]]=="number","must specify all vertex attribute locations when using vaos"),Oe.push([qe[Ne[We]]|0,Ne[We]]);return Oe}}return null}function An(oe,jt,Ae){var He=oe.static,qe=oe.dynamic;function Ne(re){if(re in He){var Ye=Jt.id(He[re]);Ft.optional(function(){Rr.shader(Zl[re],Ye,Ft.guessCommand())});var er=hi(function(){return Ye});return er.id=Ye,er}else if(re in qe){var mr=qe[re];return Ba(mr,function(Ar,vr){var Ur=Ar.invoke(vr,mr),En=vr.def(Ar.shared.strings,".id(",Ur,")");return Ft.optional(function(){vr(Ar.shared.shader,".shader(",Zl[re],",",En,",",Ar.command,");")}),En})}return null}var Oe=Ne(Ou),We=Ne(ws),se=null,Ce;return Cs(Oe)&&Cs(We)?(se=Rr.program(We.id,Oe.id,null,Ae),Ce=hi(function(re,Ye){return re.link(se)})):Ce=new so(Oe&&Oe.thisDep||We&&We.thisDep,Oe&&Oe.contextDep||We&&We.contextDep,Oe&&Oe.propDep||We&&We.propDep,function(re,Ye){var er=re.shared.shader,mr;Oe?mr=Oe.append(re,Ye):mr=Ye.def(er,".",Ou);var Ar;We?Ar=We.append(re,Ye):Ar=Ye.def(er,".",ws);var vr=er+".program("+Ar+","+mr;return Ft.optional(function(){vr+=","+re.command}),Ye.def(vr+")")}),{frag:Oe,vert:We,progVar:Ce,program:se}}function Gn(oe,jt){var Ae=oe.static,He=oe.dynamic;function qe(){if(fu in Ae){var re=Ae[fu];Ef(re)?re=nr.getElements(nr.create(re,!0)):re&&(re=nr.getElements(re),Ft.command(re,"invalid elements",jt.commandStr));var Ye=hi(function(mr,Ar){if(re){var vr=mr.link(re);return mr.ELEMENTS=vr,vr}return mr.ELEMENTS=null,null});return Ye.value=re,Ye}else if(fu in He){var er=He[fu];return Ba(er,function(mr,Ar){var vr=mr.shared,Ur=vr.isBufferArgs,En=vr.elements,Jn=mr.invoke(Ar,er),hn=Ar.def("null"),On=Ar.def(Ur,"(",Jn,")"),Hn=mr.cond(On).then(hn,"=",En,".createStream(",Jn,");").else(hn,"=",En,".getElements(",Jn,");");return Ft.optional(function(){mr.assert(Hn.else,"!"+Jn+"||"+hn,"invalid elements")}),Ar.entry(Hn),Ar.exit(mr.cond(On).then(En,".destroyStream(",hn,");")),mr.ELEMENTS=hn,hn})}return null}var Ne=qe();function Oe(){if(zs in Ae){var re=Ae[zs];return Ft.commandParameter(re,Ri,"invalid primitve",jt.commandStr),hi(function(er,mr){return Ri[re]})}else if(zs in He){var Ye=He[zs];return Ba(Ye,function(er,mr){var Ar=er.constants.primTypes,vr=er.invoke(mr,Ye);return Ft.optional(function(){er.assert(mr,vr+" in "+Ar,"invalid primitive, must be one of "+Object.keys(Ri))}),mr.def(Ar,"[",vr,"]")})}else if(Ne)return Cs(Ne)?Ne.value?hi(function(er,mr){return mr.def(er.ELEMENTS,".primType")}):hi(function(){return Wl}):new so(Ne.thisDep,Ne.contextDep,Ne.propDep,function(er,mr){var Ar=er.ELEMENTS;return mr.def(Ar,"?",Ar,".primType:",Wl)});return null}function We(re,Ye){if(re in Ae){var er=Ae[re]|0;return Ft.command(!Ye||er>=0,"invalid "+re,jt.commandStr),hi(function(Ar,vr){return Ye&&(Ar.OFFSET=er),er})}else if(re in He){var mr=He[re];return Ba(mr,function(Ar,vr){var Ur=Ar.invoke(vr,mr);return Ye&&(Ar.OFFSET=Ur,Ft.optional(function(){Ar.assert(vr,Ur+">=0","invalid "+re)})),Ur})}else if(Ye&&Ne)return hi(function(Ar,vr){return Ar.OFFSET="0",0});return null}var se=We(Zf,!0);function Ce(){if(_s in Ae){var re=Ae[_s]|0;return Ft.command(typeof re=="number"&&re>=0,"invalid vertex count",jt.commandStr),hi(function(){return re})}else if(_s in He){var Ye=He[_s];return Ba(Ye,function(Ar,vr){var Ur=Ar.invoke(vr,Ye);return Ft.optional(function(){Ar.assert(vr,"typeof "+Ur+'==="number"&&'+Ur+">=0&&"+Ur+"===("+Ur+"|0)","invalid vertex count")}),Ur})}else if(Ne)if(Cs(Ne)){if(Ne)return se?new so(se.thisDep,se.contextDep,se.propDep,function(Ar,vr){var Ur=vr.def(Ar.ELEMENTS,".vertCount-",Ar.OFFSET);return Ft.optional(function(){Ar.assert(vr,Ur+">=0","invalid vertex offset/element buffer too small")}),Ur}):hi(function(Ar,vr){return vr.def(Ar.ELEMENTS,".vertCount")});var er=hi(function(){return-1});return Ft.optional(function(){er.MISSING=!0}),er}else{var mr=new so(Ne.thisDep||se.thisDep,Ne.contextDep||se.contextDep,Ne.propDep||se.propDep,function(Ar,vr){var Ur=Ar.ELEMENTS;return Ar.OFFSET?vr.def(Ur,"?",Ur,".vertCount-",Ar.OFFSET,":-1"):vr.def(Ur,"?",Ur,".vertCount:-1")});return Ft.optional(function(){mr.DYNAMIC=!0}),mr}return null}return{elements:Ne,primitive:Oe(),count:Ce(),instances:We($f,!1),offset:se}}function Pn(oe,jt){var Ae=oe.static,He=oe.dynamic,qe={};return Rt.forEach(function(Ne){var Oe=xe(Ne);function We(se,Ce){if(Ne in Ae){var re=se(Ae[Ne]);qe[Oe]=hi(function(){return re})}else if(Ne in He){var Ye=He[Ne];qe[Oe]=Ba(Ye,function(er,mr){return Ce(er,mr,er.invoke(mr,Ye))})}}switch(Ne){case Ie:case Ol:case Wc:case Kf:case Dl:case jc:case Xc:case Vc:case Pl:case Au:return We(function(se){return Ft.commandType(se,"boolean",Ne,jt.commandStr),se},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,"typeof "+re+'==="boolean"',"invalid flag "+Ne,se.commandStr)}),re});case vh:return We(function(se){return Ft.commandParameter(se,Gu,"invalid "+Ne,jt.commandStr),Gu[se]},function(se,Ce,re){var Ye=se.constants.compareFuncs;return Ft.optional(function(){se.assert(Ce,re+" in "+Ye,"invalid "+Ne+", must be one of "+Object.keys(Gu))}),Ce.def(Ye,"[",re,"]")});case Nl:return We(function(se){return Ft.command(ta(se)&&se.length===2&&typeof se[0]=="number"&&typeof se[1]=="number"&&se[0]<=se[1],"depth range is 2d array",jt.commandStr),se},function(se,Ce,re){Ft.optional(function(){se.assert(Ce,se.shared.isArrayLike+"("+re+")&&"+re+".length===2&&typeof "+re+'[0]==="number"&&typeof '+re+'[1]==="number"&&'+re+"[0]<="+re+"[1]","depth range must be a 2d array")});var Ye=Ce.def("+",re,"[0]"),er=Ce.def("+",re,"[1]");return[Ye,er]});case jf:return We(function(se){Ft.commandType(se,"object","blend.func",jt.commandStr);var Ce="srcRGB"in se?se.srcRGB:se.src,re="srcAlpha"in se?se.srcAlpha:se.src,Ye="dstRGB"in se?se.dstRGB:se.dst,er="dstAlpha"in se?se.dstAlpha:se.dst;return Ft.commandParameter(Ce,qi,Oe+".srcRGB",jt.commandStr),Ft.commandParameter(re,qi,Oe+".srcAlpha",jt.commandStr),Ft.commandParameter(Ye,qi,Oe+".dstRGB",jt.commandStr),Ft.commandParameter(er,qi,Oe+".dstAlpha",jt.commandStr),Ft.command(Qc.indexOf(Ce+", "+Ye)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ce+", "+Ye+")",jt.commandStr),[qi[Ce],qi[Ye],qi[re],qi[er]]},function(se,Ce,re){var Ye=se.constants.blendFuncs;Ft.optional(function(){se.assert(Ce,re+"&&typeof "+re+'==="object"',"invalid blend func, must be an object")});function er(hn,On){var Hn=Ce.def('"',hn,On,'" in ',re,"?",re,".",hn,On,":",re,".",hn);return Ft.optional(function(){se.assert(Ce,Hn+" in "+Ye,"invalid "+Ne+"."+hn+On+", must be one of "+Object.keys(qi))}),Hn}var mr=er("src","RGB"),Ar=er("dst","RGB");Ft.optional(function(){var hn=se.constants.invalidBlendCombinations;se.assert(Ce,hn+".indexOf("+mr+'+", "+'+Ar+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var vr=Ce.def(Ye,"[",mr,"]"),Ur=Ce.def(Ye,"[",er("src","Alpha"),"]"),En=Ce.def(Ye,"[",Ar,"]"),Jn=Ce.def(Ye,"[",er("dst","Alpha"),"]");return[vr,En,Ur,Jn]});case cf:return We(function(se){if(typeof se=="string")return Ft.commandParameter(se,it,"invalid "+Ne,jt.commandStr),[it[se],it[se]];if(typeof se=="object")return Ft.commandParameter(se.rgb,it,Ne+".rgb",jt.commandStr),Ft.commandParameter(se.alpha,it,Ne+".alpha",jt.commandStr),[it[se.rgb],it[se.alpha]];Ft.commandRaise("invalid blend.equation",jt.commandStr)},function(se,Ce,re){var Ye=se.constants.blendEquations,er=Ce.def(),mr=Ce.def(),Ar=se.cond("typeof ",re,'==="string"');return Ft.optional(function(){function vr(Ur,En,Jn){se.assert(Ur,Jn+" in "+Ye,"invalid "+En+", must be one of "+Object.keys(it))}vr(Ar.then,Ne,re),se.assert(Ar.else,re+"&&typeof "+re+'==="object"',"invalid "+Ne),vr(Ar.else,Ne+".rgb",re+".rgb"),vr(Ar.else,Ne+".alpha",re+".alpha")}),Ar.then(er,"=",mr,"=",Ye,"[",re,"];"),Ar.else(er,"=",Ye,"[",re,".rgb];",mr,"=",Ye,"[",re,".alpha];"),Ce(Ar),[er,mr]});case Ll:return We(function(se){return Ft.command(ta(se)&&se.length===4,"blend.color must be a 4d array",jt.commandStr),_n(4,function(Ce){return+se[Ce]})},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,se.shared.isArrayLike+"("+re+")&&"+re+".length===4","blend.color must be a 4d array")}),_n(4,function(Ye){return Ce.def("+",re,"[",Ye,"]")})});case df:return We(function(se){return Ft.commandType(se,"number",Oe,jt.commandStr),se|0},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,"typeof "+re+'==="number"',"invalid stencil.mask")}),Ce.def(re,"|0")});case Cu:return We(function(se){Ft.commandType(se,"object",Oe,jt.commandStr);var Ce=se.cmp||"keep",re=se.ref||0,Ye="mask"in se?se.mask:-1;return Ft.commandParameter(Ce,Gu,Ne+".cmp",jt.commandStr),Ft.commandType(re,"number",Ne+".ref",jt.commandStr),Ft.commandType(Ye,"number",Ne+".mask",jt.commandStr),[Gu[Ce],re,Ye]},function(se,Ce,re){var Ye=se.constants.compareFuncs;Ft.optional(function(){function vr(){se.assert(Ce,Array.prototype.join.call(arguments,""),"invalid stencil.func")}vr(re+"&&typeof ",re,'==="object"'),vr('!("cmp" in ',re,")||(",re,".cmp in ",Ye,")")});var er=Ce.def('"cmp" in ',re,"?",Ye,"[",re,".cmp]",":",Ms),mr=Ce.def(re,".ref|0"),Ar=Ce.def('"mask" in ',re,"?",re,".mask|0:-1");return[er,mr,Ar]});case Ii:case Tu:return We(function(se){Ft.commandType(se,"object",Oe,jt.commandStr);var Ce=se.fail||"keep",re=se.zfail||"keep",Ye=se.zpass||"keep";return Ft.commandParameter(Ce,As,Ne+".fail",jt.commandStr),Ft.commandParameter(re,As,Ne+".zfail",jt.commandStr),Ft.commandParameter(Ye,As,Ne+".zpass",jt.commandStr),[Ne===Tu?hu:bf,As[Ce],As[re],As[Ye]]},function(se,Ce,re){var Ye=se.constants.stencilOps;Ft.optional(function(){se.assert(Ce,re+"&&typeof "+re+'==="object"',"invalid "+Ne)});function er(mr){return Ft.optional(function(){se.assert(Ce,'!("'+mr+'" in '+re+")||("+re+"."+mr+" in "+Ye+")","invalid "+Ne+"."+mr+", must be one of "+Object.keys(As))}),Ce.def('"',mr,'" in ',re,"?",Ye,"[",re,".",mr,"]:",Ms)}return[Ne===Tu?hu:bf,er("fail"),er("zfail"),er("zpass")]});case Yc:return We(function(se){Ft.commandType(se,"object",Oe,jt.commandStr);var Ce=se.factor|0,re=se.units|0;return Ft.commandType(Ce,"number",Oe+".factor",jt.commandStr),Ft.commandType(re,"number",Oe+".units",jt.commandStr),[Ce,re]},function(se,Ce,re){Ft.optional(function(){se.assert(Ce,re+"&&typeof "+re+'==="object"',"invalid "+Ne)});var Ye=Ce.def(re,".factor|0"),er=Ce.def(re,".units|0");return[Ye,er]});case gh:return We(function(se){var Ce=0;return se==="front"?Ce=bf:se==="back"&&(Ce=hu),Ft.command(!!Ce,Oe,jt.commandStr),Ce},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,re+'==="front"||'+re+'==="back"',"invalid cull.face")}),Ce.def(re,'==="front"?',bf,":",hu)});case hf:return We(function(se){return Ft.command(typeof se=="number"&&se>=ar.lineWidthDims[0]&&se<=ar.lineWidthDims[1],"invalid line width, must be a positive number between "+ar.lineWidthDims[0]+" and "+ar.lineWidthDims[1],jt.commandStr),se},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,"typeof "+re+'==="number"&&'+re+">="+ar.lineWidthDims[0]+"&&"+re+"<="+ar.lineWidthDims[1],"invalid line width")}),re});case lf:return We(function(se){return Ft.commandParameter(se,fc,Oe,jt.commandStr),fc[se]},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,re+'==="cw"||'+re+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ce.def(re+'==="cw"?'+Xl+":"+xf)});case Hf:return We(function(se){return Ft.command(ta(se)&&se.length===4,"color.mask must be length 4 array",jt.commandStr),se.map(function(Ce){return!!Ce})},function(se,Ce,re){return Ft.optional(function(){se.assert(Ce,se.shared.isArrayLike+"("+re+")&&"+re+".length===4","invalid color.mask")}),_n(4,function(Ye){return"!!"+re+"["+Ye+"]"})});case su:return We(function(se){Ft.command(typeof se=="object"&&se,Oe,jt.commandStr);var Ce="value"in se?se.value:1,re=!!se.invert;return Ft.command(typeof Ce=="number"&&Ce>=0&&Ce<=1,"sample.coverage.value must be a number between 0 and 1",jt.commandStr),[Ce,re]},function(se,Ce,re){Ft.optional(function(){se.assert(Ce,re+"&&typeof "+re+'==="object"',"invalid sample.coverage")});var Ye=Ce.def('"value" in ',re,"?+",re,".value:1"),er=Ce.def("!!",re,".invert");return[Ye,er]})}}),qe}function Va(oe,jt){var Ae=oe.static,He=oe.dynamic,qe={};return Object.keys(Ae).forEach(function(Ne){var Oe=Ae[Ne],We;if(typeof Oe=="number"||typeof Oe=="boolean")We=hi(function(){return Oe});else if(typeof Oe=="function"){var se=Oe._reglType;se==="texture2d"||se==="textureCube"?We=hi(function(Ce){return Ce.link(Oe)}):se==="framebuffer"||se==="framebufferCube"?(Ft.command(Oe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ne+'"',jt.commandStr),We=hi(function(Ce){return Ce.link(Oe.color[0])})):Ft.commandRaise('invalid data for uniform "'+Ne+'"',jt.commandStr)}else ta(Oe)?We=hi(function(Ce){var re=Ce.global.def("[",_n(Oe.length,function(Ye){return Ft.command(typeof Oe[Ye]=="number"||typeof Oe[Ye]=="boolean","invalid uniform "+Ne,Ce.commandStr),Oe[Ye]}),"]");return re}):Ft.commandRaise('invalid or missing data for uniform "'+Ne+'"',jt.commandStr);We.value=Oe,qe[Ne]=We}),Object.keys(He).forEach(function(Ne){var Oe=He[Ne];qe[Ne]=Ba(Oe,function(We,se){return We.invoke(se,Oe)})}),qe}function Xn(oe,jt){var Ae=oe.static,He=oe.dynamic,qe={};return Object.keys(Ae).forEach(function(Ne){var Oe=Ae[Ne],We=Jt.id(Ne),se=new K;if(Ef(Oe))se.state=Zo,se.buffer=Er.getBuffer(Er.create(Oe,cu,!1,!0)),se.type=0;else{var Ce=Er.getBuffer(Oe);if(Ce)se.state=Zo,se.buffer=Ce,se.type=0;else if(Ft.command(typeof Oe=="object"&&Oe,"invalid data for attribute "+Ne,jt.commandStr),"constant"in Oe){var re=Oe.constant;se.buffer="null",se.state=Es,typeof re=="number"?se.x=re:(Ft.command(ta(re)&&re.length>0&&re.length<=4,"invalid constant for attribute "+Ne,jt.commandStr),ou.forEach(function(En,Jn){Jn<re.length&&(se[En]=re[Jn])}))}else{Ef(Oe.buffer)?Ce=Er.getBuffer(Er.create(Oe.buffer,cu,!1,!0)):Ce=Er.getBuffer(Oe.buffer),Ft.command(!!Ce,'missing buffer for attribute "'+Ne+'"',jt.commandStr);var Ye=Oe.offset|0;Ft.command(Ye>=0,'invalid offset for attribute "'+Ne+'"',jt.commandStr);var er=Oe.stride|0;Ft.command(er>=0&&er<256,'invalid stride for attribute "'+Ne+'", must be integer betweeen [0, 255]',jt.commandStr);var mr=Oe.size|0;Ft.command(!("size"in Oe)||mr>0&&mr<=4,'invalid size for attribute "'+Ne+'", must be 1,2,3,4',jt.commandStr);var Ar=!!Oe.normalized,vr=0;"type"in Oe&&(Ft.commandParameter(Oe.type,xi,"invalid type for attribute "+Ne,jt.commandStr),vr=xi[Oe.type]);var Ur=Oe.divisor|0;"divisor"in Oe&&(Ft.command(Ur===0||ut,'cannot specify divisor for attribute "'+Ne+'", instancing not supported',jt.commandStr),Ft.command(Ur>=0,'invalid divisor for attribute "'+Ne+'"',jt.commandStr)),Ft.optional(function(){var En=jt.commandStr,Jn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Oe).forEach(function(hn){Ft.command(Jn.indexOf(hn)>=0,'unknown parameter "'+hn+'" for attribute pointer "'+Ne+'" (valid parameters are '+Jn+")",En)})}),se.buffer=Ce,se.state=Zo,se.size=mr,se.normalized=Ar,se.type=vr||Ce.dtype,se.offset=Ye,se.stride=er,se.divisor=Ur}}qe[Ne]=hi(function(En,Jn){var hn=En.attribCache;if(We in hn)return hn[We];var On={isStream:!1};return Object.keys(se).forEach(function(Hn){On[Hn]=se[Hn]}),se.buffer&&(On.buffer=En.link(se.buffer),On.type=On.type||On.buffer+".dtype"),hn[We]=On,On})}),Object.keys(He).forEach(function(Ne){var Oe=He[Ne];function We(se,Ce){var re=se.invoke(Ce,Oe),Ye=se.shared,er=se.constants,mr=Ye.isBufferArgs,Ar=Ye.buffer;Ft.optional(function(){se.assert(Ce,re+"&&(typeof "+re+'==="object"||typeof '+re+'==="function")&&('+mr+"("+re+")||"+Ar+".getBuffer("+re+")||"+Ar+".getBuffer("+re+".buffer)||"+mr+"("+re+'.buffer)||("constant" in '+re+"&&(typeof "+re+'.constant==="number"||'+Ye.isArrayLike+"("+re+".constant))))",'invalid dynamic attribute "'+Ne+'"')});var vr={isStream:Ce.def(!1)},Ur=new K;Ur.state=Zo,Object.keys(Ur).forEach(function(On){vr[On]=Ce.def(""+Ur[On])});var En=vr.buffer,Jn=vr.type;Ce("if(",mr,"(",re,")){",vr.isStream,"=true;",En,"=",Ar,".createStream(",cu,",",re,");",Jn,"=",En,".dtype;","}else{",En,"=",Ar,".getBuffer(",re,");","if(",En,"){",Jn,"=",En,".dtype;",'}else if("constant" in ',re,"){",vr.state,"=",Es,";","if(typeof "+re+'.constant === "number"){',vr[ou[0]],"=",re,".constant;",ou.slice(1).map(function(On){return vr[On]}).join("="),"=0;","}else{",ou.map(function(On,Hn){return vr[On]+"="+re+".constant.length>"+Hn+"?"+re+".constant["+Hn+"]:0;"}).join(""),"}}else{","if(",mr,"(",re,".buffer)){",En,"=",Ar,".createStream(",cu,",",re,".buffer);","}else{",En,"=",Ar,".getBuffer(",re,".buffer);","}",Jn,'="type" in ',re,"?",er.glTypes,"[",re,".type]:",En,".dtype;",vr.normalized,"=!!",re,".normalized;");function hn(On){Ce(vr[On],"=",re,".",On,"|0;")}return hn("size"),hn("offset"),hn("stride"),hn("divisor"),Ce("}}"),Ce.exit("if(",vr.isStream,"){",Ar,".destroyStream(",En,");","}"),vr}qe[Ne]=Ba(Oe,We)}),qe}function fi(oe,jt){var Ae=oe.static,He=oe.dynamic;if(Lu in Ae){var qe=Ae[Lu];return qe!==null&&Fr.getVAO(qe)===null&&(qe=Fr.createVAO(qe)),hi(function(Oe){return Oe.link(Fr.getVAO(qe))})}else if(Lu in He){var Ne=He[Lu];return Ba(Ne,function(Oe,We){var se=Oe.invoke(We,Ne);return We.def(Oe.shared.vao+".getVAO("+se+")")})}return null}function Fa(oe){var jt=oe.static,Ae=oe.dynamic,He={};return Object.keys(jt).forEach(function(qe){var Ne=jt[qe];He[qe]=hi(function(Oe,We){return typeof Ne=="number"||typeof Ne=="boolean"?""+Ne:Oe.link(Ne)})}),Object.keys(Ae).forEach(function(qe){var Ne=Ae[qe];He[qe]=Ba(Ne,function(Oe,We){return Oe.invoke(We,Ne)})}),He}function da(oe,jt,Ae,He,qe){var Ne=oe.static,Oe=oe.dynamic;Ft.optional(function(){var hn=[uu,ws,Ou,fu,zs,Zf,_s,$f,Iu,Lu].concat(Rt);function On(Hn){Object.keys(Hn).forEach(function(Ta){Ft.command(hn.indexOf(Ta)>=0,'unknown parameter "'+Ta+'"',qe.commandStr)})}On(Ne),On(Oe)});var We=dn(oe,jt),se=Xr(oe,qe),Ce=yn(oe,se,qe),re=Gn(oe,qe),Ye=Pn(oe,qe),er=An(oe,qe,We);function mr(hn){var On=Ce[hn];On&&(Ye[hn]=On)}mr(hs),mr(xe(Gs));var Ar=Object.keys(Ye).length>0,vr={framebuffer:se,draw:re,shader:er,state:Ye,dirty:Ar,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(vr.profile=Qr(oe,qe),vr.uniforms=Va(Ae,qe),vr.drawVAO=vr.scopeVAO=fi(oe,qe),!vr.drawVAO&&er.program&&!We&&Ee.angle_instanced_arrays){var Ur=!0,En=er.program.attributes.map(function(hn){var On=jt.static[hn];return Ur=Ur&&!!On,On});if(Ur&&En.length>0){var Jn=Fr.getVAO(Fr.createVAO(En));vr.drawVAO=new so(null,null,null,function(hn,On){return hn.link(Jn)}),vr.useVAO=!0}}return We?vr.useVAO=!0:vr.attributes=Xn(jt,qe),vr.context=Fa(He,qe),vr}function Ya(oe,jt,Ae){var He=oe.shared,qe=He.context,Ne=oe.scope();Object.keys(Ae).forEach(function(Oe){jt.save(qe,"."+Oe);var We=Ae[Oe],se=We.append(oe,jt);Array.isArray(se)?Ne(qe,".",Oe,"=[",se.join(),"];"):Ne(qe,".",Oe,"=",se,";")}),jt(Ne)}function ci(oe,jt,Ae,He){var qe=oe.shared,Ne=qe.gl,Oe=qe.framebuffer,We;vt&&(We=jt.def(qe.extensions,".webgl_draw_buffers"));var se=oe.constants,Ce=se.drawBuffer,re=se.backBuffer,Ye;Ae?Ye=Ae.append(oe,jt):Ye=jt.def(Oe,".next"),He||jt("if(",Ye,"!==",Oe,".cur){"),jt("if(",Ye,"){",Ne,".bindFramebuffer(",$c,",",Ye,".framebuffer);"),vt&&jt(We,".drawBuffersWEBGL(",Ce,"[",Ye,".colorAttachments.length]);"),jt("}else{",Ne,".bindFramebuffer(",$c,",null);"),vt&&jt(We,".drawBuffersWEBGL(",re,");"),jt("}",Oe,".cur=",Ye,";"),He||jt("}")}function Oi(oe,jt,Ae){var He=oe.shared,qe=He.gl,Ne=oe.current,Oe=oe.next,We=He.current,se=He.next,Ce=oe.cond(We,".dirty");Rt.forEach(function(re){var Ye=xe(re);if(!(Ye in Ae.state)){var er,mr;if(Ye in Oe){er=Oe[Ye],mr=Ne[Ye];var Ar=_n(yt[Ye].length,function(Ur){return Ce.def(er,"[",Ur,"]")});Ce(oe.cond(Ar.map(function(Ur,En){return Ur+"!=="+mr+"["+En+"]"}).join("||")).then(qe,".",Vt[Ye],"(",Ar,");",Ar.map(function(Ur,En){return mr+"["+En+"]="+Ur}).join(";"),";"))}else{er=Ce.def(se,".",Ye);var vr=oe.cond(er,"!==",We,".",Ye);Ce(vr),Ye in Qt?vr(oe.cond(er).then(qe,".enable(",Qt[Ye],");").else(qe,".disable(",Qt[Ye],");"),We,".",Ye,"=",er,";"):vr(qe,".",Vt[Ye],"(",er,");",We,".",Ye,"=",er,";")}}}),Object.keys(Ae.state).length===0&&Ce(We,".dirty=false;"),jt(Ce)}function Hi(oe,jt,Ae,He){var qe=oe.shared,Ne=oe.current,Oe=qe.current,We=qe.gl;rs(Object.keys(Ae)).forEach(function(se){var Ce=Ae[se];if(!(He&&!He(Ce))){var re=Ce.append(oe,jt);if(Qt[se]){var Ye=Qt[se];Cs(Ce)?re?jt(We,".enable(",Ye,");"):jt(We,".disable(",Ye,");"):jt(oe.cond(re).then(We,".enable(",Ye,");").else(We,".disable(",Ye,");")),jt(Oe,".",se,"=",re,";")}else if(ta(re)){var er=Ne[se];jt(We,".",Vt[se],"(",re,");",re.map(function(mr,Ar){return er+"["+Ar+"]="+mr}).join(";"),";")}else jt(We,".",Vt[se],"(",re,");",Oe,".",se,"=",re,";")}})}function Si(oe,jt){ut&&(oe.instancing=jt.def(oe.shared.extensions,".angle_instanced_arrays"))}function Qn(oe,jt,Ae,He,qe){var Ne=oe.shared,Oe=oe.stats,We=Ne.current,se=Ne.timer,Ce=Ae.profile;function re(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Ye,er;function mr(hn){Ye=jt.def(),hn(Ye,"=",re(),";"),typeof qe=="string"?hn(Oe,".count+=",qe,";"):hn(Oe,".count++;"),A&&(He?(er=jt.def(),hn(er,"=",se,".getNumPendingQueries();")):hn(se,".beginQuery(",Oe,");"))}function Ar(hn){hn(Oe,".cpuTime+=",re(),"-",Ye,";"),A&&(He?hn(se,".pushScopeStats(",er,",",se,".getNumPendingQueries(),",Oe,");"):hn(se,".endQuery();"))}function vr(hn){var On=jt.def(We,".profile");jt(We,".profile=",hn,";"),jt.exit(We,".profile=",On,";")}var Ur;if(Ce){if(Cs(Ce)){Ce.enable?(mr(jt),Ar(jt.exit),vr("true")):vr("false");return}Ur=Ce.append(oe,jt),vr(Ur)}else Ur=jt.def(We,".profile");var En=oe.block();mr(En),jt("if(",Ur,"){",En,"}");var Jn=oe.block();Ar(Jn),jt.exit("if(",Ur,"){",Jn,"}")}function Ji(oe,jt,Ae,He,qe){var Ne=oe.shared;function Oe(se){switch(se){case nc:case Pu:case oc:return 2;case ac:case ku:case yf:return 3;case gf:case pf:case sc:return 4;default:return 1}}function We(se,Ce,re){var Ye=Ne.gl,er=jt.def(se,".location"),mr=jt.def(Ne.attributes,"[",er,"]"),Ar=re.state,vr=re.buffer,Ur=[re.x,re.y,re.z,re.w],En=["buffer","normalized","offset","stride"];function Jn(){jt("if(!",mr,".buffer){",Ye,".enableVertexAttribArray(",er,");}");var On=re.type,Hn;if(re.size?Hn=jt.def(re.size,"||",Ce):Hn=Ce,jt("if(",mr,".type!==",On,"||",mr,".size!==",Hn,"||",En.map(function(ri){return mr+"."+ri+"!=="+re[ri]}).join("||"),"){",Ye,".bindBuffer(",cu,",",vr,".buffer);",Ye,".vertexAttribPointer(",[er,Hn,On,re.normalized,re.stride,re.offset],");",mr,".type=",On,";",mr,".size=",Hn,";",En.map(function(ri){return mr+"."+ri+"="+re[ri]+";"}).join(""),"}"),ut){var Ta=re.divisor;jt("if(",mr,".divisor!==",Ta,"){",oe.instancing,".vertexAttribDivisorANGLE(",[er,Ta],");",mr,".divisor=",Ta,";}")}}function hn(){jt("if(",mr,".buffer){",Ye,".disableVertexAttribArray(",er,");",mr,".buffer=null;","}if(",ou.map(function(On,Hn){return mr+"."+On+"!=="+Ur[Hn]}).join("||"),"){",Ye,".vertexAttrib4f(",er,",",Ur,");",ou.map(function(On,Hn){return mr+"."+On+"="+Ur[Hn]+";"}).join(""),"}")}Ar===Zo?Jn():Ar===Es?hn():(jt("if(",Ar,"===",Zo,"){"),Jn(),jt("}else{"),hn(),jt("}"))}He.forEach(function(se){var Ce=se.name,re=Ae.attributes[Ce],Ye;if(re){if(!qe(re))return;Ye=re.append(oe,jt)}else{if(!qe(du))return;var er=oe.scopeAttrib(Ce);Ft.optional(function(){oe.assert(jt,er+".state","missing attribute "+Ce)}),Ye={},Object.keys(new K).forEach(function(mr){Ye[mr]=jt.def(er,".",mr)})}We(oe.link(se),Oe(se.info.type),Ye)})}function wa(oe,jt,Ae,He,qe){for(var Ne=oe.shared,Oe=Ne.gl,We,se=0;se<He.length;++se){var Ce=He[se],re=Ce.name,Ye=Ce.info.type,er=Ae.uniforms[re],mr=oe.link(Ce),Ar=mr+".location",vr;if(er){if(!qe(er))continue;if(Cs(er)){var Ur=er.value;if(Ft.command(Ur!==null&&typeof Ur!="undefined",'missing uniform "'+re+'"',oe.commandStr),Ye===Bu||Ye===Fu){Ft.command(typeof Ur=="function"&&(Ye===Bu&&(Ur._reglType==="texture2d"||Ur._reglType==="framebuffer")||Ye===Fu&&(Ur._reglType==="textureCube"||Ur._reglType==="framebufferCube")),"invalid texture for uniform "+re,oe.commandStr);var En=oe.link(Ur._texture||Ur.color[0]._texture);jt(Oe,".uniform1i(",Ar,",",En+".bind());"),jt.exit(En,".unbind();")}else if(Ye===uc||Ye===mf||Ye===Ru){Ft.optional(function(){Ft.command(ta(Ur),"invalid matrix for uniform "+re,oe.commandStr),Ft.command(Ye===uc&&Ur.length===4||Ye===mf&&Ur.length===9||Ye===Ru&&Ur.length===16,"invalid length for matrix uniform "+re,oe.commandStr)});var Jn=oe.global.def("new Float32Array(["+Array.prototype.slice.call(Ur)+"])"),hn=2;Ye===mf?hn=3:Ye===Ru&&(hn=4),jt(Oe,".uniformMatrix",hn,"fv(",Ar,",false,",Jn,");")}else{switch(Ye){case lu:Ft.commandType(Ur,"number","uniform "+re,oe.commandStr),We="1f";break;case nc:Ft.command(ta(Ur)&&Ur.length===2,"uniform "+re,oe.commandStr),We="2f";break;case ac:Ft.command(ta(Ur)&&Ur.length===3,"uniform "+re,oe.commandStr),We="3f";break;case gf:Ft.command(ta(Ur)&&Ur.length===4,"uniform "+re,oe.commandStr),We="4f";break;case ic:Ft.commandType(Ur,"boolean","uniform "+re,oe.commandStr),We="1i";break;case Us:Ft.commandType(Ur,"number","uniform "+re,oe.commandStr),We="1i";break;case oc:Ft.command(ta(Ur)&&Ur.length===2,"uniform "+re,oe.commandStr),We="2i";break;case Pu:Ft.command(ta(Ur)&&Ur.length===2,"uniform "+re,oe.commandStr),We="2i";break;case yf:Ft.command(ta(Ur)&&Ur.length===3,"uniform "+re,oe.commandStr),We="3i";break;case ku:Ft.command(ta(Ur)&&Ur.length===3,"uniform "+re,oe.commandStr),We="3i";break;case sc:Ft.command(ta(Ur)&&Ur.length===4,"uniform "+re,oe.commandStr),We="4i";break;case pf:Ft.command(ta(Ur)&&Ur.length===4,"uniform "+re,oe.commandStr),We="4i";break}jt(Oe,".uniform",We,"(",Ar,",",ta(Ur)?Array.prototype.slice.call(Ur):Ur,");")}continue}else vr=er.append(oe,jt)}else{if(!qe(du))continue;vr=jt.def(Ne.uniforms,"[",Jt.id(re),"]")}Ye===Bu?(Ft(!Array.isArray(vr),"must specify a scalar prop for textures"),jt("if(",vr,"&&",vr,'._reglType==="framebuffer"){',vr,"=",vr,".color[0];","}")):Ye===Fu&&(Ft(!Array.isArray(vr),"must specify a scalar prop for cube maps"),jt("if(",vr,"&&",vr,'._reglType==="framebufferCube"){',vr,"=",vr,".color[0];","}")),Ft.optional(function(){function Bo(Ts,Jl){oe.assert(jt,Ts,'bad data or missing for uniform "'+re+'".  '+Jl)}function _h(Ts){Ft(!Array.isArray(vr),"must not specify an array type for uniform"),Bo("typeof "+vr+'==="'+Ts+'"',"invalid type, expected "+Ts)}function ds(Ts,Jl){Array.isArray(vr)?Ft(vr.length===Ts,"must have length "+Ts):Bo(Ne.isArrayLike+"("+vr+")&&"+vr+".length==="+Ts,"invalid vector, should have length "+Ts,oe.commandStr)}function Od(Ts){Ft(!Array.isArray(vr),"must not specify a value type"),Bo("typeof "+vr+'==="function"&&'+vr+'._reglType==="texture'+(Ts===Rl?"2d":"Cube")+'"',"invalid texture type",oe.commandStr)}switch(Ye){case Us:_h("number");break;case Pu:ds(2,"number");break;case ku:ds(3,"number");break;case pf:ds(4,"number");break;case lu:_h("number");break;case nc:ds(2,"number");break;case ac:ds(3,"number");break;case gf:ds(4,"number");break;case ic:_h("boolean");break;case oc:ds(2,"boolean");break;case yf:ds(3,"boolean");break;case sc:ds(4,"boolean");break;case uc:ds(4,"number");break;case mf:ds(9,"number");break;case Ru:ds(16,"number");break;case Bu:Od(Rl);break;case Fu:Od(Bl);break}});var On=1;switch(Ye){case Bu:case Fu:var Hn=jt.def(vr,"._texture");jt(Oe,".uniform1i(",Ar,",",Hn,".bind());"),jt.exit(Hn,".unbind();");continue;case Us:case ic:We="1i";break;case Pu:case oc:We="2i",On=2;break;case ku:case yf:We="3i",On=3;break;case pf:case sc:We="4i",On=4;break;case lu:We="1f";break;case nc:We="2f",On=2;break;case ac:We="3f",On=3;break;case gf:We="4f",On=4;break;case uc:We="Matrix2fv";break;case mf:We="Matrix3fv";break;case Ru:We="Matrix4fv";break}if(jt(Oe,".uniform",We,"(",Ar,","),We.charAt(0)==="M"){var Ta=Math.pow(Ye-uc+2,2),ri=oe.global.def("new Float32Array(",Ta,")");Array.isArray(vr)?jt("false,(",_n(Ta,function(Bo){return ri+"["+Bo+"]="+vr[Bo]}),",",ri,")"):jt("false,(Array.isArray(",vr,")||",vr," instanceof Float32Array)?",vr,":(",_n(Ta,function(Bo){return ri+"["+Bo+"]="+vr+"["+Bo+"]"}),",",ri,")")}else On>1?jt(_n(On,function(Bo){return Array.isArray(vr)?vr[Bo]:vr+"["+Bo+"]"})):(Ft(!Array.isArray(vr),"uniform value must not be an array"),jt(vr));jt(");")}}function Cn(oe,jt,Ae,He){var qe=oe.shared,Ne=qe.gl,Oe=qe.draw,We=He.draw;function se(){var Hn=We.elements,Ta,ri=jt;return Hn?((Hn.contextDep&&He.contextDynamic||Hn.propDep)&&(ri=Ae),Ta=Hn.append(oe,ri)):Ta=ri.def(Oe,".",fu),Ta&&ri("if("+Ta+")"+Ne+".bindBuffer("+Kc+","+Ta+".buffer.buffer);"),Ta}function Ce(){var Hn=We.count,Ta,ri=jt;return Hn?((Hn.contextDep&&He.contextDynamic||Hn.propDep)&&(ri=Ae),Ta=Hn.append(oe,ri),Ft.optional(function(){Hn.MISSING&&oe.assert(jt,"false","missing vertex count"),Hn.DYNAMIC&&oe.assert(ri,Ta+">=0","missing vertex count")})):(Ta=ri.def(Oe,".",_s),Ft.optional(function(){oe.assert(ri,Ta+">=0","missing vertex count")})),Ta}var re=se();function Ye(Hn){var Ta=We[Hn];return Ta?Ta.contextDep&&He.contextDynamic||Ta.propDep?Ta.append(oe,Ae):Ta.append(oe,jt):jt.def(Oe,".",Hn)}var er=Ye(zs),mr=Ye(Zf),Ar=Ce();if(typeof Ar=="number"){if(Ar===0)return}else Ae("if(",Ar,"){"),Ae.exit("}");var vr,Ur;ut&&(vr=Ye($f),Ur=oe.instancing);var En=re+".type",Jn=We.elements&&Cs(We.elements);function hn(){function Hn(){Ae(Ur,".drawElementsInstancedANGLE(",[er,Ar,En,mr+"<<(("+En+"-"+sf+")>>1)",vr],");")}function Ta(){Ae(Ur,".drawArraysInstancedANGLE(",[er,mr,Ar,vr],");")}re?Jn?Hn():(Ae("if(",re,"){"),Hn(),Ae("}else{"),Ta(),Ae("}")):Ta()}function On(){function Hn(){Ae(Ne+".drawElements("+[er,Ar,En,mr+"<<(("+En+"-"+sf+")>>1)"]+");")}function Ta(){Ae(Ne+".drawArrays("+[er,mr,Ar]+");")}re?Jn?Hn():(Ae("if(",re,"){"),Hn(),Ae("}else{"),Ta(),Ae("}")):Ta()}ut&&(typeof vr!="number"||vr>=0)?typeof vr=="string"?(Ae("if(",vr,">0){"),hn(),Ae("}else if(",vr,"<0){"),On(),Ae("}")):hn():On()}function fa(oe,jt,Ae,He,qe){var Ne=Br(),Oe=Ne.proc("body",qe);return Ft.optional(function(){Ne.commandStr=jt.commandStr,Ne.command=Ne.link(jt.commandStr)}),ut&&(Ne.instancing=Oe.def(Ne.shared.extensions,".angle_instanced_arrays")),oe(Ne,Oe,Ae,He),Ne.compile().body}function xa(oe,jt,Ae,He){Si(oe,jt),Ae.useVAO?Ae.drawVAO?jt(oe.shared.vao,".setVAO(",Ae.drawVAO.append(oe,jt),");"):jt(oe.shared.vao,".setVAO(",oe.shared.vao,".targetVAO);"):(jt(oe.shared.vao,".setVAO(null);"),Ji(oe,jt,Ae,He.attributes,function(){return!0})),wa(oe,jt,Ae,He.uniforms,function(){return!0}),Cn(oe,jt,jt,Ae)}function Mi(oe,jt){var Ae=oe.proc("draw",1);Si(oe,Ae),Ya(oe,Ae,jt.context),ci(oe,Ae,jt.framebuffer),Oi(oe,Ae,jt),Hi(oe,Ae,jt.state),Qn(oe,Ae,jt,!1,!0);var He=jt.shader.progVar.append(oe,Ae);if(Ae(oe.shared.gl,".useProgram(",He,".program);"),jt.shader.program)xa(oe,Ae,jt,jt.shader.program);else{Ae(oe.shared.vao,".setVAO(null);");var qe=oe.global.def("{}"),Ne=Ae.def(He,".id"),Oe=Ae.def(qe,"[",Ne,"]");Ae(oe.cond(Oe).then(Oe,".call(this,a0);").else(Oe,"=",qe,"[",Ne,"]=",oe.link(function(We){return fa(xa,oe,jt,We,1)}),"(",He,");",Oe,".call(this,a0);"))}Object.keys(jt.state).length>0&&Ae(oe.shared.current,".dirty=true;")}function Ys(oe,jt,Ae,He){oe.batchId="a1",Si(oe,jt);function qe(){return!0}Ji(oe,jt,Ae,He.attributes,qe),wa(oe,jt,Ae,He.uniforms,qe),Cn(oe,jt,jt,Ae)}function dc(oe,jt,Ae,He){Si(oe,jt);var qe=Ae.contextDep,Ne=jt.def(),Oe="a0",We="a1",se=jt.def();oe.shared.props=se,oe.batchId=Ne;var Ce=oe.scope(),re=oe.scope();jt(Ce.entry,"for(",Ne,"=0;",Ne,"<",We,";++",Ne,"){",se,"=",Oe,"[",Ne,"];",re,"}",Ce.exit);function Ye(En){return En.contextDep&&qe||En.propDep}function er(En){return!Ye(En)}if(Ae.needsContext&&Ya(oe,re,Ae.context),Ae.needsFramebuffer&&ci(oe,re,Ae.framebuffer),Hi(oe,re,Ae.state,Ye),Ae.profile&&Ye(Ae.profile)&&Qn(oe,re,Ae,!1,!0),He)Ae.useVAO?Ae.drawVAO?Ye(Ae.drawVAO)?re(oe.shared.vao,".setVAO(",Ae.drawVAO.append(oe,re),");"):Ce(oe.shared.vao,".setVAO(",Ae.drawVAO.append(oe,Ce),");"):Ce(oe.shared.vao,".setVAO(",oe.shared.vao,".targetVAO);"):(Ce(oe.shared.vao,".setVAO(null);"),Ji(oe,Ce,Ae,He.attributes,er),Ji(oe,re,Ae,He.attributes,Ye)),wa(oe,Ce,Ae,He.uniforms,er),wa(oe,re,Ae,He.uniforms,Ye),Cn(oe,Ce,re,Ae);else{var mr=oe.global.def("{}"),Ar=Ae.shader.progVar.append(oe,re),vr=re.def(Ar,".id"),Ur=re.def(mr,"[",vr,"]");re(oe.shared.gl,".useProgram(",Ar,".program);","if(!",Ur,"){",Ur,"=",mr,"[",vr,"]=",oe.link(function(En){return fa(Ys,oe,Ae,En,2)}),"(",Ar,");}",Ur,".call(this,a0[",Ne,"],",Ne,");")}}function me(oe,jt){var Ae=oe.proc("batch",2);oe.batchId="0",Si(oe,Ae);var He=!1,qe=!0;Object.keys(jt.context).forEach(function(mr){He=He||jt.context[mr].propDep}),He||(Ya(oe,Ae,jt.context),qe=!1);var Ne=jt.framebuffer,Oe=!1;Ne?(Ne.propDep?He=Oe=!0:Ne.contextDep&&He&&(Oe=!0),Oe||ci(oe,Ae,Ne)):ci(oe,Ae,null),jt.state.viewport&&jt.state.viewport.propDep&&(He=!0);function We(mr){return mr.contextDep&&He||mr.propDep}Oi(oe,Ae,jt),Hi(oe,Ae,jt.state,function(mr){return!We(mr)}),(!jt.profile||!We(jt.profile))&&Qn(oe,Ae,jt,!1,"a1"),jt.contextDep=He,jt.needsContext=qe,jt.needsFramebuffer=Oe;var se=jt.shader.progVar;if(se.contextDep&&He||se.propDep)dc(oe,Ae,jt,null);else{var Ce=se.append(oe,Ae);if(Ae(oe.shared.gl,".useProgram(",Ce,".program);"),jt.shader.program)dc(oe,Ae,jt,jt.shader.program);else{Ae(oe.shared.vao,".setVAO(null);");var re=oe.global.def("{}"),Ye=Ae.def(Ce,".id"),er=Ae.def(re,"[",Ye,"]");Ae(oe.cond(er).then(er,".call(this,a0,a1);").else(er,"=",re,"[",Ye,"]=",oe.link(function(mr){return fa(dc,oe,jt,mr,2)}),"(",Ce,");",er,".call(this,a0,a1);"))}}Object.keys(jt.state).length>0&&Ae(oe.shared.current,".dirty=true;")}function or(oe,jt){var Ae=oe.proc("scope",3);oe.batchId="a2";var He=oe.shared,qe=He.current;Ya(oe,Ae,jt.context),jt.framebuffer&&jt.framebuffer.append(oe,Ae),rs(Object.keys(jt.state)).forEach(function(Oe){var We=jt.state[Oe],se=We.append(oe,Ae);ta(se)?se.forEach(function(Ce,re){Ae.set(oe.next[Oe],"["+re+"]",Ce)}):Ae.set(He.next,"."+Oe,se)}),Qn(oe,Ae,jt,!0,!0),[fu,Zf,_s,$f,zs].forEach(function(Oe){var We=jt.draw[Oe];We&&Ae.set(He.draw,"."+Oe,""+We.append(oe,Ae))}),Object.keys(jt.uniforms).forEach(function(Oe){var We=jt.uniforms[Oe].append(oe,Ae);Array.isArray(We)&&(We="["+We.join()+"]"),Ae.set(He.uniforms,"["+Jt.id(Oe)+"]",We)}),Object.keys(jt.attributes).forEach(function(Oe){var We=jt.attributes[Oe].append(oe,Ae),se=oe.scopeAttrib(Oe);Object.keys(new K).forEach(function(Ce){Ae.set(se,"."+Ce,We[Ce])})}),jt.scopeVAO&&Ae.set(He.vao,".targetVAO",jt.scopeVAO.append(oe,Ae));function Ne(Oe){var We=jt.shader[Oe];We&&Ae.set(He.shader,"."+Oe,We.append(oe,Ae))}Ne(ws),Ne(Ou),Object.keys(jt.state).length>0&&(Ae(qe,".dirty=true;"),Ae.exit(qe,".dirty=true;")),Ae("a1(",oe.shared.context,",a0,",oe.batchId,");")}function rr(oe){if(!(typeof oe!="object"||ta(oe))){for(var jt=Object.keys(oe),Ae=0;Ae<jt.length;++Ae)if(Tr.isDynamic(oe[jt[Ae]]))return!0;return!1}}function sn(oe,jt,Ae){var He=jt.static[Ae];if(!He||!rr(He))return;var qe=oe.global,Ne=Object.keys(He),Oe=!1,We=!1,se=!1,Ce=oe.global.def("{}");Ne.forEach(function(Ye){var er=He[Ye];if(Tr.isDynamic(er)){typeof er=="function"&&(er=He[Ye]=Tr.unbox(er));var mr=Ba(er,null);Oe=Oe||mr.thisDep,se=se||mr.propDep,We=We||mr.contextDep}else{switch(qe(Ce,".",Ye,"="),typeof er){case"number":qe(er);break;case"string":qe('"',er,'"');break;case"object":Array.isArray(er)&&qe("[",er.join(),"]");break;default:qe(oe.link(er));break}qe(";")}});function re(Ye,er){Ne.forEach(function(mr){var Ar=He[mr];if(Tr.isDynamic(Ar)){var vr=Ye.invoke(er,Ar);er(Ce,".",mr,"=",vr,";")}})}jt.dynamic[Ae]=new Tr.DynamicVariable(uf,{thisDep:Oe,contextDep:We,propDep:se,ref:Ce,append:re}),delete jt.static[Ae]}function oa(oe,jt,Ae,He,qe){var Ne=Br();Ne.stats=Ne.link(qe),Object.keys(jt.static).forEach(function(We){sn(Ne,jt,We)}),kl.forEach(function(We){sn(Ne,oe,We)});var Oe=da(oe,jt,Ae,He,Ne);return Mi(Ne,Oe),or(Ne,Oe),me(Ne,Oe),B(Ne.compile(),{destroy:function(){Oe.shader.program.destroy()}})}return{next:_t,current:yt,procs:function(){var oe=Br(),jt=oe.proc("poll"),Ae=oe.proc("refresh"),He=oe.block();jt(He),Ae(He);var qe=oe.shared,Ne=qe.gl,Oe=qe.next,We=qe.current;He(We,".dirty=false;"),ci(oe,jt),ci(oe,Ae,null,!0);var se;ut&&(se=oe.link(ut)),Ee.oes_vertex_array_object&&Ae(oe.link(Ee.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ce=0;Ce<ar.maxAttributes;++Ce){var re=Ae.def(qe.attributes,"[",Ce,"]"),Ye=oe.cond(re,".buffer");Ye.then(Ne,".enableVertexAttribArray(",Ce,");",Ne,".bindBuffer(",cu,",",re,".buffer.buffer);",Ne,".vertexAttribPointer(",Ce,",",re,".size,",re,".type,",re,".normalized,",re,".stride,",re,".offset);").else(Ne,".disableVertexAttribArray(",Ce,");",Ne,".vertexAttrib4f(",Ce,",",re,".x,",re,".y,",re,".z,",re,".w);",re,".buffer=null;"),Ae(Ye),ut&&Ae(se,".vertexAttribDivisorANGLE(",Ce,",",re,".divisor);")}return Ae(oe.shared.vao,".currentVAO=null;",oe.shared.vao,".setVAO(",oe.shared.vao,".targetVAO);"),Object.keys(Qt).forEach(function(er){var mr=Qt[er],Ar=He.def(Oe,".",er),vr=oe.block();vr("if(",Ar,"){",Ne,".enable(",mr,")}else{",Ne,".disable(",mr,")}",We,".",er,"=",Ar,";"),Ae(vr),jt("if(",Ar,"!==",We,".",er,"){",vr,"}")}),Object.keys(Vt).forEach(function(er){var mr=Vt[er],Ar=yt[er],vr,Ur,En=oe.block();if(En(Ne,".",mr,"("),ta(Ar)){var Jn=Ar.length;vr=oe.global.def(Oe,".",er),Ur=oe.global.def(We,".",er),En(_n(Jn,function(hn){return vr+"["+hn+"]"}),");",_n(Jn,function(hn){return Ur+"["+hn+"]="+vr+"["+hn+"];"}).join("")),jt("if(",_n(Jn,function(hn){return vr+"["+hn+"]!=="+Ur+"["+hn+"]"}).join("||"),"){",En,"}")}else vr=He.def(Oe,".",er),Ur=He.def(We,".",er),En(vr,");",We,".",er,"=",vr,";"),jt("if(",vr,"!==",Ur,"){",En,"}");Ae(En)}),oe.compile()}(),compile:oa}}function Eh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var cc=34918,ji=34919,$l=35007,Ql=function(gt,Jt){if(!Jt.ext_disjoint_timer_query)return null;var Ee=[];function ar(){return Ee.pop()||Jt.ext_disjoint_timer_query.createQueryEXT()}function Er(ut){Ee.push(ut)}var nr=[];function fr(ut){var vt=ar();Jt.ext_disjoint_timer_query.beginQueryEXT($l,vt),nr.push(vt),A(nr.length-1,nr.length,ut)}function Lr(){Jt.ext_disjoint_timer_query.endQueryEXT($l)}function kr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Fr=[];function Rr(){return Fr.pop()||new kr}function Wr(ut){Fr.push(ut)}var v=[];function A(ut,vt,yt){var _t=Rr();_t.startQueryIndex=ut,_t.endQueryIndex=vt,_t.sum=0,_t.stats=yt,v.push(_t)}var z=[],K=[];function it(){var ut,vt,yt=nr.length;if(yt!==0){K.length=Math.max(K.length,yt+1),z.length=Math.max(z.length,yt+1),z[0]=0,K[0]=0;var _t=0;for(ut=0,vt=0;vt<nr.length;++vt){var Rt=nr[vt];Jt.ext_disjoint_timer_query.getQueryObjectEXT(Rt,ji)?(_t+=Jt.ext_disjoint_timer_query.getQueryObjectEXT(Rt,cc),Er(Rt)):nr[ut++]=Rt,z[vt+1]=_t,K[vt+1]=ut}for(nr.length=ut,ut=0,vt=0;vt<v.length;++vt){var Qt=v[vt],Vt=Qt.startQueryIndex,xe=Qt.endQueryIndex;Qt.sum+=z[xe]-z[Vt];var ke=K[Vt],dr=K[xe];dr===ke?(Qt.stats.gpuTime+=Qt.sum/1e6,Wr(Qt)):(Qt.startQueryIndex=ke,Qt.endQueryIndex=dr,v[ut++]=Qt)}v.length=ut}}return{beginQuery:fr,endQuery:Lr,pushScopeStats:A,update:it,getNumPendingQueries:function(){return nr.length},clear:function(){Ee.push.apply(Ee,nr);for(var ut=0;ut<Ee.length;ut++)Jt.ext_disjoint_timer_query.deleteQueryEXT(Ee[ut]);nr.length=0,Ee.length=0},restore:function(){nr.length=0,Ee.length=0}}},wh=16384,Ws=256,ql=1024,qc=34962,lc="webglcontextlost",Uu="webglcontextrestored",Jc=1,Xs=2,tl=3;function hc(gt,Jt){for(var Ee=0;Ee<gt.length;++Ee)if(gt[Ee]===Jt)return Ee;return-1}function wf(gt){var Jt=zn(gt);if(!Jt)return null;var Ee=Jt.gl,ar=Ee.getContextAttributes(),Er=Ee.isContextLost(),nr=Un(Ee,Jt);if(!nr)return null;var fr=Tn(),Lr=Eh(),kr=nr.extensions,Fr=Ql(Ee,kr),Rr=vn(),Wr=Ee.drawingBufferWidth,v=Ee.drawingBufferHeight,A={tick:0,time:0,viewportWidth:Wr,viewportHeight:v,framebufferWidth:Wr,framebufferHeight:v,drawingBufferWidth:Wr,drawingBufferHeight:v,pixelRatio:Jt.pixelRatio},z={},K={elements:null,primitive:4,count:-1,offset:0,instances:-1},it=ho(Ee,kr),ut=ki(Ee,Lr,Jt,yt),vt=hh(Ee,kr,it,Lr,ut);function yt(Cn){return vt.destroyBuffer(Cn)}var _t=po(Ee,kr,ut,Lr),Rt=Tl(Ee,fr,Lr,Jt),Qt=gl(Ee,kr,it,function(){ke.procs.poll()},A,Lr,Jt),Vt=Bs(Ee,kr,it,Lr,Jt),xe=ch(Ee,kr,it,Qt,Vt,Lr),ke=zu(Ee,fr,kr,it,ut,_t,Qt,xe,z,vt,Rt,K,A,Fr,Jt),dr=Wf(Ee,xe,ke.procs.poll,A,ar,kr,it),Xe=ke.next,Ve=Ee.canvas,je=[],Br=[],Qr=[],Xr=[Jt.onDestroy],yn=null;function dn(){if(je.length===0){Fr&&Fr.update(),yn=null;return}yn=Jr.next(dn),Hi();for(var Cn=je.length-1;Cn>=0;--Cn){var fa=je[Cn];fa&&fa(A,null,0)}Ee.flush(),Fr&&Fr.update()}function An(){!yn&&je.length>0&&(yn=Jr.next(dn))}function Gn(){yn&&(Jr.cancel(dn),yn=null)}function Pn(Cn){Cn.preventDefault(),Er=!0,Gn(),Br.forEach(function(fa){fa()})}function Va(Cn){Ee.getError(),Er=!1,nr.restore(),Rt.restore(),ut.restore(),Qt.restore(),Vt.restore(),xe.restore(),vt.restore(),Fr&&Fr.restore(),ke.procs.refresh(),An(),Qr.forEach(function(fa){fa()})}Ve&&(Ve.addEventListener(lc,Pn,!1),Ve.addEventListener(Uu,Va,!1));function Xn(){je.length=0,Gn(),Ve&&(Ve.removeEventListener(lc,Pn),Ve.removeEventListener(Uu,Va)),Rt.clear(),xe.clear(),Vt.clear(),Qt.clear(),_t.clear(),ut.clear(),vt.clear(),Fr&&Fr.clear(),Xr.forEach(function(Cn){Cn()})}function fi(Cn){Ft(!!Cn,"invalid args to regl({...})"),Ft.type(Cn,"object","invalid args to regl({...})");function fa(qe){var Ne=B({},qe);delete Ne.uniforms,delete Ne.attributes,delete Ne.context,delete Ne.vao,"stencil"in Ne&&Ne.stencil.op&&(Ne.stencil.opBack=Ne.stencil.opFront=Ne.stencil.op,delete Ne.stencil.op);function Oe(We){if(We in Ne){var se=Ne[We];delete Ne[We],Object.keys(se).forEach(function(Ce){Ne[We+"."+Ce]=se[Ce]})}}return Oe("blend"),Oe("depth"),Oe("cull"),Oe("stencil"),Oe("polygonOffset"),Oe("scissor"),Oe("sample"),"vao"in qe&&(Ne.vao=qe.vao),Ne}function xa(qe,Ne){var Oe={},We={};return Object.keys(qe).forEach(function(se){var Ce=qe[se];if(Tr.isDynamic(Ce)){We[se]=Tr.unbox(Ce,se);return}else if(Ne&&Array.isArray(Ce)){for(var re=0;re<Ce.length;++re)if(Tr.isDynamic(Ce[re])){We[se]=Tr.unbox(Ce,se);return}}Oe[se]=Ce}),{dynamic:We,static:Oe}}var Mi=xa(Cn.context||{},!0),Ys=xa(Cn.uniforms||{},!0),dc=xa(Cn.attributes||{},!1),me=xa(fa(Cn),!1),or={gpuTime:0,cpuTime:0,count:0},rr=ke.compile(me,dc,Ys,Mi,or),sn=rr.draw,oa=rr.batch,oe=rr.scope,jt=[];function Ae(qe){for(;jt.length<qe;)jt.push(null);return jt}function He(qe,Ne){var Oe;if(Er&&Ft.raise("context lost"),typeof qe=="function")return oe.call(this,null,qe,0);if(typeof Ne=="function")if(typeof qe=="number")for(Oe=0;Oe<qe;++Oe)oe.call(this,null,Ne,Oe);else if(Array.isArray(qe))for(Oe=0;Oe<qe.length;++Oe)oe.call(this,qe[Oe],Ne,Oe);else return oe.call(this,qe,Ne,0);else if(typeof qe=="number"){if(qe>0)return oa.call(this,Ae(qe|0),qe|0)}else if(Array.isArray(qe)){if(qe.length)return oa.call(this,qe,qe.length)}else return sn.call(this,qe)}return B(He,{stats:or,destroy:function(){rr.destroy()}})}var Fa=xe.setFBO=fi({framebuffer:Tr.define.call(null,Jc,"framebuffer")});function da(Cn,fa){var xa=0;ke.procs.poll();var Mi=fa.color;Mi&&(Ee.clearColor(+Mi[0]||0,+Mi[1]||0,+Mi[2]||0,+Mi[3]||0),xa|=wh),"depth"in fa&&(Ee.clearDepth(+fa.depth),xa|=Ws),"stencil"in fa&&(Ee.clearStencil(fa.stencil|0),xa|=ql),Ft(!!xa,"called regl.clear with no buffer specified"),Ee.clear(xa)}function Ya(Cn){if(Ft(typeof Cn=="object"&&Cn,"regl.clear() takes an object as input"),"framebuffer"in Cn)if(Cn.framebuffer&&Cn.framebuffer_reglType==="framebufferCube")for(var fa=0;fa<6;++fa)Fa(B({framebuffer:Cn.framebuffer.faces[fa]},Cn),da);else Fa(Cn,da);else da(null,Cn)}function ci(Cn){Ft.type(Cn,"function","regl.frame() callback must be a function"),je.push(Cn);function fa(){var xa=hc(je,Cn);Ft(xa>=0,"cannot cancel a frame twice");function Mi(){var Ys=hc(je,Mi);je[Ys]=je[je.length-1],je.length-=1,je.length<=0&&Gn()}je[xa]=Mi}return An(),{cancel:fa}}function Oi(){var Cn=Xe.viewport,fa=Xe.scissor_box;Cn[0]=Cn[1]=fa[0]=fa[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=Cn[2]=fa[2]=Ee.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=Cn[3]=fa[3]=Ee.drawingBufferHeight}function Hi(){A.tick+=1,A.time=Qn(),Oi(),ke.procs.poll()}function Si(){Qt.refresh(),Oi(),ke.procs.refresh(),Fr&&Fr.update()}function Qn(){return(vn()-Rr)/1e3}Si();function Ji(Cn,fa){Ft.type(fa,"function","listener callback must be a function");var xa;switch(Cn){case"frame":return ci(fa);case"lost":xa=Br;break;case"restore":xa=Qr;break;case"destroy":xa=Xr;break;default:Ft.raise("invalid event, must be one of frame,lost,restore,destroy")}return xa.push(fa),{cancel:function(){for(var Mi=0;Mi<xa.length;++Mi)if(xa[Mi]===fa){xa[Mi]=xa[xa.length-1],xa.pop();return}}}}var wa=B(fi,{clear:Ya,prop:Tr.define.bind(null,Jc),context:Tr.define.bind(null,Xs),this:Tr.define.bind(null,tl),draw:fi({}),buffer:function(Cn){return ut.create(Cn,qc,!1,!1)},elements:function(Cn){return _t.create(Cn,!1)},texture:Qt.create2D,cube:Qt.createCube,renderbuffer:Vt.create,framebuffer:xe.create,framebufferCube:xe.createCube,vao:vt.createVAO,attributes:ar,frame:ci,on:Ji,limits:it,hasExtension:function(Cn){return it.extensions.indexOf(Cn.toLowerCase())>=0},read:dr,destroy:Xn,_gl:Ee,_refresh:Si,poll:function(){Hi(),Fr&&Fr.update()},now:Qn,stats:Lr});return Jt.onDone(null,wa),wa}return wf})},86851:function(Le,F,B){"use strict";var P=B(89594),W=Array.prototype.concat,R=Array.prototype.slice,L=Le.exports=function(N){for(var E=[],b=0,p=N.length;b<p;b++){var m=N[b];P(m)?E=W.call(E,R.call(m)):E.push(m)}return E};L.wrap=function(k){return function(){return k(L(arguments))}}},89594:function(Le){Le.exports=function(B){return!B||typeof B=="string"?!1:B instanceof Array||Array.isArray(B)||B.length>=0&&(B.splice instanceof Function||Object.getOwnPropertyDescriptor(B,B.length-1)&&B.constructor.name!=="String")}},66115:function(Le){function F(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}Le.exports=F,Le.exports.__esModule=!0,Le.exports.default=Le.exports},56690:function(Le){function F(B,P){if(!(B instanceof P))throw new TypeError("Cannot call a class as a function")}Le.exports=F,Le.exports.__esModule=!0,Le.exports.default=Le.exports},89728:function(Le,F,B){var P=B(64062);function W(L,k){for(var N=0;N<k.length;N++){var E=k[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(L,P(E.key),E)}}function R(L,k,N){return k&&W(L.prototype,k),N&&W(L,N),Object.defineProperty(L,"prototype",{writable:!1}),L}Le.exports=R,Le.exports.__esModule=!0,Le.exports.default=Le.exports},26389:function(Le,F,B){var P=B(73808),W=B(69617),R=B(94993);function L(k){var N=W();return function(){var b=P(k),p;if(N){var m=P(this).constructor;p=Reflect.construct(b,arguments,m)}else p=b.apply(this,arguments);return R(this,p)}}Le.exports=L,Le.exports.__esModule=!0,Le.exports.default=Le.exports},73808:function(Le){function F(B){return Le.exports=F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},Le.exports.__esModule=!0,Le.exports.default=Le.exports,F(B)}Le.exports=F,Le.exports.__esModule=!0,Le.exports.default=Le.exports},61655:function(Le,F,B){var P=B(6015);function W(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(L&&L.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),L&&P(R,L)}Le.exports=W,Le.exports.__esModule=!0,Le.exports.default=Le.exports},69617:function(Le){function F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(B){return!1}}Le.exports=F,Le.exports.__esModule=!0,Le.exports.default=Le.exports},94993:function(Le,F,B){var P=B(18698).default,W=B(66115);function R(L,k){if(k&&(P(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(L)}Le.exports=R,Le.exports.__esModule=!0,Le.exports.default=Le.exports},6015:function(Le){function F(B,P){return Le.exports=F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,L){return R.__proto__=L,R},Le.exports.__esModule=!0,Le.exports.default=Le.exports,F(B,P)}Le.exports=F,Le.exports.__esModule=!0,Le.exports.default=Le.exports},64687:function(Le,F,B){var P=B(17061)();Le.exports=P;try{regeneratorRuntime=P}catch(W){typeof globalThis=="object"?globalThis.regeneratorRuntime=P:Function("r","regeneratorRuntime = r")(P)}}}]);
