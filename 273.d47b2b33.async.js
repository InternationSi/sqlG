"use strict";(self.webpackChunksqlG=self.webpackChunksqlG||[]).push([[273,608,261],{37626:function(U,S,e){e.r(S),e.d(S,{default:function(){return M}});var m=e(67294),z=e(27424),K=e.n(z),E=e(7064),L=function(){E.kJ.registerNode("activity",{inherit:"rect",markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"img"},{tagName:"text",selector:"label"}],attrs:{body:{rx:6,ry:6,stroke:"#5F95FF",fill:"#EFF4FF",strokeWidth:1},img:{x:6,y:6,width:16,height:16,"xlink:href":"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pwLpRr7QPGwAAAAAAAAAAAAAARQnAQ"},label:{fontSize:12,fill:"#262626"}}},!0),E.kJ.registerNode("gateway",{inherit:"polygon",attrs:{body:{refPoints:"0,10 10,0 20,10 10,20",strokeWidth:2,stroke:"#5F95FF",fill:"#EFF4FF"},label:{text:"+",fontSize:40,fill:"#5F95FF"}}},!0),E.kJ.registerEdge("bpmn-edge",{inherit:"edge",attrs:{line:{stroke:"#A2B1C3",strokeWidth:2}}},!0)},V=m.createContext({}),j="box-tool",N=function(t){var n=t.getNodes();n.forEach(function(a){a.removeTools()})},R=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t.addTools({name:j,args:{graph:n}})},o=e(42122),A=e.n(o),F=e(56690),k=e.n(F),D=e(89728),B=e.n(D),W=e(66115),Z=e.n(W),X=e(61655),Y=e.n(X),b=e(26389),w=e.n(b),q=e(38416),_=e.n(q),ee=e(73935),ne=e(40818),c=e(85893);function te(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("svg",{t:"1683297815393",className:"icon",viewBox:"0 0 1026 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3382",width:"20",height:"20",children:(0,c.jsx)("path",{d:"M507.904 18.432c-180.224 0-353.28 115.712-421.888 282.624-71.68 164.864-34.816 370.688 91.136 498.688C299.008 930.816 498.688 978.944 665.6 917.504c173.056-59.392 301.056-229.376 308.224-412.672 12.288-180.224-94.208-359.424-256-438.272-63.488-31.744-135.168-48.128-205.824-48.128h-4.096z m12.288 50.176c177.152 1.024 343.04 129.024 389.12 300.032 48.128 162.816-17.408 352.256-158.72 449.536C604.16 925.696 388.096 917.504 249.856 799.744 110.592 688.128 60.416 483.328 132.096 320.512c61.44-150.528 217.088-253.952 379.904-251.904h8.192z",fill:"#000000","p-id":"3383"})})})}var ae=te;function re(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("svg",{t:"1683297852370",className:"icon",viewBox:"0 0 1026 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3519",width:"20",height:"20",children:(0,c.jsx)("path",{d:"M220.16 106.496c-87.04 0-157.696 70.656-157.696 157.696v434.176c0 87.04 70.656 157.696 157.696 157.696h583.68c87.04 0 157.696-70.656 157.696-157.696v-434.176c0-87.04-70.656-157.696-157.696-157.696H220.16z m0 49.152h583.68c60.416 0 108.544 48.128 108.544 108.544v434.176c0 60.416-48.128 108.544-108.544 108.544H220.16c-60.416 0-107.52-48.128-107.52-108.544v-434.176c0-60.416 47.104-108.544 107.52-108.544z",fill:"#000000","p-id":"3520"})})})}var d=re,i=(0,ne.QM)({"tool-box":{width:function(t){return t.width+20+"px"},height:function(t){return t.height+20+"px"},border:"1px solid",borderRadius:"5px"},list:{},"tool-render":{display:"flex"}}),u=function(t){var n=t.graph,a=i(t.rectangle),r=function(x){console.log("type: ",x)};return(0,c.jsxs)("div",{className:a["tool-render"],children:[(0,c.jsx)("div",{className:a["tool-box"]}),(0,c.jsxs)("div",{className:a.list,onClick:function(){N(n)},children:[(0,c.jsx)("span",{onClick:function(){return r("event")},children:(0,c.jsx)(ae,{})}),(0,c.jsx)("span",{onClick:function(){return r("event")},children:(0,c.jsx)(d,{})})]})]})},C=function(s){Y()(n,s);var t=w()(n);function n(){var a;k()(this,n);for(var r=arguments.length,l=new Array(r),x=0;x<r;x++)l[x]=arguments[x];return a=t.call.apply(t,[this].concat(l)),_()(Z()(a),"knob",void 0),a}return B()(n,[{key:"render",value:function(){var r;this.knob||(this.knob=E.BM.createElement("div",!1),this.knob.style.position="absolute",this.container.appendChild(this.knob));var l=this.cellView.getBBox();return l.x-=10,l.y-=10,ee.render((0,c.jsx)("div",{children:(0,c.jsx)(u,{rectangle:l,graph:(r=this.options)===null||r===void 0?void 0:r.graph})}),this.knob),this.updatePosition(A()({},l)),this}},{key:"updatePosition",value:function(r){var l=this.knob.style;l.left="".concat(r.x,"px"),l.top="".concat(r.y,"px")}}]),n}(E.BM.ToolItem);C.config({tagName:"div",isSVGElement:!1});var v=e(33230),p=function(){E.kJ.registerNode("event",{width:40,height:40,inherit:"circle",attrs:{body:{strokeWidth:2,stroke:"#000",fill:"#FFF"}}},!0)},T=function(){p()},y=function(){var t=(0,m.useState)(),n=K()(t,2),a=n[0],r=n[1],l=(0,m.useRef)();return(0,m.useEffect)(function(){E.kJ.registerNodeTool(j,C,!0),T(),L();var x=new E.kJ({container:l.current,width:800,height:400,connecting:{router:"orth"},interacting:{}});return x.use(new v.H({enabled:!0})),r(x),function(){x.dispose()}},[]),P({graph:a}),g({graph:a}),{graph:a,container:l}},h=e(96486),f=e.n(h),O=function(t,n){(0,m.useEffect)(function(){t&&(n==null||n())},[t])},P=function(t){var n=t.graph;O(n,function(){var a=[],r=!1;n.on("node:move",function(l){var x=l.e,I=l.x,H=l.y,G=l.node,ie=l.view;r=G.hasTool(j),N(n);var se=n.getConnectedEdges(G);a=se,n.removeConnectedEdges(G);var $=G.clone();$.id="oldMoving",n.addNode($);var de=se.map(function(ue){var Q=ue.clone(),oe=Q.getSource(),le=Q.getTarget();if((oe==null?void 0:oe.cell)===G.id)Q.setSource($);else if((le==null?void 0:le.cell)===G.id)Q.setTarget($);else return;return Q});n.addEdges(f().compact(de))}),n.on("node:moved",function(l){var x=l.e,I=l.x,H=l.y,G=l.node,ie=l.view;r&&(R(G,n),r=!1),n.addEdges(a),a=[],n.removeConnectedEdges("oldMoving"),n.removeNode("oldMoving")})})},g=function(t){var n=t.graph;O(n,function(){n.on("cell:click",function(a){var r=a.cell;N(n),r.isNode()&&R(r,n)}),n.on("blank:click",function(a){var r=a.e;N(n)})})},J=function(t){var n=t.data;console.log("data: ",n);var a=y(),r=a.graph,l=a.container;return(0,m.useEffect)(function(){var x,I;if(r){var H=[];(x=n.edges)===null||x===void 0||x.forEach(function(G){H.push(r.createEdge(G))}),(I=n.nodes)===null||I===void 0||I.forEach(function(G){H.push(r.createNode(G))}),r.resetCells(H)}},[r,n]),(0,c.jsx)(V.Provider,{value:{graph:r},children:(0,c.jsx)("div",{ref:l})})},M=J},95608:function(U,S,e){e.r(S),e.d(S,{default:function(){return R}});var m=e(67294),z=e(27424),K=e.n(z),E=e(70701),L=function(){var A=(0,m.useState)(),F=K()(A,2),k=F[0],D=F[1],B=(0,m.useRef)();return(0,m.useEffect)(function(){var W=new E.ZP.Graph({container:B.current,width:800,height:400,defaultNode:{size:[300,400],type:"dice-er-box",color:"#5B8FF9",style:{fill:"#9EC9FF",lineWidth:3},labelCfg:{style:{fill:"black",fontSize:20}}},defaultEdge:{type:"dice-er-edge",style:{stroke:"#e2e2e2",lineWidth:4,endArrow:!0}},modes:{default:["dice-er-scroll","drag-node","drag-canvas"]},layout:{type:"dagre",rankdir:"LR",align:"UL",controlPoints:!0,nodesepFunc:function(){return .2},ranksepFunc:function(){return .5}},animate:!0});D(W)},[]),{graph:k,container:B}},V=m.createContext({}),j=e(85893);function N(){var o=L(),A=o.graph,F=o.container;return console.log("graph: ",A),(0,j.jsx)(V.Provider,{value:{graph:A},children:(0,j.jsx)("div",{ref:F})})}var R=N},44261:function(U,S,e){e.r(S),e.d(S,{default:function(){return R}});var m=e(67294),z=e(27424),K=e.n(z),E=e(70701),L=function(){var A=(0,m.useState)(),F=K()(A,2),k=F[0],D=F[1],B=(0,m.useRef)();return(0,m.useEffect)(function(){var W=new E.ZP.Graph({container:B.current,width:800,height:400,defaultNode:{size:[300,400],type:"dice-er-box",color:"#5B8FF9",style:{fill:"#9EC9FF",lineWidth:3},labelCfg:{style:{fill:"black",fontSize:20}}},defaultEdge:{type:"dice-er-edge",style:{stroke:"#e2e2e2",lineWidth:4,endArrow:!0}},modes:{default:["dice-er-scroll","drag-node","drag-canvas"]},layout:{type:"dagre",rankdir:"LR",align:"UL",controlPoints:!0,nodesepFunc:function(){return .2},ranksepFunc:function(){return .5}},animate:!0});D(W)},[]),{graph:k,container:B}},V=m.createContext({}),j=e(85893);function N(){var o=L(),A=o.graph,F=o.container;return console.log("graph: ",A),(0,j.jsx)(V.Provider,{value:{graph:A},children:(0,j.jsx)("div",{ref:F})})}var R=N},48273:function(U,S,e){e.r(S),e.d(S,{Bpmn:function(){return m.default},Condition:function(){return te},ER:function(){return ae.default},Process:function(){return re.default}});var m=e(37626),z=e(67294),K=e(27424),E=e.n(K),L=e(12902),V=e(42122),j=e.n(V),N=e(87459),R=e(76260),o=e(85893);function A(d){var i=d.data,u=d.pos,C=d.setElementTerm,v=d.onDeleteTerm,p=d.onTermChange,T=function(){typeof v=="function"&&v(u,i)},y=function(f){typeof p=="function"&&p(u,j()(j()({},i),f))};return typeof C!="function"?(console.error("setElementTerm \u5C5E\u6027\u5FC5\u987B\u8BBE\u7F6E\uFF0C\u4E14\u5FC5\u987B\u662F\u8FD4\u56DE ReactElement \u7684Function"),null):(0,o.jsxs)("div",{className:"vui-relation-item",children:[C(i,u,y),(0,o.jsx)(R.ZP,{onClick:T,className:"delete-term",children:"\u5220\u9664"})]})}var F=A,k="_",D="and";function B(d){var i=d.data,u=d.pos,C=d.setElementTerm,v=d.onAddGroup,p=d.onAddTerm,T=d.onOpsChange,y=d.onDeleteTerm,h=d.onTermChange,f=function(){var n=Z(u),a=i.children;return n.push(a.length-1),n.join(k)},O=function(n){typeof T=="function"&&T(u,j()(j()({},i),{},{ops:n}))},P=function(){var n={},a=f();typeof p=="function"&&p(a,n)},g=function(){var n={ops:D,children:[{}]},a=f();typeof v=="function"&&v(a,n)},J=i.children,M=i.ops,s=M||D;return(0,o.jsxs)("div",{className:"vui-relation-group",children:[(0,o.jsx)("div",{className:"relational",children:(0,o.jsx)(N.Z,{className:"relation-sign",value:s,onChange:O,options:[{label:"\u4E14",value:"and"},{label:"\u6216",value:"or"}]})}),(0,o.jsxs)("div",{className:"conditions",children:[J.map(function(t,n){var a=t.children,r=W(u,n);return a&&a.length?(0,o.jsx)(B,{pos:r,data:t,setElementTerm:C,onAddGroup:v,onAddTerm:p,onOpsChange:T,onDeleteTerm:y,onTermChange:h},r):(0,o.jsx)(F,{pos:r,data:t,setElementTerm:C,onDeleteTerm:y,onTermChange:h},r)}),(0,o.jsxs)("div",{className:"operators",children:[(0,o.jsx)(R.ZP,{className:"add-term",onClick:P,children:"\u52A0\u6761\u4EF6"}),(0,o.jsx)(R.ZP,{className:"add-group",onClick:g,children:"\u52A0\u6761\u4EF6\u7EC4"})]})]})]})}var W=function(i,u){return i?"".concat(i).concat(k).concat(u):String(u)},Z=function(i){return i&&i.split(k)||[]},X=B,Y={ops:D,children:[{}]};function b(d){var i=d.value,u=d.onChange,C=d.setElementTerm,v=(0,z.useState)(Y),p=E()(v,2),T=p[0],y=p[1];i&&(0,z.useEffect)(function(){y(i)},[i]);var h=function(s,t,n){var a=w(T,s,n,t);typeof u=="function"&&u(a,n,t),y(a)},f=function(s,t){h(s,t,"addGroup")},O=function(s,t){h(s,t,"addTerm")},P=function(s,t){h(s,t,"changeOps")},g=function(s,t){h(s,t,"deleteTerm")},J=function(s,t){h(s,t,"changeTerm")};return(0,o.jsx)("div",{className:"vui-relation-tree",children:(0,o.jsx)(X,{pos:"",data:T,setElementTerm:C,onAddGroup:f,onAddTerm:O,onOpsChange:P,onDeleteTerm:g,onTermChange:J})})}var w=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",C=arguments.length>2?arguments[2]:void 0,v=arguments.length>3?arguments[3]:void 0;if(!u)return v;var p=Z(u),T=p.length-1;return(0,L.ZP)(i,function(y){var h={data:y,idx:0},f=y.children||[];p.forEach(function(O,P){var g=Number(O);if(P===T)switch(C){case"addTerm":case"addGroup":f.splice(g+1,0,v);break;case"deleteTerm":f.splice(g,1),f.length||h.data.splice(h.idx,1);break;default:f[g]=v}else h={data:f,idx:g},f=f[g]&&f[g].children||[]})})},q=b,_=e(25409),ee=function(i){var u=i.data,C=i.onChange,v=function(g){typeof C=="function"&&C(g)},p=function(g){v({key:g})},T=function(g){v({op:g})},y=function(g){v({value:g.target.value})},h=u.key,f=u.op,O=u.value;return(0,o.jsxs)("div",{className:"term",children:[(0,o.jsx)("span",{className:"element",children:(0,o.jsx)(N.Z,{placeholder:"\u8BF7\u9009\u62E9\u6761\u4EF6\u9879",value:h,onChange:p,options:[{value:"Key1",label:"Key1"},{value:"Key2",label:"Key2"},{value:"Key3",label:"Key3"}]})}),(0,o.jsx)("span",{className:"comparison",children:(0,o.jsx)(N.Z,{placeholder:"\u8BF7\u9009\u62E9\u5173\u7CFB\u7B26",value:f,onChange:T,options:[{value:"==",label:"\u7B49\u4E8E"},{value:"!=",label:"\u4E0D\u7B49\u4E8E"},{value:">",label:"\u5927\u4E8E"},{value:">=",label:"\u5927\u4E8E\u7B49\u4E8E"},{value:"<",label:"\u5C0F\u4E8E"},{value:"<=",label:"\u5C0F\u4E8E\u7B49\u4E8E"}]})}),(0,o.jsx)("span",{className:"value",children:(0,o.jsx)(_.Z,{placeholder:"\u8BF7\u8F93\u5165\u6761\u4EF6\u503C",value:O,onChange:y})})]})},ne=ee,c=function(i){var u=i.items,C=u===void 0?[]:u,v=function(T,y,h){return(0,o.jsx)(ne,{data:T,onChange:h})};return(0,o.jsx)(q,{setElementTerm:v})},te=c,ae=e(95608),re=e(44261)}}]);
